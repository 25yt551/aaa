(()=>{var P5=Object.defineProperty,R5=Object.defineProperties,M5=Object.getOwnPropertyDescriptors,If=Object.getOwnPropertySymbols,C5=Object.prototype.hasOwnProperty,O5=Object.prototype.propertyIsEnumerable,Gf=(a,e,t)=>e in a?P5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Bf=(a,e)=>{for(var t in e||(e={}))C5.call(e,t)&&Gf(a,t,e[t]);if(If)for(var t of If(e))O5.call(e,t)&&Gf(a,t,e[t]);return a},I5=(a,e)=>R5(a,M5(e)),B=(a=>(a.Application="application",a.WebGLPipes="webgl-pipes",a.WebGLPipesAdaptor="webgl-pipes-adaptor",a.WebGLSystem="webgl-system",a.WebGPUPipes="webgpu-pipes",a.WebGPUPipesAdaptor="webgpu-pipes-adaptor",a.WebGPUSystem="webgpu-system",a.CanvasSystem="canvas-system",a.CanvasPipesAdaptor="canvas-pipes-adaptor",a.CanvasPipes="canvas-pipes",a.Asset="asset",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser",a.MaskEffect="mask-effect",a.BlendMode="blend-mode",a.TextureSource="texture-source",a.Environment="environment",a.ShapeBuilder="shape-builder",a.Batcher="batcher",a))(B||{}),Sd=a=>{if(typeof a=="function"||typeof a=="object"&&a.extension){let e=typeof a.extension!="object"?{type:a.extension}:a.extension;a=I5(Bf({},e),{ref:a})}if(typeof a=="object")a=Bf({},a);else throw new Error("Invalid extension type");return typeof a.type=="string"&&(a.type=[a.type]),a},hs=(a,e)=>{var t;return(t=Sd(a).priority)!=null?t:e},pe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...a){return a.map(Sd).forEach(e=>{e.type.forEach(t=>{var i,r;return(r=(i=this._removeHandlers)[t])==null?void 0:r.call(i,e)})}),this},add(...a){return a.map(Sd).forEach(e=>{e.type.forEach(t=>{var i,r;let s=this._addHandlers,o=this._queue;s[t]?(r=s[t])==null||r.call(s,e):(o[t]=o[t]||[],(i=o[t])==null||i.push(e))})}),this},handle(a,e,t){var i;let r=this._addHandlers,s=this._removeHandlers;r[a]=e,s[a]=t;let o=this._queue;return o[a]&&((i=o[a])==null||i.forEach(d=>e(d)),delete o[a]),this},handleByMap(a,e){return this.handle(a,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(a,e,t=-1){return this.handle(a,i=>{e.findIndex(r=>r.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((r,s)=>hs(s.value,t)-hs(r.value,t)))},i=>{let r=e.findIndex(s=>s.name===i.name);r!==-1&&e.splice(r,1)})},handleByList(a,e,t=-1){return this.handle(a,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>hs(s,t)-hs(r,t)))},i=>{let r=e.indexOf(i.ref);r!==-1&&e.splice(r,1)})}};function fl(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ul={exports:{}},aS=ul.exports;(function(a){"use strict";var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(h,l,u){this.fn=h,this.context=l,this.once=u||!1}function s(h,l,u,p,y){if(typeof u!="function")throw new TypeError("The listener must be a function");var _=new r(u,p||h,y),v=t?t+l:l;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],_]:h._events[v].push(_):(h._events[v]=_,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new i:delete h._events[l]}function d(){this._events=new i,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],l,u;if(this._eventsCount===0)return h;for(u in l=this._events)e.call(l,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},d.prototype.listeners=function(h){var l=t?t+h:h,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,y=u.length,_=new Array(y);p<y;p++)_[p]=u[p].fn;return _},d.prototype.listenerCount=function(h){var l=t?t+h:h,u=this._events[l];return u?u.fn?1:u.length:0},d.prototype.emit=function(h,l,u,p,y,_){var v=t?t+h:h;if(!this._events[v])return!1;var T=this._events[v],A=arguments.length,P,I;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),A){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,l),!0;case 3:return T.fn.call(T.context,l,u),!0;case 4:return T.fn.call(T.context,l,u,p),!0;case 5:return T.fn.call(T.context,l,u,p,y),!0;case 6:return T.fn.call(T.context,l,u,p,y,_),!0}for(I=1,P=new Array(A-1);I<A;I++)P[I-1]=arguments[I];T.fn.apply(T.context,P)}else{var F=T.length,D;for(I=0;I<F;I++)switch(T[I].once&&this.removeListener(h,T[I].fn,void 0,!0),A){case 1:T[I].fn.call(T[I].context);break;case 2:T[I].fn.call(T[I].context,l);break;case 3:T[I].fn.call(T[I].context,l,u);break;case 4:T[I].fn.call(T[I].context,l,u,p);break;default:if(!P)for(D=1,P=new Array(A-1);D<A;D++)P[D-1]=arguments[D];T[I].fn.apply(T[I].context,P)}}return!0},d.prototype.on=function(h,l,u){return s(this,h,l,u,!1)},d.prototype.once=function(h,l,u){return s(this,h,l,u,!0)},d.prototype.removeListener=function(h,l,u,p){var y=t?t+h:h;if(!this._events[y])return this;if(!l)return o(this,y),this;var _=this._events[y];if(_.fn)_.fn===l&&(!p||_.once)&&(!u||_.context===u)&&o(this,y);else{for(var v=0,T=[],A=_.length;v<A;v++)(_[v].fn!==l||p&&!_[v].once||u&&_[v].context!==u)&&T.push(_[v]);T.length?this._events[y]=T.length===1?T[0]:T:o(this,y)}return this},d.prototype.removeAllListeners=function(h){var l;return h?(l=t?t+h:h,this._events[l]&&o(this,l)):(this._events=new i,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,a.exports=d})(ul);var G5=ul.exports,xt=fl(G5),B5={grad:.9,turn:360,rad:360/(2*Math.PI)},ra=function(a){return typeof a=="string"?a.length>0:typeof a=="number"},Ke=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*a)/t+0},At=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),a>t?t:a>e?a:e},s2=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},Ff=function(a){return{r:At(a.r,0,255),g:At(a.g,0,255),b:At(a.b,0,255),a:At(a.a)}},Sc=function(a){return{r:Ke(a.r),g:Ke(a.g),b:Ke(a.b),a:Ke(a.a,3)}},F5=/^#([0-9a-f]{3,8})$/i,ls=function(a){var e=a.toString(16);return e.length<2?"0"+e:e},n2=function(a){var e=a.r,t=a.g,i=a.b,r=a.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),d=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(d<0?d+6:d),s:s?o/s*100:0,v:s/255*100,a:r}},o2=function(a){var e=a.h,t=a.s,i=a.v,r=a.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),d=i*(1-(e-s)*t),h=i*(1-(1-e+s)*t),l=s%6;return{r:255*[i,d,o,o,h,i][l],g:255*[h,i,i,d,o,o][l],b:255*[o,o,h,i,i,d][l],a:r}},Df=function(a){return{h:s2(a.h),s:At(a.s,0,100),l:At(a.l,0,100),a:At(a.a)}},kf=function(a){return{h:Ke(a.h),s:Ke(a.s),l:Ke(a.l),a:Ke(a.a,3)}},Uf=function(a){return o2((t=(e=a).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},_r=function(a){return{h:(e=n2(a)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},D5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,k5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,U5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,L5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wd={string:[[function(a){var e=F5.exec(a);return e?(a=e[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?Ke(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?Ke(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var e=U5.exec(a)||L5.exec(a);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ff({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(a){var e=D5.exec(a)||k5.exec(a);if(!e)return null;var t,i,r=Df({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(B5[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Uf(r)},"hsl"]],object:[[function(a){var e=a.r,t=a.g,i=a.b,r=a.a,s=r===void 0?1:r;return ra(e)&&ra(t)&&ra(i)?Ff({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(a){var e=a.h,t=a.s,i=a.l,r=a.a,s=r===void 0?1:r;if(!ra(e)||!ra(t)||!ra(i))return null;var o=Df({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return Uf(o)},"hsl"],[function(a){var e=a.h,t=a.s,i=a.v,r=a.a,s=r===void 0?1:r;if(!ra(e)||!ra(t)||!ra(i))return null;var o=function(d){return{h:s2(d.h),s:At(d.s,0,100),v:At(d.v,0,100),a:At(d.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return o2(o)},"hsv"]]},Lf=function(a,e){for(var t=0;t<e.length;t++){var i=e[t][0](a);if(i)return[i,e[t][1]]}return[null,void 0]},N5=function(a){return typeof a=="string"?Lf(a.trim(),wd.string):typeof a=="object"&&a!==null?Lf(a,wd.object):[null,void 0]};var wc=function(a,e){var t=_r(a);return{h:t.h,s:At(t.s+100*e,0,100),l:t.l,a:t.a}},Ac=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},Nf=function(a,e){var t=_r(a);return{h:t.h,s:t.s,l:At(t.l+100*e,0,100),a:t.a}},Ad=function(){function a(e){this.parsed=N5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return Ke(Ac(this.rgba),2)},a.prototype.isDark=function(){return Ac(this.rgba)<.5},a.prototype.isLight=function(){return Ac(this.rgba)>=.5},a.prototype.toHex=function(){return e=Sc(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?ls(Ke(255*s)):"","#"+ls(t)+ls(i)+ls(r)+o;var e,t,i,r,s,o},a.prototype.toRgb=function(){return Sc(this.rgba)},a.prototype.toRgbString=function(){return e=Sc(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},a.prototype.toHsl=function(){return kf(_r(this.rgba))},a.prototype.toHslString=function(){return e=kf(_r(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},a.prototype.toHsv=function(){return e=n2(this.rgba),{h:Ke(e.h),s:Ke(e.s),v:Ke(e.v),a:Ke(e.a,3)};var e},a.prototype.invert=function(){return Yt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},a.prototype.saturate=function(e){return e===void 0&&(e=.1),Yt(wc(this.rgba,e))},a.prototype.desaturate=function(e){return e===void 0&&(e=.1),Yt(wc(this.rgba,-e))},a.prototype.grayscale=function(){return Yt(wc(this.rgba,-1))},a.prototype.lighten=function(e){return e===void 0&&(e=.1),Yt(Nf(this.rgba,e))},a.prototype.darken=function(e){return e===void 0&&(e=.1),Yt(Nf(this.rgba,-e))},a.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},a.prototype.alpha=function(e){return typeof e=="number"?Yt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ke(this.rgba.a,3);var t},a.prototype.hue=function(e){var t=_r(this.rgba);return typeof e=="number"?Yt({h:e,s:t.s,l:t.l,a:t.a}):Ke(t.h)},a.prototype.isEqual=function(e){return this.toHex()===Yt(e).toHex()},a}(),Yt=function(a){return a instanceof Ad?a:new Ad(a)},jf=[],j5=function(a){a.forEach(function(e){jf.indexOf(e)<0&&(e(Ad,wd),jf.push(e))})};function X5(a,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};a.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var d,h,l=i[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),p=1/0,y="black";if(!s.length)for(var _ in t)s[_]=new a(t[_]).toRgb();for(var v in t){var T=(d=u,h=s[v],Math.pow(d.r-h.r,2)+Math.pow(d.g-h.g,2)+Math.pow(d.b-h.b,2));T<p&&(p=T,y=v)}return y}},e.string.push([function(o){var d=o.toLowerCase(),h=d==="transparent"?"#0000":t[d];return h?new a(h).toRgb():null},"name"])}var H5=Object.defineProperty,Xf=Object.getOwnPropertySymbols,z5=Object.prototype.hasOwnProperty,V5=Object.prototype.propertyIsEnumerable,Hf=(a,e,t)=>e in a?H5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,W5=(a,e)=>{for(var t in e||(e={}))z5.call(e,t)&&Hf(a,t,e[t]);if(Xf)for(var t of Xf(e))V5.call(e,t)&&Hf(a,t,e[t]);return a};j5([X5]);var mi=class pr{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof pr)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?W5({},e):e}_isSourceEqual(e,t){let i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((r,s)=>r===t[s]);if(e!==null&&t!==null){let r=Object.keys(e),s=Object.keys(t);return r.length!==s.length?!1:r.every(o=>e[o]===t[o])}return e===t}toRgba(){let[e,t,i,r]=this._components;return{r:e,g:t,b:i,a:r}}toRgb(){let[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){let[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){let[t,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);let[t,i,r,s]=this._components;return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);let[t,i,r]=this._components;return e[0]=t,e[1]=i,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){let[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,i,r,s]=pr._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return t&&(i=i*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(r<<8)+s}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,i,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,r,s=255]=e,t/=255,i/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let d=pr.HEX_PATTERN.exec(e);d&&(e=`#${d[2]}`)}let o=Yt(e);o.isValid()&&({r:t,g:i,b:r,a:s}=o.rgba,t/=255,i/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);let[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,t),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof pr||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};mi.shared=new mi,mi._temp=new mi,mi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var Ee=mi,Y5={cullArea:null,cullable:!1,cullableChildren:!0},$5=Math.PI*2,K5=180/Math.PI,q5=Math.PI/180,Ce=class a{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new a(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}static get shared(){return Ec.x=0,Ec.y=0,Ec}},Ec=new Ce,ie=class a{constructor(e=1,t=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,s,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Ce;let i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Ce;let i=this.a,r=this.b,s=this.c,o=this.d,d=this.tx,h=this.ty,l=1/(i*o+s*-r),u=e.x,p=e.y;return t.x=o*l*u+-s*l*p+(h*s-d*o)*l,t.y=i*l*p+-r*l*u+(-h*i+d*r)*l,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){let t=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}appendFrom(e,t){let i=e.a,r=e.b,s=e.c,o=e.d,d=e.tx,h=e.ty,l=t.a,u=t.b,p=t.c,y=t.d;return this.a=i*l+r*p,this.b=i*u+r*y,this.c=s*l+o*p,this.d=s*u+o*y,this.tx=d*l+h*p+t.tx,this.ty=d*u+h*y+t.ty,this}setTransform(e,t,i,r,s,o,d,h,l){return this.a=Math.cos(d+l)*s,this.b=Math.sin(d+l)*s,this.c=-Math.sin(d-h)*o,this.d=Math.cos(d-h)*o,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,d=-Math.atan2(-r,s),h=Math.atan2(i,t),l=Math.abs(d+h);return l<1e-5||Math.abs($5-l)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=d,e.skew.y=h),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){let e=this.a,t=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-t*i;return this.a=r/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-t*s)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new a;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}static get IDENTITY(){return Q5.identity()}static get shared(){return Z5.identity()}},Z5=new ie,Q5=new ie,Ve=class a{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new a(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}},Pc={default:-1};function Be(a="default"){return Pc[a]===void 0&&(Pc[a]=-1),++Pc[a]}var Pr=class{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var t;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(t=i.init)==null||t.call(i,e),i}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}},Ed=class{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Pr(e)),this._poolsByClass.get(e)}stats(){let e={};return this._poolsByClass.forEach(t=>{let i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}},ye=new Ed,J5={get isCachedAsTexture(){var a;return!!((a=this.renderGroup)!=null&&a.isCachedAsTexture)},cacheAsTexture(a){typeof a=="boolean"&&a===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(a===!0?{}:a))},updateCacheTexture(){var a;(a=this.renderGroup)==null||a.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(a){this.cacheAsTexture(a)}};function c2(a,e,t){let i=a.length,r;if(e>=i||t===0)return;t=e+t>i?i-e:t;let s=i-t;for(r=e;r<s;++r)a[r]=a[r+t];a.length=s}var e4={allowChildren:!0,removeChildren(a=0,e){let t=e??this.children.length,i=t-a,r=[];if(i>0&&i<=t){for(let o=t-1;o>=a;o--){let d=this.children[o];d&&(r.push(d),d.parent=null)}c2(this.children,a,t);let s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let o=0;o<r.length;++o)this.emit("childRemoved",r[o],this,o),r[o].emit("removed",this);return r}else if(i===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(a){let e=this.getChildAt(a);return this.removeChild(e)},getChildAt(a){if(a<0||a>=this.children.length)throw new Error(`getChildAt: Index (${a}) does not exist.`);return this.children[a]},setChildIndex(a,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(a),this.addChildAt(a,e)},getChildIndex(a){let e=this.children.indexOf(a);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(a,e){let{children:t}=this;if(e<0||e>t.length)throw new Error(`${a}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(a.parent){let r=a.parent.children.indexOf(a);if(a.parent===this&&r===e)return a;r!==-1&&a.parent.children.splice(r,1)}e===t.length?t.push(a):t.splice(e,0,a),a.parent=this,a.didChange=!0,a._updateFlags=15;let i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(a),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",a,this,e),a.emit("added",this),a},swapChildren(a,e){if(a===e)return;let t=this.getChildIndex(a),i=this.getChildIndex(e);this.children[t]=e,this.children[i]=a;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var a;(a=this.parent)==null||a.removeChild(this)},reparentChild(...a){return a.length===1?this.reparentChildAt(a[0],this.children.length):(a.forEach(e=>this.reparentChildAt(e,this.children.length)),a[0])},reparentChildAt(a,e){if(a.parent===this)return this.setChildIndex(a,e),a;let t=a.worldTransform.clone();a.removeFromParent(),this.addChildAt(a,e);let i=this.worldTransform.clone();return i.invert(),t.prepend(i),a.setFromMatrix(t),a}},t4={collectRenderables(a,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(a,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,a):this.collectRenderablesWithEffects(a,e,t))},collectRenderablesSimple(a,e,t){let i=this.children,r=i.length;for(let s=0;s<r;s++)i[s].collectRenderables(a,e,t)},collectRenderablesWithEffects(a,e,t){let{renderPipes:i}=e;for(let r=0;r<this.effects.length;r++){let s=this.effects[r];i[s.pipe].push(s,this,a)}this.collectRenderablesSimple(a,e,t);for(let r=this.effects.length-1;r>=0;r--){let s=this.effects[r];i[s.pipe].pop(s,this,a)}}},wi=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}},Pd=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){let i=this._tests[t];if(i.test(e))return ye.get(i.maskClass,e)}return e}returnMaskEffect(e){ye.return(e)}},Rd=new Pd;pe.handleByList(B.MaskEffect,Rd._effectClasses);var a4=Object.defineProperty,zf=Object.getOwnPropertySymbols,i4=Object.prototype.hasOwnProperty,r4=Object.prototype.propertyIsEnumerable,Vf=(a,e,t)=>e in a?a4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Wf=(a,e)=>{for(var t in e||(e={}))i4.call(e,t)&&Vf(a,t,e[t]);if(zf)for(var t of zf(e))r4.call(e,t)&&Vf(a,t,e[t]);return a},s4={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)},addEffect(a){this.effects.indexOf(a)===-1&&(this.effects.push(a),this.effects.sort((e,t)=>e.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(a){let e=this.effects.indexOf(a);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(a){let e=this._maskEffect;e?.mask!==a&&(e&&(this.removeEffect(e),Rd.returnMaskEffect(e),this._maskEffect=null),a!=null&&(this._maskEffect=Rd.getMaskEffect(a),this.addEffect(this._maskEffect)))},setMask(a){this._maskOptions=Wf(Wf({},this._maskOptions),a),a.mask&&(this.mask=a.mask),this._markStructureAsChanged()},get mask(){var a;return(a=this._maskEffect)==null?void 0:a.mask},set filters(a){var e;!Array.isArray(a)&&a&&(a=[a]);let t=this._filterEffect||(this._filterEffect=new wi);a=a;let i=a?.length>0,r=((e=t.filters)==null?void 0:e.length)>0,s=i!==r;a=Array.isArray(a)?a.slice(0):a,t.filters=Object.freeze(a),s&&(i?this.addEffect(t):(this.removeEffect(t),t.filters=a??null))},get filters(){var a;return(a=this._filterEffect)==null?void 0:a.filters},set filterArea(a){this._filterEffect||(this._filterEffect=new wi),this._filterEffect.filterArea=a},get filterArea(){var a;return(a=this._filterEffect)==null?void 0:a.filterArea}},n4={label:null,get name(){return this.label},set name(a){this.label=a},getChildByName(a,e=!1){return this.getChildByLabel(a,e)},getChildByLabel(a,e=!1){let t=this.children;for(let i=0;i<t.length;i++){let r=t[i];if(r.label===a||a instanceof RegExp&&a.test(r.label))return r}if(e)for(let i=0;i<t.length;i++){let r=t[i].getChildByLabel(a,!0);if(r)return r}return null},getChildrenByLabel(a,e=!1,t=[]){let i=this.children;for(let r=0;r<i.length;r++){let s=i[r];(s.label===a||a instanceof RegExp&&a.test(s.label))&&t.push(s)}if(e)for(let r=0;r<i.length;r++)i[r].getChildrenByLabel(a,!0,t);return t}},fs=[new Ce,new Ce,new Ce,new Ce],Pe=class a{constructor(e=0,t=0,i=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new a(0,0,0,0)}clone(){return new a(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,i,r=.5){let{width:s,height:o}=this;if(s<=0||o<=0)return!1;let d=this.x,h=this.y,l=i*(1-r),u=i-l,p=d-l,y=d+s+l,_=h-l,v=h+o+l,T=d+u,A=d+s-u,P=h+u,I=h+o-u;return e>=p&&e<=y&&t>=_&&t<=v&&!(e>T&&e<A&&t>P&&t<I)}intersects(e,t){if(!t){let re=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=re)return!1;let de=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>de}let i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;let d=fs[0].set(e.left,e.top),h=fs[1].set(e.left,e.bottom),l=fs[2].set(e.right,e.top),u=fs[3].set(e.right,e.bottom);if(l.x<=d.x||h.y<=d.y)return!1;let p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(d,d),t.apply(h,h),t.apply(l,l),t.apply(u,u),Math.max(d.x,h.x,l.x,u.x)<=i||Math.min(d.x,h.x,l.x,u.x)>=r||Math.max(d.y,h.y,l.y,u.y)<=s||Math.min(d.y,h.y,l.y,u.y)>=o))return!1;let y=p*(h.y-d.y),_=p*(d.x-h.x),v=y*i+_*s,T=y*r+_*s,A=y*i+_*o,P=y*r+_*o;if(Math.max(v,T,A,P)<=y*d.x+_*d.y||Math.min(v,T,A,P)>=y*u.x+_*u.y)return!1;let I=p*(d.y-l.y),F=p*(l.x-d.x),D=I*i+F*s,H=I*r+F*s,N=I*i+F*o,j=I*r+F*o;return!(Math.max(D,H,N,j)<=I*d.x+F*d.y||Math.min(D,H,N,j)>=I*u.x+F*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){let i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=s-r,this}getBounds(e){return e||(e=new a),e.copyFrom(this),e}},Yf=new ie,qe=class a{constructor(e=1/0,t=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Yf,this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Pe);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Yf,this}set(e,t,i,r){this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}addFrame(e,t,i,r,s){s||(s=this.matrix);let o=s.a,d=s.b,h=s.c,l=s.d,u=s.tx,p=s.ty,y=this.minX,_=this.minY,v=this.maxX,T=this.maxY,A=o*e+h*t+u,P=d*e+l*t+p;A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*i+h*t+u,P=d*i+l*t+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*e+h*r+u,P=d*e+l*r+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*i+h*r+u,P=d*i+l*r+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),this.minX=y,this.minY=_,this.maxX=v,this.maxY=T}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let t=this.minX,i=this.minY,r=this.maxX,s=this.maxY,{a:o,b:d,c:h,d:l,tx:u,ty:p}=e,y=o*t+h*i+u,_=d*t+l*i+p;this.minX=y,this.minY=_,this.maxX=y,this.maxY=_,y=o*r+h*i+u,_=d*r+l*i+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY,y=o*t+h*s+u,_=d*t+l*s+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY,y=o*r+h*s+u,_=d*r+l*s+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,i,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new a(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){let t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){let t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,r){let s=this.minX,o=this.minY,d=this.maxX,h=this.maxY;r||(r=this.matrix);let l=r.a,u=r.b,p=r.c,y=r.d,_=r.tx,v=r.ty;for(let T=t;T<i;T+=2){let A=e[T],P=e[T+1],I=l*A+p*P+_,F=u*A+y*P+v;s=I<s?I:s,o=F<o?F:o,d=I>d?I:d,h=F>h?F:h}this.minX=s,this.minY=o,this.maxX=d,this.maxY=h}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}},it=new Pr(ie),oa=new Pr(qe),o4=new ie,c4={getFastGlobalBounds(a,e){e||(e=new qe),e.clear(),this._getGlobalBoundsRecursive(!!a,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);let t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(a,e,t){let i=e;if(a&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;let r=!!this.effects.length;if((this.renderGroup||r)&&(i=oa.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let o=this.bounds;i.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}let s=this.children;for(let o=0;o<s.length;o++)s[o]._getGlobalBoundsRecursive(a,i,t)}if(r){let s=!1,o=this.renderGroup||this.parentRenderGroup;for(let d=0;d<this.effects.length;d++)this.effects[d].addBounds&&(s||(s=!0,i.applyMatrix(o.worldTransform)),this.effects[d].addBounds(i,!0));s&&(i.applyMatrix(o.worldTransform.copyTo(o4).invert()),e.addBounds(i,this.relativeGroupTransform)),e.addBounds(i),oa.return(i)}else this.renderGroup&&(e.addBounds(i,this.relativeGroupTransform),oa.return(i))}};function Io(a,e,t){t.clear();let i,r;return a.parent?e?i=a.parent.worldTransform:(r=it.get().identity(),i=bl(a,r)):i=ie.IDENTITY,d2(a,t,i,e),r&&it.return(r),t.isValid||t.set(0,0,0,0),t}function d2(a,e,t,i){var r,s;if(!a.visible||!a.measurable)return;let o;i?o=a.worldTransform:(a.updateLocalTransform(),o=it.get(),o.appendFrom(a.localTransform,t));let d=e,h=!!a.effects.length;if(h&&(e=oa.get().clear()),a.boundsArea)e.addRect(a.boundsArea,o);else{a.bounds&&(e.matrix=o,e.addBounds(a.bounds));for(let l=0;l<a.children.length;l++)d2(a.children[l],e,o,i)}if(h){for(let l=0;l<a.effects.length;l++)(s=(r=a.effects[l]).addBounds)==null||s.call(r,e);d.addBounds(e,ie.IDENTITY),oa.return(e)}i||it.return(o)}function bl(a,e){let t=a.parent;return t&&(bl(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function h2(a,e){if(a===16777215||!e)return e;if(e===16777215||!a)return a;let t=a>>16&255,i=a>>8&255,r=a&255,s=e>>16&255,o=e>>8&255,d=e&255,h=t*s/255|0,l=i*o/255|0,u=r*d/255|0;return(h<<16)+(l<<8)+u}var $f=16777215;function js(a,e){return a===$f?e:e===$f?a:h2(a,e)}function yr(a){return((a&255)<<16)+(a&65280)+(a>>16&255)}var d4={getGlobalAlpha(a){if(a)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(a,e){if(e)return a.copyFrom(this.worldTransform);this.updateLocalTransform();let t=bl(this,it.get().identity());return a.appendFrom(this.localTransform,t),it.return(t),a},getGlobalTint(a){if(a)return this.renderGroup?yr(this.renderGroup.worldColor):this.parentRenderGroup?yr(js(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=js(e,t.localColor),t=t.parent;return yr(e)}};function pl(a,e,t){return e.clear(),t||(t=ie.IDENTITY),l2(a,e,t,a,!0),e.isValid||e.set(0,0,0,0),e}function l2(a,e,t,i,r){var s,o;let d;if(r)d=it.get(),d=t.copyTo(d);else{if(!a.visible||!a.measurable)return;a.updateLocalTransform();let u=a.localTransform;d=it.get(),d.appendFrom(u,t)}let h=e,l=!!a.effects.length;if(l&&(e=oa.get().clear()),a.boundsArea)e.addRect(a.boundsArea,d);else{a.renderPipeId&&(e.matrix=d,e.addBounds(a.bounds));let u=a.children;for(let p=0;p<u.length;p++)l2(u[p],e,d,i,!1)}if(l){for(let u=0;u<a.effects.length;u++)(o=(s=a.effects[u]).addLocalBounds)==null||o.call(s,e,i);h.addBounds(e,ie.IDENTITY),oa.return(e)}it.return(d)}function f2(a,e){let t=a.children;for(let i=0;i<t.length;i++){let r=t[i],s=r.uid,o=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,d=e.index;(e.data[d]!==s||e.data[d+1]!==o)&&(e.data[e.index]=s,e.data[e.index+1]=o,e.didChange=!0),e.index=d+2,r.children.length&&f2(r,e)}return e.didChange}var h4=new ie,l4={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(a,e){let t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=a/e*t:this.scale.x=t},_setHeight(a,e){let t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=a/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new qe});let a=this._localBoundsCacheData;return a.index=1,a.didChange=!1,a.data[0]!==this._didViewChangeTick&&(a.didChange=!0,a.data[0]=this._didViewChangeTick),f2(this,a),a.didChange&&pl(this,a.localBounds,h4),a.localBounds},getBounds(a,e){return Io(this,a,e||new qe)}},f4={_onRender:null,set onRender(a){let e=this.renderGroup||this.parentRenderGroup;if(!a){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=a},get onRender(){return this._onRender}},u4={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(a){this._zIndex!==a&&(this._zIndex=a,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(b4))}};function b4(a,e){return a._zIndex-e._zIndex}var p4={getGlobalPosition(a=new Ce,e=!1){return this.parent?this.parent.toGlobal(this._position,a,e):(a.x=this._position.x,a.y=this._position.y),a},toGlobal(a,e,t=!1){let i=this.getGlobalTransform(it.get(),t);return e=i.apply(a,e),it.return(i),e},toLocal(a,e,t,i){e&&(a=e.toGlobal(a,t,i));let r=this.getGlobalTransform(it.get(),i);return t=r.applyInverse(a,t),it.return(r),t}},Xs=class{constructor(){this.uid=Be("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize}};function Ai(a){return a+=a===0?1:0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function Kf(a){return!(a&a-1)&&!!a}function Rr(a){let e={};for(let t in a)a[t]!==void 0&&(e[t]=a[t]);return e}var g4=Object.defineProperty,qf=Object.getOwnPropertySymbols,m4=Object.prototype.hasOwnProperty,_4=Object.prototype.propertyIsEnumerable,Zf=(a,e,t)=>e in a?g4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Qf=(a,e)=>{for(var t in e||(e={}))m4.call(e,t)&&Zf(a,t,e[t]);if(qf)for(var t of qf(e))_4.call(e,t)&&Zf(a,t,e[t]);return a},Jf=Object.create(null);function y4(a){let e=Jf[a];return e===void 0&&(Jf[a]=Be("resource")),e}var u2=class b2 extends xt{constructor(e={}){var t,i,r,s,o,d,h;super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e=Qf(Qf({},b2.defaultOptions),e),this.addressMode=e.addressMode,this.addressModeU=(t=e.addressModeU)!=null?t:this.addressModeU,this.addressModeV=(i=e.addressModeV)!=null?i:this.addressModeV,this.addressModeW=(r=e.addressModeW)!=null?r:this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=(s=e.magFilter)!=null?s:this.magFilter,this.minFilter=(o=e.minFilter)!=null?o:this.minFilter,this.mipmapFilter=(d=e.mipmapFilter)!=null?d:this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=(h=e.maxAnisotropy)!=null?h:1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=y4(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};u2.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};var p2=u2,x4=Object.defineProperty,eu=Object.getOwnPropertySymbols,v4=Object.prototype.hasOwnProperty,T4=Object.prototype.propertyIsEnumerable,tu=(a,e,t)=>e in a?x4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,au=(a,e)=>{for(var t in e||(e={}))v4.call(e,t)&&tu(a,t,e[t]);if(eu)for(var t of eu(e))T4.call(e,t)&&tu(a,t,e[t]);return a},g2=class m2 extends xt{constructor(e={}){var t,i,r;super(),this.options=e,this.uid=Be("textureSource"),this._resourceType="textureSource",this._resourceId=Be("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e=au(au({},m2.defaultOptions),e),this.label=(t=e.label)!=null?t:"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource&&(i=this.resourceWidth)!=null?i:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource&&(r=this.resourceHeight)!=null?r:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new p2(Rr(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,i;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Be("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i||(i=this._resolution),e||(e=this.width),t||(t=this.height);let r=Math.round(e*i),s=Math.round(t*i);return this.width=r/i,this.height=s/i,this._resolution=i,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Be("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Kf(this.pixelWidth)&&Kf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};g2.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};var Fe=g2,ja=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Xa=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ha=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],za=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Md=[],_2=[],us=Math.sign;function S4(){for(let a=0;a<16;a++){let e=[];Md.push(e);for(let t=0;t<16;t++){let i=us(ja[a]*ja[t]+Ha[a]*Xa[t]),r=us(Xa[a]*ja[t]+za[a]*Xa[t]),s=us(ja[a]*Ha[t]+Ha[a]*za[t]),o=us(Xa[a]*Ha[t]+za[a]*za[t]);for(let d=0;d<16;d++)if(ja[d]===i&&Xa[d]===r&&Ha[d]===s&&za[d]===o){e.push(d);break}}}for(let a=0;a<16;a++){let e=new ie;e.set(ja[a],Xa[a],Ha[a],za[a],0,0),_2.push(e)}}S4();var ke={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:a=>ja[a],uY:a=>Xa[a],vX:a=>Ha[a],vY:a=>za[a],inv:a=>a&8?a&15:-a&7,add:(a,e)=>Md[a][e],sub:(a,e)=>Md[a][ke.inv(e)],rotate180:a=>a^4,isVertical:a=>(a&3)===2,byDirection:(a,e)=>Math.abs(a)*2<=Math.abs(e)?e>=0?ke.S:ke.N:Math.abs(e)*2<=Math.abs(a)?a>0?ke.E:ke.W:e>0?a>0?ke.SE:ke.SW:a>0?ke.NE:ke.NW,matrixAppendRotationInv:(a,e,t=0,i=0)=>{let r=_2[ke.inv(e)];r.tx=t,r.ty=i,a.append(r)}},iu=()=>{},w4=Object.defineProperty,A4=Object.defineProperties,E4=Object.getOwnPropertyDescriptors,ru=Object.getOwnPropertySymbols,P4=Object.prototype.hasOwnProperty,R4=Object.prototype.propertyIsEnumerable,su=(a,e,t)=>e in a?w4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,M4=(a,e)=>{for(var t in e||(e={}))P4.call(e,t)&&su(a,t,e[t]);if(ru)for(var t of ru(e))R4.call(e,t)&&su(a,t,e[t]);return a},C4=(a,e)=>A4(a,E4(e)),Mr=class extends Fe{constructor(e){let t=e.resource||new Float32Array(e.width*e.height*4),i=e.format;i||(t instanceof Float32Array?i="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?i="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?i="rgba16uint":(t instanceof Int8Array,i="bgra8unorm")),super(C4(M4({},e),{resource:t,format:i})),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};Mr.extension=B.TextureSource;var nu=new ie,Hs=class{constructor(e,t){this.mapCoord=new ie,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);let i=this.mapCoord;for(let r=0;r<e.length;r+=2){let s=e[r],o=e[r+1];t[r]=s*i.a+o*i.c+i.tx,t[r+1]=s*i.b+o*i.d+i.ty}return t}update(){let e=this._texture;this._updateID++;let t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);let i=e.orig,r=e.trim;r&&(nu.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(nu));let s=e.source,o=this.uClampFrame,d=this.clampMargin/s._resolution,h=this.clampOffset/s._resolution;return o[0]=(e.frame.x+d+h)/s.width,o[1]=(e.frame.y+d+h)/s.height,o[2]=(e.frame.x+e.frame.width-d+h)/s.width,o[3]=(e.frame.y+e.frame.height-d+h)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}},K=class extends xt{constructor({source:e,label:t,frame:i,orig:r,trim:s,defaultAnchor:o,defaultBorders:d,rotate:h,dynamic:l}={}){var u;if(super(),this.uid=Be("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Pe,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(u=e?.source)!=null?u:new Fe,this.noFrame=!i,i)this.frame.copyFrom(i);else{let{width:p,height:y}=this._source;this.frame.width=p,this.frame.height=y}this.orig=r||this.frame,this.trim=s,this.rotate=h??0,this.defaultAnchor=o,this.defaultBorders=d,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Hs(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:e,frame:t}=this,{width:i,height:r}=this._source,s=t.x/i,o=t.y/r,d=t.width/i,h=t.height/r,l=this.rotate;if(l){let u=d/2,p=h/2,y=s+u,_=o+p;l=ke.add(l,ke.NW),e.x0=y+u*ke.uX(l),e.y0=_+p*ke.uY(l),l=ke.add(l,2),e.x1=y+u*ke.uX(l),e.y1=_+p*ke.uY(l),l=ke.add(l,2),e.x2=y+u*ke.uX(l),e.y2=_+p*ke.uY(l),l=ke.add(l,2),e.x3=y+u*ke.uX(l),e.y3=_+p*ke.uY(l)}else e.x0=s,e.y0=o,e.x1=s+d,e.y1=o,e.x2=s+d,e.y2=o+h,e.x3=s,e.y3=o+h}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return this._source}};K.EMPTY=new K({label:"EMPTY",source:new Fe({label:"EMPTY"})}),K.EMPTY.destroy=iu,K.WHITE=new K({source:new Mr({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),K.WHITE.destroy=iu;var O4=Object.defineProperty,I4=Object.defineProperties,G4=Object.getOwnPropertyDescriptors,ou=Object.getOwnPropertySymbols,B4=Object.prototype.hasOwnProperty,F4=Object.prototype.propertyIsEnumerable,cu=(a,e,t)=>e in a?O4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,D4=(a,e)=>{for(var t in e||(e={}))B4.call(e,t)&&cu(a,t,e[t]);if(ou)for(var t of ou(e))F4.call(e,t)&&cu(a,t,e[t]);return a},k4=(a,e)=>I4(a,G4(e)),U4=0,Cd=class{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,i){let r=new Fe(k4(D4({},this.textureOptions),{width:e,height:t,resolution:1,antialias:i,autoGarbageCollect:!1}));return new K({source:r,label:`texturePool_${U4++}`})}getOptimalTexture(e,t,i=1,r){let s=Math.ceil(e*i-1e-6),o=Math.ceil(t*i-1e-6);s=Ai(s),o=Ai(o);let d=(s<<17)+(o<<1)+(r?1:0);this._texturePool[d]||(this._texturePool[d]=[]);let h=this._texturePool[d].pop();return h||(h=this.createTexture(s,o,r)),h.source._resolution=i,h.source.width=s/i,h.source.height=o/i,h.source.pixelWidth=s,h.source.pixelHeight=o,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=t,h.updateUvs(),this._poolKeyHash[h.uid]=d,h}getSameSizeTexture(e,t=!1){let i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,t)}returnTexture(e){let t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(let t in this._texturePool){let i=this._texturePool[t];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this._texturePool={}}},ze=new Cd,Od=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new ie,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Xs,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;let t=e.children;for(let i=0;i<t.length;i++){let r=t[i];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(ze.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(let e in this.childrenToUpdate){let t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){let t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);let t=e.children;for(let i=0;i<t.length;i++)this.addChild(t[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}let t=e.children;for(let i=0;i<t.length;i++)this.removeChild(t[i])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){let t=this.root.children;for(let i=0;i<t.length;i++)this._getChildren(t[i],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;let i=e.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new ie),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new ie),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;let e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new ie),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}};function Id(a,e,t={}){for(let i in e)!t[i]&&e[i]!==void 0&&(a[i]=e[i])}var Rc=new Ve(null),Mc=new Ve(null),Cc=new Ve(null,1,1),zs=1,gl=2,xr=4;var le=class a extends xt{constructor(e={}){var t,i;super(),this.uid=Be("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new ie,this.relativeGroupTransform=new ie,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ve(this,0,0),this._scale=Cc,this._pivot=Mc,this._skew=Rc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Id(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(r=>this.addChild(r)),(i=e.parent)==null||i.addChild(this)}static mixin(e){Object.defineProperties(a.prototype,Object.getOwnPropertyDescriptors(e))}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}let t=e[0],i=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),i&&(i.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,i&&i.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}let t=e[0],i=this.children.indexOf(t);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=ye.get(Od,this),this.groupTransform=ie.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),ye.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new ie),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*K5}set angle(e){this.rotation=e*q5}get pivot(){return this._pivot===Mc&&(this._pivot=new Ve(this,0,0)),this._pivot}set pivot(e){this._pivot===Mc&&(this._pivot=new Ve(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Rc&&(this._skew=new Ve(this,0,0)),this._skew}set skew(e){this._skew===Rc&&(this._skew=new Ve(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Cc&&(this._scale=new Ve(this,1,1)),this._scale}set scale(e){this._scale===Cc&&(this._scale=new Ve(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});let t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){var i;let r=this.getLocalBounds();typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,r.width),t!==void 0&&this._setHeight(t,r.height)}_updateSkew(){let e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let t=this.localTransform,i=this._scale,r=this._pivot,s=this._position,o=i._x,d=i._y,h=r._x,l=r._y;t.a=this._cx*o,t.b=this._sx*o,t.c=this._cy*d,t.d=this._sy*d,t.tx=s._x-(h*t.a+l*t.c),t.ty=s._y-(h*t.b+l*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=zs,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let t=Ee.shared.setValue(e??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=zs,this._onUpdate())}get tint(){return yr(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=gl,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){let t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=xr,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){let t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=xr,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){let t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=xr,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var t;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&i)for(let r=0;r<i.length;++r)i[r].destroy(e);(t=this.renderGroup)==null||t.destroy(),this.renderGroup=null}};le.mixin(e4),le.mixin(c4),le.mixin(p4),le.mixin(f4),le.mixin(l4),le.mixin(s4),le.mixin(n4),le.mixin(u4),le.mixin(Y5),le.mixin(J5),le.mixin(d4),le.mixin(t4);var Cr=class a{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=a.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Ce,this.page=new Ce,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}},Oc=/iPhone/i,du=/iPod/i,hu=/iPad/i,lu=/\biOS-universal(?:.+)Mac\b/i,Ic=/\bAndroid(?:.+)Mobile\b/i,fu=/Android/i,hi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,bs=/Silk/i,sa=/Windows Phone/i,uu=/\bWindows(?:.+)ARM\b/i,bu=/BlackBerry/i,pu=/BB10/i,gu=/Opera Mini/i,mu=/\b(CriOS|Chrome)(?:.+)Mobile/i,_u=/Mobile(?:.+)Firefox\b/i,yu=function(a){return typeof a<"u"&&a.platform==="MacIntel"&&typeof a.maxTouchPoints=="number"&&a.maxTouchPoints>1&&typeof MSStream>"u"};function L4(a){return function(e){return e.test(a)}}function xu(a){var e={userAgent:"",platform:"",maxTouchPoints:0};!a&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof a=="string"?e.userAgent=a:a&&a.userAgent&&(e={userAgent:a.userAgent,platform:a.platform,maxTouchPoints:a.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var r=L4(t),s={apple:{phone:r(Oc)&&!r(sa),ipod:r(du),tablet:!r(Oc)&&(r(hu)||yu(e))&&!r(sa),universal:r(lu),device:(r(Oc)||r(du)||r(hu)||r(lu)||yu(e))&&!r(sa)},amazon:{phone:r(hi),tablet:!r(hi)&&r(bs),device:r(hi)||r(bs)},android:{phone:!r(sa)&&r(hi)||!r(sa)&&r(Ic),tablet:!r(sa)&&!r(hi)&&!r(Ic)&&(r(bs)||r(fu)),device:!r(sa)&&(r(hi)||r(bs)||r(Ic)||r(fu))||r(/\bokhttp\b/i)},windows:{phone:r(sa),tablet:r(uu),device:r(sa)||r(uu)},other:{blackberry:r(bu),blackberry10:r(pu),opera:r(gu),firefox:r(_u),chrome:r(mu),device:r(bu)||r(pu)||r(gu)||r(_u)||r(mu)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var vu,N4=(vu=xu.default)!=null?vu:xu,Za=N4(globalThis.navigator),j4=Object.defineProperty,Tu=Object.getOwnPropertySymbols,X4=Object.prototype.hasOwnProperty,H4=Object.prototype.propertyIsEnumerable,Su=(a,e,t)=>e in a?j4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,wu=(a,e)=>{for(var t in e||(e={}))X4.call(e,t)&&Su(a,t,e[t]);if(Tu)for(var t of Tu(e))H4.call(e,t)&&Su(a,t,e[t]);return a},z4=9,ps=100,V4=0,W4=0,Au=2,Eu=1,Y4=-1e3,$4=-1e3,K4=2,Gd=class y2{constructor(e,t=Za){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let e=document.createElement("button");e.style.width=`${Eu}px`,e.style.height=`${Eu}px`,e.style.position="absolute",e.style.top=`${Y4}px`,e.style.left=`${$4}px`,e.style.zIndex=K4.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${ps}px`,this._div.style.height=`${ps}px`,this._div.style.position="absolute",this._div.style.top=`${V4}px`,this._div.style.left=`${W4}px`,this._div.style.zIndex=Au.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));let e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{let t=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),t.disconnect(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(let e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);let t=e.children;if(t)for(let i=0;i<t.length;i++)this._updateAccessibleObjects(t[i])}init(e){let t=y2.defaultOptions,i={accessibilityOptions:wu(wu({},t),e?.accessibilityOptions||{})};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){let e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;let t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let i of this._children)i._renderId===this._renderId&&t.add(this._children.indexOf(i))}for(let i=this._children.length-1;i>=0;i--){let r=this._children[i];t.has(i)||(r._accessibleDiv&&r._accessibleDiv.parentNode&&(r._accessibleDiv.parentNode.removeChild(r._accessibleDiv),this._pool.push(r._accessibleDiv),r._accessibleDiv=null),r._accessibleActive=!1,c2(this._children,i,1))}if(this._renderer.renderingToScreen){let{x:i,y:r,width:s,height:o}=this._renderer.screen,d=this._div;d.style.left=`${i}px`,d.style.top=`${r}px`,d.style.width=`${s}px`,d.style.height=`${o}px`}for(let i=0;i<this._children.length;i++){let r=this._children[i];if(!r._accessibleActive||!r._accessibleDiv)continue;let s=r._accessibleDiv,o=r.hitArea||r.getBounds().rectangle;if(r.hitArea){let d=r.worldTransform,h=this._renderer.resolution,l=this._renderer.resolution;s.style.left=`${(d.tx+o.x*d.a)*h}px`,s.style.top=`${(d.ty+o.y*d.d)*l}px`,s.style.width=`${o.width*d.a*h}px`,s.style.height=`${o.height*d.d*l}px`}else{this._capHitArea(o);let d=this._renderer.resolution,h=this._renderer.resolution;s.style.left=`${o.x*d}px`,s.style.top=`${o.y*h}px`,s.style.width=`${o.width*d}px`,s.style.height=`${o.height*h}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:i}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}_addChild(e){let t=this._pool.pop();t||(e.accessibleType==="button"?t=document.createElement("button"):(t=document.createElement(e.accessibleType),t.style.cssText=`
    color: transparent;
    pointer-events: none;
    padding: 0;
    margin: 0;
    border: 0;
    outline: 0;
    background: transparent;
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
`,e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width=`${ps}px`,t.style.height=`${ps}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Au.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,t){let{container:i}=e.target,r=this._renderer.events.rootBoundary,s=Object.assign(new Cr(r),{target:i});r.rootTarget=this._renderer.lastObjectRendered,t.forEach(o=>r.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==z4||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};Gd.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"accessibility"},Gd.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};var q4=Gd,Z4={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1};pe.add(q4),le.mixin(Z4);var Vs=class{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:r,clientHeight:s}=this._resizeTo;t=r,i=s}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};Vs.extension=B.Application;var Ra=(a=>(a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY",a))(Ra||{}),vr=class{constructor(e,t=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));let t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}},x2=class ft{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new vr(null,null,1/0),this.deltaMS=1/ft.targetFPMS,this.elapsedMS=1/ft.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Ra.NORMAL){return this._addListener(new vr(e,t,i))}addOnce(e,t,i=Ra.NORMAL){return this._addListener(new vr(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*ft.targetFPMS;let i=this._head,r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,ft.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!ft._shared){let e=ft._shared=new ft;e.autoStart=!0,e._protected=!0}return ft._shared}static get system(){if(!ft._system){let e=ft._system=new ft;e.autoStart=!0,e._protected=!0}return ft._system}};x2.targetFPMS=.06;var tt=x2,Ws=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ra.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?tt.shared:new tt,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};Ws.extension=B.Application,pe.add(Vs),pe.add(Ws);var Q4=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(a){this.removeTickerListener(),this.events=a,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(a){this._pauseUpdate=a}addTickerListener(){this._tickerAdded||!this.domElement||(tt.system.add(this._tickerUpdate,this,Ra.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(tt.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let a=this.events._rootPointerEvent;this.events.supportsTouchEvents&&a.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:a.clientX,clientY:a.clientY,pointerType:a.pointerType,pointerId:a.pointerId}))}_tickerUpdate(a){this._deltaTime+=a.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}},Aa=new Q4,Ei=class extends Cr{constructor(){super(...arguments),this.client=new Ce,this.movement=new Ce,this.offset=new Ce,this.global=new Ce,this.screen=new Ce}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,r,s,o,d,h,l,u,p,y,_,v,T){throw new Error("Method not implemented.")}},gt=class extends Ei{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}},Pa=class extends Ei{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};Pa.DOM_DELTA_PIXEL=0,Pa.DOM_DELTA_LINE=1,Pa.DOM_DELTA_PAGE=2;var J4=2048,e8=new Ce,ir=new Ce,Bd=class{constructor(e){this.dispatch=new xt,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,r)=>i.priority-r.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let i=0,r=t.length;i<r;i++)t[i].fn(e)}hitTest(e,t){Aa.pauseUpdate=!0;let i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[i](this.rootTarget,this.rootTarget.eventMode,e8.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(e,t){if(!e.target)return;let i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let r=Array.isArray(t)?t:[t];for(let s=i.length-1;s>=0;s--)r.forEach(o=>{e.currentTarget=i[s],this.notifyTarget(e,o)})}propagationPath(e){let t=[e];for(let i=0;i<J4&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,r,s,o=!1){let d=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Aa.pauseUpdate=!1),e.interactiveChildren&&e.children){let u=e.children;for(let p=u.length-1;p>=0;p--){let y=u[p],_=this.hitTestMoveRecursive(y,this._isInteractive(t)?t:y.eventMode,i,r,s,o||s(e,i));if(_){if(_.length>0&&!_[_.length-1].parent)continue;let v=e.isInteractive();(_.length>0||v)&&(v&&this._allInteractiveElements.push(e),_.push(e)),this._hitElements.length===0&&(this._hitElements=_),d=!0}}}let h=this._isInteractive(t),l=e.isInteractive();return l&&l&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:d?this._hitElements:h&&!s(e,i)&&r(e,i)?l?[e]:[]:null}hitTestRecursive(e,t,i,r,s){if(this._interactivePrune(e)||s(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Aa.pauseUpdate=!1),e.interactiveChildren&&e.children){let h=e.children,l=i;for(let u=h.length-1;u>=0;u--){let p=h[u],y=this.hitTestRecursive(p,this._isInteractive(t)?t:p.eventMode,l,r,s);if(y){if(y.length>0&&!y[y.length-1].parent)continue;let _=e.isInteractive();return(y.length>0||_)&&y.push(e),y}}}let o=this._isInteractive(t),d=e.isInteractive();return o&&r(e,i)?d?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,ir),!e.hitArea.contains(ir.x,ir.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){let r=e.effects[i];if(r.containsPoint&&!r.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(t,ir),e.containsPoint(ir)):!1}notifyTarget(e,t){var i,r;if(!e.currentTarget.isInteractive())return;t!=null||(t=e.type);let s=`on${t}`;(r=(i=e.currentTarget)[s])==null||r.call(i,e);let o=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,o),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof gt))return;let t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){let r=t.button===2;this.dispatchEvent(t,r?"rightdown":"mousedown")}let i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var t,i,r;if(!(e instanceof gt))return;this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let s=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let o=s.pointerType==="mouse"||s.pointerType==="pen",d=this.trackingData(e.pointerId),h=this.findMountedTarget(d.overTargets);if(((t=d.overTargets)==null?void 0:t.length)>0&&h!==s.target){let p=e.type==="mousemove"?"mouseout":"pointerout",y=this.createPointerEvent(e,p,h);if(this.dispatchEvent(y,"pointerout"),o&&this.dispatchEvent(y,"mouseout"),!s.composedPath().includes(h)){let _=this.createPointerEvent(e,"pointerleave",h);for(_.eventPhase=_.AT_TARGET;_.target&&!s.composedPath().includes(_.target);)_.currentTarget=_.target,this.notifyTarget(_),o&&this.notifyTarget(_,"mouseleave"),_.target=_.target.parent;this.freeEvent(_)}this.freeEvent(y)}if(h!==s.target){let p=e.type==="mousemove"?"mouseover":"pointerover",y=this.clonePointerEvent(s,p);this.dispatchEvent(y,"pointerover"),o&&this.dispatchEvent(y,"mouseover");let _=h?.parent;for(;_&&_!==this.rootTarget.parent&&_!==s.target;)_=_.parent;if(!_||_===this.rootTarget.parent){let v=this.clonePointerEvent(s,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==h&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),o&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(y)}let l=[],u=(i=this.enableGlobalMoveEvents)!=null?i:!0;this.moveOnAll?l.push("pointermove"):this.dispatchEvent(s,"pointermove"),u&&l.push("globalpointermove"),s.pointerType==="touch"&&(this.moveOnAll?l.splice(1,0,"touchmove"):this.dispatchEvent(s,"touchmove"),u&&l.push("globaltouchmove")),o&&(this.moveOnAll?l.splice(1,0,"mousemove"):this.dispatchEvent(s,"mousemove"),u&&l.push("globalmousemove"),this.cursor=(r=s.target)==null?void 0:r.cursor),l.length>0&&this.all(s,l),this._allInteractiveElements.length=0,this._hitElements.length=0,d.overTargets=s.composedPath(),this.freeEvent(s)}mapPointerOver(e){var t;if(!(e instanceof gt))return;let i=this.trackingData(e.pointerId),r=this.createPointerEvent(e),s=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),s&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(t=r.target)==null?void 0:t.cursor);let o=this.clonePointerEvent(r,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;i.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId);if(t.overTargets){let i=e.pointerType==="mouse"||e.pointerType==="pen",r=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");let o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gt))return;let t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let d=i.button===2;this.dispatchEvent(i,d?"rightup":"mouseup")}let r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]),o=s;if(s&&!i.composedPath().includes(s)){let d=s;for(;d&&!i.composedPath().includes(d);){if(i.currentTarget=d,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let h=i.button===2;this.notifyTarget(i,h?"rightupoutside":"mouseupoutside")}d=d.parent}delete r.pressTargetsByButton[e.button],o=d}if(o){let d=this.clonePointerEvent(i,"click");d.target=o,d.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});let h=r.clicksByButton[e.button];if(h.target===d.target&&t-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=d.target,h.timeStamp=t,d.detail=h.clickCount,d.pointerType==="mouse"){let l=d.button===2;this.dispatchEvent(d,l?"rightclick":"click")}else d.pointerType==="touch"&&this.dispatchEvent(d,"tap");this.dispatchEvent(d,"pointertap"),this.freeEvent(d)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof Pa))return;let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){var r;let s=this.allocateEvent(gt);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=(r=i??this.hitTest(s.global.x,s.global.y))!=null?r:this._hitElements[0],typeof t=="string"&&(s.type=t),s}createWheelEvent(e){let t=this.allocateEvent(Pa);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let i=this.allocateEvent(gt);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof gt&&t instanceof gt&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ei&&t instanceof Ei&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){let i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].once&&e.currentTarget.removeListener(t,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,e)}},t8=Object.defineProperty,Pu=Object.getOwnPropertySymbols,a8=Object.prototype.hasOwnProperty,i8=Object.prototype.propertyIsEnumerable,Ru=(a,e,t)=>e in a?t8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,r8=(a,e)=>{for(var t in e||(e={}))a8.call(e,t)&&Ru(a,t,e[t]);if(Pu)for(var t of Pu(e))i8.call(e,t)&&Ru(a,t,e[t]);return a},s8=1,n8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Fd=class Dd{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Bd(null),Aa.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new gt(null),this._rootWheelEvent=new Pa(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(r8({},Dd.defaultEventFeatures),{set:(t,i,r)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),t[i]=r,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){var t,i;let{canvas:r,resolution:s}=this.renderer;this.setTargetElement(r),this.resolution=s,Dd._defaultEventMode=(t=e.eventMode)!=null?t:"passive",Object.assign(this.features,(i=e.eventFeatures)!=null?i:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;let i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=t.length;i<r;i++){let s=t[i],o=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Aa.pointerMoved();let t=this._normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){let s=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let i=t!==this.domElement?"outside":"",r=this._normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){let d=this._bootstrapEvent(this._rootPointerEvent,r[s]);d.type+=i,this.rootBoundary.mapEvent(d)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){let s=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,Aa.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Aa.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Aa.removeTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,i){let r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*s,e.y=(i-r.top)*(this.domElement.height/r.height)*s}_normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){let s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=s8),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){let t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n8[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Fd.extension={name:"events",type:[B.WebGLSystem,B.CanvasSystem,B.WebGPUSystem],priority:-1},Fd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var v2=Fd,o8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(a){this.eventMode=a?"static":"passive"},_internalEventMode:void 0,get eventMode(){var a;return(a=this._internalEventMode)!=null?a:v2.defaultEventMode},set eventMode(a){this._internalEventMode=a},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;a=i?`${a}capture`:a;let d=typeof e=="function"?e:e.handleEvent,h=this;r&&r.addEventListener("abort",()=>{h.off(a,d,o)}),s?h.once(a,d,o):h.on(a,d,o)},removeEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof e=="function"?void 0:e;a=i?`${a}capture`:a,e=typeof e=="function"?e:e.handleEvent,this.off(a,e,r)},dispatchEvent(a){if(!(a instanceof Cr))throw new Error("Container cannot propagate events outside of the Federated Events API");return a.defaultPrevented=!1,a.path=null,a.target=this,a.manager.dispatchEvent(a),!a.defaultPrevented}};pe.add(v2),le.mixin(o8);var Rt=(a=>(a[a.Low=0]="Low",a[a.Normal=1]="Normal",a[a.High=2]="High",a))(Rt||{}),c8={createCanvas:(a,e)=>{let t=document.createElement("canvas");return t.width=a,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var a;return(a=document.baseURI)!=null?a:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(a,e)=>fetch(a,e),parseXML:a=>new DOMParser().parseFromString(a,"text/xml")},Mu=c8,xe={get(){return Mu},set(a){Mu=a}};function Nt(a){if(typeof a!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(a)}`)}function rr(a){return a.split("?")[0].split("#")[0]}function d8(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h8(a,e,t){return a.replace(new RegExp(d8(e),"g"),t)}function l8(a,e){let t="",i=0,r=-1,s=0,o=-1;for(let d=0;d<=a.length;++d){if(d<a.length)o=a.charCodeAt(d);else{if(o===47)break;o=47}if(o===47){if(!(r===d-1||s===1))if(r!==d-1&&s===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){let h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",i=0):(t=t.slice(0,h),i=t.length-1-t.lastIndexOf("/")),r=d,s=0;continue}}else if(t.length===2||t.length===1){t="",i=0,r=d,s=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+=`/${a.slice(r+1,d)}`:t=a.slice(r+1,d),i=d-r-1;r=d,s=0}else o===46&&s!==-1?++s:s=-1}return t}var _t={toPosix(a){return h8(a,"\\","/")},isUrl(a){return/^https?:/.test(this.toPosix(a))},isDataUrl(a){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a)},isBlobUrl(a){return a.startsWith("blob:")},hasProtocol(a){return/^[^/:]+:/.test(this.toPosix(a))},getProtocol(a){Nt(a),a=this.toPosix(a);let e=/^file:\/\/\//.exec(a);if(e)return e[0];let t=/^[^/:]+:\/{0,2}/.exec(a);return t?t[0]:""},toAbsolute(a,e,t){if(Nt(a),this.isDataUrl(a)||this.isBlobUrl(a))return a;let i=rr(this.toPosix(e??xe.get().getBaseUrl())),r=rr(this.toPosix(t??this.rootname(i)));return a=this.toPosix(a),a.startsWith("/")?_t.join(r,a.slice(1)):this.isAbsolute(a)?a:this.join(i,a)},normalize(a){if(Nt(a),a.length===0)return".";if(this.isDataUrl(a)||this.isBlobUrl(a))return a;a=this.toPosix(a);let e="",t=a.startsWith("/");this.hasProtocol(a)&&(e=this.rootname(a),a=a.slice(e.length));let i=a.endsWith("/");return a=l8(a,!1),a.length>0&&i&&(a+="/"),t?`/${a}`:e+a},isAbsolute(a){return Nt(a),a=this.toPosix(a),this.hasProtocol(a)?!0:a.startsWith("/")},join(...a){var e;if(a.length===0)return".";let t;for(let i=0;i<a.length;++i){let r=a[i];if(Nt(r),r.length>0)if(t===void 0)t=r;else{let s=(e=a[i-1])!=null?e:"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(a){if(Nt(a),a.length===0)return".";a=this.toPosix(a);let e=a.charCodeAt(0),t=e===47,i=-1,r=!0,s=this.getProtocol(a),o=a;a=a.slice(s.length);for(let d=a.length-1;d>=1;--d)if(e=a.charCodeAt(d),e===47){if(!r){i=d;break}}else r=!1;return i===-1?t?"/":this.isUrl(o)?s+a:s:t&&i===1?"//":s+a.slice(0,i)},rootname(a){Nt(a),a=this.toPosix(a);let e="";if(a.startsWith("/")?e="/":e=this.getProtocol(a),this.isUrl(a)){let t=a.indexOf("/",e.length);t!==-1?e=a.slice(0,t):e=a,e.endsWith("/")||(e+="/")}return e},basename(a,e){Nt(a),e&&Nt(e),a=rr(this.toPosix(a));let t=0,i=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=a.length){if(e.length===a.length&&e===a)return"";let o=e.length-1,d=-1;for(s=a.length-1;s>=0;--s){let h=a.charCodeAt(s);if(h===47){if(!r){t=s+1;break}}else d===-1&&(r=!1,d=s+1),o>=0&&(h===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=d))}return t===i?i=d:i===-1&&(i=a.length),a.slice(t,i)}for(s=a.length-1;s>=0;--s)if(a.charCodeAt(s)===47){if(!r){t=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":a.slice(t,i)},extname(a){Nt(a),a=rr(this.toPosix(a));let e=-1,t=0,i=-1,r=!0,s=0;for(let o=a.length-1;o>=0;--o){let d=a.charCodeAt(o);if(d===47){if(!r){t=o+1;break}continue}i===-1&&(r=!1,i=o+1),d===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":a.slice(e,i)},parse(a){Nt(a);let e={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return e;a=rr(this.toPosix(a));let t=a.charCodeAt(0),i=this.isAbsolute(a),r,s="";e.root=this.rootname(a),i||this.hasProtocol(a)?r=1:r=0;let o=-1,d=0,h=-1,l=!0,u=a.length-1,p=0;for(;u>=r;--u){if(t=a.charCodeAt(u),t===47){if(!l){d=u+1;break}continue}h===-1&&(l=!1,h=u+1),t===46?o===-1?o=u:p!==1&&(p=1):o!==-1&&(p=-1)}return o===-1||h===-1||p===0||p===1&&o===h-1&&o===d+1?h!==-1&&(d===0&&i?e.base=e.name=a.slice(1,h):e.base=e.name=a.slice(d,h)):(d===0&&i?(e.name=a.slice(1,o),e.base=a.slice(1,h)):(e.name=a.slice(d,o),e.base=a.slice(d,h)),e.ext=a.slice(o,h)),e.dir=this.dirname(a),s&&(e.dir=s+e.dir),e},sep:"/",delimiter:":",joinExtensions:[".html"]},Xt=(a,e,t=!1)=>(Array.isArray(a)||(a=[a]),e?a.map(i=>typeof i=="string"||t?e(i):i):a);function T2(a,e,t,i,r){let s=e[t];for(let o=0;o<s.length;o++){let d=s[o];t<e.length-1?T2(a.replace(i[t],d),e,t+1,i,r):r.push(a.replace(i[t],d))}}function f8(a){let e=/\{(.*?)\}/g,t=a.match(e),i=[];if(t){let r=[];t.forEach(s=>{let o=s.substring(1,s.length-1).split(",");r.push(o)}),T2(a,r,0,t,i)}else i.push(a);return i}var Ys=a=>!Array.isArray(a),u8=Object.defineProperty,b8=Object.defineProperties,p8=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,g8=Object.prototype.hasOwnProperty,m8=Object.prototype.propertyIsEnumerable,Ou=(a,e,t)=>e in a?u8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,li=(a,e)=>{for(var t in e||(e={}))g8.call(e,t)&&Ou(a,t,e[t]);if(Cu)for(var t of Cu(e))m8.call(e,t)&&Ou(a,t,e[t]);return a},_8=(a,e)=>b8(a,p8(e)),da=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){var t,i,r;if(this._bundleIdConnector=(t=e.connector)!=null?t:this._bundleIdConnector,this._createBundleAssetId=(i=e.createBundleAssetId)!=null?i:this._createBundleAssetId,this._extractAssetIdFromBundle=(r=e.extractAssetIdFromBundle)!=null?r:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){let{alias:t,src:i}=e;return Xt(t||i,r=>typeof r=="string"?r:Array.isArray(r)?r.map(s=>{var o;return(o=s?.src)!=null?o:s}):r!=null&&r.src?r.src:r,!0)}addManifest(e){this._manifest,this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){let i=[],r=t;Array.isArray(t)||(r=Object.entries(t).map(([s,o])=>typeof o=="string"||Array.isArray(o)?{alias:s,src:o}:li({alias:s},o))),r.forEach(s=>{let o=s.src,d=s.alias,h;if(typeof d=="string"){let l=this._createBundleAssetId(e,d);i.push(l),h=[d,l]}else{let l=d.map(u=>this._createBundleAssetId(e,u));i.push(...l),h=[...d,...l]}this.add(_8(li({},s),{alias:h,src:o}))}),this._bundles[e]=i}add(e){let t=[];Array.isArray(e)?t.push(...e):t.push(e);let i;Xt(t).forEach(r=>{let{src:s}=r,{data:o,format:d,loadParser:h}=r,l=Xt(s).map(y=>typeof y=="string"?f8(y):Array.isArray(y)?y:[y]),u=this.getAlias(r),p=[];l.forEach(y=>{y.forEach(_=>{var v,T,A;let P={};if(typeof _!="object"){P.src=_;for(let I=0;I<this._parsers.length;I++){let F=this._parsers[I];if(F.test(_)){P=F.parse(_);break}}}else o=(v=_.data)!=null?v:o,d=(T=_.format)!=null?T:d,h=(A=_.loadParser)!=null?A:h,P=li(li({},P),_);if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this._buildResolvedAsset(P,{aliases:u,data:o,format:d,loadParser:h}),p.push(P)})}),u.forEach(y=>{this._assetMap[y]=p})})}resolveBundle(e){let t=Ys(e);e=Xt(e);let i={};return e.forEach(r=>{let s=this._bundles[r];if(s){let o=this.resolve(s),d={};for(let h in o){let l=o[h];d[this._extractAssetIdFromBundle(r,h)]=l}i[r]=d}}),t?i[e[0]]:i}resolveUrl(e){let t=this.resolve(e);if(typeof e!="string"){let i={};for(let r in t)i[r]=t[r].src;return i}return t.src}resolve(e){let t=Ys(e);e=Xt(e);let i={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r],o=this._getPreferredOrder(s);o?.priority.forEach(d=>{o.params[d].forEach(h=>{let l=s.filter(u=>u[d]?u[d]===h:!1);l.length&&(s=l)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let i=e[t],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){var i,r;let{aliases:s,data:o,loadParser:d,format:h}=t;return(this._basePath||this._rootPath)&&(e.src=_t.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=(i=s??e.alias)!=null?i:[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=li(li({},o||{}),e.data),e.loadParser=d??e.loadParser,e.format=(r=h??e.format)!=null?r:y8(e.src),e}};da.RETINA_PREFIX=/@([0-9\.]+)x/;function y8(a){return a.split(".").pop().split("?").shift().split("#").shift()}var kd=(a,e)=>{let t=e.split("?")[1];return t&&(a+=`?${t}`),a},S2=class gr{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof K?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;let i=parseFloat(t.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=gr.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,i=gr.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){let r=this._frameKeys[t],s=this._frames[r],o=s.frame;if(o){let d=null,h=null,l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new Pe(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?d=new Pe(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):d=new Pe(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new Pe(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new K({source:this.textureSource,frame:d,orig:u,trim:h,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){let r=e[t][i];this.animations[t].push(this.textures[r])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*gr.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*gr.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(let i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};S2.BATCH_SIZE=1e3;var Iu=S2,x8=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function w2(a,e,t){let i={};if(a.forEach(r=>{i[r]=e}),Object.keys(e.textures).forEach(r=>{i[r]=e.textures[r]}),!t){let r=_t.dirname(a[0]);e.linkedSheets.forEach((s,o)=>{let d=w2([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,d)})}return i}var v8={extension:B.Asset,cache:{test:a=>a instanceof Iu,getCacheableAssets:(a,e)=>w2(a,e,!1)},resolver:{extension:{type:B.ResolveParser,name:"resolveSpritesheet"},test:a=>{let e=a.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&x8.includes(i)},parse:a=>{var e,t;let i=a.split(".");return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i[i.length-2],src:a}}},loader:{name:"spritesheetLoader",extension:{type:B.LoadParser,priority:Rt.Normal,name:"spritesheetLoader"},async testParse(a,e){return _t.extname(e.src).toLowerCase()===".json"&&!!a.frames},async parse(a,e,t){var i,r,s;let{texture:o,imageFilename:d,textureOptions:h}=(i=e?.data)!=null?i:{},l=_t.dirname(e.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");let u;if(o instanceof K)u=o;else{let _=kd(l+(d??a.meta.image),e.src);u=(await t.load([{src:_,data:h}]))[_]}let p=new Iu(u.source,a);await p.parse();let y=(r=a?.meta)==null?void 0:r.related_multi_packs;if(Array.isArray(y)){let _=[];for(let T of y){if(typeof T!="string")continue;let A=l+T;(s=e.data)!=null&&s.ignoreMultiPack||(A=kd(A,e.src),_.push(t.load({src:A,data:{ignoreMultiPack:!0}})))}let v=await Promise.all(_);p.linkedSheets=v,v.forEach(T=>{T.linkedSheets=[p].concat(p.linkedSheets.filter(A=>A!==T))})}return p},async unload(a,e,t){await t.unload(a.textureSource._sourceOrigin),a.destroy(!1)}}};pe.add(v8);function A2(a,e,t){let{width:i,height:r}=t.orig,s=t.trim;if(s){let o=s.width,d=s.height;a.minX=s.x-e._x*i,a.maxX=a.minX+o,a.minY=s.y-e._y*r,a.maxY=a.minY+d}else a.minX=-e._x*i,a.maxX=a.minX+i,a.minY=-e._y*r,a.maxY=a.minY+r}var ha=class extends le{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new qe(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){let t=this.bounds,{x:i,y:r}=e;return i>=t.minX&&i<=t.maxX&&r>=t.minY&&r<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,i){let{renderPipes:r,renderableGC:s}=t;r.blendMode.setBlendMode(this,this.groupBlendMode,e),r[this.renderPipeId].addRenderable(this,e),s.addRenderable(this),this.didViewUpdate=!1;let o=this.children,d=o.length;for(let h=0;h<d;h++)o[h].collectRenderables(e,t,i)}},T8=Object.defineProperty,$s=Object.getOwnPropertySymbols,E2=Object.prototype.hasOwnProperty,P2=Object.prototype.propertyIsEnumerable,Gu=(a,e,t)=>e in a?T8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,S8=(a,e)=>{for(var t in e||(e={}))E2.call(e,t)&&Gu(a,t,e[t]);if($s)for(var t of $s(e))P2.call(e,t)&&Gu(a,t,e[t]);return a},w8=(a,e)=>{var t={};for(var i in a)E2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&$s)for(var i of $s(a))e.indexOf(i)<0&&P2.call(a,i)&&(t[i]=a[i]);return t},we=class a extends ha{constructor(e=K.EMPTY){e instanceof K&&(e={texture:e});let t=e,{texture:i=K.EMPTY,anchor:r,roundPixels:s,width:o,height:d}=t,h=w8(t,["texture","anchor","roundPixels","width","height"]);super(S8({label:"Sprite"},h)),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ve({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=s??!1,o!==void 0&&(this.width=o),d!==void 0&&(this.height=d)}static from(e,t=!1){return e instanceof K?new a(e):new a(K.from(e,t))}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return A2(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return this.visualBounds}updateBounds(){let e=this._anchor,t=this._texture,i=this._bounds,{width:r,height:s}=t.orig;i.minX=-e._x*r,i.maxX=i.minX+r,i.minY=-e._y*s,i.maxY=i.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}},A8=new qe;function R2(a,e,t){let i=A8;a.measurable=!0,Io(a,t,i),e.addBoundsMask(i),a.measurable=!1}function M2(a,e,t){let i=oa.get();a.measurable=!0;let r=it.get().identity(),s=C2(a,t,r);pl(a,i,s),a.measurable=!1,e.addBoundsMask(i),it.return(r),oa.return(i)}function C2(a,e,t){return a&&a!==e&&(C2(a.parent,e,t),a.updateLocalTransform(),t.append(a.localTransform)),t}var Ks=class{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof we),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||R2(this.mask,e,t)}addLocalBounds(e,t){M2(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof we}};Ks.extension=B.MaskEffect;var qs=class{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}};qs.extension=B.MaskEffect;var Zs=class{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){R2(this.mask,e,t)}addLocalBounds(e,t){M2(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof le}};Zs.extension=B.MaskEffect;var Kt=class extends Fe{constructor(e){e.resource||(e.resource=xe.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){let r=super.resize(e,t,i);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}};Kt.extension=B.TextureSource;var Ma=class extends Fe{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){let t=xe.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}};Ma.extension=B.TextureSource;var Gc;async function O2(){return Gc!=null||(Gc=(async()=>{var a;let e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";let t=await new Promise(o=>{let d=document.createElement("video");d.onloadeddata=()=>o(d),d.onerror=()=>o(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";let i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);let s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(r),e.deleteTexture(i),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Gc}var E8=Object.defineProperty,P8=Object.defineProperties,R8=Object.getOwnPropertyDescriptors,Bu=Object.getOwnPropertySymbols,M8=Object.prototype.hasOwnProperty,C8=Object.prototype.propertyIsEnumerable,Fu=(a,e,t)=>e in a?E8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ud=(a,e)=>{for(var t in e||(e={}))M8.call(e,t)&&Fu(a,t,e[t]);if(Bu)for(var t of Bu(e))C8.call(e,t)&&Fu(a,t,e[t]);return a},O8=(a,e)=>P8(a,R8(e)),Fs=class I2 extends Fe{constructor(e){var t;super(e),this.isReady=!1,this.uploadMethodId="video",e=Ud(Ud({},I2.defaultOptions),e),this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=(t=e.alphaMode)!=null?t:"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=tt.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await O2(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(tt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(tt.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(tt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Fs.extension=B.TextureSource,Fs.defaultOptions=O8(Ud({},Fe.defaultOptions),{autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1}),Fs.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Ds=Fs,I8=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(a){return this._cache.has(a)}get(a){return this._cache.get(a)}set(a,e){let t=Xt(a),i;for(let d=0;d<this.parsers.length;d++){let h=this.parsers[d];if(h.test(e)){i=h.getCacheableAssets(t,e);break}}let r=new Map(Object.entries(i||{}));i||t.forEach(d=>{r.set(d,e)});let s=[...r.keys()],o={cacheKeys:s,keys:t};t.forEach(d=>{this._cacheMap.set(d,o)}),s.forEach(d=>{let h=i?i[d]:e;this._cache.has(d)&&this._cache.get(d),this._cache.set(d,r.get(d))})}remove(a){if(!this._cacheMap.has(a))return;let e=this._cacheMap.get(a);e.cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}},Oe=new I8,Ld=[];pe.handleByList(B.TextureSource,Ld);function G2(a={}){let e=a&&a.resource,t=e?a.resource:a,i=e?a:{resource:a};for(let r=0;r<Ld.length;r++){let s=Ld[r];if(s.test(t))return new s(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function G8(a={},e=!1){let t=a&&a.resource,i=t?a.resource:a,r=t?a:{resource:a};if(!e&&Oe.has(i))return Oe.get(i);let s=new K({source:G2(r)});return s.on("destroy",()=>{Oe.has(i)&&Oe.remove(i)}),e||Oe.set(i,s),s}function B8(a,e=!1){return typeof a=="string"?Oe.get(a):a instanceof Fe?new K({source:a}):G8(a,e)}K.from=B8,Fe.from=G2,pe.add(Ks,qs,Zs,Ds,Ma,Kt,Mr);var Ht=class{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(let i in e){let r=e[i];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let e=[],t=0;for(let i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){var i,r;let s=this.resources[t];e!==s&&(s&&((i=e.off)==null||i.call(e,"change",this.onResourceChange,this)),(r=e.on)==null||r.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){let t=this.resources;for(let i in t)t[i]._touched=e}destroy(){var e;let t=this.resources;for(let i in t){let r=t[i];(e=r.off)==null||e.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){let t=this.resources;for(let i in t)t[i]===e&&(t[i]=null)}else this._updateKey()}},sr;function B2(){return(!sr||sr!=null&&sr.isContextLost())&&(sr=xe.get().createCanvas().getContext("webgl",{})),sr}var F8=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function D8(a){let e="";for(let t=0;t<a;++t)t>0&&(e+=`
else `),t<a-1&&(e+=`if(test == ${t}.0){}`);return e}function k8(a,e){if(a===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){let i=F8.replace(/%forloop%/gi,D8(a));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))a=a/2|0;else break}}finally{e.deleteShader(t)}return a}var fi=null;function Oi(){var a;if(fi)return fi;let e=B2();return fi=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),fi=k8(fi,e),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),fi}var F2={};function ml(a,e){let t=2166136261;for(let i=0;i<e;i++)t^=a[i].uid,t=Math.imul(t,16777619),t>>>=0;return F2[t]||U8(a,e,t)}var Bc=0;function U8(a,e,t){let i={},r=0;Bc||(Bc=Oi());for(let o=0;o<Bc;o++){let d=o<e?a[o]:K.EMPTY.source;i[r++]=d.source,i[r++]=d.style}let s=new Ht(i);return F2[t]=s,s}var Ea=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};function Nd(a,e){let t=a.byteLength/8|0,i=new Float64Array(a,0,t);new Float64Array(e,0,t).set(i);let r=a.byteLength-t*8;if(r>0){let s=new Uint8Array(a,t*8,r);new Uint8Array(e,t*8,r).set(s)}}var L8={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},Ne=(a=>(a[a.DISABLED=0]="DISABLED",a[a.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",a[a.MASK_ACTIVE=2]="MASK_ACTIVE",a[a.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",a[a.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",a[a.NONE=5]="NONE",a))(Ne||{});function Or(a,e){return e.alphaMode==="no-premultiply-alpha"&&L8[a]||a}var jd=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){let t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}},N8=Object.defineProperty,Du=Object.getOwnPropertySymbols,j8=Object.prototype.hasOwnProperty,X8=Object.prototype.propertyIsEnumerable,ku=(a,e,t)=>e in a?N8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Uu=(a,e)=>{for(var t in e||(e={}))j8.call(e,t)&&ku(a,t,e[t]);if(Du)for(var t of Du(e))X8.call(e,t)&&ku(a,t,e[t]);return a},Xd=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new jd,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},D2=[],Hd=0;function Lu(){return Hd>0?D2[--Hd]:new Xd}function Nu(a){D2[Hd++]=a}var nr=0,k2=class ks{constructor(e={}){this.uid=Be("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[];var t;ks.defaultOptions.maxTextures=(t=ks.defaultOptions.maxTextures)!=null?t:Oi(),e=Uu(Uu({},ks.defaultOptions),e);let{maxTextures:i,attributesInitialSize:r,indicesInitialSize:s}=e;this.attributeBuffer=new Ea(r*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)Nu(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){let i=e._batch.textures.ids[t._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0;let t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){let t=this._elements;if(!t[this.elementStart])return;let i=Lu(),r=i.textures;r.clear();let s=t[this.elementStart],o=Or(s.blendMode,s.texture._source),d=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let h=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,u=this.indexBuffer,p=this._batchIndexSize,y=this._batchIndexStart,_="startBatch",v=this.maxTextures;for(let T=this.elementStart;T<this.elementSize;++T){let A=t[T];t[T]=null;let P=A.texture._source,I=Or(A.blendMode,P),F=o!==I||d!==A.topology;if(P._batchTick===nr&&!F){A._textureId=P._textureBindLocation,p+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,h,l,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,h,l,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize)),A._batch=i;continue}P._batchTick=nr,(r.count>=v||F)&&(this._finishBatch(i,y,p-y,r,o,d,e,_),_="renderBatch",y=p,o=I,d=A.topology,i=Lu(),r=i.textures,r.clear(),++nr),A._textureId=P._textureBindLocation=r.count,r.ids[P.uid]=r.count,r.textures[r.count++]=P,A._batch=i,p+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,h,l,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,h,l,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(i,y,p-y,r,o,d,e,_),y=p,++nr),this.elementStart=this.elementSize,this._batchIndexStart=y,this._batchIndexSize=p}_finishBatch(e,t,i,r,s,o,d,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=h,e.batcher=this,e.textures=r,e.blendMode=s,e.topology=o,e.start=t,e.size=i,++nr,this.batches[this.batchIndex++]=e,d.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let t=Math.max(e,this.attributeBuffer.size*2),i=new Ea(t);Nd(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){let t=this.indexBuffer,i=Math.max(e,t.length*1.5);i+=i%2;let r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let s=0;s<t.length;s++)r[s]=t[s];else Nd(t.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,t,i){e[t]=i+0,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3}packIndex(e,t,i,r){let s=e.indices,o=e.indexSize,d=e.indexOffset,h=e.attributeOffset;for(let l=0;l<o;l++)t[i++]=r+s[l+d]-h}destroy(){for(let e=0;e<this.batches.length;e++)Nu(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};k2.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};var H8=k2,ve=(a=>(a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE",a[a.STATIC=1024]="STATIC",a))(ve||{}),rt=class extends xt{constructor(e){let{data:t,size:i}=e,{usage:r,label:s,shrinkToFit:o}=e;super(),this.uid=Be("buffer"),this._resourceType="buffer",this._resourceId=Be("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i!=null||(i=t?.byteLength);let d=!!t;this.descriptor={size:i,usage:r,mappedAtCreation:d,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ve.STATIC)}set static(e){e?this.descriptor.usage|=ve.STATIC:this.descriptor.usage&=~ve.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}let r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Be("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function U2(a,e){if(!(a instanceof rt)){let t=e?ve.INDEX:ve.VERTEX;a instanceof Array&&(e?(a=new Uint32Array(a),t=ve.INDEX|ve.COPY_DST):(a=new Float32Array(a),t=ve.VERTEX|ve.COPY_DST)),a=new rt({data:a,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return a}function z8(a,e,t){let i=a.getAttribute(e);if(!i)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;let r=i.buffer.data,s=1/0,o=1/0,d=-1/0,h=-1/0,l=r.BYTES_PER_ELEMENT,u=(i.offset||0)/l,p=(i.stride||2*4)/l;for(let y=u;y<r.length;y+=p){let _=r[y],v=r[y+1];_>d&&(d=_),v>h&&(h=v),_<s&&(s=_),v<o&&(o=v)}return t.minX=s,t.minY=o,t.maxX=d,t.maxY=h,t}function V8(a){return(a instanceof rt||Array.isArray(a)||a.BYTES_PER_ELEMENT)&&(a={buffer:a}),a.buffer=U2(a.buffer,!1),a}var qt=class extends xt{constructor(e={}){var t;super(),this.uid=Be("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new qe,this._boundsDirty=!0;let{attributes:i,indexBuffer:r,topology:s}=e;if(this.buffers=[],this.attributes={},i)for(let o in i)this.addAttribute(o,i[o]);this.instanceCount=(t=e.instanceCount)!=null?t:1,r&&this.addIndex(r),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(let e in this.attributes){let t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){let i=V8(t);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=U2(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,z8(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}},W8=new Float32Array(1),Y8=new Uint32Array(1),zd=class extends qt{constructor(){let e=new rt({data:W8,label:"attribute-batch-buffer",usage:ve.VERTEX|ve.COPY_DST,shrinkToFit:!1}),t=new rt({data:Y8,label:"index-batch-buffer",usage:ve.INDEX|ve.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:i,offset:0},aUV:{buffer:e,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:t})}},Fc=Object.create(null),ju=Object.create(null);function Ir(a,e){let t=ju[a];return t===void 0&&(Fc[e]===void 0&&(Fc[e]=1),ju[a]=t=Fc[e]++),t}var gs;function $8(){if(!gs){gs="mediump";let a=B2();a&&a.getShaderPrecisionFormat&&(gs=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?"highp":"mediump")}return gs}function K8(a,e,t){return e?a:t?(a=a.replace("out vec4 finalColor;",""),`

#ifdef GL_ES // This checks if it is WebGL1
#define in varying
#define finalColor gl_FragColor
#define texture texture2D
#endif
${a}
`):`

#ifdef GL_ES // This checks if it is WebGL1
#define in attribute
#define out varying
#endif
${a}
`}function q8(a,e,t){let i=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(a.substring(0,9)!=="precision"){let r=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&i!=="highp"&&(r="mediump"),`precision ${r} float;
${a}`}else if(i!=="highp"&&a.substring(0,15)==="precision highp")return a.replace("precision highp","precision mediump");return a}function Z8(a,e){return e?`#version 300 es
${a}`:a}var Q8={},J8={};function e6(a,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";let i=t?Q8:J8;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,a.indexOf("#define SHADER_NAME")!==-1?a:`${`#define SHADER_NAME ${e}`}
${a}`}function t6(a,e){return e?a.replace("#version 300 es",""):a}var a6=Object.defineProperty,Xu=Object.getOwnPropertySymbols,i6=Object.prototype.hasOwnProperty,r6=Object.prototype.propertyIsEnumerable,Hu=(a,e,t)=>e in a?a6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,zu=(a,e)=>{for(var t in e||(e={}))i6.call(e,t)&&Hu(a,t,e[t]);if(Xu)for(var t of Xu(e))r6.call(e,t)&&Hu(a,t,e[t]);return a},Dc={stripVersion:t6,ensurePrecision:q8,addProgramDefines:K8,setProgramName:e6,insertVersion:Z8},kc=Object.create(null),L2=class Vd{constructor(e){e=zu(zu({},Vd.defaultOptions),e);let t=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:$8()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t},r=e.fragment,s=e.vertex;Object.keys(Dc).forEach(o=>{let d=i[o];r=Dc[o](r,d,!0),s=Dc[o](s,d,!1)}),this.fragment=r,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Ir(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){let t=`${e.vertex}:${e.fragment}`;return kc[t]||(kc[t]=new Vd(e)),kc[t]}};L2.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};var fa=L2,Vu={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Ca(a){var e;return(e=Vu[a])!=null?e:Vu.float32}var s6={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function n6({source:a,entryPoint:e}){var t;let i={},r=a.indexOf(`fn ${e}`);if(r!==-1){let s=a.indexOf("->",r);if(s!==-1){let o=a.substring(r,s),d=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,h;for(;(h=d.exec(o))!==null;){let l=(t=s6[h[3]])!=null?t:"float32";i[h[2]]={location:parseInt(h[1],10),format:l,stride:Ca(l).stride,offset:0,instance:!1,start:0}}}}return i}function Uc(a){var e,t,i;let r=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,s=/@group\((\d+)\)/,o=/@binding\((\d+)\)/,d=/var(<[^>]+>)? (\w+)/,h=/:\s*(\w+)/,l=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,p=/struct\s+(\w+)/,y=(e=a.match(r))==null?void 0:e.map(v=>({group:parseInt(v.match(s)[1],10),binding:parseInt(v.match(o)[1],10),name:v.match(d)[2],isUniform:v.match(d)[1]==="<uniform>",type:v.match(h)[1]}));if(!y)return{groups:[],structs:[]};let _=(i=(t=a.match(l))==null?void 0:t.map(v=>{let T=v.match(p)[1],A=v.match(u).reduce((P,I)=>{let[F,D]=I.split(":");return P[F.trim()]=D.trim(),P},{});return A?{name:T,members:A}:null}).filter(({name:v})=>y.some(T=>T.type===v)))!=null?i:[];return{groups:y,structs:_}}var mr=(a=>(a[a.VERTEX=1]="VERTEX",a[a.FRAGMENT=2]="FRAGMENT",a[a.COMPUTE=4]="COMPUTE",a))(mr||{});function o6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:mr.VERTEX|mr.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:mr.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&e[i.group].push({binding:i.binding,visibility:mr.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function c6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function d6(a,e){let t=new Set,i=new Set,r=[...a.structs,...e.structs].filter(o=>t.has(o.name)?!1:(t.add(o.name),!0)),s=[...a.groups,...e.groups].filter(o=>{let d=`${o.name}-${o.binding}`;return i.has(d)?!1:(i.add(d),!0)});return{structs:r,groups:s}}var Lc=Object.create(null),Zt=class a{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;var t,i;let{fragment:r,vertex:s,layout:o,gpuLayout:d,name:h}=e;if(this.name=h,this.fragment=r,this.vertex=s,r.source===s.source){let l=Uc(r.source);this.structsAndGroups=l}else{let l=Uc(s.source),u=Uc(r.source);this.structsAndGroups=d6(l,u)}this.layout=o??c6(this.structsAndGroups),this.gpuLayout=d??o6(this.structsAndGroups),this.autoAssignGlobalUniforms=((t=this.layout[0])==null?void 0:t.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((i=this.layout[1])==null?void 0:i.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:e,fragment:t}=this,i=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Ir(i,"program")}get attributeData(){var e;return(e=this._attributeData)!=null||(this._attributeData=n6(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){let t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Lc[t]||(Lc[t]=new a(e)),Lc[t]}};function Wu(a,e,t){if(a)for(let i in a){let r=i.toLocaleLowerCase(),s=e[r];if(s){let o=a[i];i==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&s.push(`//----${t}----//`),s.push(o)}}}var h6=/\{\{(.*?)\}\}/g;function Yu(a){var e,t;let i={};return((t=(e=a.match(h6))==null?void 0:e.map(r=>r.replace(/[{()}]/g,"")))!=null?t:[]).forEach(r=>{i[r]=[]}),i}function $u(a,e){let t,i=/@in\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function Ku(a,e,t=!1){let i=[];$u(e,i),a.forEach(d=>{d.header&&$u(d.header,i)});let r=i;t&&r.sort();let s=r.map((d,h)=>`       @location(${h}) ${d},`).join(`
`),o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${s}
`),o}function qu(a,e){let t,i=/@out\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function l6(a){let e=/\b(\w+)\s*:/g.exec(a);return e?e[1]:""}function f6(a){let e=/@.*?\s+/g;return a.replace(e,"")}function u6(a,e){let t=[];qu(e,t),a.forEach(h=>{h.header&&qu(h.header,t)});let i=0,r=t.sort().map(h=>h.indexOf("builtin")>-1?h:`@location(${i++}) ${h}`).join(`,
`),s=t.sort().map(h=>`       var ${f6(h)};`).join(`
`),o=`return VSOutput(
${t.sort().map(h=>` ${l6(h)}`).join(`,
`)});`,d=e.replace(/@out\s+[^;]+;\s*/g,"");return d=d.replace("{{struct}}",`
${r}
`),d=d.replace("{{start}}",`
${s}
`),d=d.replace("{{return}}",`
${o}
`),d}function Zu(a,e){let t=a;for(let i in e){let r=e[i];r.join(`
`).length?t=t.replace(`{{${i}}}`,`//-----${i} START-----//
${r.join(`
`)}
//----${i} FINISH----//`):t=t.replace(`{{${i}}}`,"")}return t}var Wa=Object.create(null),Nc=new Map,b6=0;function p6({template:a,bits:e}){let t=N2(a,e);if(Wa[t])return Wa[t];let{vertex:i,fragment:r}=m6(a,e);return Wa[t]=j2(i,r,e),Wa[t]}function g6({template:a,bits:e}){let t=N2(a,e);return Wa[t]||(Wa[t]=j2(a.vertex,a.fragment,e)),Wa[t]}function m6(a,e){let t=e.map(o=>o.vertex).filter(o=>!!o),i=e.map(o=>o.fragment).filter(o=>!!o),r=Ku(t,a.vertex,!0);r=u6(t,r);let s=Ku(i,a.fragment,!0);return{vertex:r,fragment:s}}function N2(a,e){return e.map(t=>(Nc.has(t)||Nc.set(t,b6++),Nc.get(t))).sort((t,i)=>t-i).join("-")+a.vertex+a.fragment}function j2(a,e,t){let i=Yu(a),r=Yu(e);return t.forEach(s=>{Wu(s.vertex,i,s.name),Wu(s.fragment,r,s.name)}),{vertex:Zu(a,i),fragment:Zu(e,r)}}var _6=`
@in aPosition: vec2<f32>;
@in aUV: vec2<f32>;

@out @builtin(position) vPosition: vec4<f32>;
@out vUV : vec2<f32>;
@out vColor : vec4<f32>;

{{header}}

struct VSOutput {
{{struct}}
};

@vertex
fn main( {{in}} ) -> VSOutput {

var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
var modelMatrix = mat3x3<f32>(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
var position = aPosition;
var uv = aUV;

{{start}}

vColor = vec4<f32>(1., 1., 1., 1.);

{{main}}

vUV = uv;

var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

vColor *= globalUniforms.uWorldColorAlpha;

{{end}}

{{return}}
};
`,y6=`
@in vUV : vec2<f32>;
@in vColor : vec4<f32>;

{{header}}

@fragment
fn main(
{{in}}
) -> @location(0) vec4<f32> {

{{start}}

var outColor:vec4<f32>;

{{main}}

var finalColor:vec4<f32> = outColor * vColor;

{{end}}

return finalColor;
};
`,x6=`
in vec2 aPosition;
in vec2 aUV;

out vec4 vColor;
out vec2 vUV;

{{header}}

void main(void){

mat3 worldTransformMatrix = uWorldTransformMatrix;
mat3 modelMatrix = mat3(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
vec2 position = aPosition;
vec2 uv = aUV;

{{start}}

vColor = vec4(1.);

{{main}}

vUV = uv;

mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

vColor *= uWorldColorAlpha;

{{end}}
}
`,v6=`

in vec4 vColor;
in vec2 vUV;

out vec4 finalColor;

{{header}}

void main(void) {

{{start}}

vec4 outColor;

{{main}}

finalColor = outColor * vColor;

{{end}}
}
`,T6={name:"global-uniforms-bit",vertex:{header:`
struct GlobalUniforms {
uProjectionMatrix:mat3x3<f32>,
uWorldTransformMatrix:mat3x3<f32>,
uWorldColorAlpha: vec4<f32>,
uResolution: vec2<f32>,
}

@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
`}};var S6={name:"global-uniforms-bit",vertex:{header:`
uniform mat3 uProjectionMatrix;
uniform mat3 uWorldTransformMatrix;
uniform vec4 uWorldColorAlpha;
uniform vec2 uResolution;
`}},w6=Object.defineProperty,Qu=Object.getOwnPropertySymbols,A6=Object.prototype.hasOwnProperty,E6=Object.prototype.propertyIsEnumerable,Ju=(a,e,t)=>e in a?w6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,P6=(a,e)=>{for(var t in e||(e={}))A6.call(e,t)&&Ju(a,t,e[t]);if(Qu)for(var t of Qu(e))E6.call(e,t)&&Ju(a,t,e[t]);return a};function zr({bits:a,name:e}){let t=p6({template:{fragment:y6,vertex:_6},bits:[T6,...a]});return Zt.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function Vr({bits:a,name:e}){return new fa(P6({name:e},g6({template:{vertex:x6,fragment:v6},bits:[S6,...a]})))}var _l={name:"color-bit",vertex:{header:`
@in aColor: vec4<f32>;
`,main:`
vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
`}},yl={name:"color-bit",vertex:{header:`
in vec4 aColor;
`,main:`
vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
`}},jc={};function R6(a){let e=[];if(a===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let i=0;i<a;i++)e.push(`@group(1) @binding(${t++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function M6(a){let e=[];if(a===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<a;t++)t===a-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function xl(a){return jc[a]||(jc[a]={name:"texture-batch-bit",vertex:{header:`
@in aTextureIdAndRound: vec2<u32>;
@out @interpolate(flat) vTextureId : u32;
`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1)
{
vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
@in @interpolate(flat) vTextureId: u32;

${R6(a)}
`,main:`
var uvDx = dpdx(vUV);
var uvDy = dpdy(vUV);

${M6(a)}
`}}),jc[a]}var Xc={};function C6(a){let e=[];for(let t=0;t<a;t++)t>0&&e.push("else"),t<a-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function vl(a){return Xc[a]||(Xc[a]={name:"texture-batch-bit",vertex:{header:`
in vec2 aTextureIdAndRound;
out float vTextureId;

`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
in float vTextureId;

uniform sampler2D uTextures[${a}];

`,main:`

${C6(a)}
`}}),Xc[a]}var Wr={name:"round-pixels-bit",vertex:{header:`
fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
{
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},Yr={name:"round-pixels-bit",vertex:{header:`   
vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},X2=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],O6=X2.reduce((a,e)=>(a[e]=!0,a),{});function I6(a,e){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var G6=Object.defineProperty,e0=Object.getOwnPropertySymbols,B6=Object.prototype.hasOwnProperty,F6=Object.prototype.propertyIsEnumerable,t0=(a,e,t)=>e in a?G6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,a0=(a,e)=>{for(var t in e||(e={}))B6.call(e,t)&&t0(a,t,e[t]);if(e0)for(var t of e0(e))F6.call(e,t)&&t0(a,t,e[t]);return a},H2=class z2{constructor(e,t){this._touched=0,this.uid=Be("uniform"),this._resourceType="uniformGroup",this._resourceId=Be("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1;var i,r;t=a0(a0({},z2.defaultOptions),t),this.uniformStructures=e;let s={};for(let o in e){let d=e[o];if(d.name=o,d.size=(i=d.size)!=null?i:1,!O6[d.type])throw new Error(`Uniform type ${d.type} is not supported. Supported uniform types are: ${X2.join(", ")}`);(r=d.value)!=null||(d.value=I6(d.type,d.size)),s[o]=d.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Ir(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};H2.defaultOptions={ubo:!1,isStatic:!1};var Je=H2,i0={};function Tl(a){let e=i0[a];if(e)return e;let t=new Int32Array(a);for(let i=0;i<a;i++)t[i]=i;return e=i0[a]=new Je({uTextures:{value:t,type:"i32",size:a}},{isStatic:!0}),e}var yt=(a=>(a[a.WEBGL=1]="WEBGL",a[a.WEBGPU=2]="WEBGPU",a[a.BOTH=3]="BOTH",a))(yt||{}),D6=Object.defineProperty,Qs=Object.getOwnPropertySymbols,V2=Object.prototype.hasOwnProperty,W2=Object.prototype.propertyIsEnumerable,r0=(a,e,t)=>e in a?D6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,k6=(a,e)=>{for(var t in e||(e={}))V2.call(e,t)&&r0(a,t,e[t]);if(Qs)for(var t of Qs(e))W2.call(e,t)&&r0(a,t,e[t]);return a},U6=(a,e)=>{var t={};for(var i in a)V2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Qs)for(var i of Qs(a))e.indexOf(i)<0&&W2.call(a,i)&&(t[i]=a[i]);return t},ht=class a extends xt{constructor(e){super(),this.uid=Be("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:t,glProgram:i,groups:r,resources:s,compatibleRenderers:o,groupMap:d}=e;this.gpuProgram=t,this.glProgram=i,o===void 0&&(o=0,t&&(o|=yt.WEBGPU),i&&(o|=yt.WEBGL)),this.compatibleRenderers=o;let h={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&r&&!d)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&r&&d)for(let l in d)for(let u in d[l]){let p=d[l][u];h[p]={group:l,binding:u,name:p}}else if(t&&r&&!d){let l=t.structsAndGroups.groups;d={},l.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u})}else if(s){r={},d={},t&&t.structsAndGroups.groups.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u});let l=0;for(let u in s)h[u]||(r[99]||(r[99]=new Ht,this._ownedBindGroups.push(r[99])),h[u]={group:99,binding:l,name:u},d[99]=d[99]||{},d[99][l]=u,l++);for(let u in s){let p=u,y=s[u];!y.source&&!y._resourceType&&(y=new Je(y));let _=h[p];_&&(r[_.group]||(r[_.group]=new Ht,this._ownedBindGroups.push(r[_.group])),r[_.group].setResource(y,_.binding))}}this.groups=r,this._uniformBindMap=d,this.resources=this._buildResourceAccessor(r,h)}addResource(e,t,i){var r,s;(r=this._uniformBindMap)[t]||(r[t]={}),(s=this._uniformBindMap[t])[i]||(s[i]=e),this.groups[t]||(this.groups[t]=new Ht,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){let i={};for(let r in t){let s=t[r];Object.defineProperty(i,s.name,{get(){return e[s.group].getResource(s.binding)},set(o){e[s.group].setResource(o,s.binding)}})}return i}destroy(e=!1){var t,i;this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){let t=e,{gpu:i,gl:r}=t,s=U6(t,["gpu","gl"]),o,d;return i&&(o=Zt.from(i)),r&&(d=fa.from(r)),new a(k6({gpuProgram:o,glProgram:d},s))}},Wd=class extends ht{constructor(e){let t=Vr({name:"batch",bits:[yl,vl(e),Yr]}),i=zr({name:"batch",bits:[_l,xl(e),Wr]});super({glProgram:t,gpuProgram:i,resources:{batchSamplers:Tl(e)}})}},s0=null,Y2=class $2 extends H8{constructor(){super(...arguments),this.geometry=new zd,this.shader=s0||(s0=new Wd(this.maxTextures)),this.name=$2.extension.name,this.vertexSize=6}packAttributes(e,t,i,r,s){let o=s<<16|e.roundPixels&65535,d=e.transform,h=d.a,l=d.b,u=d.c,p=d.d,y=d.tx,_=d.ty,{positions:v,uvs:T}=e,A=e.color,P=e.attributeOffset,I=P+e.attributeSize;for(let F=P;F<I;F++){let D=F*2,H=v[D],N=v[D+1];t[r++]=h*H+u*N+y,t[r++]=p*N+l*H+_,t[r++]=T[D],t[r++]=T[D+1],i[r++]=A,i[r++]=o}}packQuadAttributes(e,t,i,r,s){let o=e.texture,d=e.transform,h=d.a,l=d.b,u=d.c,p=d.d,y=d.tx,_=d.ty,v=e.bounds,T=v.maxX,A=v.minX,P=v.maxY,I=v.minY,F=o.uvs,D=e.color,H=s<<16|e.roundPixels&65535;t[r+0]=h*A+u*I+y,t[r+1]=p*I+l*A+_,t[r+2]=F.x0,t[r+3]=F.y0,i[r+4]=D,i[r+5]=H,t[r+6]=h*T+u*I+y,t[r+7]=p*I+l*T+_,t[r+8]=F.x1,t[r+9]=F.y1,i[r+10]=D,i[r+11]=H,t[r+12]=h*T+u*P+y,t[r+13]=p*P+l*T+_,t[r+14]=F.x2,t[r+15]=F.y2,i[r+16]=D,i[r+17]=H,t[r+18]=h*A+u*P+y,t[r+19]=p*P+l*A+_,t[r+20]=F.x3,t[r+21]=F.y3,i[r+22]=D,i[r+23]=H}};Y2.extension={type:[B.Batcher],name:"default"};var Sl=Y2;function L6(a,e,t,i,r,s,o,d=null){let h=0;t*=e,r*=s;let l=d.a,u=d.b,p=d.c,y=d.d,_=d.tx,v=d.ty;for(;h<o;){let T=a[t],A=a[t+1];i[r]=l*T+p*A+_,i[r+1]=u*T+y*A+v,r+=s,t+=e,h++}}function N6(a,e,t,i){let r=0;for(e*=t;r<i;)a[e]=0,a[e+1]=0,e+=t,r++}function K2(a,e,t,i,r){let s=e.a,o=e.b,d=e.c,h=e.d,l=e.tx,u=e.ty;t||(t=0),i||(i=2),r||(r=a.length/i-t);let p=t*i;for(let y=0;y<r;y++){let _=a[p],v=a[p+1];a[p]=s*_+d*v+l,a[p+1]=o*_+h*v+u,p+=i}}var j6=new ie,Gr=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?h2(t,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||j6}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}},X6=Object.defineProperty,H6=Object.defineProperties,z6=Object.getOwnPropertyDescriptors,n0=Object.getOwnPropertySymbols,V6=Object.prototype.hasOwnProperty,W6=Object.prototype.propertyIsEnumerable,o0=(a,e,t)=>e in a?X6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Js=(a,e)=>{for(var t in e||(e={}))V6.call(e,t)&&o0(a,t,e[t]);if(n0)for(var t of n0(e))W6.call(e,t)&&o0(a,t,e[t]);return a},en=(a,e)=>H6(a,z6(e)),Br={extension:{type:B.ShapeBuilder,name:"circle"},build(a,e){let t,i,r,s,o,d;if(a.type==="circle"){let D=a;t=D.x,i=D.y,o=d=D.radius,r=s=0}else if(a.type==="ellipse"){let D=a;t=D.x,i=D.y,o=D.halfWidth,d=D.halfHeight,r=s=0}else{let D=a,H=D.width/2,N=D.height/2;t=D.x+H,i=D.y+N,o=d=Math.max(0,Math.min(D.radius,Math.min(H,N))),r=H-o,s=N-d}if(!(o>=0&&d>=0&&r>=0&&s>=0))return e;let h=Math.ceil(2.3*Math.sqrt(o+d)),l=h*8+(r?4:0)+(s?4:0);if(l===0)return e;if(h===0)return e[0]=e[6]=t+r,e[1]=e[3]=i+s,e[2]=e[4]=t-r,e[5]=e[7]=i-s,e;let u=0,p=h*4+(r?2:0)+2,y=p,_=l,v=r+o,T=s,A=t+v,P=t-v,I=i+T;if(e[u++]=A,e[u++]=I,e[--p]=I,e[--p]=P,s){let D=i-T;e[y++]=P,e[y++]=D,e[--_]=D,e[--_]=A}for(let D=1;D<h;D++){let H=Math.PI/2*(D/h),N=r+Math.cos(H)*o,j=s+Math.sin(H)*d,re=t+N,de=t-N,Z=i+j,q=i-j;e[u++]=re,e[u++]=Z,e[--p]=Z,e[--p]=de,e[y++]=de,e[y++]=q,e[--_]=q,e[--_]=re}v=r,T=s+d,A=t+v,P=t-v,I=i+T;let F=i-T;return e[u++]=A,e[u++]=I,e[--_]=F,e[--_]=A,r&&(e[u++]=P,e[u++]=I,e[--_]=F,e[--_]=P),e},triangulate(a,e,t,i,r,s){if(a.length===0)return;let o=0,d=0;for(let u=0;u<a.length;u+=2)o+=a[u],d+=a[u+1];o/=a.length/2,d/=a.length/2;let h=i;e[h*t]=o,e[h*t+1]=d;let l=h++;for(let u=0;u<a.length;u+=2)e[h*t]=a[u],e[h*t+1]=a[u+1],u>0&&(r[s++]=h,r[s++]=l,r[s++]=h-1),h++;r[s++]=l+1,r[s++]=l,r[s++]=h-1}},Y6=en(Js({},Br),{extension:en(Js({},Br.extension),{name:"ellipse"})}),$6=en(Js({},Br),{extension:en(Js({},Br.extension),{name:"roundedRectangle"})}),q2=1e-4,c0=1e-4;function K6(a){let e=a.length;if(e<6)return 1;let t=0;for(let i=0,r=a[e-2],s=a[e-1];i<e;i+=2){let o=a[i],d=a[i+1];t+=(o-r)*(d+s),r=o,s=d}return t<0?-1:1}function d0(a,e,t,i,r,s,o,d){let h=a-t*r,l=e-i*r,u=a+t*s,p=e+i*s,y,_;o?(y=i,_=-t):(y=-i,_=t);let v=h+y,T=l+_,A=u+y,P=p+_;return d.push(v,T),d.push(A,P),2}function Ua(a,e,t,i,r,s,o,d){let h=t-a,l=i-e,u=Math.atan2(h,l),p=Math.atan2(r-a,s-e);d&&u<p?u+=Math.PI*2:!d&&u>p&&(p+=Math.PI*2);let y=u,_=p-u,v=Math.abs(_),T=Math.sqrt(h*h+l*l),A=(15*v*Math.sqrt(T)/Math.PI>>0)+1,P=_/A;if(y+=P,d){o.push(a,e),o.push(t,i);for(let I=1,F=y;I<A;I++,F+=P)o.push(a,e),o.push(a+Math.sin(F)*T,e+Math.cos(F)*T);o.push(a,e),o.push(r,s)}else{o.push(t,i),o.push(a,e);for(let I=1,F=y;I<A;I++,F+=P)o.push(a+Math.sin(F)*T,e+Math.cos(F)*T),o.push(a,e);o.push(r,s),o.push(a,e)}return A*2}function q6(a,e,t,i,r,s){let o=q2;if(a.length===0)return;let d=e,h=d.alignment;if(e.alignment!==.5){let Ae=K6(a);t&&(Ae*=-1),h=(h-.5)*Ae+.5}let l=new Ce(a[0],a[1]),u=new Ce(a[a.length-2],a[a.length-1]),p=i,y=Math.abs(l.x-u.x)<o&&Math.abs(l.y-u.y)<o;if(p){a=a.slice(),y&&(a.pop(),a.pop(),u.set(a[a.length-2],a[a.length-1]));let Ae=(l.x+u.x)*.5,Ot=(u.y+l.y)*.5;a.unshift(Ae,Ot),a.push(Ae,Ot)}let _=r,v=a.length/2,T=a.length,A=_.length/2,P=d.width/2,I=P*P,F=d.miterLimit*d.miterLimit,D=a[0],H=a[1],N=a[2],j=a[3],re=0,de=0,Z=-(H-j),q=D-N,se=0,te=0,Ie=Math.sqrt(Z*Z+q*q);Z/=Ie,q/=Ie,Z*=P,q*=P;let Tt=h,ne=(1-Tt)*2,he=Tt*2;p||(d.cap==="round"?T+=Ua(D-Z*(ne-he)*.5,H-q*(ne-he)*.5,D-Z*ne,H-q*ne,D+Z*he,H+q*he,_,!0)+2:d.cap==="square"&&(T+=d0(D,H,Z,q,ne,he,!0,_))),_.push(D-Z*ne,H-q*ne),_.push(D+Z*he,H+q*he);for(let Ae=1;Ae<v-1;++Ae){D=a[(Ae-1)*2],H=a[(Ae-1)*2+1],N=a[Ae*2],j=a[Ae*2+1],re=a[(Ae+1)*2],de=a[(Ae+1)*2+1],Z=-(H-j),q=D-N,Ie=Math.sqrt(Z*Z+q*q),Z/=Ie,q/=Ie,Z*=P,q*=P,se=-(j-de),te=N-re,Ie=Math.sqrt(se*se+te*te),se/=Ie,te/=Ie,se*=P,te*=P;let Ot=N-D,pa=H-j,ea=N-re,ga=de-j,Ni=Ot*ea+pa*ga,Vt=pa*ea-ga*Ot,ma=Vt<0;if(Math.abs(Vt)<.001*Math.abs(Ni)){_.push(N-Z*ne,j-q*ne),_.push(N+Z*he,j+q*he),Ni>=0&&(d.join==="round"?T+=Ua(N,j,N-Z*ne,j-q*ne,N-se*ne,j-te*ne,_,!1)+4:T+=2,_.push(N-se*he,j-te*he),_.push(N+se*ne,j+te*ne));continue}let _a=(-Z+D)*(-q+j)-(-Z+N)*(-q+H),Ba=(-se+re)*(-te+j)-(-se+N)*(-te+de),ya=(Ot*Ba-ea*_a)/Vt,xa=(ga*_a-pa*Ba)/Vt,Fa=(ya-N)*(ya-N)+(xa-j)*(xa-j),It=N+(ya-N)*ne,Gt=j+(xa-j)*ne,Bt=N-(ya-N)*he,Ft=j-(xa-j)*he,ji=Math.min(Ot*Ot+pa*pa,ea*ea+ga*ga),ii=ma?ne:he,ri=ji+ii*ii*I;Fa<=ri?d.join==="bevel"||Fa/I>F?(ma?(_.push(It,Gt),_.push(N+Z*he,j+q*he),_.push(It,Gt),_.push(N+se*he,j+te*he)):(_.push(N-Z*ne,j-q*ne),_.push(Bt,Ft),_.push(N-se*ne,j-te*ne),_.push(Bt,Ft)),T+=2):d.join==="round"?ma?(_.push(It,Gt),_.push(N+Z*he,j+q*he),T+=Ua(N,j,N+Z*he,j+q*he,N+se*he,j+te*he,_,!0)+4,_.push(It,Gt),_.push(N+se*he,j+te*he)):(_.push(N-Z*ne,j-q*ne),_.push(Bt,Ft),T+=Ua(N,j,N-Z*ne,j-q*ne,N-se*ne,j-te*ne,_,!1)+4,_.push(N-se*ne,j-te*ne),_.push(Bt,Ft)):(_.push(It,Gt),_.push(Bt,Ft)):(_.push(N-Z*ne,j-q*ne),_.push(N+Z*he,j+q*he),d.join==="round"?ma?T+=Ua(N,j,N+Z*he,j+q*he,N+se*he,j+te*he,_,!0)+2:T+=Ua(N,j,N-Z*ne,j-q*ne,N-se*ne,j-te*ne,_,!1)+2:d.join==="miter"&&Fa/I<=F&&(ma?(_.push(Bt,Ft),_.push(Bt,Ft)):(_.push(It,Gt),_.push(It,Gt)),T+=2),_.push(N-se*ne,j-te*ne),_.push(N+se*he,j+te*he),T+=2)}D=a[(v-2)*2],H=a[(v-2)*2+1],N=a[(v-1)*2],j=a[(v-1)*2+1],Z=-(H-j),q=D-N,Ie=Math.sqrt(Z*Z+q*q),Z/=Ie,q/=Ie,Z*=P,q*=P,_.push(N-Z*ne,j-q*ne),_.push(N+Z*he,j+q*he),p||(d.cap==="round"?T+=Ua(N-Z*(ne-he)*.5,j-q*(ne-he)*.5,N-Z*ne,j-q*ne,N+Z*he,j+q*he,_,!1)+2:d.cap==="square"&&(T+=d0(N,j,Z,q,ne,he,!1,_)));let Li=c0*c0;for(let Ae=A;Ae<T+A-2;++Ae)D=_[Ae*2],H=_[Ae*2+1],N=_[(Ae+1)*2],j=_[(Ae+1)*2+1],re=_[(Ae+2)*2],de=_[(Ae+2)*2+1],!(Math.abs(D*(j-de)+N*(de-H)+re*(H-j))<Li)&&s.push(Ae,Ae+1,Ae+2)}function Z6(a,e,t,i){let r=q2;if(a.length===0)return;let s=a[0],o=a[1],d=a[a.length-2],h=a[a.length-1],l=e||Math.abs(s-d)<r&&Math.abs(o-h)<r,u=t,p=a.length/2,y=u.length/2;for(let _=0;_<p;_++)u.push(a[_*2]),u.push(a[_*2+1]);for(let _=0;_<p-1;_++)i.push(y+_,y+_+1);l&&i.push(y+p-1,y)}var Go={exports:{}},iS=Go.exports;Go.exports=Bo;var rS=Go.exports.default=Bo;function Bo(a,e,t){t=t||2;var i=e&&e.length,r=i?e[0]*t:a.length,s=Z2(a,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var d,h,l,u,p,y,_;if(i&&(s=a7(a,e,s,t)),a.length>80*t){d=l=a[0],h=u=a[1];for(var v=t;v<r;v+=t)p=a[v],y=a[v+1],p<d&&(d=p),y<h&&(h=y),p>l&&(l=p),y>u&&(u=y);_=Math.max(l-d,u-h),_=_!==0?32767/_:0}return Fr(s,o,t,d,h,_,0),o}function Z2(a,e,t,i,r){var s,o;if(r===Kd(a,e,t,i)>0)for(s=e;s<t;s+=i)o=h0(s,a[s],a[s+1],o);else for(s=t-i;s>=e;s-=i)o=h0(s,a[s],a[s+1],o);return o&&Fo(o,o.next)&&(kr(o),o=o.next),o}function Ka(a,e){if(!a)return a;e||(e=a);var t=a,i;do if(i=!1,!t.steiner&&(Fo(t,t.next)||Ue(t.prev,t,t.next)===0)){if(kr(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Fr(a,e,t,i,r,s,o){if(a){!o&&s&&o7(a,i,r,s);for(var d=a,h,l;a.prev!==a.next;){if(h=a.prev,l=a.next,s?J6(a,i,r,s):Q6(a)){e.push(h.i/t|0),e.push(a.i/t|0),e.push(l.i/t|0),kr(a),a=l.next,d=l.next;continue}if(a=l,a===d){o?o===1?(a=e7(Ka(a),e,t),Fr(a,e,t,i,r,s,2)):o===2&&t7(a,e,t,i,r,s):Fr(Ka(a),e,t,i,r,s,1);break}}}}function Q6(a){var e=a.prev,t=a,i=a.next;if(Ue(e,t,i)>=0)return!1;for(var r=e.x,s=t.x,o=i.x,d=e.y,h=t.y,l=i.y,u=r<s?r<o?r:o:s<o?s:o,p=d<h?d<l?d:l:h<l?h:l,y=r>s?r>o?r:o:s>o?s:o,_=d>h?d>l?d:l:h>l?h:l,v=i.next;v!==e;){if(v.x>=u&&v.x<=y&&v.y>=p&&v.y<=_&&yi(r,d,s,h,o,l,v.x,v.y)&&Ue(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function J6(a,e,t,i){var r=a.prev,s=a,o=a.next;if(Ue(r,s,o)>=0)return!1;for(var d=r.x,h=s.x,l=o.x,u=r.y,p=s.y,y=o.y,_=d<h?d<l?d:l:h<l?h:l,v=u<p?u<y?u:y:p<y?p:y,T=d>h?d>l?d:l:h>l?h:l,A=u>p?u>y?u:y:p>y?p:y,P=Yd(_,v,e,t,i),I=Yd(T,A,e,t,i),F=a.prevZ,D=a.nextZ;F&&F.z>=P&&D&&D.z<=I;){if(F.x>=_&&F.x<=T&&F.y>=v&&F.y<=A&&F!==r&&F!==o&&yi(d,u,h,p,l,y,F.x,F.y)&&Ue(F.prev,F,F.next)>=0||(F=F.prevZ,D.x>=_&&D.x<=T&&D.y>=v&&D.y<=A&&D!==r&&D!==o&&yi(d,u,h,p,l,y,D.x,D.y)&&Ue(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;F&&F.z>=P;){if(F.x>=_&&F.x<=T&&F.y>=v&&F.y<=A&&F!==r&&F!==o&&yi(d,u,h,p,l,y,F.x,F.y)&&Ue(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;D&&D.z<=I;){if(D.x>=_&&D.x<=T&&D.y>=v&&D.y<=A&&D!==r&&D!==o&&yi(d,u,h,p,l,y,D.x,D.y)&&Ue(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function e7(a,e,t){var i=a;do{var r=i.prev,s=i.next.next;!Fo(r,s)&&Q2(r,i,i.next,s)&&Dr(r,s)&&Dr(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),kr(i),kr(i.next),i=a=s),i=i.next}while(i!==a);return Ka(i)}function t7(a,e,t,i,r,s){var o=a;do{for(var d=o.next.next;d!==o.prev;){if(o.i!==d.i&&h7(o,d)){var h=J2(o,d);o=Ka(o,o.next),h=Ka(h,h.next),Fr(o,e,t,i,r,s,0),Fr(h,e,t,i,r,s,0);return}d=d.next}o=o.next}while(o!==a)}function a7(a,e,t,i){var r=[],s,o,d,h,l;for(s=0,o=e.length;s<o;s++)d=e[s]*i,h=s<o-1?e[s+1]*i:a.length,l=Z2(a,d,h,i,!1),l===l.next&&(l.steiner=!0),r.push(d7(l));for(r.sort(i7),s=0;s<r.length;s++)t=r7(r[s],t);return t}function i7(a,e){return a.x-e.x}function r7(a,e){var t=s7(a,e);if(!t)return e;var i=J2(t,a);return Ka(i,i.next),Ka(t,t.next)}function s7(a,e){var t=e,i=a.x,r=a.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;var h=o,l=o.x,u=o.y,p=1/0,y;t=o;do i>=t.x&&t.x>=l&&i!==t.x&&yi(r<u?i:s,r,l,u,r<u?s:i,r,t.x,t.y)&&(y=Math.abs(r-t.y)/(i-t.x),Dr(t,a)&&(y<p||y===p&&(t.x>o.x||t.x===o.x&&n7(o,t)))&&(o=t,p=y)),t=t.next;while(t!==h);return o}function n7(a,e){return Ue(a.prev,a,e.prev)<0&&Ue(e.next,a,a.next)<0}function o7(a,e,t,i){var r=a;do r.z===0&&(r.z=Yd(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==a);r.prevZ.nextZ=null,r.prevZ=null,c7(r)}function c7(a){var e,t,i,r,s,o,d,h,l=1;do{for(t=a,a=null,s=null,o=0;t;){for(o++,i=t,d=0,e=0;e<l&&(d++,i=i.nextZ,!!i);e++);for(h=l;d>0||h>0&&i;)d!==0&&(h===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,d--):(r=i,i=i.nextZ,h--),s?s.nextZ=r:a=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1);return a}function Yd(a,e,t,i,r){return a=(a-t)*r|0,e=(e-i)*r|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function d7(a){var e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function yi(a,e,t,i,r,s,o,d){return(r-o)*(e-d)>=(a-o)*(s-d)&&(a-o)*(i-d)>=(t-o)*(e-d)&&(t-o)*(s-d)>=(r-o)*(i-d)}function h7(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!l7(a,e)&&(Dr(a,e)&&Dr(e,a)&&f7(a,e)&&(Ue(a.prev,a,e.prev)||Ue(a,e.prev,e))||Fo(a,e)&&Ue(a.prev,a,a.next)>0&&Ue(e.prev,e,e.next)>0)}function Ue(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function Fo(a,e){return a.x===e.x&&a.y===e.y}function Q2(a,e,t,i){var r=_s(Ue(a,e,t)),s=_s(Ue(a,e,i)),o=_s(Ue(t,i,a)),d=_s(Ue(t,i,e));return!!(r!==s&&o!==d||r===0&&ms(a,t,e)||s===0&&ms(a,i,e)||o===0&&ms(t,a,i)||d===0&&ms(t,e,i))}function ms(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function _s(a){return a>0?1:a<0?-1:0}function l7(a,e){var t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&Q2(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function Dr(a,e){return Ue(a.prev,a,a.next)<0?Ue(a,e,a.next)>=0&&Ue(a,a.prev,e)>=0:Ue(a,e,a.prev)<0||Ue(a,a.next,e)<0}function f7(a,e){var t=a,i=!1,r=(a.x+e.x)/2,s=(a.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==a);return i}function J2(a,e){var t=new $d(a.i,a.x,a.y),i=new $d(e.i,e.x,e.y),r=a.next,s=e.prev;return a.next=e,e.prev=a,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function h0(a,e,t,i){var r=new $d(a,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function kr(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function $d(a,e,t){this.i=a,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Bo.deviation=function(a,e,t,i){var r=e&&e.length,s=r?e[0]*t:a.length,o=Math.abs(Kd(a,0,s,t));if(r)for(var d=0,h=e.length;d<h;d++){var l=e[d]*t,u=d<h-1?e[d+1]*t:a.length;o-=Math.abs(Kd(a,l,u,t))}var p=0;for(d=0;d<i.length;d+=3){var y=i[d]*t,_=i[d+1]*t,v=i[d+2]*t;p+=Math.abs((a[y]-a[v])*(a[_+1]-a[y+1])-(a[y]-a[_])*(a[v+1]-a[y+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function Kd(a,e,t,i){for(var r=0,s=e,o=t-i;s<t;s+=i)r+=(a[o]-a[s])*(a[s+1]+a[o+1]),o=s;return r}Bo.flatten=function(a){for(var e=a[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,r=0;r<a.length;r++){for(var s=0;s<a[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(a[r][s][o]);r>0&&(i+=a[r-1].length,t.holes.push(i))}return t};var u7=Go.exports,b7=fl(u7);function ep(a,e,t,i,r,s,o){let d=b7(a,e,2);if(!d)return;for(let l=0;l<d.length;l+=3)s[o++]=d[l]+r,s[o++]=d[l+1]+r,s[o++]=d[l+2]+r;let h=r*i;for(let l=0;l<a.length;l+=2)t[h]=a[l],t[h+1]=a[l+1],h+=i}var p7=[],g7={extension:{type:B.ShapeBuilder,name:"polygon"},build(a,e){for(let t=0;t<a.points.length;t++)e[t]=a.points[t];return e},triangulate(a,e,t,i,r,s){ep(a,p7,e,t,i,r,s)}},m7={extension:{type:B.ShapeBuilder,name:"rectangle"},build(a,e){let t=a,i=t.x,r=t.y,s=t.width,o=t.height;return s>=0&&o>=0&&(e[0]=i,e[1]=r,e[2]=i+s,e[3]=r,e[4]=i+s,e[5]=r+o,e[6]=i,e[7]=r+o),e},triangulate(a,e,t,i,r,s){let o=0;i*=t,e[i+o]=a[0],e[i+o+1]=a[1],o+=t,e[i+o]=a[2],e[i+o+1]=a[3],o+=t,e[i+o]=a[6],e[i+o+1]=a[7],o+=t,e[i+o]=a[4],e[i+o+1]=a[5],o+=t;let d=i/t;r[s++]=d,r[s++]=d+1,r[s++]=d+2,r[s++]=d+1,r[s++]=d+3,r[s++]=d+2}},_7={extension:{type:B.ShapeBuilder,name:"triangle"},build(a,e){return e[0]=a.x,e[1]=a.y,e[2]=a.x2,e[3]=a.y2,e[4]=a.x3,e[5]=a.y3,e},triangulate(a,e,t,i,r,s){let o=0;i*=t,e[i+o]=a[0],e[i+o+1]=a[1],o+=t,e[i+o]=a[2],e[i+o+1]=a[3],o+=t,e[i+o]=a[4],e[i+o+1]=a[5];let d=i/t;r[s++]=d,r[s++]=d+1,r[s++]=d+2}},Do={};pe.handleByMap(B.ShapeBuilder,Do),pe.add(m7,g7,_7,Br,Y6,$6);var y7=new Pe;function x7(a,e){let{geometryData:t,batches:i}=e;i.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let r=0;r<a.instructions.length;r++){let s=a.instructions[r];if(s.action==="texture")v7(s.data,i,t);else if(s.action==="fill"||s.action==="stroke"){let o=s.action==="stroke",d=s.data.path.shapePath,h=s.data.style,l=s.data.hole;o&&l&&l0(l.shapePath,h,null,!0,i,t),l0(d,h,l,o,i,t)}}}function v7(a,e,t){let{vertices:i,uvs:r,indices:s}=t,o=s.length,d=i.length/2,h=[],l=Do.rectangle,u=y7,p=a.image;u.x=a.dx,u.y=a.dy,u.width=a.dw,u.height=a.dh;let y=a.transform;l.build(u,h),y&&K2(h,y),l.triangulate(h,i,2,d,s,o);let _=p.uvs;r.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);let v=ye.get(Gr);v.indexOffset=o,v.indexSize=s.length-o,v.attributeOffset=d,v.attributeSize=i.length/2-d,v.baseColor=a.style,v.alpha=a.alpha,v.texture=p,v.geometryData=t,e.push(v)}function l0(a,e,t,i,r,s){let{vertices:o,uvs:d,indices:h}=s,l=a.shapePrimitives.length-1;a.shapePrimitives.forEach(({shape:u,transform:p},y)=>{var _;let v=h.length,T=o.length/2,A=[],P=Do[u.type],I="triangle-list";if(P.build(u,A),p&&K2(A,p),i){let N=(_=u.closePath)!=null?_:!0,j=e;j.pixelLine?(Z6(A,N,o,h),I="line-list"):q6(A,j,!1,N,o,h)}else if(t&&l===y){let N=[],j=A.slice();T7(t.shapePath).forEach(re=>{N.push(j.length/2),j.push(...re)}),ep(j,N,o,2,T,h,v)}else P.triangulate(A,o,2,T,h,v);let F=d.length/2,D=e.texture;if(D!==K.WHITE){let N=e.matrix;N&&(p&&N.append(p.clone().invert()),L6(o,2,T,d,F,2,o.length/2-T,N))}else N6(d,F,2,o.length/2-T);let H=ye.get(Gr);H.indexOffset=v,H.indexSize=h.length-v,H.attributeOffset=T,H.attributeSize=o.length/2-T,H.baseColor=e.color,H.alpha=e.alpha,H.texture=D,H.geometryData=s,H.topology=I,r.push(H)})}function T7(a){if(!a)return[];let e=a.shapePrimitives,t=[];for(let i=0;i<e.length;i++){let r=e[i].shape,s=[];Do[r.type].build(r,s),t.push(s)}return t}var qd=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},Zd=class{constructor(){this.batcher=new Sl,this.instructions=new Xs}init(){this.instructions.reset()}get geometry(){return this.batcher.geometry}},Qd=class Jd{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){var t;Jd.defaultOptions.bezierSmoothness=(t=e?.bezierSmoothness)!=null?t:Jd.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),x7(e,t);let i=e.batchMode;e.customShader||i==="no-batch"?t.isBatchable=!1:i==="auto"&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){let t=ye.get(Zd),{batches:i,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,o=r.indices.length;for(let u=0;u<i.length;u++)i[u].applyTransform=!1;let d=t.batcher;d.ensureAttributeBuffer(s),d.ensureIndexBuffer(o),d.begin();for(let u=0;u<i.length;u++){let p=i[u];d.add(p)}d.finish(t.instructions);let h=d.geometry;h.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),h.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);let l=d.batches;for(let u=0;u<l.length;u++){let p=l[u];p.bindGroup=ml(p.textures.textures,p.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){let t=new qd;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){let t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(ye.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(i=>{ye.return(i)})}destroy(){for(let e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};Qd.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"graphicsContext"},Qd.defaultOptions={bezierSmoothness:.5};var wl=Qd,S7={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},Hc=0,zc=1,Vc=2,Wc=3,Yc=4,$c=5,eh=class tp{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Hc)}set blend(e){!!(this.data&1<<Hc)!==e&&(this.data^=1<<Hc)}get offsets(){return!!(this.data&1<<zc)}set offsets(e){!!(this.data&1<<zc)!==e&&(this.data^=1<<zc)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Vc)}set culling(e){!!(this.data&1<<Vc)!==e&&(this.data^=1<<Vc)}get depthTest(){return!!(this.data&1<<Wc)}set depthTest(e){!!(this.data&1<<Wc)!==e&&(this.data^=1<<Wc)}get depthMask(){return!!(this.data&1<<$c)}set depthMask(e){!!(this.data&1<<$c)!==e&&(this.data^=1<<$c)}get clockwiseFrontFace(){return!!(this.data&1<<Yc)}set clockwiseFrontFace(e){!!(this.data&1<<Yc)!==e&&(this.data^=1<<Yc)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=S7[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){let e=new tp;return e.depthTest=!1,e.blend=!0,e}};eh.default2d=eh.for2d();var Et=eh;function $r(a,e,t){let i=(a>>24&255)/255;e[t++]=(a&255)/255*i,e[t++]=(a>>8&255)/255*i,e[t++]=(a>>16&255)/255*i,e[t++]=i}var tn=class{constructor(e,t){this.state=Et.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(e){let t=e.context,i=!!this._graphicsBatchesHash[e.uid],r=this.renderer.graphicsContext.updateGpuContext(t);return!!(r.isBatchable||i!==r.isBatchable)}addRenderable(e,t){let i=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),i.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){let t=this._graphicsBatchesHash[e.uid];if(t)for(let i=0;i<t.length;i++){let r=t[i];r._batcher.updateElement(r)}}destroyRenderable(e){this._graphicsBatchesHash[e.uid]&&this._removeBatchForRenderable(e.uid),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;let t=this.renderer,i=e.context;if(!t.graphicsContext.getGpuContext(i).batches.length)return;let r=i.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;let s=r.resources.localUniforms.uniforms;s.uTransformMatrix=e.groupTransform,s.uRound=t._roundPixels|e._roundPixels,$r(e.groupColorAlpha,s.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){let t=!!this._graphicsBatchesHash[e.uid],i=this.renderer.graphicsContext.updateGpuContext(e.context);t&&this._removeBatchForRenderable(e.uid),i.isBatchable&&this._initBatchesForRenderable(e),e.batched=i.isBatchable}_addToBatcher(e,t){let i=this.renderer.renderPipes.batch,r=this._getBatchesForRenderable(e);for(let s=0;s<r.length;s++){let o=r[s];i.addToBatch(o,t)}}_getBatchesForRenderable(e){return this._graphicsBatchesHash[e.uid]||this._initBatchesForRenderable(e)}_initBatchesForRenderable(e){let t=e.context,i=this.renderer.graphicsContext.getGpuContext(t),r=this.renderer._roundPixels|e._roundPixels,s=i.batches.map(o=>{let d=ye.get(Gr);return o.copyTo(d),d.renderable=e,d.roundPixels=r,d});return this._graphicsBatchesHash[e.uid]===void 0&&e.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[e.uid]=s,s}_removeBatchForRenderable(e){this._graphicsBatchesHash[e].forEach(t=>{ye.return(t)}),this._graphicsBatchesHash[e]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(let e in this._graphicsBatchesHash)this._removeBatchForRenderable(e);this._graphicsBatchesHash=null}};tn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"graphics"},pe.add(tn),pe.add(wl);var Ur=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){let e=this.geometry.getBuffer("aUV"),t=e.data,i=t,r=this.texture.textureMatrix;return r.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==r._updateID||this._uvUpdateId!==e._updateID)&&((!i||i.length<t.length)&&(i=this._transformedUvs=new Float32Array(t.length)),this._textureMatrixUpdateId=r._updateID,this._uvUpdateId=e._updateID,r.multiplyUvs(t,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}},an=class{constructor(e,t){this.localUniforms=new Je({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Ht({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),e.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),e.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(e){let t=this._getMeshData(e),i=t.batched,r=e.batched;if(t.batched=r,i!==r)return!0;if(r){let s=e._geometry;if(s.indices.length!==t.indexSize||s.positions.length!==t.vertexSize)return t.indexSize=s.indices.length,t.vertexSize=s.positions.length,!0;let o=this._getBatchableMesh(e);return!o._batcher.checkAndUpdateTexture(o,e.texture)}return!1}addRenderable(e,t){let i=this.renderer.renderPipes.batch,{batched:r}=this._getMeshData(e);if(r){let s=this._getBatchableMesh(e);s.texture=e._texture,s.geometry=e._geometry,i.addToBatch(s,t)}else i.break(t),t.add(e)}updateRenderable(e){if(e.batched){let t=this._gpuBatchableMeshHash[e.uid];t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}destroyRenderable(e){this._meshDataHash[e.uid]=null;let t=this._gpuBatchableMeshHash[e.uid];t&&(ye.return(t),this._gpuBatchableMeshHash[e.uid]=null),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;e.state.blendMode=Or(e.groupBlendMode,e.texture._source);let t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),$r(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){return this._meshDataHash[e.uid]||this._initMeshData(e)}_initMeshData(e){var t,i;return this._meshDataHash[e.uid]={batched:e.batched,indexSize:(t=e._geometry.indices)==null?void 0:t.length,vertexSize:(i=e._geometry.positions)==null?void 0:i.length},e.on("destroyed",this._destroyRenderableBound),this._meshDataHash[e.uid]}_getBatchableMesh(e){return this._gpuBatchableMeshHash[e.uid]||this._initBatchableMesh(e)}_initBatchableMesh(e){let t=ye.get(Ur);return t.renderable=e,t.texture=e._texture,t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,this._gpuBatchableMeshHash[e.uid]=t,t}destroy(){for(let e in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[e]&&ye.return(this._gpuBatchableMeshHash[e]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}};an.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"mesh"},pe.add(an);var th=class{execute(e,t){let i=e.state,r=e.renderer,s=t.shader||e.defaultShader;s.resources.uTexture=t.texture._source,s.resources.uniforms=e.localUniforms;let o=r.gl,d=e.getBuffers(t);r.shader.bind(s),r.state.set(i),r.geometry.bind(d.geometry,s.glProgram);let h=d.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;o.drawElements(o.TRIANGLES,t.particleChildren.length*6,h,0)}};function f0(a,e=null){let t=a*6;if(t>65535?e||(e=new Uint32Array(t)):e||(e=new Uint16Array(t)),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,r=0;i<t;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}function w7(a){return{dynamicUpdate:u0(a,!0),staticUpdate:u0(a,!1)}}function u0(a,e){let t=[];t.push(`

var index = 0;

for (let i = 0; i < ps.length; ++i)
{
const p = ps[i];

`);let i=0;for(let s in a){let o=a[s];if(e!==o.dynamic)continue;t.push(`offset = index + ${i}`),t.push(o.code);let d=Ca(o.format);i+=d.stride/4}t.push(`
index += stride * 4;
}
`),t.unshift(`
var stride = ${i};
`);let r=t.join(`
`);return new Function("ps","f32v","u32v",r)}var ah=class{constructor(e){this._size=0,this._generateParticleUpdateCache={};var t;let i=this._size=(t=e.size)!=null?t:1e3,r=e.properties,s=0,o=0;for(let p in r){let y=r[p],_=Ca(y.format);y.dynamic?o+=_.stride:s+=_.stride}this._dynamicStride=o/4,this._staticStride=s/4,this.staticAttributeBuffer=new Ea(i*4*s),this.dynamicAttributeBuffer=new Ea(i*4*o),this.indexBuffer=f0(i);let d=new qt,h=0,l=0;this._staticBuffer=new rt({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:ve.VERTEX|ve.COPY_DST}),this._dynamicBuffer=new rt({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:ve.VERTEX|ve.COPY_DST});for(let p in r){let y=r[p],_=Ca(y.format);y.dynamic?(d.addAttribute(y.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:h*4,format:y.format}),h+=_.size):(d.addAttribute(y.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:l*4,format:y.format}),l+=_.size)}d.addIndex(this.indexBuffer);let u=this.getParticleUpdate(r);this._dynamicUpload=u.dynamicUpdate,this._staticUpload=u.staticUpdate,this.geometry=d}getParticleUpdate(e){let t=A7(e);return this._generateParticleUpdateCache[t]?this._generateParticleUpdateCache[t]:(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[t])}generateParticleUpdate(e){return w7(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new Ea(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Ea(this._size*this._dynamicStride*4*4),this.indexBuffer=f0(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let i=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){let r=this.staticAttributeBuffer;this._staticUpload(e,r.float32View,r.uint32View),this._staticBuffer.setDataWithSize(r.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}};function A7(a){let e=[];for(let t in a){let i=a[t];e.push(t,i.code,i.dynamic?"d":"s")}return e.join("_")}var E7=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
vec4 color = texture2D(uTexture, vUV) * vColor;
gl_FragColor = color;
}`,P7=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
float cosRotation = cos(aRotation);
float sinRotation = sin(aRotation);
float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

vec2 v = vec2(x, y);
v = v + aPosition;

gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

if(uRound == 1.0)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}

vUV = aUV;
vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,b0=`
struct ParticleUniforms {
uProjectionMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uResolution:vec2<f32>,
uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) color : vec4<f32>,
};
@vertex
fn mainVertex(
@location(0) aVertex: vec2<f32>,
@location(1) aPosition: vec2<f32>,
@location(2) aUV: vec2<f32>,
@location(3) aColor: vec4<f32>,
@location(4) aRotation: f32,
) -> VSOutput {

let v = vec2(
aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
) + aPosition;

let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

return VSOutput(
position,
aUV,
vColor,
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) color: vec4<f32>,
@builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv) * color;

return sample;
}`,ih=class extends ht{constructor(){let e=fa.from({vertex:P7,fragment:E7}),t=Zt.from({fragment:{source:b0,entryPoint:"mainFragment"},vertex:{source:b0,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:t,resources:{uTexture:K.WHITE.source,uSampler:new p2({}),uniforms:{uTranslationMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Ee(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}},rn=class{constructor(e,t){this.state=Et.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new Je({uTranslationMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=t,this.defaultShader=new ih,this.state=Et.for2d()}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return this._gpuBufferHash[e.uid]||this._initBuffer(e)}_initBuffer(e){return this._gpuBufferHash[e.uid]=new ah({size:e.particleChildren.length,properties:e._properties}),e.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[e.uid]}updateRenderable(e){}destroyRenderable(e){this._gpuBufferHash[e.uid].destroy(),this._gpuBufferHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}execute(e){let t=e.particleChildren;if(t.length===0)return;let i=this.renderer,r=this.getBuffers(e);e.texture||(e.texture=t[0].texture);let s=this.state;r.update(t,e._childrenDirty),e._childrenDirty=!1,s.blendMode=Or(e.blendMode,e.texture._source);let o=this.localUniforms.uniforms,d=o.uTranslationMatrix;e.worldTransform.copyTo(d),d.prepend(i.globalUniforms.globalUniformData.projectionMatrix),o.uResolution=i.globalUniforms.globalUniformData.resolution,o.uRound=i._roundPixels|e._roundPixels,$r(e.groupColorAlpha,o.uColor,0),this.adaptor.execute(this,e)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}},sn=class extends rn{constructor(e){super(e,new th)}};sn.extension={type:[B.WebGLPipes],name:"particle"};var rh=class{execute(e,t){let i=e.renderer,r=t.shader||e.defaultShader;r.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),r.groups[1]=i.texture.getTextureBindGroup(t.texture);let s=e.state,o=e.getBuffers(t);i.encoder.draw({geometry:o.geometry,shader:t.shader||e.defaultShader,state:s,size:t.particleChildren.length*6})}},nn=class extends rn{constructor(e){super(e,new rh)}};nn.extension={type:[B.WebGPUPipes],name:"particle"},pe.add(sn),pe.add(nn);var Pi=class{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}};function sh(a,e){let{texture:t,bounds:i}=a;A2(i,e._anchor,t);let r=e._style.padding;i.minX-=r,i.minY-=r,i.maxX-=r,i.maxY-=r}var on=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.canvasText.decreaseReferenceCount(t.currentKey),ye.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),r=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e),e._didTextUpdate=!1,sh(r,e)}_updateGpuText(e){let t=this._getGpuText(e),i=t.batchableSprite;t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),t.texture=i.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e._getKey(),i.texture=t.texture}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:null,currentKey:"--",batchableSprite:ye.get(Pi)};return t.batchableSprite.renderable=e,t.batchableSprite.transform=e.groupTransform,t.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},t.batchableSprite.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuText[e.uid]=t,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._updateText(e),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};on.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"text"};var nh=class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let i=xe.get().createCanvas();i.width=e,i.height=t;let r=i.getContext("2d");return{canvas:i,context:r}}getOptimalCanvasAndContext(e,t,i=1){e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6),e=Ai(e),t=Ai(t);let r=(e<<17)+(t<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(e,t)),s}returnCanvasAndContext(e){let t=e.canvas,{width:i,height:r}=t,s=(i<<17)+(r<<1);e.context.clearRect(0,0,i,r),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}},ca=new nh;function p0(a,e,t){for(let i=0,r=4*t*e;i<e;++i,r+=4)if(a[r+3]!==0)return!1;return!0}function g0(a,e,t,i,r){let s=4*e;for(let o=i,d=i*s+4*t;o<=r;++o,d+=s)if(a[d+3]!==0)return!1;return!0}function R7(a,e=1){let{width:t,height:i}=a,r=a.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");let s=r.getImageData(0,0,t,i).data,o=0,d=0,h=t-1,l=i-1;for(;d<i&&p0(s,t,d);)++d;if(d===i)return Pe.EMPTY;for(;p0(s,t,l);)--l;for(;g0(s,t,o,d,l);)++o;for(;g0(s,t,h,d,l);)--h;return++h,++l,new Pe(o/e,d/e,(h-o)/e,(l-d)/e)}var ap=class oh{constructor(e,t,i,r){this.uid=Be("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=e,this.y0=t,this.x1=i,this.y1=r}addColorStop(e,t){return this.gradientStops.push({offset:e,color:Ee.shared.setValue(t).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;let e=oh.defaultTextureSize,{gradientStops:t}=this,i=xe.get().createCanvas();i.width=e,i.height=e;let r=i.getContext("2d"),s=r.createLinearGradient(0,0,oh.defaultTextureSize,1);for(let T=0;T<t.length;T++){let A=t[T];s.addColorStop(A.offset,A.color)}r.fillStyle=s,r.fillRect(0,0,e,e),this.texture=new K({source:new Ma({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:o,y0:d,x1:h,y1:l}=this,u=new ie,p=h-o,y=l-d,_=Math.sqrt(p*p+y*y),v=Math.atan2(y,p);u.translate(-o,-d),u.scale(1/e,1/e),u.rotate(-v),u.scale(256/_,1),this.transform=u,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;let e=this.gradientStops.map(r=>`${r.offset}-${r.color}`).join("-"),t=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${e}-${t}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};ap.defaultTextureSize=256;var Lr=ap,m0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},Ri=class{constructor(e,t){this.uid=Be("fillPattern"),this.transform=new ie,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=m0[t].addressModeU,e.source.style.addressModeV=m0[t].addressModeV)}setTransform(e){let t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}},M7=O7,Kc={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},C7=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function O7(a){var e=[];return a.replace(C7,function(t,i,r){var s=i.toLowerCase();for(r=G7(r),s=="m"&&r.length>2&&(e.push([i].concat(r.splice(0,2))),s="l",i=i=="m"?"l":"L");;){if(r.length==Kc[s])return r.unshift(i),e.push(r);if(r.length<Kc[s])throw new Error("malformed path data");e.push([i].concat(r.splice(0,Kc[s])))}}),e}var I7=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function G7(a){var e=a.match(I7);return e?e.map(Number):[]}var B7=fl(M7);function F7(a,e){let t=B7(a),i=[],r=null,s=0,o=0;for(let d=0;d<t.length;d++){let h=t[d],l=h[0],u=h;switch(l){case"M":s=u[1],o=u[2],e.moveTo(s,o);break;case"m":s+=u[1],o+=u[2],e.moveTo(s,o);break;case"H":s=u[1],e.lineTo(s,o);break;case"h":s+=u[1],e.lineTo(s,o);break;case"V":o=u[1],e.lineTo(s,o);break;case"v":o+=u[1],e.lineTo(s,o);break;case"L":s=u[1],o=u[2],e.lineTo(s,o);break;case"l":s+=u[1],o+=u[2],e.lineTo(s,o);break;case"C":s=u[5],o=u[6],e.bezierCurveTo(u[1],u[2],u[3],u[4],s,o);break;case"c":e.bezierCurveTo(s+u[1],o+u[2],s+u[3],o+u[4],s+u[5],o+u[6]),s+=u[5],o+=u[6];break;case"S":s=u[3],o=u[4],e.bezierCurveToShort(u[1],u[2],s,o);break;case"s":e.bezierCurveToShort(s+u[1],o+u[2],s+u[3],o+u[4]),s+=u[3],o+=u[4];break;case"Q":s=u[3],o=u[4],e.quadraticCurveTo(u[1],u[2],s,o);break;case"q":e.quadraticCurveTo(s+u[1],o+u[2],s+u[3],o+u[4]),s+=u[3],o+=u[4];break;case"T":s=u[1],o=u[2],e.quadraticCurveToShort(s,o);break;case"t":s+=u[1],o+=u[2],e.quadraticCurveToShort(s,o);break;case"A":s=u[6],o=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,o);break;case"a":s+=u[6],o+=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,o);break;case"Z":case"z":e.closePath(),i.length>0&&(r=i.pop(),r?(s=r.startX,o=r.startY):(s=0,o=0)),r=null;break;default:}l!=="Z"&&l!=="z"&&r===null&&(r={startX:s,startY:o},i.push(r))}return e}var ch=class a{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new a(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let i=this.radius*this.radius,r=this.x-e,s=this.y-t;return r*=r,s*=s,r+s<=i}strokeContains(e,t,i,r=.5){if(this.radius===0)return!1;let s=this.x-e,o=this.y-t,d=this.radius,h=(1-r)*i,l=Math.sqrt(s*s+o*o);return l<=d+h&&l>d-(i-h)}getBounds(e){return e||(e=new Pe),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}},dh=class a{constructor(e=0,t=0,i=0,r=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=r}clone(){return new a(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(e,t,i,r=.5){let{halfWidth:s,halfHeight:o}=this;if(s<=0||o<=0)return!1;let d=i*(1-r),h=i-d,l=s-h,u=o-h,p=s+d,y=o+d,_=e-this.x,v=t-this.y,T=_*_/(l*l)+v*v/(u*u),A=_*_/(p*p)+v*v/(y*y);return T>1&&A<=1}getBounds(e){return e||(e=new Pe),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}};function D7(a,e,t,i,r,s){let o=a-t,d=e-i,h=r-t,l=s-i,u=o*h+d*l,p=h*h+l*l,y=-1;p!==0&&(y=u/p);let _,v;y<0?(_=t,v=i):y>1?(_=r,v=s):(_=t+y*h,v=i+y*l);let T=a-_,A=e-v;return T*T+A*A}var Tr=class a{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){let i=[];for(let r=0,s=t.length;r<s;r++)i.push(t[r].x,t[r].y);t=i}this.points=t,this.closePath=!0}clone(){let e=this.points.slice(),t=new a(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1,r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){let d=this.points[s*2],h=this.points[s*2+1],l=this.points[o*2],u=this.points[o*2+1];h>t!=u>t&&e<(l-d)*((t-h)/(u-h))+d&&(i=!i)}return i}strokeContains(e,t,i,r=.5){let s=i*i,o=s*(1-r),d=s-o,{points:h}=this,l=h.length-(this.closePath?0:2);for(let u=0;u<l;u+=2){let p=h[u],y=h[u+1],_=h[(u+2)%h.length],v=h[(u+3)%h.length],T=D7(e,t,p,y,_,v),A=Math.sign((_-p)*(t-y)-(v-y)*(e-p));if(T<=(A<0?d:o))return!0}return!1}getBounds(e){e||(e=new Pe);let t=this.points,i=1/0,r=-1/0,s=1/0,o=-1/0;for(let d=0,h=t.length;d<h;d+=2){let l=t[d],u=t[d+1];i=l<i?l:i,r=l>r?l:r,s=u<s?u:s,o=u>o?u:o}return e.x=i,e.width=r-i,e.y=s,e.height=o-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}},ys=(a,e,t,i,r,s,o)=>{let d=a-t,h=e-i,l=Math.sqrt(d*d+h*h);return l>=r-s&&l<=r+o},hh=class a{constructor(e=0,t=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=r,this.radius=s}getBounds(e){return e||(e=new Pe),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new a(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=t-(this.y+i),o=i*i;if(r*r+s*s<=o||(r=e-(this.x+this.width-i),r*r+s*s<=o)||(s=t-(this.y+this.height-i),r*r+s*s<=o)||(r=e-(this.x+i),r*r+s*s<=o))return!0}return!1}strokeContains(e,t,i,r=.5){let{x:s,y:o,width:d,height:h,radius:l}=this,u=i*(1-r),p=i-u,y=s+l,_=o+l,v=d-l*2,T=h-l*2,A=s+d,P=o+h;return(e>=s-u&&e<=s+p||e>=A-p&&e<=A+u)&&t>=_&&t<=_+T||(t>=o-u&&t<=o+p||t>=P-p&&t<=P+u)&&e>=y&&e<=y+v?!0:e<y&&t<_&&ys(e,t,y,_,l,p,u)||e>A-l&&t<_&&ys(e,t,A-l,_,l,p,u)||e>A-l&&t>P-l&&ys(e,t,A-l,P-l,l,p,u)||e<y&&t>P-l&&ys(e,t,y,P-l,l,p,u)}},k7=8,xs=11920929e-14,U7=1,qc=.01,ui=0,La=0;function ip(a,e,t,i,r,s,o,d,h,l){let u=Math.min(.99,Math.max(0,l??wl.defaultOptions.bezierSmoothness)),p=(U7-u)/1;return p*=p,L7(e,t,i,r,s,o,d,h,a,p),a}function L7(a,e,t,i,r,s,o,d,h,l){lh(a,e,t,i,r,s,o,d,h,l,0),h.push(o,d)}function lh(a,e,t,i,r,s,o,d,h,l,u){if(u>k7)return;let p=Math.PI,y=(a+t)/2,_=(e+i)/2,v=(t+r)/2,T=(i+s)/2,A=(r+o)/2,P=(s+d)/2,I=(y+v)/2,F=(_+T)/2,D=(v+A)/2,H=(T+P)/2,N=(I+D)/2,j=(F+H)/2;if(u>0){let re=o-a,de=d-e,Z=Math.abs((t-o)*de-(i-d)*re),q=Math.abs((r-o)*de-(s-d)*re),se,te;if(Z>xs&&q>xs){if((Z+q)*(Z+q)<=l*(re*re+de*de)){if(ui<qc){h.push(N,j);return}let Ie=Math.atan2(s-i,r-t);if(se=Math.abs(Ie-Math.atan2(i-e,t-a)),te=Math.abs(Math.atan2(d-s,o-r)-Ie),se>=p&&(se=2*p-se),te>=p&&(te=2*p-te),se+te<ui){h.push(N,j);return}if(La!==0){if(se>La){h.push(t,i);return}if(te>La){h.push(r,s);return}}}}else if(Z>xs){if(Z*Z<=l*(re*re+de*de)){if(ui<qc){h.push(N,j);return}if(se=Math.abs(Math.atan2(s-i,r-t)-Math.atan2(i-e,t-a)),se>=p&&(se=2*p-se),se<ui){h.push(t,i),h.push(r,s);return}if(La!==0&&se>La){h.push(t,i);return}}}else if(q>xs){if(q*q<=l*(re*re+de*de)){if(ui<qc){h.push(N,j);return}if(se=Math.abs(Math.atan2(d-s,o-r)-Math.atan2(s-i,r-t)),se>=p&&(se=2*p-se),se<ui){h.push(t,i),h.push(r,s);return}if(La!==0&&se>La){h.push(r,s);return}}}else if(re=N-(a+o)/2,de=j-(e+d)/2,re*re+de*de<=l){h.push(N,j);return}}lh(a,e,y,_,I,F,N,j,h,l,u+1),lh(N,j,D,H,A,P,o,d,h,l,u+1)}var N7=8,j7=11920929e-14,X7=1,H7=.01,_0=0;function z7(a,e,t,i,r,s,o,d){let h=Math.min(.99,Math.max(0,d??wl.defaultOptions.bezierSmoothness)),l=(X7-h)/1;return l*=l,V7(e,t,i,r,s,o,a,l),a}function V7(a,e,t,i,r,s,o,d){fh(o,a,e,t,i,r,s,d,0),o.push(r,s)}function fh(a,e,t,i,r,s,o,d,h){if(h>N7)return;let l=Math.PI,u=(e+i)/2,p=(t+r)/2,y=(i+s)/2,_=(r+o)/2,v=(u+y)/2,T=(p+_)/2,A=s-e,P=o-t,I=Math.abs((i-s)*P-(r-o)*A);if(I>j7){if(I*I<=d*(A*A+P*P)){if(_0<H7){a.push(v,T);return}let F=Math.abs(Math.atan2(o-r,s-i)-Math.atan2(r-t,i-e));if(F>=l&&(F=2*l-F),F<_0){a.push(v,T);return}}}else if(A=v-(e+s)/2,P=T-(t+o)/2,A*A+P*P<=d){a.push(v,T);return}fh(a,e,t,u,p,v,T,d,h+1),fh(a,v,T,y,_,s,o,d,h+1)}function rp(a,e,t,i,r,s,o,d){let h=Math.abs(r-s);(!o&&r>s||o&&s>r)&&(h=2*Math.PI-h),d||(d=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(h/Math.PI)))),d=Math.max(d,3);let l=h/d,u=r;l*=o?-1:1;for(let p=0;p<d+1;p++){let y=Math.cos(u),_=Math.sin(u),v=e+y*i,T=t+_*i;a.push(v,T),u+=l}}function W7(a,e,t,i,r,s){let o=a[a.length-2],d=a[a.length-1]-t,h=o-e,l=r-t,u=i-e,p=Math.abs(d*u-h*l);if(p<1e-8||s===0){(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t);return}let y=d*d+h*h,_=l*l+u*u,v=d*l+h*u,T=s*Math.sqrt(y)/p,A=s*Math.sqrt(_)/p,P=T*v/y,I=A*v/_,F=T*u+A*h,D=T*l+A*d,H=h*(A+P),N=d*(A+P),j=u*(T+I),re=l*(T+I),de=Math.atan2(N-D,H-F),Z=Math.atan2(re-D,j-F);rp(a,F+e,D+t,s,de,Z,h*l>u*d)}var Sr=Math.PI*2,Zc={centerX:0,centerY:0,ang1:0,ang2:0},Qc=({x:a,y:e},t,i,r,s,o,d,h)=>{a*=t,e*=i;let l=r*a-s*e,u=s*a+r*e;return h.x=l+o,h.y=u+d,h};function Y7(a,e){let t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:t,r=Math.cos(a),s=Math.sin(a),o=Math.cos(a+e),d=Math.sin(a+e);return[{x:r-s*i,y:s+r*i},{x:o+d*i,y:d-o*i},{x:o,y:d}]}var y0=(a,e,t,i)=>{let r=a*i-e*t<0?-1:1,s=a*t+e*i;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},$7=(a,e,t,i,r,s,o,d,h,l,u,p,y)=>{let _=Math.pow(r,2),v=Math.pow(s,2),T=Math.pow(u,2),A=Math.pow(p,2),P=_*v-_*A-v*T;P<0&&(P=0),P/=_*A+v*T,P=Math.sqrt(P)*(o===d?-1:1);let I=P*r/s*p,F=P*-s/r*u,D=l*I-h*F+(a+t)/2,H=h*I+l*F+(e+i)/2,N=(u-I)/r,j=(p-F)/s,re=(-u-I)/r,de=(-p-F)/s,Z=y0(1,0,N,j),q=y0(N,j,re,de);d===0&&q>0&&(q-=Sr),d===1&&q<0&&(q+=Sr),y.centerX=D,y.centerY=H,y.ang1=Z,y.ang2=q};function K7(a,e,t,i,r,s,o,d=0,h=0,l=0){if(s===0||o===0)return;let u=Math.sin(d*Sr/360),p=Math.cos(d*Sr/360),y=p*(e-i)/2+u*(t-r)/2,_=-u*(e-i)/2+p*(t-r)/2;if(y===0&&_===0)return;s=Math.abs(s),o=Math.abs(o);let v=Math.pow(y,2)/Math.pow(s,2)+Math.pow(_,2)/Math.pow(o,2);v>1&&(s*=Math.sqrt(v),o*=Math.sqrt(v)),$7(e,t,i,r,s,o,h,l,u,p,y,_,Zc);let{ang1:T,ang2:A}=Zc,{centerX:P,centerY:I}=Zc,F=Math.abs(A)/(Sr/4);Math.abs(1-F)<1e-7&&(F=1);let D=Math.max(Math.ceil(F),1);A/=D;let H=a[a.length-2],N=a[a.length-1],j={x:0,y:0};for(let re=0;re<D;re++){let de=Y7(T,A),{x:Z,y:q}=Qc(de[0],s,o,p,u,P,I,j),{x:se,y:te}=Qc(de[1],s,o,p,u,P,I,j),{x:Ie,y:Tt}=Qc(de[2],s,o,p,u,P,I,j);ip(a,H,N,Z,q,se,te,Ie,Tt),H=Ie,N=Tt,T+=A}}function q7(a,e,t){var i;let r=(d,h)=>{let l=h.x-d.x,u=h.y-d.y,p=Math.sqrt(l*l+u*u),y=l/p,_=u/p;return{len:p,nx:y,ny:_}},s=(d,h)=>{d===0?a.moveTo(h.x,h.y):a.lineTo(h.x,h.y)},o=e[e.length-1];for(let d=0;d<e.length;d++){let h=e[d%e.length],l=(i=h.radius)!=null?i:t;if(l<=0){s(d,h),o=h;continue}let u=e[(d+1)%e.length],p=r(h,o),y=r(h,u);if(p.len<1e-4||y.len<1e-4){s(d,h),o=h;continue}let _=Math.asin(p.nx*y.ny-p.ny*y.nx),v=1,T=!1;p.nx*y.nx-p.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,T=!0):_>0&&(v=-1,T=!0);let A=_/2,P,I=Math.abs(Math.cos(A)*l/Math.sin(A));I>Math.min(p.len/2,y.len/2)?(I=Math.min(p.len/2,y.len/2),P=Math.abs(I*Math.sin(A)/Math.cos(A))):P=l;let F=h.x+y.nx*I+-y.ny*P*v,D=h.y+y.ny*I+y.nx*P*v,H=Math.atan2(p.ny,p.nx)+Math.PI/2*v,N=Math.atan2(y.ny,y.nx)-Math.PI/2*v;d===0&&a.moveTo(F+Math.cos(H)*P,D+Math.sin(H)*P),a.arc(F,D,P,H,N,T),o=h}}function Z7(a,e,t,i){var r;let s=(h,l)=>Math.sqrt((h.x-l.x)**2+(h.y-l.y)**2),o=(h,l,u)=>({x:h.x+(l.x-h.x)*u,y:h.y+(l.y-h.y)*u}),d=e.length;for(let h=0;h<d;h++){let l=e[(h+1)%d],u=(r=l.radius)!=null?r:t;if(u<=0){h===0?a.moveTo(l.x,l.y):a.lineTo(l.x,l.y);continue}let p=e[h],y=e[(h+2)%d],_=s(p,l),v;if(_<1e-4)v=l;else{let P=Math.min(_/2,u);v=o(l,p,P/_)}let T=s(y,l),A;if(T<1e-4)A=l;else{let P=Math.min(T/2,u);A=o(l,y,P/T)}h===0?a.moveTo(v.x,v.y):a.lineTo(v.x,v.y),a.quadraticCurveTo(l.x,l.y,A.x,A.y,i)}}var Q7=new Pe,uh=class{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new qe,this._graphicsPath2D=e}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();let i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==e||s!==t)&&i.push(e,t),this}arc(e,t,i,r,s,o){this._ensurePoly(!1);let d=this._currentPoly.points;return rp(d,e,t,i,r,s,o),this}arcTo(e,t,i,r,s){this._ensurePoly();let o=this._currentPoly.points;return W7(o,e,t,i,r,s),this}arcToSvg(e,t,i,r,s,o,d){let h=this._currentPoly.points;return K7(h,this._currentPoly.lastX,this._currentPoly.lastY,o,d,e,t,i,r,s),this}bezierCurveTo(e,t,i,r,s,o,d){this._ensurePoly();let h=this._currentPoly;return ip(this._currentPoly.points,h.lastX,h.lastY,e,t,i,r,s,o,d),this}quadraticCurveTo(e,t,i,r,s){this._ensurePoly();let o=this._currentPoly;return z7(this._currentPoly.points,o.lastX,o.lastY,e,t,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));for(let i=0;i<e.instructions.length;i++){let r=e.instructions[i];this[r.action](...r.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,r,s){return this.drawShape(new Pe(e,t,i,r),s),this}circle(e,t,i,r){return this.drawShape(new ch(e,t,i),r),this}poly(e,t,i){let r=new Tr(e);return r.closePath=t,this.drawShape(r,i),this}regularPoly(e,t,i,r,s=0,o){r=Math.max(r|0,3);let d=-1*Math.PI/2+s,h=Math.PI*2/r,l=[];for(let u=0;u<r;u++){let p=d-u*h;l.push(e+i*Math.cos(p),t+i*Math.sin(p))}return this.poly(l,!0,o),this}roundPoly(e,t,i,r,s,o=0,d){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(e,t,i,r,o);let h=i*Math.sin(Math.PI/r)-.001;s=Math.min(s,h);let l=-1*Math.PI/2+o,u=Math.PI*2/r,p=(r-2)*Math.PI/r/2;for(let y=0;y<r;y++){let _=y*u+l,v=e+i*Math.cos(_),T=t+i*Math.sin(_),A=_+Math.PI+p,P=_-Math.PI-p,I=v+s*Math.cos(A),F=T+s*Math.sin(A),D=v+s*Math.cos(P),H=T+s*Math.sin(P);y===0?this.moveTo(I,F):this.lineTo(I,F),this.quadraticCurveTo(v,T,D,H,d)}return this.closePath()}roundShape(e,t,i=!1,r){return e.length<3?this:(i?Z7(this,e,t,r):q7(this,e,t),this.closePath())}filletRect(e,t,i,r,s){if(s===0)return this.rect(e,t,i,r);let o=Math.min(i,r)/2,d=Math.min(o,Math.max(-o,s)),h=e+i,l=t+r,u=d<0?-d:0,p=Math.abs(d);return this.moveTo(e,t+p).arcTo(e+u,t+u,e+p,t,p).lineTo(h-p,t).arcTo(h-u,t+u,h,t+p,p).lineTo(h,l-p).arcTo(h-u,l-u,e+i-p,l,p).lineTo(e+p,l).arcTo(e+u,l-u,e,l-p,p).closePath()}chamferRect(e,t,i,r,s,o){if(s<=0)return this.rect(e,t,i,r);let d=Math.min(s,Math.min(i,r)/2),h=e+i,l=t+r,u=[e+d,t,h-d,t,h,t+d,h,l-d,h-d,l,e+d,l,e,l-d,e,t+d];for(let p=u.length-1;p>=2;p-=2)u[p]===u[p-2]&&u[p-1]===u[p-3]&&u.splice(p-1,2);return this.poly(u,!0,o)}ellipse(e,t,i,r,s){return this.drawShape(new dh(e,t,i,r),s),this}roundRect(e,t,i,r,s,o){return this.drawShape(new hh(e,t,i,r,s),o),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),i=new Tr,i.points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){let t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Tr,e)){let t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let i=t.shape.x,r=t.shape.y;if(t.transform&&!t.transform.isIdentity()){let s=t.transform,o=i;i=s.a*i+s.c*r+s.tx,r=s.b*o+s.d*r+s.ty}this._currentPoly.points.push(i,r)}else this._currentPoly.points.push(0,0)}}buildPath(){let e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){let i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){let e=this._bounds;e.clear();let t=this.shapePrimitives;for(let i=0;i<t.length;i++){let r=t[i],s=r.shape.getBounds(Q7);r.transform?e.addRect(s,r.transform):e.addRect(s)}return e}},Mi=class a{constructor(e){this.instructions=[],this.uid=Be("graphicsPath"),this._dirty=!0;var t;typeof e=="string"?F7(e,this):this.instructions=(t=e?.slice())!=null?t:[]}get shapePath(){return this._shapePath||(this._shapePath=new uh(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,i,r,s){let o=this.instructions[this.instructions.length-1],d=this.getLastPoint(Ce.shared),h=0,l=0;if(!o||o.action!=="bezierCurveTo")h=d.x,l=d.y;else{h=o.data[2],l=o.data[3];let u=d.x,p=d.y;h=u+(u-h),l=p+(p-l)}return this.instructions.push({action:"bezierCurveTo",data:[h,l,e,t,i,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,i){let r=this.instructions[this.instructions.length-1],s=this.getLastPoint(Ce.shared),o=0,d=0;if(!r||r.action!=="quadraticCurveTo")o=s.x,d=s.y;else{o=r.data[0],d=r.data[1];let h=s.x,l=s.y;o=h+(h-o),d=l+(l-d)}return this.instructions.push({action:"quadraticCurveTo",data:[o,d,e,t,i]}),this._dirty=!0,this}rect(e,t,i,r,s){return this.instructions.push({action:"rect",data:[e,t,i,r,s]}),this._dirty=!0,this}circle(e,t,i,r){return this.instructions.push({action:"circle",data:[e,t,i,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,r,s,o,d){s||(s=r/2);let h=-1*Math.PI/2+o,l=i*2,u=Math.PI*2/l,p=[];for(let y=0;y<l;y++){let _=y%2?s:r,v=y*u+h;p.push(e+_*Math.cos(v),t+_*Math.sin(v))}return this.poly(p,!0,d),this}clone(e=!1){let t=new a;if(!e)t.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){let r=this.instructions[i];t.instructions.push({action:r.action,data:r.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let t=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,d=e.ty,h=0,l=0,u=0,p=0,y=0,_=0,v=0,T=0;for(let A=0;A<this.instructions.length;A++){let P=this.instructions[A],I=P.data;switch(P.action){case"moveTo":case"lineTo":h=I[0],l=I[1],I[0]=t*h+r*l+o,I[1]=i*h+s*l+d;break;case"bezierCurveTo":u=I[0],p=I[1],y=I[2],_=I[3],h=I[4],l=I[5],I[0]=t*u+r*p+o,I[1]=i*u+s*p+d,I[2]=t*y+r*_+o,I[3]=i*y+s*_+d,I[4]=t*h+r*l+o,I[5]=i*h+s*l+d;break;case"quadraticCurveTo":u=I[0],p=I[1],h=I[2],l=I[3],I[0]=t*u+r*p+o,I[1]=i*u+s*p+d,I[2]=t*h+r*l+o,I[3]=i*h+s*l+d;break;case"arcToSvg":h=I[5],l=I[6],v=I[0],T=I[1],I[0]=t*v+r*T,I[1]=i*v+s*T,I[5]=t*h+r*l+o,I[6]=i*h+s*l+d;break;case"circle":I[4]=or(I[3],e);break;case"rect":I[4]=or(I[4],e);break;case"ellipse":I[8]=or(I[8],e);break;case"roundRect":I[5]=or(I[5],e);break;case"addPath":I[0].transform(e);break;case"poly":I[2]=or(I[2],e);break;default:break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}};function or(a,e){return a?a.prepend(e):e.clone()}var J7=Object.defineProperty,x0=Object.getOwnPropertySymbols,e9=Object.prototype.hasOwnProperty,t9=Object.prototype.propertyIsEnumerable,v0=(a,e,t)=>e in a?J7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,vs=(a,e)=>{for(var t in e||(e={}))e9.call(e,t)&&v0(a,t,e[t]);if(x0)for(var t of x0(e))t9.call(e,t)&&v0(a,t,e[t]);return a};function a9(a,e){if(typeof a=="string"){let i=document.createElement("div");i.innerHTML=a.trim(),a=i.querySelector("svg")}let t={context:e,path:new Mi};return sp(a,t,null,null),e}function sp(a,e,t,i){let r=a.children,{fillStyle:s,strokeStyle:o}=i9(a);s&&t?t=vs(vs({},t),s):s&&(t=s),o&&i?i=vs(vs({},i),o):o&&(i=o),e.context.fillStyle=t,e.context.strokeStyle=i;let d,h,l,u,p,y,_,v,T,A,P,I,F,D,H,N,j;switch(a.nodeName.toLowerCase()){case"path":D=a.getAttribute("d"),H=new Mi(D),e.context.path(H),t&&e.context.fill(),i&&e.context.stroke();break;case"circle":_=$e(a,"cx",0),v=$e(a,"cy",0),T=$e(a,"r",0),e.context.ellipse(_,v,T,T),t&&e.context.fill(),i&&e.context.stroke();break;case"rect":d=$e(a,"x",0),h=$e(a,"y",0),N=$e(a,"width",0),j=$e(a,"height",0),A=$e(a,"rx",0),P=$e(a,"ry",0),A||P?e.context.roundRect(d,h,N,j,A||P):e.context.rect(d,h,N,j),t&&e.context.fill(),i&&e.context.stroke();break;case"ellipse":_=$e(a,"cx",0),v=$e(a,"cy",0),A=$e(a,"rx",0),P=$e(a,"ry",0),e.context.beginPath(),e.context.ellipse(_,v,A,P),t&&e.context.fill(),i&&e.context.stroke();break;case"line":l=$e(a,"x1",0),u=$e(a,"y1",0),p=$e(a,"x2",0),y=$e(a,"y2",0),e.context.beginPath(),e.context.moveTo(l,u),e.context.lineTo(p,y),i&&e.context.stroke();break;case"polygon":F=a.getAttribute("points"),I=F.match(/\d+/g).map(re=>parseInt(re,10)),e.context.poly(I,!0),t&&e.context.fill(),i&&e.context.stroke();break;case"polyline":F=a.getAttribute("points"),I=F.match(/\d+/g).map(re=>parseInt(re,10)),e.context.poly(I,!1),i&&e.context.stroke();break;case"g":case"svg":break;default:break}for(let re=0;re<r.length;re++)sp(r[re],e,t,i)}function $e(a,e,t){let i=a.getAttribute(e);return i?Number(i):t}function i9(a){let e=a.getAttribute("style"),t={},i={},r=!1,s=!1;if(e){let o=e.split(";");for(let d=0;d<o.length;d++){let h=o[d],[l,u]=h.split(":");switch(l){case"stroke":u!=="none"&&(t.color=Ee.shared.setValue(u).toNumber(),s=!0);break;case"stroke-width":t.width=Number(u);break;case"fill":u!=="none"&&(r=!0,i.color=Ee.shared.setValue(u).toNumber());break;case"fill-opacity":i.alpha=Number(u);break;case"stroke-opacity":t.alpha=Number(u);break;case"opacity":i.alpha=Number(u),t.alpha=Number(u);break}}}else{let o=a.getAttribute("stroke");o&&o!=="none"&&(s=!0,t.color=Ee.shared.setValue(o).toNumber(),t.width=$e(a,"stroke-width",1));let d=a.getAttribute("fill");d&&d!=="none"&&(r=!0,i.color=Ee.shared.setValue(d).toNumber())}return{strokeStyle:s?t:null,fillStyle:r?i:null}}var r9=Object.defineProperty,cn=Object.getOwnPropertySymbols,np=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,T0=(a,e,t)=>e in a?r9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,la=(a,e)=>{for(var t in e||(e={}))np.call(e,t)&&T0(a,t,e[t]);if(cn)for(var t of cn(e))op.call(e,t)&&T0(a,t,e[t]);return a},s9=(a,e)=>{var t={};for(var i in a)np.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&cn)for(var i of cn(a))e.indexOf(i)<0&&op.call(a,i)&&(t[i]=a[i]);return t};function n9(a){return Ee.isColorLike(a)}function S0(a){return a instanceof Ri}function w0(a){return a instanceof Lr}function o9(a,e,t){let i=Ee.shared.setValue(e??0);return a.color=i.toNumber(),a.alpha=i.alpha===1?t.alpha:i.alpha,a.texture=K.WHITE,la(la({},t),a)}function A0(a,e,t){return a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function E0(a,e,t){return e.buildLinearGradient(),a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function c9(a,e){var t;let i=la(la({},e),a);if(i.texture){if(i.texture!==K.WHITE){let o=((t=i.matrix)==null?void 0:t.clone().invert())||new ie;o.translate(i.texture.frame.x,i.texture.frame.y),o.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=o}let s=i.texture.source.style;s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update())}let r=Ee.shared.setValue(i.color);return i.alpha*=r.alpha,i.color=r.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}function Ya(a,e){if(a==null)return null;let t={},i=a;return n9(a)?o9(t,a,e):S0(a)?A0(t,a,e):w0(a)?E0(t,a,e):i.fill&&S0(i.fill)?A0(i,i.fill,e):i.fill&&w0(i.fill)?E0(i,i.fill,e):c9(i,e)}function dn(a,e){let t=e,{width:i,alignment:r,miterLimit:s,cap:o,join:d,pixelLine:h}=t,l=s9(t,["width","alignment","miterLimit","cap","join","pixelLine"]),u=Ya(a,l);return u?la({width:i,alignment:r,miterLimit:s,cap:o,join:d,pixelLine:h},u):null}var d9=Object.defineProperty,P0=Object.getOwnPropertySymbols,h9=Object.prototype.hasOwnProperty,l9=Object.prototype.propertyIsEnumerable,R0=(a,e,t)=>e in a?d9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,bi=(a,e)=>{for(var t in e||(e={}))h9.call(e,t)&&R0(a,t,e[t]);if(P0)for(var t of P0(e))l9.call(e,t)&&R0(a,t,e[t]);return a},f9=new Ce,M0=new ie,bh=class $t extends xt{constructor(){super(...arguments),this.uid=Be("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Mi,this._transform=new ie,this._fillStyle=bi({},$t.defaultFillStyle),this._strokeStyle=bi({},$t.defaultStrokeStyle),this._stateStack=[],this._tick=0,this._bounds=new qe,this._boundsDirty=!0}clone(){let e=new $t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle=bi({},this._fillStyle),e._strokeStyle=bi({},this._strokeStyle),e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Ya(e,$t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=dn(e,$t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Ya(e,$t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Ya(e,$t.defaultStrokeStyle),this}texture(e,t,i,r,s,o){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:r||0,dw:s||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?Ee.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Mi,this}fill(e,t){let i,r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?i=r.data.path:i=this._activePath.clone(),i?(e!=null&&(t!==void 0&&typeof e=="number"&&(e={color:e,alpha:t}),this._fillStyle=Ya(e,$t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:e,y:t}=this._activePath.getLastPoint(Ce.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t,i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?t=i.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=dn(e,$t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(i);else{t.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,t,i,r,s,o){this._tick++;let d=this._transform;return this._activePath.arc(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,i,r,s,o),this}arcTo(e,t,i,r,s){this._tick++;let o=this._transform;return this._activePath.arcTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}arcToSvg(e,t,i,r,s,o,d){this._tick++;let h=this._transform;return this._activePath.arcToSvg(e,t,i,r,s,h.a*o+h.c*d+h.tx,h.b*o+h.d*d+h.ty),this}bezierCurveTo(e,t,i,r,s,o,d){this._tick++;let h=this._transform;return this._activePath.bezierCurveTo(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,h.a*i+h.c*r+h.tx,h.b*i+h.d*r+h.ty,h.a*s+h.c*o+h.tx,h.b*s+h.d*o+h.ty,d),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,i,r){return this._tick++,this._activePath.ellipse(e,t,i,r,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;let i=this._transform,r=this._activePath.instructions,s=i.a*e+i.c*t+i.tx,o=i.b*e+i.d*t+i.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=o,this):(this._activePath.moveTo(s,o),this)}quadraticCurveTo(e,t,i,r,s){this._tick++;let o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}rect(e,t,i,r){return this._tick++,this._activePath.rect(e,t,i,r,this._transform.clone()),this}roundRect(e,t,i,r,s){return this._tick++,this._activePath.roundRect(e,t,i,r,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,r,s=0,o){return this._tick++,this._activePath.regularPoly(e,t,i,r,s,o),this}roundPoly(e,t,i,r,s,o){return this._tick++,this._activePath.roundPoly(e,t,i,r,s,o),this}roundShape(e,t,i,r){return this._tick++,this._activePath.roundShape(e,t,i,r),this}filletRect(e,t,i,r,s){return this._tick++,this._activePath.filletRect(e,t,i,r,s),this}chamferRect(e,t,i,r,s,o){return this._tick++,this._activePath.chamferRect(e,t,i,r,s,o),this}star(e,t,i,r,s=0,o=0){return this._tick++,this._activePath.star(e,t,i,r,s,o,this._transform.clone()),this}svg(e){return this._tick++,a9(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:bi({},this._fillStyle),strokeStyle:bi({},this._strokeStyle)}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,r,s,o){return e instanceof ie?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,r,s,o),this)}transform(e,t,i,r,s,o){return e instanceof ie?(this._transform.append(e),this):(M0.set(e,t,i,r,s,o),this._transform.append(M0),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t],r=i.action;if(r==="fill"){let s=i.data;e.addBounds(s.path.bounds)}else if(r==="texture"){let s=i.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){let s=i.data,o=s.style.alignment,d=s.style.width*(1-o),h=s.path.bounds;e.addFrame(h.minX-d,h.minY-d,h.maxX+d,h.maxY+d)}}return e}containsPoint(e){var t;if(!this.bounds.containsPoint(e.x,e.y))return!1;let i=this.instructions,r=!1;for(let s=0;s<i.length;s++){let o=i[s],d=o.data,h=d.path;if(!o.action||!h)continue;let l=d.style,u=h.shapePath.shapePrimitives;for(let p=0;p<u.length;p++){let y=u[p].shape;if(!l||!y)continue;let _=u[p].transform,v=_?_.applyInverse(e,f9):e;if(o.action==="fill")r=y.contains(v.x,v.y);else{let A=l;r=y.strokeContains(v.x,v.y,A.width,A.alignment)}let T=d.hole;if(T){let A=(t=T.shapePath)==null?void 0:t.shapePrimitives;if(A)for(let P=0;P<A.length;P++)A[P].shape.contains(v.x,v.y)&&(r=!1)}if(r)return!0}}return r}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(t),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(t)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};bh.defaultFillStyle={color:16777215,alpha:1,texture:K.WHITE,matrix:null,fill:null},bh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:K.WHITE,matrix:null,fill:null,pixelLine:!1};var dt=bh,C0=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function cp(a){let e=[],t=0;for(let i=0;i<C0.length;i++){let r=`_${C0[i]}`;e[t++]=a[r]}return t=dp(a._fill,e,t),t=u9(a._stroke,e,t),t=b9(a.dropShadow,e,t),e.join("-")}function dp(a,e,t){var i;return a&&(e[t++]=a.color,e[t++]=a.alpha,e[t++]=(i=a.fill)==null?void 0:i.styleKey),t}function u9(a,e,t){return a&&(t=dp(a,e,t),e[t++]=a.width,e[t++]=a.alignment,e[t++]=a.cap,e[t++]=a.join,e[t++]=a.miterLimit),t}function b9(a,e,t){return a&&(e[t++]=a.alpha,e[t++]=a.angle,e[t++]=a.blur,e[t++]=a.distance,e[t++]=Ee.shared.setValue(a.color).toNumber()),t}var p9=Object.defineProperty,g9=Object.defineProperties,m9=Object.getOwnPropertyDescriptors,O0=Object.getOwnPropertySymbols,_9=Object.prototype.hasOwnProperty,y9=Object.prototype.propertyIsEnumerable,I0=(a,e,t)=>e in a?p9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ut=(a,e)=>{for(var t in e||(e={}))_9.call(e,t)&&I0(a,t,e[t]);if(O0)for(var t of O0(e))y9.call(e,t)&&I0(a,t,e[t]);return a},x9=(a,e)=>g9(a,m9(e)),ph=class _i extends xt{constructor(e={}){super(),v9(e);let t=ut(ut({},_i.defaultTextStyle),e);for(let i in t){let r=i;this[r]=t[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy(ut(ut({},_i.defaultDropShadow),e)):this._dropShadow=e?this._createProxy(ut({},_i.defaultDropShadow)):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy(ut(ut({},dt.defaultFillStyle),e),()=>{this._fill=Ya(ut({},this._originalFill),dt.defaultFillStyle)})),this._fill=Ya(e===0?"black":e,dt.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy(ut(ut({},dt.defaultStrokeStyle),e),()=>{this._stroke=dn(ut({},this._originalStroke),dt.defaultStrokeStyle)})),this._stroke=dn(e,dt.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=cp(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=_i.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new _i({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?ut({},this._dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var t,i,r,s;if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let o=typeof e=="boolean"?e:e?.textureSource;(t=this._fill)!=null&&t.texture&&this._fill.texture.destroy(o),(i=this._originalFill)!=null&&i.texture&&this._originalFill.texture.destroy(o),(r=this._stroke)!=null&&r.texture&&this._stroke.texture.destroy(o),(s=this._originalStroke)!=null&&s.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(i,r,s)=>(i[r]=s,t?.(r,s),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Ee.isColorLike(e)||e instanceof Lr||e instanceof Ri)}};ph.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},ph.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Pt=ph;function v9(a){var e,t,i,r,s;let o=a;if(typeof o.dropShadow=="boolean"&&o.dropShadow){let d=Pt.defaultDropShadow;a.dropShadow={alpha:(e=o.dropShadowAlpha)!=null?e:d.alpha,angle:(t=o.dropShadowAngle)!=null?t:d.angle,blur:(i=o.dropShadowBlur)!=null?i:d.blur,color:(r=o.dropShadowColor)!=null?r:d.color,distance:(s=o.dropShadowDistance)!=null?s:d.distance}}if(o.strokeThickness!==void 0){let d=o.stroke,h={};if(Ee.isColorLike(d))h.color=d;else if(d instanceof Lr||d instanceof Ri)h.fill=d;else if(Object.hasOwnProperty.call(d,"color")||Object.hasOwnProperty.call(d,"fill"))h=d;else throw new Error("Invalid stroke value.");a.stroke=x9(ut({},h),{width:o.strokeThickness})}if(Array.isArray(o.fillGradientStops)){let d;a.fontSize==null?a.fontSize=Pt.defaultTextStyle.fontSize:typeof a.fontSize=="string"?d=parseInt(a.fontSize,10):d=a.fontSize;let h=new Lr(0,0,0,d*1.7),l=o.fillGradientStops.map(u=>Ee.shared.setValue(u).toNumber());l.forEach((u,p)=>{let y=p/(l.length-1);h.addColorStop(y,u)}),a.fill={fill:h}}}var T9=new qe;function hp(a,e,t,i){let r=T9;r.minX=0,r.minY=0,r.maxX=a.width/i|0,r.maxY=a.height/i|0;let s=ze.getOptimalTexture(r.width,r.height,i,!1);return s.source.uploadMethodId="image",s.source.resource=a,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/i,s.frame.height=t/i,s.source.emit("update",s.source),s.updateUvs(),s}var S9=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function hn(a){let e=typeof a.fontSize=="number"?`${a.fontSize}px`:a.fontSize,t=a.fontFamily;Array.isArray(a.fontFamily)||(t=a.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let r=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!S9.includes(r)&&(r=`"${r}"`),t[i]=r}return`${a.fontStyle} ${a.fontVariant} ${a.fontWeight} ${e} ${t.join(",")}`}var Jc={willReadFrequently:!0},jt=class ee{static get experimentalLetterSpacingSupported(){let e=ee._experimentalLetterSpacingSupported;if(e!==void 0){let t=xe.get().getCanvasRenderingContext2D().prototype;e=ee._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,r,s,o,d,h,l){this.text=e,this.style=t,this.width=i,this.height=r,this.lines=s,this.lineWidths=o,this.lineHeight=d,this.maxLineWidth=h,this.fontProperties=l}static measureText(e=" ",t,i=ee._canvas,r=t.wordWrap){var s;let o=`${e}:${t.styleKey}`;if(ee._measurementCache[o])return ee._measurementCache[o];let d=hn(t),h=ee.measureFont(d);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);let l=ee.__context;l.font=d;let u=(r?ee._wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),p=new Array(u.length),y=0;for(let P=0;P<u.length;P++){let I=ee._measureText(u[P],t.letterSpacing,l);p[P]=I,y=Math.max(y,I)}let _=((s=t._stroke)==null?void 0:s.width)||0,v=y+_;t.dropShadow&&(v+=t.dropShadow.distance);let T=t.lineHeight||h.fontSize,A=Math.max(T,h.fontSize+_)+(u.length-1)*(T+t.leading);return t.dropShadow&&(A+=t.dropShadow.distance),new ee(e,t,v,A,u,p,T+t.leading,y,h)}static _measureText(e,t,i){let r=!1;ee.experimentalLetterSpacingSupported&&(ee.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(e),o=s.width,d=-s.actualBoundingBoxLeft,h=s.actualBoundingBoxRight-d;if(o>0)if(r)o-=t,h-=t;else{let l=(ee.graphemeSegmenter(e).length-1)*t;o+=l,h+=l}return Math.max(o,h)}static _wordWrap(e,t,i=ee._canvas){let r=i.getContext("2d",Jc),s=0,o="",d="",h=Object.create(null),{letterSpacing:l,whiteSpace:u}=t,p=ee._collapseSpaces(u),y=ee._collapseNewlines(u),_=!p,v=t.wordWrapWidth+l,T=ee._tokenize(e);for(let A=0;A<T.length;A++){let P=T[A];if(ee._isNewline(P)){if(!y){d+=ee._addLine(o),_=!p,o="",s=0;continue}P=" "}if(p){let F=ee.isBreakingSpace(P),D=ee.isBreakingSpace(o[o.length-1]);if(F&&D)continue}let I=ee._getFromCache(P,l,h,r);if(I>v)if(o!==""&&(d+=ee._addLine(o),o="",s=0),ee.canBreakWords(P,t.breakWords)){let F=ee.wordWrapSplit(P);for(let D=0;D<F.length;D++){let H=F[D],N=H,j=1;for(;F[D+j];){let de=F[D+j];if(!ee.canBreakChars(N,de,P,D,t.breakWords))H+=de;else break;N=de,j++}D+=j-1;let re=ee._getFromCache(H,l,h,r);re+s>v&&(d+=ee._addLine(o),_=!1,o="",s=0),o+=H,s+=re}}else{o.length>0&&(d+=ee._addLine(o),o="",s=0);let F=A===T.length-1;d+=ee._addLine(P,!F),_=!1,o="",s=0}else I+s>v&&(_=!1,d+=ee._addLine(o),o="",s=0),(o.length>0||!ee.isBreakingSpace(P)||_)&&(o+=P,s+=I)}return d+=ee._addLine(o,!1),d}static _addLine(e,t=!0){return e=ee._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,i,r){let s=i[e];return typeof s!="number"&&(s=ee._measureText(e,t,r)+t,i[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let i=e[t];if(!ee.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ee._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ee._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let t=[],i="";if(typeof e!="string")return t;for(let r=0;r<e.length;r++){let s=e[r],o=e[r+1];if(ee.isBreakingSpace(s,o)||ee._isNewline(s)){i!==""&&(t.push(i),i=""),t.push(s);continue}i+=s}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,r,s){return!0}static wordWrapSplit(e){return ee.graphemeSegmenter(e)}static measureFont(e){if(ee._fonts[e])return ee._fonts[e];let t=ee._context;t.font=e;let i=t.measureText(ee.METRICS_STRING+ee.BASELINE_SYMBOL),r={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return ee._fonts[e]=r,r}static clearMetrics(e=""){e?delete ee._fonts[e]:ee._fonts={}}static get _canvas(){if(!ee.__canvas){let e;try{let t=new OffscreenCanvas(0,0),i=t.getContext("2d",Jc);if(i!=null&&i.measureText)return ee.__canvas=t,t;e=xe.get().createCanvas()}catch{e=xe.get().createCanvas()}e.width=e.height=10,ee.__canvas=e}return ee.__canvas}static get _context(){return ee.__context||(ee.__context=ee._canvas.getContext("2d",Jc)),ee.__context}};jt.METRICS_STRING="|\xC9q\xC5",jt.BASELINE_SYMBOL="M",jt.BASELINE_MULTIPLIER=1.4,jt.HEIGHT_MULTIPLIER=2,jt.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let a=new Intl.Segmenter;return e=>[...a.segment(e)].map(t=>t.segment)}return a=>[...a]})(),jt.experimentalLetterSpacing=!1,jt._fonts={},jt._newlines=[10,13],jt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],jt._measurementCache={};var na=jt;function ln(a,e){var t;if(a.texture===K.WHITE&&!a.fill)return Ee.shared.setValue(a.color).setAlpha((t=a.alpha)!=null?t:1).toHexa();if(a.fill){if(a.fill instanceof Ri){let i=a.fill,r=e.createPattern(i.texture.source.resource,"repeat"),s=i.transform.copyTo(ie.shared);return s.scale(i.texture.frame.width,i.texture.frame.height),r.setTransform(s),r}else if(a.fill instanceof Lr){let i=a.fill;if(i.type==="linear"){let r=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(s=>{r.addColorStop(s.offset,Ee.shared.setValue(s.color).toHex())}),r}}}else{let i=e.createPattern(a.texture.source.resource,"repeat"),r=a.matrix.copyTo(ie.shared);return r.scale(a.texture.frame.width,a.texture.frame.height),i.setTransform(r),i}return"red"}var fn=class{constructor(e){this._activeTextures={},this._renderer=e}getTextureSize(e,t,i){let r=na.measureText(e||" ",i),s=Math.ceil(Math.ceil(Math.max(1,r.width)+i.padding*2)*t),o=Math.ceil(Math.ceil(Math.max(1,r.height)+i.padding*2)*t);return s=Math.ceil(s-1e-6),o=Math.ceil(o-1e-6),s=Ai(s),o=Ai(o),{width:s,height:o}}getTexture(e,t,i,r){typeof e=="string"&&(e={text:e,style:i,resolution:t}),e.style instanceof Pt||(e.style=new Pt(e.style));let{texture:s,canvasAndContext:o}=this.createTextureAndCanvas(e);return this._renderer.texture.initSource(s._source),ca.returnCanvasAndContext(o),s}createTextureAndCanvas(e){var t;let{text:i,style:r}=e,s=(t=e.resolution)!=null?t:this._renderer.resolution,o=na.measureText(i||" ",r),d=Math.ceil(Math.ceil(Math.max(1,o.width)+r.padding*2)*s),h=Math.ceil(Math.ceil(Math.max(1,o.height)+r.padding*2)*s),l=ca.getOptimalCanvasAndContext(d,h),{canvas:u}=l;this.renderTextToCanvas(i,r,s,l);let p=hp(u,d,h,s);if(r.trim){let y=R7(u,s);p.frame.copyFrom(y),p.updateUvs()}return{texture:p,canvasAndContext:l}}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let t=e._getKey();if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;let{texture:i,canvasAndContext:r}=this.createTextureAndCanvas(e);return this._activeTextures[t]={canvasAndContext:r,texture:i,usageCount:1},i}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];if(t.usageCount--,t.usageCount===0){ca.returnCanvasAndContext(t.canvasAndContext),ze.returnTexture(t.texture);let i=t.texture.source;i.resource=null,i.uploadMethodId="unknown",i.alphaMode="no-premultiply-alpha",this._activeTextures[e]=null}}getReferenceCount(e){return this._activeTextures[e].usageCount}renderTextToCanvas(e,t,i,r){var s,o,d,h,l;let{canvas:u,context:p}=r,y=hn(t),_=na.measureText(e||" ",t),v=_.lines,T=_.lineHeight,A=_.lineWidths,P=_.maxLineWidth,I=_.fontProperties,F=u.height;if(p.resetTransform(),p.scale(i,i),p.textBaseline=t.textBaseline,(s=t._stroke)!=null&&s.width){let j=t._stroke;p.lineWidth=j.width,p.miterLimit=j.miterLimit,p.lineJoin=j.join,p.lineCap=j.cap}p.font=y;let D,H,N=t.dropShadow?2:1;for(let j=0;j<N;++j){let re=t.dropShadow&&j===0,de=re?Math.ceil(Math.max(1,F)+t.padding*2):0,Z=de*i;if(re){p.fillStyle="black",p.strokeStyle="black";let te=t.dropShadow,Ie=te.color,Tt=te.alpha;p.shadowColor=Ee.shared.setValue(Ie).setAlpha(Tt).toRgbaString();let ne=te.blur*i,he=te.distance*i;p.shadowBlur=ne,p.shadowOffsetX=Math.cos(te.angle)*he,p.shadowOffsetY=Math.sin(te.angle)*he+Z}else p.fillStyle=t._fill?ln(t._fill,p):null,(o=t._stroke)!=null&&o.width&&(p.strokeStyle=ln(t._stroke,p)),p.shadowColor="black";let q=(T-I.fontSize)/2;T-I.fontSize<0&&(q=0);let se=(h=(d=t._stroke)==null?void 0:d.width)!=null?h:0;for(let te=0;te<v.length;te++)D=se/2,H=se/2+te*T+I.ascent+q,t.align==="right"?D+=P-A[te]:t.align==="center"&&(D+=(P-A[te])/2),(l=t._stroke)!=null&&l.width&&this._drawLetterSpacing(v[te],t,r,D+t.padding,H+t.padding-de,!0),t._fill!==void 0&&this._drawLetterSpacing(v[te],t,r,D+t.padding,H+t.padding-de)}}_drawLetterSpacing(e,t,i,r,s,o=!1){let{context:d}=i,h=t.letterSpacing,l=!1;if(na.experimentalLetterSpacingSupported&&(na.experimentalLetterSpacing?(d.letterSpacing=`${h}px`,d.textLetterSpacing=`${h}px`,l=!0):(d.letterSpacing="0px",d.textLetterSpacing="0px")),h===0||l){o?d.strokeText(e,r,s):d.fillText(e,r,s);return}let u=r,p=na.graphemeSegmenter(e),y=d.measureText(e).width,_=0;for(let v=0;v<p.length;++v){let T=p[v];o?d.strokeText(T,u,s):d.fillText(T,u,s);let A="";for(let P=v+1;P<p.length;++P)A+=p[P];_=d.measureText(A).width,u+=y-_+h,y=_}}destroy(){this._activeTextures=null}};fn.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"canvasText"},pe.add(fn),pe.add(on);var w9=Object.defineProperty,un=Object.getOwnPropertySymbols,lp=Object.prototype.hasOwnProperty,fp=Object.prototype.propertyIsEnumerable,G0=(a,e,t)=>e in a?w9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,A9=(a,e)=>{for(var t in e||(e={}))lp.call(e,t)&&G0(a,t,e[t]);if(un)for(var t of un(e))fp.call(e,t)&&G0(a,t,e[t]);return a},E9=(a,e)=>{var t={};for(var i in a)lp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&un)for(var i of un(a))e.indexOf(i)<0&&fp.call(a,i)&&(t[i]=a[i]);return t},We=class a extends ha{constructor(e){e instanceof dt&&(e={context:e});let t=e||{},{context:i,roundPixels:r}=t,s=E9(t,["context","roundPixels"]);super(A9({label:"Graphics"},s)),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new dt,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=r??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new a(this._context.clone()):(this._ownedContext=null,new a(this._context))}lineStyle(e,t,i){let r={};return e&&(r.width=e),t&&(r.color=t),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(e,t){let i={};return e!==void 0&&(i.color=e),t!==void 0&&(i.alpha=t),this.context.fillStyle=i,this}endFill(){this.context.fill();let e=this.context.strokeStyle;return(e.width!==dt.defaultStrokeStyle.width||e.color!==dt.defaultStrokeStyle.color||e.alpha!==dt.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return this._callContextMethod("circle",e)}drawEllipse(...e){return this._callContextMethod("ellipse",e)}drawPolygon(...e){return this._callContextMethod("poly",e)}drawRect(...e){return this._callContextMethod("rect",e)}drawRoundedRect(...e){return this._callContextMethod("roundRect",e)}drawStar(...e){return this._callContextMethod("star",e)}},P9={name:"local-uniform-msdf-bit",vertex:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32,
uRound:f32,
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:` 
outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
`}},R9={name:"local-uniform-msdf-bit",vertex:{header:`
uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix *= uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
uniform float uDistance;
`,main:` 
outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
`}},M9={name:"msdf-bit",fragment:{header:`
fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

// MSDF
var median = msdfColor.r + msdfColor.g + msdfColor.b -
min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

var screenPxDistance = distance * (median - 0.5);
var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
var coverage: f32 = pow(shapeColor.a * alpha, gamma);

return coverage;

}
`}},C9={name:"msdf-bit",fragment:{header:`
float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

// MSDF
float median = msdfColor.r + msdfColor.g + msdfColor.b -
            min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
            max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

float screenPxDistance = distance * (median - 0.5);
float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
float gamma = mix(1.0, 1.0 / 2.2, luma);
float coverage = pow(shapeColor.a * alpha, gamma);  

return coverage;
}
`}},ed,td,gh=class extends ht{constructor(){let e=new Je({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),t=Oi();ed!=null||(ed=zr({name:"sdf-shader",bits:[_l,xl(t),P9,M9,Wr]})),td!=null||(td=Vr({name:"sdf-shader",bits:[yl,vl(t),R9,C9,Yr]})),super({glProgram:td,gpuProgram:ed,resources:{localUniforms:e,batchSamplers:Tl(t)}})}},ad=0,B0=500;function Qt(...a){ad!==B0&&ad++}var bn=class extends xt{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return this.fontFamily}get pageTextures(){return this.pages}get size(){return this.fontMetrics.fontSize}get distanceFieldRange(){return this.distanceField.range}get distanceFieldType(){return this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(let i in this.chars)(t=this.chars[i].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}};function up(a){if(a==="")return[];typeof a=="string"&&(a=[a]);let e=[];for(let t=0,i=a.length;t<i;t++){let r=a[t];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let d=s,h=o;d<=h;d++)e.push(String.fromCharCode(d))}else e.push(...Array.from(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var O9=Object.defineProperty,F0=Object.getOwnPropertySymbols,I9=Object.prototype.hasOwnProperty,G9=Object.prototype.propertyIsEnumerable,D0=(a,e,t)=>e in a?O9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,k0=(a,e)=>{for(var t in e||(e={}))I9.call(e,t)&&D0(a,t,e[t]);if(F0)for(var t of F0(e))G9.call(e,t)&&D0(a,t,e[t]);return a},bp=class pp extends bn{constructor(e){var t,i,r;super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let s=k0(k0({},pp.defaultOptions),e);this._textureSize=s.textureSize,this._mipmap=s.mipmap;let o=s.style.clone();s.overrideFill&&(o._fill.color=16777215,o._fill.alpha=1,o._fill.texture=K.WHITE,o._fill.fill=null),this.applyFillAsTint=s.overrideFill;let d=o.fontSize;o.fontSize=this.baseMeasurementFontSize;let h=hn(o);s.overrideSize?o._stroke&&(o._stroke.width*=this.baseRenderedFontSize/d):o.fontSize=this.baseRenderedFontSize=d,this._style=o,this._skipKerning=(t=s.skipKerning)!=null?t:!1,this.resolution=(i=s.resolution)!=null?i:1,this._padding=(r=s.padding)!=null?r:4,this.fontMetrics=na.measureFont(h),this.lineHeight=o.lineHeight||this.fontMetrics.fontSize||o.fontSize}ensureCharacters(e){var t,i,r,s;let o=up(e).filter(D=>!this._currentChars.includes(D)).filter((D,H,N)=>N.indexOf(D)===H);if(!o.length)return;this._currentChars=[...this._currentChars,...o];let d;this._currentPageIndex===-1?d=this._nextPage():d=this.pages[this._currentPageIndex];let{canvas:h,context:l}=d.canvasAndContext,u=d.texture.source,p=this._style,y=this._currentX,_=this._currentY,v=this.baseRenderedFontSize/this.baseMeasurementFontSize,T=this._padding*v,A=0,P=!1,I=h.width/this.resolution,F=h.height/this.resolution;for(let D=0;D<o.length;D++){let H=o[D],N=na.measureText(H,p,h,!1);N.lineHeight=N.height;let j=N.width*v,re=Math.ceil((p.fontStyle==="italic"?2:1)*j),de=N.height*v,Z=re+T*2,q=de+T*2;if(P=!1,H!==`
`&&H!=="\r"&&H!=="	"&&H!==" "&&(P=!0,A=Math.ceil(Math.max(q,A))),y+Z>I&&(_+=A,A=q,y=0,_+A>F)){u.update();let te=this._nextPage();h=te.canvasAndContext.canvas,l=te.canvasAndContext.context,u=te.texture.source,_=0}let se=j/v-((i=(t=p.dropShadow)==null?void 0:t.distance)!=null?i:0)-((s=(r=p._stroke)==null?void 0:r.width)!=null?s:0);if(this.chars[H]={id:H.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:se,kerning:{}},P){this._drawGlyph(l,N,y+T,_+T,v,p);let te=u.width*v,Ie=u.height*v,Tt=new Pe(y/te*u.width,_/Ie*u.height,Z/te*u.width,q/Ie*u.height);this.chars[H].texture=new K({source:u,frame:Tt}),y+=Math.ceil(Z)}}u.update(),this._currentX=y,this._currentY=_,this._skipKerning&&this._applyKerning(o,l)}get pageTextures(){return this.pages}_applyKerning(e,t){let i=this._measureCache;for(let r=0;r<e.length;r++){let s=e[r];for(let o=0;o<this._currentChars.length;o++){let d=this._currentChars[o],h=i[s];h||(h=i[s]=t.measureText(s).width);let l=i[d];l||(l=i[d]=t.measureText(d).width);let u=t.measureText(s+d).width,p=u-(h+l);p&&(this.chars[s].kerning[d]=p),u=t.measureText(s+d).width,p=u-(h+l),p&&(this.chars[d].kerning[s]=p)}}}_nextPage(){this._currentPageIndex++;let e=this.resolution,t=ca.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);let i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new K({source:new Ma({resource:t.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),s={canvasAndContext:t,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,t,i){var r;t.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=hn(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;let s=t._stroke,o=(r=s?.width)!=null?r:0;if(s&&(e.lineWidth=o,e.lineJoin=s.join,e.miterLimit=s.miterLimit,e.strokeStyle=ln(s,e)),t._fill&&(e.fillStyle=ln(t._fill,e)),t.dropShadow){let d=t.dropShadow,h=Ee.shared.setValue(d.color).toArray(),l=d.blur*i,u=d.distance*i;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${d.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(d.angle)*u,e.shadowOffsetY=Math.sin(d.angle)*u}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,i,r,s,o){var d;let h=t.text,l=t.fontProperties,u=o._stroke,p=((d=u?.width)!=null?d:0)*s,y=i+p/2,_=r-p/2,v=l.descent*s,T=t.lineHeight*s;o.stroke&&p&&e.strokeText(h,y,_+T-v),o._fill&&e.fillText(h,y,_+T-v)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{canvasAndContext:t,texture:i}=this.pages[e];ca.returnCanvasAndContext(t),i.destroy(!0)}this.pages=null}};bp.defaultOptions={textureSize:512,style:new Pt,mipmap:!0};var U0=bp;function gp(a,e,t,i){let r={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=t.baseLineOffset;let s=r.lines[0],o=null,d=!0,h={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=v=>{let T=s.width;for(let A=0;A<h.index;A++){let P=v.positions[A];s.chars.push(v.chars[A]),s.charPositions.push(P+T)}s.width+=v.width,d=!1,h.width=0,h.index=0,h.chars.length=0},u=()=>{let v=s.chars.length-1;if(i){let T=s.chars[v];for(;T===" ";)s.width-=t.chars[T].xAdvance,T=s.chars[--v]}r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},d=!0,r.lines.push(s),r.height+=t.lineHeight},p=t.baseMeasurementFontSize/e.fontSize,y=e.letterSpacing*p,_=e.wordWrapWidth*p;for(let v=0;v<a.length+1;v++){let T,A=v===a.length;A||(T=a[v]);let P=t.chars[T]||t.chars[" "];if(/(?:\s)/.test(T)||T==="\r"||T===`
`||A){if(!d&&e.wordWrap&&s.width+h.width-y>_?(u(),l(h),A||s.charPositions.push(0)):(h.start=s.width,l(h),A||s.charPositions.push(0)),T==="\r"||T===`
`)s.width!==0&&u();else if(!A){let I=P.xAdvance+(P.kerning[o]||0)+y;s.width+=I,s.spaceWidth=I,s.spacesIndex.push(s.charPositions.length),s.chars.push(T)}}else{let I=P.kerning[o]||0,F=P.xAdvance+I+y;h.positions[h.index++]=h.width+I,h.chars.push(T),h.width+=F}o=T}return u(),e.align==="center"?B9(r):e.align==="right"?F9(r):e.align==="justify"&&D9(r),r}function B9(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width/2-t.width/2;for(let r=0;r<t.charPositions.length;r++)t.charPositions[r]+=i}}function F9(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width-t.width;for(let r=0;r<t.charPositions.length;r++)t.charPositions[r]+=i}}function D9(a){let e=a.width;for(let t=0;t<a.lines.length;t++){let i=a.lines[t],r=0,s=i.spacesIndex[r++],o=0,d=i.spacesIndex.length,h=(e-i.width)/d;for(let l=0;l<i.charPositions.length;l++)l===s&&(s=i.spacesIndex[r++],o+=h),i.charPositions[l]+=o}}var k9=Object.defineProperty,L0=Object.getOwnPropertySymbols,U9=Object.prototype.hasOwnProperty,L9=Object.prototype.propertyIsEnumerable,N0=(a,e,t)=>e in a?k9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,id=(a,e)=>{for(var t in e||(e={}))U9.call(e,t)&&N0(a,t,e[t]);if(L0)for(var t of L0(e))L9.call(e,t)&&N0(a,t,e[t]);return a},Ts=0,N9=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(a,e){var t;let i=`${e.fontFamily}-bitmap`,r=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,r=!1;else if(e._stroke||e.dropShadow){let o=e.styleKey;o=o.substring(0,o.lastIndexOf("-")),i=`${o}-bitmap`,r=!1}if(!Oe.has(i)){let o=new U0(id({style:e,overrideFill:r,overrideSize:!0},this.defaultOptions));Ts++,Ts>50&&Qt("BitmapText",`You have dynamically created ${Ts} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{Ts--,Oe.remove(i)}),Oe.set(i,o)}let s=Oe.get(i);return(t=s.ensureCharacters)==null||t.call(s,a),s}getLayout(a,e,t=!0){let i=this.getFont(a,e);return gp([...a],e,i,t)}measureText(a,e,t=!0){return this.getLayout(a,e,t)}install(...a){var e,t,i,r;let s=a[0];typeof s=="string"&&(s={name:s,style:a[1],chars:(e=a[2])==null?void 0:e.chars,resolution:(t=a[2])==null?void 0:t.resolution,padding:(i=a[2])==null?void 0:i.padding,skipKerning:(r=a[2])==null?void 0:r.skipKerning});let o=s?.name;if(!o)throw new Error("[BitmapFontManager] Property `name` is required.");s=id(id({},this.defaultOptions),s);let d=s.style,h=d instanceof Pt?d:new Pt(d),l=h._fill.fill!==null&&h._fill.fill!==void 0,u=new U0({style:h,overrideFill:l,skipKerning:s.skipKerning,padding:s.padding,resolution:s.resolution,overrideSize:!1}),p=up(s.chars);return u.ensureCharacters(p.join("")),Oe.set(`${o}-bitmap`,u),u.once("destroy",()=>Oe.remove(`${o}-bitmap`)),u}uninstall(a){let e=`${a}-bitmap`,t=Oe.get(e);t&&t.destroy()}},pn=new N9,gn=class{constructor(e){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(e){let t=this._getGpuBitmapText(e);return e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,t)),this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){let i=this._getGpuBitmapText(e);j0(e,i),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,i)),this._renderer.renderPipes.graphics.addRenderable(i,t),i.context.customShader&&this._updateDistanceField(e)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(e.uid)}_destroyRenderableByUid(e){let t=this._gpuBitmapText[e].context;t.customShader&&(ye.return(t.customShader),t.customShader=null),ye.return(this._gpuBitmapText[e]),this._gpuBitmapText[e]=null}updateRenderable(e){let t=this._getGpuBitmapText(e);j0(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){let{context:i}=t,r=pn.getFont(e.text,e._style);i.clear(),r.distanceField.type!=="none"&&(i.customShader||(i.customShader=ye.get(gh)));let s=Array.from(e.text),o=e._style,d=r.baseLineOffset,h=gp(s,o,r,!0),l=0,u=o.padding,p=h.scale,y=h.width,_=h.height+h.offsetY;o._stroke&&(y+=o._stroke.width/p,_+=o._stroke.width/p),i.translate(-e._anchor._x*y-u,-e._anchor._y*_-u).scale(p,p);let v=r.applyFillAsTint?o._fill.color:16777215;for(let T=0;T<h.lines.length;T++){let A=h.lines[T];for(let P=0;P<A.charPositions.length;P++){let I=s[l++],F=r.chars[I];F!=null&&F.texture&&i.texture(F.texture,v||"black",Math.round(A.charPositions[P]+F.xOffset),Math.round(d+F.yOffset))}d+=r.lineHeight}}_getGpuBitmapText(e){return this._gpuBitmapText[e.uid]||this.initGpuText(e)}initGpuText(e){let t=ye.get(We);return this._gpuBitmapText[e.uid]=t,this._updateContext(e,t),e.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[e.uid]}_updateDistanceField(e){let t=this._getGpuBitmapText(e).context,i=e._style.fontFamily,r=Oe.get(`${i}-bitmap`),{a:s,b:o,c:d,d:h}=e.groupTransform,l=Math.sqrt(s*s+o*o),u=Math.sqrt(d*d+h*h),p=(Math.abs(l)+Math.abs(u))/2,y=r.baseRenderedFontSize/e._style.fontSize,_=p*r.distanceField.range*(1/y);t.customShader.resources.localUniforms.uniforms.uDistance=_}destroy(){for(let e in this._gpuBitmapText)this._destroyRenderableByUid(e);this._gpuBitmapText=null,this._renderer=null}};gn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"bitmapText"};function j0(a,e){e.groupTransform=a.groupTransform,e.groupColorAlpha=a.groupColorAlpha,e.groupColor=a.groupColor,e.groupBlendMode=a.groupBlendMode,e.globalDisplayStatus=a.globalDisplayStatus,e.groupTransform=a.groupTransform,e.localDisplayStatus=a.localDisplayStatus,e.groupAlpha=a.groupAlpha,e._roundPixels=a._roundPixels}pe.add(gn);var mn=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.textureNeedsUploading?(t.textureNeedsUploading=!1,!0):t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.htmlText.decreaseReferenceCount(t.currentKey),ye.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),r=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e).catch(s=>{}),e._didTextUpdate=!1,sh(r,e)}async _updateGpuText(e){var t;e._didTextUpdate=!1;let i=this._getGpuText(e);if(i.generatingTexture)return;let r=e._getKey();this._renderer.htmlText.decreaseReferenceCount(i.currentKey),i.generatingTexture=!0,i.currentKey=r;let s=(t=e.resolution)!=null?t:this._renderer.resolution,o=await this._renderer.htmlText.getManagedTexture(e.text,s,e._style,e._getKey()),d=i.batchableSprite;d.texture=i.texture=o,i.generatingTexture=!1,i.textureNeedsUploading=!0,e.onViewUpdate(),sh(d,e)}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:K.EMPTY,currentKey:"--",batchableSprite:ye.get(Pi),textureNeedsUploading:!1,generatingTexture:!1},i=t.batchableSprite;return i.renderable=e,i.transform=e.groupTransform,i.texture=K.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._gpuText[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};mn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"htmlText"};function j9(){let{userAgent:a}=xe.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(a)}var X0="http://www.w3.org/2000/svg",H0="http://www.w3.org/1999/xhtml",_n=class{constructor(){this.svgRoot=document.createElementNS(X0,"svg"),this.foreignObject=document.createElementNS(X0,"foreignObject"),this.domElement=document.createElementNS(H0,"div"),this.styleElement=document.createElementNS(H0,"style"),this.image=new Image;let{foreignObject:e,svgRoot:t,styleElement:i,domElement:r}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",t.appendChild(e),e.appendChild(i),e.appendChild(r)}};function X9(a){let e=a._stroke,t=a._fill,i=[`div { ${[`color: ${Ee.shared.setValue(t.color).toHex()}`,`font-size: ${a.fontSize}px`,`font-family: ${a.fontFamily}`,`font-weight: ${a.fontWeight}`,`font-style: ${a.fontStyle}`,`font-variant: ${a.fontVariant}`,`letter-spacing: ${a.letterSpacing}px`,`text-align: ${a.align}`,`padding: ${a.padding}px`,`white-space: ${a.whiteSpace==="pre"&&a.wordWrap?"pre-wrap":a.whiteSpace}`,...a.lineHeight?[`line-height: ${a.lineHeight}px`]:[],...a.wordWrap?[`word-wrap: ${a.breakWords?"break-all":"break-word"}`,`max-width: ${a.wordWrapWidth}px`]:[],...e?[_p(e)]:[],...a.dropShadow?[mp(a.dropShadow)]:[],...a.cssOverrides].join(";")} }`];return H9(a.tagStyles,i),i.join(" ")}function mp(a){let e=Ee.shared.setValue(a.color).setAlpha(a.alpha).toHexa(),t=Math.round(Math.cos(a.angle)*a.distance),i=Math.round(Math.sin(a.angle)*a.distance),r=`${t}px ${i}px`;return a.blur>0?`text-shadow: ${r} ${a.blur}px ${e}`:`text-shadow: ${r} ${e}`}function _p(a){return[`-webkit-text-stroke-width: ${a.width}px`,`-webkit-text-stroke-color: ${Ee.shared.setValue(a.color).toHex()}`,`text-stroke-width: ${a.width}px`,`text-stroke-color: ${Ee.shared.setValue(a.color).toHex()}`,"paint-order: stroke"].join(";")}var z0={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},V0={fill:a=>`color: ${Ee.shared.setValue(a).toHex()}`,breakWords:a=>`word-wrap: ${a?"break-all":"break-word"}`,stroke:_p,dropShadow:mp};function H9(a,e){for(let t in a){let i=a[t],r=[];for(let s in i)V0[s]?r.push(V0[s](i[s])):z0[s]&&r.push(z0[s].replace("{{VALUE}}",i[s]));e.push(`${t} { ${r.join(";")} }`)}}var z9=Object.defineProperty,W0=Object.getOwnPropertySymbols,V9=Object.prototype.hasOwnProperty,W9=Object.prototype.propertyIsEnumerable,Y0=(a,e,t)=>e in a?z9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Y9=(a,e)=>{for(var t in e||(e={}))V9.call(e,t)&&Y0(a,t,e[t]);if(W0)for(var t of W0(e))W9.call(e,t)&&Y0(a,t,e[t]);return a},yn=class a extends Pt{constructor(e={}){var t,i;super(e),this._cssOverrides=[],(t=this.cssOverrides)!=null||(this.cssOverrides=e.cssOverrides),this.tagStyles=(i=e.tagStyles)!=null?i:{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=cp(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new a({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?Y9({},this.dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=X9(this)),this._cssStyle}addOverride(...e){let t=e.filter(i=>!this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides.push(...t),this.update())}removeOverride(...e){let t=e.filter(i=>this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!t.includes(i)),this.update())}set fill(e){super.fill=e}set stroke(e){super.stroke=e}};function $9(a,e){let t=e.fontFamily,i=[],r={},s=/font-family:([^;"\s]+)/g,o=a.match(s);function d(h){r[h]||(i.push(h),r[h]=!0)}if(Array.isArray(t))for(let h=0;h<t.length;h++)d(t[h]);else d(t);o&&o.forEach(h=>{let l=h.split(":")[1].trim();d(l)});for(let h in e.tagStyles){let l=e.tagStyles[h].fontFamily;d(l)}return i}async function K9(a){let e=await(await xe.get().fetch(a)).blob(),t=new FileReader;return await new Promise((i,r)=>{t.onloadend=()=>i(t.result),t.onerror=r,t.readAsDataURL(e)})}async function $0(a,e){let t=await K9(e);return`@font-face {
font-family: "${a.fontFamily}";
src: url('${t}');
font-weight: ${a.fontWeight};
font-style: ${a.fontStyle};
}`}var Ss=new Map;async function q9(a,e,t){let i=a.filter(r=>Oe.has(`${r}-and-url`)).map((r,s)=>{if(!Ss.has(r)){let{url:o}=Oe.get(`${r}-and-url`);s===0?Ss.set(r,$0({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:r},o)):Ss.set(r,$0({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:r},o))}return Ss.get(r)});return(await Promise.all(i)).join(`
`)}function Z9(a,e,t,i,r){let{domElement:s,styleElement:o,svgRoot:d}=r;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${a}</div>`,s.setAttribute("style",`transform: scale(${t});transform-origin: top left; display: inline-block`),o.textContent=i;let{width:h,height:l}=r.image;return d.setAttribute("width",h.toString()),d.setAttribute("height",l.toString()),new XMLSerializer().serializeToString(d)}function Q9(a,e){let t=ca.getOptimalCanvasAndContext(a.width,a.height,e),{context:i}=t;return i.clearRect(0,0,a.width,a.height),i.drawImage(a,0,0),t}function J9(a,e,t){return new Promise(async i=>{t&&await new Promise(r=>setTimeout(r,100)),a.onload=()=>{i()},a.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,a.crossOrigin="anonymous"})}var K0;function yp(a,e,t,i){i||(i=K0||(K0=new _n));let{domElement:r,styleElement:s,svgRoot:o}=i;r.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${a}</div>`,r.setAttribute("style","transform-origin: top left; display: inline-block"),t&&(s.textContent=t),document.body.appendChild(o);let d=r.getBoundingClientRect();o.remove();let h=e.padding*2;return{width:d.width-h,height:d.height-h}}var wr=class{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===yt.WEBGPU}getTexture(e){return this._buildTexturePromise(e.text,e.resolution,e.style)}getManagedTexture(e,t,i,r){if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].promise;let s=this._buildTexturePromise(e,t,i).then(o=>(this._activeTextures[r].texture=o,o));return this._activeTextures[r]={texture:null,promise:s,usageCount:1},s}async _buildTexturePromise(e,t,i){let r=ye.get(_n),s=$9(e,i),o=await q9(s,i,yn.defaultTextStyle),d=yp(e,i,o,r),h=Math.ceil(Math.ceil(Math.max(1,d.width)+i.padding*2)*t),l=Math.ceil(Math.ceil(Math.max(1,d.height)+i.padding*2)*t),u=r.image,p=2;u.width=(h|0)+p,u.height=(l|0)+p;let y=Z9(e,i,t,o,r);await J9(u,y,j9()&&s.length>0);let _=u,v;this._createCanvas&&(v=Q9(u,t));let T=hp(v?v.canvas:_,u.width-p,u.height-p,t);return this._createCanvas&&(this._renderer.texture.initSource(T.source),ca.returnCanvasAndContext(v)),ye.return(r),T}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t):t.promise.then(i=>{t.texture=i,this._cleanUp(t)}).catch(()=>{}),this._activeTextures[e]=null))}_cleanUp(e){ze.returnTexture(e.texture),e.texture.source.resource=null,e.texture.source.uploadMethodId="unknown"}getReferenceCount(e){return this._activeTextures[e].usageCount}destroy(){this._activeTextures=null}};wr.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"htmlText"},wr.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"},pe.add(wr),pe.add(mn);var eg=Object.defineProperty,q0=Object.getOwnPropertySymbols,tg=Object.prototype.hasOwnProperty,ag=Object.prototype.propertyIsEnumerable,Z0=(a,e,t)=>e in a?eg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Q0=(a,e)=>{for(var t in e||(e={}))tg.call(e,t)&&Z0(a,t,e[t]);if(q0)for(var t of q0(e))ag.call(e,t)&&Z0(a,t,e[t]);return a},xp=class vp extends qt{constructor(...e){var t;let i=(t=e[0])!=null?t:{};i instanceof Float32Array&&(i={positions:i,uvs:e[1],indices:e[2]}),i=Q0(Q0({},vp.defaultOptions),i);let r=i.positions||new Float32Array([0,0,1,0,1,1,0,1]),s=i.uvs;s||(i.positions?s=new Float32Array(r.length):s=new Float32Array([0,0,1,0,1,1,0,1]));let o=i.indices||new Uint32Array([0,1,2,0,2,3]),d=i.shrinkBuffersToFit,h=new rt({data:r,label:"attribute-mesh-positions",shrinkToFit:d,usage:ve.VERTEX|ve.COPY_DST}),l=new rt({data:s,label:"attribute-mesh-uvs",shrinkToFit:d,usage:ve.VERTEX|ve.COPY_DST}),u=new rt({data:o,label:"index-mesh-buffer",shrinkToFit:d,usage:ve.INDEX|ve.COPY_DST});super({attributes:{aPosition:{buffer:h,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:l,format:"float32x2",stride:2*4,offset:0}},indexBuffer:u,topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};xp.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};var Kr=xp,ig=Object.defineProperty,rg=Object.defineProperties,sg=Object.getOwnPropertyDescriptors,J0=Object.getOwnPropertySymbols,ng=Object.prototype.hasOwnProperty,og=Object.prototype.propertyIsEnumerable,eb=(a,e,t)=>e in a?ig(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,tb=(a,e)=>{for(var t in e||(e={}))ng.call(e,t)&&eb(a,t,e[t]);if(J0)for(var t of J0(e))og.call(e,t)&&eb(a,t,e[t]);return a},ab=(a,e)=>rg(a,sg(e)),Ar={name:"local-uniform-bit",vertex:{header:`

struct LocalUniforms {
uTransformMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uRound:f32,
}

@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`}},cg=ab(tb({},Ar),{vertex:ab(tb({},Ar.vertex),{header:Ar.vertex.header.replace("group(1)","group(2)")})}),Al={name:"local-uniform-bit",vertex:{header:`

uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix = uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`}},dg={name:"tiling-bit",vertex:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`
uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
`},fragment:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`

var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
var unclamped = coord;
coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

var bias = 0.;

if(unclamped.x == coord.x && unclamped.y == coord.y)
{
bias = -32.;
} 

outColor = textureSampleBias(uTexture, uSampler, coord, bias);
`}},hg={name:"tiling-bit",vertex:{header:`
uniform mat3 uTextureTransform;
uniform vec4 uSizeAnchor;

`,main:`
uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
`},fragment:{header:`
uniform sampler2D uTexture;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;
`,main:`

vec2 coord = vUV + ceil(uClampOffset - vUV);
coord = (uMapCoord * vec3(coord, 1.0)).xy;
vec2 unclamped = coord;
coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

`}},rd,sd,mh=class extends ht{constructor(){rd!=null||(rd=zr({name:"tiling-sprite-shader",bits:[Ar,dg,Wr]})),sd!=null||(sd=Vr({name:"tiling-sprite-shader",bits:[Al,hg,Yr]}));let e=new Je({uMapCoord:{value:new ie,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new ie,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:sd,gpuProgram:rd,resources:{localUniforms:new Je({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:K.EMPTY.source,uSampler:K.EMPTY.source.style}})}updateUniforms(e,t,i,r,s,o){let d=this.resources.tilingUniforms,h=o.width,l=o.height,u=o.textureMatrix,p=d.uniforms.uTextureTransform;p.set(i.a*h/e,i.b*h/t,i.c*l/e,i.d*l/t,i.tx/e,i.ty/t),p.invert(),d.uniforms.uMapCoord=u.mapCoord,d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset,d.uniforms.uTextureTransform=p,d.uniforms.uSizeAnchor[0]=e,d.uniforms.uSizeAnchor[1]=t,d.uniforms.uSizeAnchor[2]=r,d.uniforms.uSizeAnchor[3]=s,o&&(this.resources.uTexture=o.source,this.resources.uSampler=o.source.style)}},_h=class extends Kr{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}};function lg(a,e){let t=a.anchor.x,i=a.anchor.y;e[0]=-t*a.width,e[1]=-i*a.height,e[2]=(1-t)*a.width,e[3]=-i*a.height,e[4]=(1-t)*a.width,e[5]=(1-i)*a.height,e[6]=-t*a.width,e[7]=(1-i)*a.height}function fg(a,e,t,i){let r=0,s=a.length/(e||2),o=i.a,d=i.b,h=i.c,l=i.d,u=i.tx,p=i.ty;for(t*=e;r<s;){let y=a[t],_=a[t+1];a[t]=o*y+h*_+u,a[t+1]=d*y+l*_+p,t+=e,r++}}function ug(a,e){let t=a.texture,i=t.frame.width,r=t.frame.height,s=0,o=0;a.applyAnchorToTexture&&(s=a.anchor.x,o=a.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-o,e[5]=e[7]=1-o;let d=ie.shared;d.copyFrom(a._tileTransform.matrix),d.tx/=a.width,d.ty/=a.height,d.invert(),d.scale(a.width/i,a.height/r),fg(e,2,0,d)}var ws=new _h,xn=class{constructor(e){this._state=Et.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(e){let t=this._getTilingSpriteData(e),i=t.canBatch;this._updateCanBatch(e);let r=t.canBatch;if(r&&r===i){let{batchableMesh:s}=t;return!s._batcher.checkAndUpdateTexture(s,e.texture)}return i!==r}addRenderable(e,t){let i=this._renderer.renderPipes.batch;this._updateCanBatch(e);let r=this._getTilingSpriteData(e),{geometry:s,canBatch:o}=r;if(o){r.batchableMesh||(r.batchableMesh=new Ur);let d=r.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),d.geometry=s,d.renderable=e,d.transform=e.groupTransform,d.setTexture(e._texture)),d.roundPixels=this._renderer._roundPixels|e._roundPixels,i.addToBatch(d,t)}else i.break(t),r.shader||(r.shader=new mh),this.updateRenderable(e),t.add(e)}execute(e){let{shader:t}=this._tilingSpriteDataHash[e.uid];t.groups[0]=this._renderer.globalUniforms.bindGroup;let i=t.resources.localUniforms.uniforms;i.uTransformMatrix=e.groupTransform,i.uRound=this._renderer._roundPixels|e._roundPixels,$r(e.groupColorAlpha,i.uColor,0),this._state.blendMode=Or(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:ws,shader:t,state:this._state})}updateRenderable(e){let t=this._getTilingSpriteData(e),{canBatch:i}=t;if(i){let{batchableMesh:r}=t;e.didViewUpdate&&this._updateBatchableMesh(e),r._batcher.updateElement(r)}else if(e.didViewUpdate){let{shader:r}=t;r.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}destroyRenderable(e){var t;let i=this._getTilingSpriteData(e);i.batchableMesh=null,(t=i.shader)==null||t.destroy(),this._tilingSpriteDataHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(e){return this._tilingSpriteDataHash[e.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){let t=new Kr({indices:ws.indices,positions:ws.positions.slice(),uvs:ws.uvs.slice()});return this._tilingSpriteDataHash[e.uid]={canBatch:!0,renderable:e,geometry:t},e.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[e.uid]}_updateBatchableMesh(e){let t=this._getTilingSpriteData(e),{geometry:i}=t,r=e.texture.source.style;r.addressMode!=="repeat"&&(r.addressMode="repeat",r.update()),ug(e,i.uvs),lg(e,i.positions)}destroy(){for(let e in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[e].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(e){let t=this._getTilingSpriteData(e),i=e.texture,r=!0;return this._renderer.type===yt.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=i.textureMatrix.isSimple&&(r||i.source.isPowerOfTwo),t.canBatch}};xn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"tilingSprite"},pe.add(xn);var bg=Object.defineProperty,ib=Object.getOwnPropertySymbols,pg=Object.prototype.hasOwnProperty,gg=Object.prototype.propertyIsEnumerable,rb=(a,e,t)=>e in a?bg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,sb=(a,e)=>{for(var t in e||(e={}))pg.call(e,t)&&rb(a,t,e[t]);if(ib)for(var t of ib(e))gg.call(e,t)&&rb(a,t,e[t]);return a},Tp=class Sp extends Kr{constructor(...e){var t;super({});let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={width:i,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(i)}build(e){var t,i,r,s;e=sb(sb({},Sp.defaultOptions),e),this.verticesX=(t=this.verticesX)!=null?t:e.verticesX,this.verticesY=(i=this.verticesY)!=null?i:e.verticesY,this.width=(r=this.width)!=null?r:e.width,this.height=(s=this.height)!=null?s:e.height;let o=this.verticesX*this.verticesY,d=[],h=[],l=[],u=this.verticesX-1,p=this.verticesY-1,y=this.width/u,_=this.height/p;for(let T=0;T<o;T++){let A=T%this.verticesX,P=T/this.verticesX|0;d.push(A*y,P*_),h.push(A/u,P/p)}let v=u*p;for(let T=0;T<v;T++){let A=T%u,P=T/u|0,I=P*this.verticesX+A,F=P*this.verticesX+A+1,D=(P+1)*this.verticesX+A,H=(P+1)*this.verticesX+A+1;l.push(I,F,D,F,H,D)}this.buffers[0].data=new Float32Array(d),this.buffers[1].data=new Float32Array(h),this.indexBuffer.data=new Uint32Array(l),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};Tp.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};var wp=Tp,mg=Object.defineProperty,nb=Object.getOwnPropertySymbols,_g=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,ob=(a,e,t)=>e in a?mg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,cb=(a,e)=>{for(var t in e||(e={}))_g.call(e,t)&&ob(a,t,e[t]);if(nb)for(var t of nb(e))yg.call(e,t)&&ob(a,t,e[t]);return a},Ap=class Ep extends wp{constructor(e={}){e=cb(cb({},Ep.defaultOptions),e),super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var t,i,r,s,o,d,h,l;this.width=(t=e.width)!=null?t:this.width,this.height=(i=e.height)!=null?i:this.height,this._originalWidth=(r=e.originalWidth)!=null?r:this._originalWidth,this._originalHeight=(s=e.originalHeight)!=null?s:this._originalHeight,this._leftWidth=(o=e.leftWidth)!=null?o:this._leftWidth,this._rightWidth=(d=e.rightWidth)!=null?d:this._rightWidth,this._topHeight=(h=e.topHeight)!=null?h:this._topHeight,this._bottomHeight=(l=e.bottomHeight)!=null?l:this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){let e=this.positions,t=this._leftWidth+this._rightWidth,i=this.width>t?1:this.width/t,r=this._topHeight+this._bottomHeight,s=this.height>r?1:this.height/r,o=Math.min(i,s);e[9]=e[11]=e[13]=e[15]=this._topHeight*o,e[17]=e[19]=e[21]=e[23]=this.height-this._bottomHeight*o,e[25]=e[27]=e[29]=e[31]=this.height,e[2]=e[10]=e[18]=e[26]=this._leftWidth*o,e[4]=e[12]=e[20]=e[28]=this.width-this._rightWidth*o,e[6]=e[14]=e[22]=e[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let t=1/this._originalWidth,i=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};Ap.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};var Va=Ap,vn=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];ye.return(t.geometry),ye.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=ye.get(Ur);return t.geometry=ye.get(Va),t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.didViewUpdate||this._updateBatchableSprite(e,t),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)this._gpuSpriteHash[e].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}};vn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"nineSliceSprite"},pe.add(vn);var Tn=class{constructor(e){this._renderer=e}push(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:t,filterEffect:e})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}};Tn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"filter"};function xg(a,e){e.clear();let t=e.matrix;for(let i=0;i<a.length;i++){let r=a[i];r.globalDisplayStatus<7||(e.matrix=r.worldTransform,e.addBounds(r.bounds))}return e.matrix=t,e}var vg=new qt({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),Sn=class{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new Je({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Ht({}),this.renderer=e}get activeBackTexture(){var e;return(e=this._activeFilterData)==null?void 0:e.backTexture}push(e){var t,i;let r=this.renderer,s=e.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let o=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,s.length===0){o.skip=!0;return}let d=o.bounds;if(e.renderables?xg(e.renderables,d):e.filterEffect.filterArea?(d.clear(),d.addRect(e.filterEffect.filterArea),d.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,d),e.container){let T=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;T&&d.applyMatrix(T)}let h=r.renderTarget.renderTarget.colorTexture.source,l=1/0,u=0,p=!0,y=!1,_=!1,v=!0;for(let T=0;T<s.length;T++){let A=s[T];if(l=Math.min(l,A.resolution==="inherit"?h._resolution:A.resolution),u+=A.padding,A.antialias==="off"?p=!1:A.antialias==="inherit"&&p&&(p=h.antialias),A.clipToViewport||(v=!1),!(A.compatibleRenderers&r.type)){_=!1;break}if(A.blendRequired&&!((i=(t=r.backBuffer)==null?void 0:t.useBackBuffer)==null||i)){_=!1;break}_=A.enabled||_,y||(y=A.blendRequired)}if(!_){o.skip=!0;return}if(v){let T=r.renderTarget.rootViewPort,A=r.renderTarget.renderTarget.resolution;d.fitBounds(0,T.width/A,0,T.height/A)}if(d.scale(l).ceil().scale(1/l).pad(u|0),!d.isPositive){o.skip=!0;return}o.skip=!1,o.bounds=d,o.blendRequired=y,o.container=e.container,o.filterEffect=e.filterEffect,o.previousRenderSurface=r.renderTarget.renderSurface,o.inputTexture=ze.getOptimalTexture(d.width,d.height,l,p),r.renderTarget.bind(o.inputTexture,!0),r.globalUniforms.push({offset:d})}pop(){let e=this.renderer;this._filterStackIndex--;let t=this._filterStack[this._filterStackIndex];if(t.skip)return;this._activeFilterData=t;let i=t.inputTexture,r=t.bounds,s=K.EMPTY;if(e.renderTarget.finishRenderPass(),t.blendRequired){let d=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,h=e.renderTarget.getRenderTarget(t.previousRenderSurface);s=this.getBackTexture(h,r,d)}t.backTexture=s;let o=t.filterEffect.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(s.source,3),e.globalUniforms.pop(),o.length===1)o[0].apply(this,i,t.previousRenderSurface,!1),ze.returnTexture(i);else{let d=t.inputTexture,h=ze.getOptimalTexture(r.width,r.height,d.source._resolution,!1),l=0;for(l=0;l<o.length-1;++l){o[l].apply(this,d,h,!0);let u=d;d=h,h=u}o[l].apply(this,d,t.previousRenderSurface,!1),ze.returnTexture(d),ze.returnTexture(h)}t.blendRequired&&ze.returnTexture(s)}getBackTexture(e,t,i){let r=e.colorTexture.source._resolution,s=ze.getOptimalTexture(t.width,t.height,r,!1),o=t.minX,d=t.minY;i&&(o-=i.minX,d-=i.minY),o=Math.floor(o*r),d=Math.floor(d*r);let h=Math.ceil(t.width*r),l=Math.ceil(t.height*r);return this.renderer.renderTarget.copyToTexture(e,s,{x:o,y:d},{width:h,height:l},{x:0,y:0}),s}applyFilter(e,t,i,r){let s=this.renderer,o=this._filterStack[this._filterStackIndex],d=o.bounds,h=Ce.shared,l=o.previousRenderSurface===i,u=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(u=this._filterStack[p].inputTexture.source._resolution);let y=this._filterGlobalUniforms,_=y.uniforms,v=_.uOutputFrame,T=_.uInputSize,A=_.uInputPixel,P=_.uInputClamp,I=_.uGlobalFrame,F=_.uOutputTexture;if(l){let N=this._filterStackIndex;for(;N>0;){N--;let j=this._filterStack[this._filterStackIndex-1];if(!j.skip){h.x=j.bounds.minX,h.y=j.bounds.minY;break}}v[0]=d.minX-h.x,v[1]=d.minY-h.y}else v[0]=0,v[1]=0;v[2]=t.frame.width,v[3]=t.frame.height,T[0]=t.source.width,T[1]=t.source.height,T[2]=1/T[0],T[3]=1/T[1],A[0]=t.source.pixelWidth,A[1]=t.source.pixelHeight,A[2]=1/A[0],A[3]=1/A[1],P[0]=.5*A[2],P[1]=.5*A[3],P[2]=t.frame.width*T[2]-.5*A[2],P[3]=t.frame.height*T[3]-.5*A[3];let D=this.renderer.renderTarget.rootRenderTarget.colorTexture;I[0]=h.x*u,I[1]=h.y*u,I[2]=D.source.width*u,I[3]=D.source.height*u;let H=this.renderer.renderTarget.getRenderTarget(i);if(s.renderTarget.bind(i,!!r),i instanceof K?(F[0]=i.frame.width,F[1]=i.frame.height):(F[0]=H.width,F[1]=H.height),F[2]=H.isRoot?-1:1,y.update(),s.renderPipes.uniformBatch){let N=s.renderPipes.uniformBatch.getUboResource(y);this._globalFilterBindGroup.setResource(N,0)}else this._globalFilterBindGroup.setResource(y,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,s.encoder.draw({geometry:vg,shader:e,state:e._state,topology:"triangle-list"}),s.type===yt.WEBGL&&s.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new qe,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(e,t){let i=this._activeFilterData,r=e.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),s=t.worldTransform.copyTo(ie.shared),o=t.renderGroup||t.parentRenderGroup;return o&&o.cacheToLocalTransform&&s.prepend(o.cacheToLocalTransform),s.invert(),r.prepend(s),r.scale(1/t.texture.frame.width,1/t.texture.frame.height),r.translate(t.anchor.x,t.anchor.y),r}};Sn.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"filter"},pe.add(Sn),pe.add(Tn);var Tg={__proto__:null},yh=[];pe.handleByNamedList(B.Environment,yh);async function Sg(a){if(!a)for(let e=0;e<yh.length;e++){let t=yh[e];if(t.value.test()){await t.value.load();return}}}var cr;function Pp(){if(typeof cr=="boolean")return cr;try{cr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{cr=!1}return cr}var mt=(a=>(a[a.NONE=0]="NONE",a[a.COLOR=16384]="COLOR",a[a.STENCIL=1024]="STENCIL",a[a.DEPTH=256]="DEPTH",a[a.COLOR_DEPTH=16640]="COLOR_DEPTH",a[a.COLOR_STENCIL=17408]="COLOR_STENCIL",a[a.DEPTH_STENCIL=1280]="DEPTH_STENCIL",a[a.ALL=17664]="ALL",a))(mt||{}),wn=class{constructor(e){this.items=[],this._name=e}emit(e,t,i,r,s,o,d,h){let{name:l,items:u}=this;for(let p=0,y=u.length;p<y;p++)u[p][l](e,t,i,r,s,o,d,h);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}},wg=Object.defineProperty,db=Object.getOwnPropertySymbols,Ag=Object.prototype.hasOwnProperty,Eg=Object.prototype.propertyIsEnumerable,hb=(a,e,t)=>e in a?wg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,As=(a,e)=>{for(var t in e||(e={}))Ag.call(e,t)&&hb(a,t,e[t]);if(db)for(var t of db(e))Eg.call(e,t)&&hb(a,t,e[t]);return a},Pg=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Rp=class Mp extends xt{constructor(e){var t;super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;let i=[...Pg,...(t=this.config.runners)!=null?t:[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){let t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Sg(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let i in this._systemsHash){let r=this._systemsHash[i].constructor.defaultOptions;e=As(As({},r),e)}e=As(As({},Mp.defaultOptions),e),this._roundPixels=e.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(e);this._initOptions=e}render(e,t){var i,r;let s=e;if(s instanceof le&&(s={container:s},t&&(s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,(i=s.clearColor)!=null||(s.clearColor=this.background.colorRgba),(r=s.clear)!=null||(s.clear=this.background.clearBeforeRender)),s.clearColor){let o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:Ee.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(e,t,i){let r=this.view.resolution;this.view.resize(e,t,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==r&&this.runners.resolutionChange.emit(i)}clear(e={}){var t;let i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),(t=e.clear)!=null||(e.clear=mt.ALL);let{clear:r,clearColor:s,target:o}=e;Ee.shared.setValue(s??this.background.colorRgba),i.renderTarget.clear(o,r,Ee.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new wn(t)})}_addSystems(e){let t;for(t in e){let i=e[t];this._addSystem(i.value,i.name)}}_addSystem(e,t){let i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(let r in this.runners)this.runners[r].add(i);return this}_addPipes(e,t){let i=t.reduce((r,s)=>(r[s.name]=s.value,r),{});e.forEach(r=>{let s=r.value,o=r.name,d=i[o];this.renderPipes[o]=new s(this,d?new d:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Pp())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Rp.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};var ko=Rp,nd;function Uo(a){return nd!==void 0||(nd=(()=>{var e;let t={stencil:!0,failIfMajorPerformanceCaveat:a??ko.defaultOptions.failIfMajorPerformanceCaveat};try{if(!xe.get().getWebGLRenderingContext())return!1;let i=xe.get().createCanvas().getContext("webgl",t),r=!!((e=i?.getContextAttributes())!=null&&e.stencil);if(i){let s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch{return!1}})()),nd}var od;async function Lo(a={}){return od!==void 0||(od=await(async()=>{let e=xe.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(a)).requestDevice(),!0}catch{return!1}})()),od}var Rg=Object.defineProperty,lb=Object.getOwnPropertySymbols,Mg=Object.prototype.hasOwnProperty,Cg=Object.prototype.propertyIsEnumerable,fb=(a,e,t)=>e in a?Rg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,dr=(a,e)=>{for(var t in e||(e={}))Mg.call(e,t)&&fb(a,t,e[t]);if(lb)for(var t of lb(e))Cg.call(e,t)&&fb(a,t,e[t]);return a},ub=["webgl","webgpu","canvas"];async function No(a){var e;let t=[];a.preference?(t.push(a.preference),ub.forEach(o=>{o!==a.preference&&t.push(o)})):t=ub.slice();let i,r={};for(let o=0;o<t.length;o++){let d=t[o];if(d==="webgpu"&&await Lo()){let{WebGPURenderer:h}=await Promise.resolve().then(function(){return lT});i=h,r=dr(dr({},a),a.webgpu);break}else if(d==="webgl"&&Uo((e=a.failIfMajorPerformanceCaveat)!=null?e:ko.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:h}=await Promise.resolve().then(function(){return jv});i=h,r=dr(dr({},a),a.webgl);break}else if(d==="canvas")throw r=dr({},a),new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!i)throw new Error("No available renderer for the current environment");let s=new i;return await s.init(r),s}var An="8.7.3",En=class{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,An)}static destroy(){}};En.extension=B.Application;var Pn=class{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,An)}destroy(){this._renderer=null}};Pn.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"initHook",priority:-10};var Og=Object.defineProperty,bb=Object.getOwnPropertySymbols,Ig=Object.prototype.hasOwnProperty,Gg=Object.prototype.propertyIsEnumerable,pb=(a,e,t)=>e in a?Og(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Bg=(a,e)=>{for(var t in e||(e={}))Ig.call(e,t)&&pb(a,t,e[t]);if(bb)for(var t of bb(e))Gg.call(e,t)&&pb(a,t,e[t]);return a},Cp=class xh{constructor(...e){this.stage=new le}async init(e){e=Bg({},e),this.renderer=await No(e),xh._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){let i=xh._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Cp._plugins=[];var Fg=Cp;pe.handleByList(B.Application,Fg._plugins),pe.add(En);var Rn=class extends bn{constructor(e,t){var i;super();let{textures:r,data:s}=e;Object.keys(s.pages).forEach(o=>{let d=s.pages[parseInt(o,10)],h=r[d.id];this.pages.push({texture:h})}),Object.keys(s.chars).forEach(o=>{var d;let h=s.chars[o],{frame:l,source:u}=r[h.page],p=new Pe(h.x+l.x,h.y+l.y,h.width,h.height),y=new K({source:u,frame:p});this.chars[o]={id:o.codePointAt(0),xOffset:h.xOffset,yOffset:h.yOffset,xAdvance:h.xAdvance,kerning:(d=h.kerning)!=null?d:{},texture:y}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=(i=s.distanceField)!=null?i:{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){pn.install(e)}static uninstall(e){pn.uninstall(e)}},cd={test(a){return typeof a=="string"&&a.startsWith("info face=")},parse(a){var e,t,i;let r=a.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let v in r){let T=r[v].match(/^[a-z]+/gm)[0],A=r[v].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),P={};for(let I in A){let F=A[I].split("="),D=F[0],H=F[1].replace(/"/gm,""),N=parseFloat(H),j=isNaN(N)?H:N;P[D]=j}s[T].push(P)}let o={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[d]=s.info,[h]=s.common,[l]=(e=s.distanceField)!=null?e:[];l&&(o.distanceField={range:parseInt(l.distanceRange,10),type:l.fieldType}),o.fontSize=parseInt(d.size,10),o.fontFamily=d.face,o.lineHeight=parseInt(h.lineHeight,10);let u=s.page;for(let v=0;v<u.length;v++)o.pages.push({id:parseInt(u[v].id,10)||0,file:u[v].file});let p={};o.baseLineOffset=o.lineHeight-parseInt(h.base,10);let y=s.char;for(let v=0;v<y.length;v++){let T=y[v],A=parseInt(T.id,10),P=(i=(t=T.letter)!=null?t:T.char)!=null?i:String.fromCharCode(A);P==="space"&&(P=" "),p[A]=P,o.chars[P]={id:A,page:parseInt(T.page,10)||0,x:parseInt(T.x,10),y:parseInt(T.y,10),width:parseInt(T.width,10),height:parseInt(T.height,10),xOffset:parseInt(T.xoffset,10),yOffset:parseInt(T.yoffset,10),xAdvance:parseInt(T.xadvance,10),kerning:{}}}let _=s.kerning||[];for(let v=0;v<_.length;v++){let T=parseInt(_[v].first,10),A=parseInt(_[v].second,10),P=parseInt(_[v].amount,10);o.chars[p[A]].kerning[p[T]]=P}return o}},gb={test(a){let e=a;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(a){var e,t;let i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},r=a.getElementsByTagName("info")[0],s=a.getElementsByTagName("common")[0],o=a.getElementsByTagName("distanceField")[0];o&&(i.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});let d=a.getElementsByTagName("page"),h=a.getElementsByTagName("char"),l=a.getElementsByTagName("kerning");i.fontSize=parseInt(r.getAttribute("size"),10),i.fontFamily=r.getAttribute("face"),i.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<d.length;p++)i.pages.push({id:parseInt(d[p].getAttribute("id"),10)||0,file:d[p].getAttribute("file")});let u={};i.baseLineOffset=i.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<h.length;p++){let y=h[p],_=parseInt(y.getAttribute("id"),10),v=(t=(e=y.getAttribute("letter"))!=null?e:y.getAttribute("char"))!=null?t:String.fromCharCode(_);v==="space"&&(v=" "),u[_]=v,i.chars[v]={id:_,page:parseInt(y.getAttribute("page"),10)||0,x:parseInt(y.getAttribute("x"),10),y:parseInt(y.getAttribute("y"),10),width:parseInt(y.getAttribute("width"),10),height:parseInt(y.getAttribute("height"),10),xOffset:parseInt(y.getAttribute("xoffset"),10),yOffset:parseInt(y.getAttribute("yoffset"),10),xAdvance:parseInt(y.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<l.length;p++){let y=parseInt(l[p].getAttribute("first"),10),_=parseInt(l[p].getAttribute("second"),10),v=parseInt(l[p].getAttribute("amount"),10);i.chars[u[_]].kerning[u[y]]=v}return i}},mb={test(a){return typeof a=="string"&&a.includes("<font>")?gb.test(xe.get().parseXML(a)):!1},parse(a){return gb.parse(xe.get().parseXML(a))}},Dg=[".xml",".fnt"],kg={extension:{type:B.CacheParser,name:"cacheBitmapFont"},test:a=>a instanceof Rn,getCacheableAssets(a,e){let t={};return a.forEach(i=>{t[i]=e,t[`${i}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},Ug={extension:{type:B.LoadParser,priority:Rt.Normal},name:"loadBitmapFont",test(a){return Dg.includes(_t.extname(a).toLowerCase())},async testParse(a){return cd.test(a)||mb.test(a)},async parse(a,e,t){let i=cd.test(a)?cd.parse(a):mb.parse(a),{src:r}=e,{pages:s}=i,o=[],d=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<s.length;++u){let p=s[u].file,y=_t.join(_t.dirname(r),p);y=kd(y,r),o.push({src:y,data:d})}let h=await t.load(o),l=o.map(u=>h[u.src]);return new Rn({data:i,textures:l},r)},async load(a,e){return await(await xe.get().fetch(a)).text()},async unload(a,e,t){await Promise.all(a.pages.map(i=>t.unload(i.texture.source._sourceOrigin))),a.destroy()}},vh=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose,this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}},Lg={extension:{type:B.CacheParser,name:"cacheTextureArray"},test:a=>Array.isArray(a)&&a.every(e=>e instanceof K),getCacheableAssets:(a,e)=>{let t={};return a.forEach(i=>{e.forEach((r,s)=>{t[i+(s===0?"":s+1)]=r})}),t}};async function Op(a){if("Image"in globalThis)return new Promise(e=>{let t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=a});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=await(await fetch(a)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}var Ng={extension:{type:B.DetectionParser,priority:1},test:async()=>Op("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async a=>[...a,"avif"],remove:async a=>a.filter(e=>e!=="avif")},_b=["png","jpg","jpeg"],jg={extension:{type:B.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async a=>[...a,..._b],remove:async a=>a.filter(e=>!_b.includes(e))},Xg="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function El(a){return Xg?!1:document.createElement("video").canPlayType(a)!==""}var Hg={extension:{type:B.DetectionParser,priority:0},test:async()=>El("video/mp4"),add:async a=>[...a,"mp4","m4v"],remove:async a=>a.filter(e=>e!=="mp4"&&e!=="m4v")},zg={extension:{type:B.DetectionParser,priority:0},test:async()=>El("video/ogg"),add:async a=>[...a,"ogv"],remove:async a=>a.filter(e=>e!=="ogv")},Vg={extension:{type:B.DetectionParser,priority:0},test:async()=>El("video/webm"),add:async a=>[...a,"webm"],remove:async a=>a.filter(e=>e!=="webm")},Wg={extension:{type:B.DetectionParser,priority:0},test:async()=>Op("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async a=>[...a,"webp"],remove:async a=>a.filter(e=>e!=="webp")},Yg=Object.defineProperty,$g=Object.defineProperties,Kg=Object.getOwnPropertyDescriptors,yb=Object.getOwnPropertySymbols,qg=Object.prototype.hasOwnProperty,Zg=Object.prototype.propertyIsEnumerable,xb=(a,e,t)=>e in a?Yg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Qg=(a,e)=>{for(var t in e||(e={}))qg.call(e,t)&&xb(a,t,e[t]);if(yb)for(var t of yb(e))Zg.call(e,t)&&xb(a,t,e[t]);return a},Jg=(a,e)=>$g(a,Kg(e)),Th=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let i={promise:null,parser:null};return i.promise=(async()=>{var r,s;let o=null,d=null;if(t.loadParser&&(d=this._parserHash[t.loadParser]),!d){for(let h=0;h<this.parsers.length;h++){let l=this.parsers[h];if(l.load&&(r=l.test)!=null&&r.call(l,e,t,this)){d=l;break}}if(!d)return null}o=await d.load(e,t,this),i.parser=d;for(let h=0;h<this.parsers.length;h++){let l=this.parsers[h];l.parse&&l.parse&&await((s=l.testParse)==null?void 0:s.call(l,o,t,this))&&(o=await l.parse(o,t,this)||o,i.parser=l)}return o})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0,r={},s=Ys(e),o=Xt(e,l=>({alias:[l],src:l,data:{}})),d=o.length,h=o.map(async l=>{let u=_t.toAbsolute(l.src);if(!r[l.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,l)),r[l.src]=await this.promiseCache[u].promise,t&&t(++i/d)}catch(p){throw delete this.promiseCache[u],delete r[l.src],new Error(`[Loader.load] Failed to load ${u}.
${p}`)}});return await Promise.all(h),s?r[o[0].src]:r}async unload(e){let t=Xt(e,i=>({alias:[i],src:i})).map(async i=>{var r,s;let o=_t.toAbsolute(i.src),d=this.promiseCache[o];if(d){let h=await d.promise;delete this.promiseCache[o],await((s=(r=d.parser)==null?void 0:r.unload)==null?void 0:s.call(r,h,i,this))}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name&&e[t.name],Jg(Qg({},e),{[t.name]:t})),{})}};function Ii(a,e){if(Array.isArray(e)){for(let t of e)if(a.startsWith(`data:${t}`))return!0;return!1}return a.startsWith(`data:${e}`)}function zt(a,e){let t=a.split("?")[0],i=_t.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}var em=".json",tm="application/json",am={extension:{type:B.LoadParser,priority:Rt.Low},name:"loadJson",test(a){return Ii(a,tm)||zt(a,em)},async load(a){return await(await xe.get().fetch(a)).json()}},im=".txt",rm="text/plain",sm={name:"loadTxt",extension:{type:B.LoadParser,priority:Rt.Low,name:"loadTxt"},test(a){return Ii(a,rm)||zt(a,im)},async load(a){return await(await xe.get().fetch(a)).text()}},nm=Object.defineProperty,om=Object.defineProperties,cm=Object.getOwnPropertyDescriptors,vb=Object.getOwnPropertySymbols,dm=Object.prototype.hasOwnProperty,hm=Object.prototype.propertyIsEnumerable,Tb=(a,e,t)=>e in a?nm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,lm=(a,e)=>{for(var t in e||(e={}))dm.call(e,t)&&Tb(a,t,e[t]);if(vb)for(var t of vb(e))hm.call(e,t)&&Tb(a,t,e[t]);return a},fm=(a,e)=>om(a,cm(e)),um=["normal","bold","100","200","300","400","500","600","700","800","900"],bm=[".ttf",".otf",".woff",".woff2"],pm=["font/ttf","font/otf","font/woff","font/woff2"],gm=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function mm(a){let e=_t.extname(a),t=_t.basename(a,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)),i=t.length>0;for(let s of t)if(!s.match(gm)){i=!1;break}let r=t.join(" ");return i||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}var _m=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function ym(a){return _m.test(a)?a:encodeURI(a)}var xm={extension:{type:B.LoadParser,priority:Rt.Low},name:"loadWebFont",test(a){return Ii(a,pm)||zt(a,bm)},async load(a,e){var t,i,r,s,o,d;let h=xe.get().getFontFaceSet();if(h){let l=[],u=(i=(t=e.data)==null?void 0:t.family)!=null?i:mm(a),p=(o=(s=(r=e.data)==null?void 0:r.weights)==null?void 0:s.filter(_=>um.includes(_)))!=null?o:["normal"],y=(d=e.data)!=null?d:{};for(let _=0;_<p.length;_++){let v=p[_],T=new FontFace(u,`url(${ym(a)})`,fm(lm({},y),{weight:v}));await T.load(),h.add(T),l.push(T)}return Oe.set(`${u}-and-url`,{url:a,fontFaces:l}),l.length===1?l[0]:l}return null},unload(a){(Array.isArray(a)?a:[a]).forEach(e=>{Oe.remove(`${e.family}-and-url`),xe.get().getFontFaceSet().delete(e)})}};function Pl(a,e=1){var t;let i=(t=da.RETINA_PREFIX)==null?void 0:t.exec(a);return i?parseFloat(i[1]):e}function Qa(a,e,t){a.label=t,a._sourceOrigin=t;let i=new K({source:a,label:t}),r=()=>{delete e.promiseCache[t],Oe.has(t)&&Oe.remove(t)};return i.source.once("destroy",()=>{e.promiseCache[t]&&r()}),i.once("destroy",()=>{a.destroyed||r()}),i}var vm=Object.defineProperty,Mn=Object.getOwnPropertySymbols,Ip=Object.prototype.hasOwnProperty,Gp=Object.prototype.propertyIsEnumerable,Sb=(a,e,t)=>e in a?vm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Tm=(a,e)=>{for(var t in e||(e={}))Ip.call(e,t)&&Sb(a,t,e[t]);if(Mn)for(var t of Mn(e))Gp.call(e,t)&&Sb(a,t,e[t]);return a},Sm=(a,e)=>{var t={};for(var i in a)Ip.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Mn)for(var i of Mn(a))e.indexOf(i)<0&&Gp.call(a,i)&&(t[i]=a[i]);return t},wm=".svg",Am="image/svg+xml",Em={extension:{type:B.LoadParser,priority:Rt.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(a){return Ii(a,Am)||zt(a,wm)},async load(a,e,t){var i,r;return((r=(i=e.data)==null?void 0:i.parseAsGraphicsContext)!=null?r:this.config.parseAsGraphicsContext)?Rm(a):Pm(a,e,t,this.config.crossOrigin)},unload(a){a.destroy(!0)}};async function Pm(a,e,t,i){var r,s,o,d,h,l;let u=await(await xe.get().fetch(a)).blob(),p=URL.createObjectURL(u),y=new Image;y.src=p,y.crossOrigin=i,await y.decode(),URL.revokeObjectURL(p);let _=document.createElement("canvas"),v=_.getContext("2d"),T=((r=e.data)==null?void 0:r.resolution)||Pl(a),A=(o=(s=e.data)==null?void 0:s.width)!=null?o:y.width,P=(h=(d=e.data)==null?void 0:d.height)!=null?h:y.height;_.width=A*T,_.height=P*T,v.drawImage(y,0,0,A*T,P*T);let I=(l=e.data)!=null?l:{},{parseAsGraphicsContext:F}=I,D=Sm(I,["parseAsGraphicsContext"]),H=new Ma(Tm({resource:_,alphaMode:"premultiply-alpha-on-upload",resolution:T},D));return Qa(H,t,a)}async function Rm(a){let e=await(await xe.get().fetch(a)).text(),t=new dt;return t.svg(e),t}var Mm=`(function(){"use strict";const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";async function a(){try{if(typeof createImageBitmap!="function")return!1;const A=await(await fetch(e)).blob(),t=await createImageBitmap(A);return t.width===1&&t.height===1}catch(A){return!1}}a().then(A=>{self.postMessage(A)})})();
`,xi=null,Sh=class{constructor(){xi||(xi=URL.createObjectURL(new Blob([Mm],{type:"application/javascript"}))),this.worker=new Worker(xi)}};Sh.revokeObjectURL=function(){xi&&(URL.revokeObjectURL(xi),xi=null)};var Cm='(function(){"use strict";async function s(a,t){const e=await fetch(a);if(!e.ok)throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${a}: ${e.status} ${e.statusText}`);const i=await e.blob();return t==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}self.onmessage=async a=>{try{const t=await s(a.data.data[0],a.data.data[1]);self.postMessage({data:t,uuid:a.data.uuid,id:a.data.id},[t])}catch(t){self.postMessage({error:t,uuid:a.data.uuid,id:a.data.id})}}})();\n',vi=null,Bp=class{constructor(){vi||(vi=URL.createObjectURL(new Blob([Cm],{type:"application/javascript"}))),this.worker=new Worker(vi)}};Bp.revokeObjectURL=function(){vi&&(URL.revokeObjectURL(vi),vi=null)};var wb=0,dd,Om=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(a=>{let{worker:e}=new Sh;e.addEventListener("message",t=>{e.terminate(),Sh.revokeObjectURL(),a(t.data)})}),this._isImageBitmapSupported)}loadImageBitmap(a,e){var t;return this._run("loadImageBitmap",[a,(t=e?.data)==null?void 0:t.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){dd===void 0&&(dd=navigator.hardwareConcurrency||4);let a=this._workerPool.pop();return!a&&this._createdWorkers<dd&&(this._createdWorkers++,a=new Bp().worker,a.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),a}_returnWorker(a){this._workerPool.push(a)}_complete(a){a.error!==void 0?this._resolveHash[a.uuid].reject(a.error):this._resolveHash[a.uuid].resolve(a.data),this._resolveHash[a.uuid]=null}async _run(a,e){await this._initWorkers();let t=new Promise((i,r)=>{this._queue.push({id:a,arguments:e,resolve:i,reject:r})});return this._next(),t}_next(){if(!this._queue.length)return;let a=this._getWorker();if(!a)return;let e=this._queue.pop(),t=e.id;this._resolveHash[wb]={resolve:e.resolve,reject:e.reject},a.postMessage({data:e.arguments,uuid:wb++,id:t})}},Ab=new Om,Im=Object.defineProperty,Eb=Object.getOwnPropertySymbols,Gm=Object.prototype.hasOwnProperty,Bm=Object.prototype.propertyIsEnumerable,Pb=(a,e,t)=>e in a?Im(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Fm=(a,e)=>{for(var t in e||(e={}))Gm.call(e,t)&&Pb(a,t,e[t]);if(Eb)for(var t of Eb(e))Bm.call(e,t)&&Pb(a,t,e[t]);return a},Dm=[".jpeg",".jpg",".png",".webp",".avif"],km=["image/jpeg","image/png","image/webp","image/avif"];async function Um(a,e){var t;let i=await xe.get().fetch(a);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${a}: ${i.status} ${i.statusText}`);let r=await i.blob();return((t=e?.data)==null?void 0:t.alphaMode)==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}var Fp={name:"loadTextures",extension:{type:B.LoadParser,priority:Rt.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(a){return Ii(a,km)||zt(a,Dm)},async load(a,e,t){var i;let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Ab.isImageBitmapSupported()?r=await Ab.loadImageBitmap(a,e):r=await Um(a,e):r=await new Promise((o,d)=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=a,r.complete?o(r):(r.onload=()=>{o(r)},r.onerror=d)});let s=new Ma(Fm({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:((i=e.data)==null?void 0:i.resolution)||Pl(a)},e.data));return Qa(s,t,a)},unload(a){a.destroy(!0)}},Lm=Object.defineProperty,Nm=Object.defineProperties,jm=Object.getOwnPropertyDescriptors,Rb=Object.getOwnPropertySymbols,Xm=Object.prototype.hasOwnProperty,Hm=Object.prototype.propertyIsEnumerable,Mb=(a,e,t)=>e in a?Lm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hd=(a,e)=>{for(var t in e||(e={}))Xm.call(e,t)&&Mb(a,t,e[t]);if(Rb)for(var t of Rb(e))Hm.call(e,t)&&Mb(a,t,e[t]);return a},Cb=(a,e)=>Nm(a,jm(e)),Dp=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],zm=Dp.map(a=>`video/${a.substring(1)}`);function Vm(a,e,t){t===void 0&&!e.startsWith("data:")?a.crossOrigin=Ym(e):t!==!1&&(a.crossOrigin=typeof t=="string"?t:"anonymous")}function Wm(a){return new Promise((e,t)=>{a.addEventListener("canplaythrough",i),a.addEventListener("error",r),a.load();function i(){s(),e()}function r(o){s(),t(o)}function s(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",r)}})}function Ym(a,e=globalThis.location){if(a.startsWith("data:"))return"";e||(e=globalThis.location);let t=new URL(a,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}var $m={name:"loadVideo",extension:{type:B.LoadParser,name:"loadVideo"},test(a){let e=Ii(a,zm),t=zt(a,Dp);return e||t},async load(a,e,t){var i,r;let s=hd(Cb(hd({},Ds.defaultOptions),{resolution:((i=e.data)==null?void 0:i.resolution)||Pl(a),alphaMode:((r=e.data)==null?void 0:r.alphaMode)||await O2()}),e.data),o=document.createElement("video"),d={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(d).forEach(u=>{let p=d[u];p!==void 0&&o.setAttribute(u,p)}),s.muted===!0&&(o.muted=!0),Vm(o,a,s.crossorigin);let h=document.createElement("source"),l;if(a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let u=a.split("?")[0].slice(a.lastIndexOf(".")+1).toLowerCase();l=Ds.MIME_TYPES[u]||`video/${u}`}return h.src=a,l&&(h.type=l),new Promise(u=>{let p=async()=>{let y=new Ds(Cb(hd({},s),{resource:o}));o.removeEventListener("canplay",p),e.data.preload&&await Wm(o),u(Qa(y,t,a))};o.addEventListener("canplay",p),o.appendChild(h)})},unload(a){a.destroy(!0)}},kp={extension:{type:B.ResolveParser,name:"resolveTexture"},test:Fp.test,parse:a=>{var e,t;return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:a.split(".").pop(),src:a}}},Km={extension:{type:B.ResolveParser,priority:-2,name:"resolveJson"},test:a=>da.RETINA_PREFIX.test(a)&&a.endsWith(".json"),parse:kp.parse},wh=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new da,this.loader=new Th,this.cache=Oe,this._backgroundLoader=new vh(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var t,i,r;if(this._initialized)return;if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}let s=(i=(t=e.texturePreference)==null?void 0:t.resolution)!=null?i:1,o=typeof s=="number"?[s]:s,d=await this._detectFormats({preferredFormats:(r=e.texturePreference)==null?void 0:r.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:d,resolution:o}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let i=Ys(e),r=Xt(e).map(d=>{if(typeof d!="string"){let h=this.resolver.getAlias(d);return h.some(l=>!this.resolver.hasKey(l))&&this.add(d),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(d)||this.add({alias:d,src:d}),d}),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,t);return i?o[r[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);let r=this.resolver.resolveBundle(e),s={},o=Object.keys(r),d=0,h=0,l=()=>{t?.(++d/h)},u=o.map(p=>{let y=r[p];return h+=Object.keys(y).length,this._mapLoadToResolve(y,l).then(_=>{s[p]=_})});return await Promise.all(u),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Oe.get(e);let t={};for(let i=0;i<e.length;i++)t[i]=Oe.get(e[i]);return t}async _mapLoadToResolve(e,t){let i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let r=await this.loader.load(i,t);this._backgroundLoader.active=!0;let s={};return i.forEach(o=>{let d=r[o.src],h=[o.src];o.alias&&h.push(...o.alias),h.forEach(l=>{s[l]=d}),Oe.set(h,d)}),s}async unload(e){this._initialized||await this.init();let t=Xt(e).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Xt(e);let t=this.resolver.resolveBundle(e),i=Object.keys(t).map(r=>this._unloadFromResolved(t[r]));await Promise.all(i)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(i=>{Oe.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,r)=>t.indexOf(i)===r),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}},me=new wh;pe.handleByList(B.LoadParser,me.loader.parsers).handleByList(B.ResolveParser,me.resolver.parsers).handleByList(B.CacheParser,me.cache.parsers).handleByList(B.DetectionParser,me.detections),pe.add(Lg,jg,Ng,Wg,Hg,zg,Vg,am,sm,xm,Em,Fp,$m,Ug,kg,kp,Km);var Ob={loader:B.LoadParser,resolver:B.ResolveParser,cache:B.CacheParser,detection:B.DetectionParser};pe.handle(B.Asset,a=>{let e=a.ref;Object.entries(Ob).filter(([t])=>!!e[t]).forEach(([t,i])=>{var r;return pe.add(Object.assign(e[t],{extension:(r=e[t].extension)!=null?r:i}))})},a=>{let e=a.ref;Object.keys(Ob).filter(t=>!!e[t]).forEach(t=>pe.remove(e[t]))});var sS={extension:{type:B.DetectionParser,priority:3},test:async()=>!!(await Lo()||Uo()),add:async a=>[...a,"basis"],remove:async a=>a.filter(e=>e!=="basis")},Ci=class extends Fe{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}},Es;function Ib(){if(Es)return Es;let a=document.createElement("canvas").getContext("webgl");return a?(Es=[...a.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...a.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...a.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...a.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Es):[]}var Ps;async function Gb(){if(Ps)return Ps;let a=await xe.get().getNavigator().gpu.requestAdapter();return Ps=[...a.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...a.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Ps}var ld;async function Up(){return ld!==void 0||(ld=await(async()=>{let a=await Lo(),e=Uo();if(a&&e){let t=await Gb(),i=Ib();return t.filter(r=>i.includes(r))}else{if(a)return await Gb();if(e)return Ib()}return[]})()),ld}var qm=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"],Rs;async function jo(){if(Rs!==void 0)return Rs;let a=await Up();return Rs=[...qm,...a],Rs}var Zm='(function(){"use strict";function g(r,a){const t=r.getNumImages(),s=r.getNumLevels(0);if(!r.startTranscoding())throw new Error("startTranscoding failed");const m=[];for(let e=0;e<s;++e)for(let o=0;o<t;++o){const B=r.getImageTranscodedSizeInBytes(o,e,a),f=new Uint8Array(B);if(!r.transcodeImage(f,o,e,a,1,0))throw new Error("transcodeImage failed");m.push(f)}return m}const w={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function d(r){const a=w[r];if(a)return a;throw new Error(`Unsupported transcoderFormat: ${r}`)}const n={jsUrl:"basis/basis_transcoder.js",wasmUrl:"basis/basis_transcoder.wasm"};let u,i,c;async function l(){if(!c){const r=new URL(n.jsUrl,location.origin).href,a=new URL(n.wasmUrl,location.origin).href;importScripts(r),c=new Promise(t=>{BASIS({locateFile:s=>a}).then(s=>{s.initializeBasis(),t(s.BasisFile)})})}return c}async function b(r,a){const t=await fetch(r);if(t.ok){const s=await t.arrayBuffer();return new a(new Uint8Array(s))}throw new Error(`Failed to load Basis texture: ${r}`)}const h=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function p(r){const a=await l(),t=await b(r,a),s=g(t,u);return{width:t.getImageWidth(0,0),height:t.getImageHeight(0,0),format:i,resource:s,alphaMode:"no-premultiply-alpha"}}async function y(r,a,t){r&&(n.jsUrl=r),a&&(n.wasmUrl=a),i=h.filter(s=>t.includes(s))[0],u=d(i),await l()}const U={init:async r=>{const{jsUrl:a,wasmUrl:t,supportedTextures:s}=r;await y(a,t,s)},load:async r=>{var a;try{const t=await p(r.url);return{type:"load",url:r.url,success:!0,textureOptions:t,transferables:(a=t.resource)==null?void 0:a.map(s=>s.buffer)}}catch(t){throw t}}};self.onmessage=async r=>{const a=r.data,t=await U[a.type](a);t&&self.postMessage(t,t.transferables)}})();\n',Ti=null,Lp=class{constructor(){Ti||(Ti=URL.createObjectURL(new Blob([Zm],{type:"application/javascript"}))),this.worker=new Worker(Ti)}};Lp.revokeObjectURL=function(){Ti&&(URL.revokeObjectURL(Ti),Ti=null)};var Bb={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};var hr,Np={};function Qm(a){return hr||(hr=new Lp().worker,hr.onmessage=e=>{let{success:t,url:i,textureOptions:r}=e.data;Np[i](r)},hr.postMessage({type:"init",jsUrl:Bb.jsUrl,wasmUrl:Bb.wasmUrl,supportedTextures:a})),hr}function Jm(a,e){let t=Qm(e);return new Promise(i=>{Np[a]=i,t.postMessage({type:"load",url:a})})}var nS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadBasis"},name:"loadBasis",test(a){return zt(a,[".basis"])},async load(a,e,t){let i=await jo(),r=await Jm(a,i),s=new Ci(r);return Qa(s,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var e_={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},t_={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},jp=(a=>(a[a.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",a[a.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",a[a.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",a[a.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",a[a.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",a[a.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",a[a.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",a[a.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",a[a.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",a[a.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",a[a.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",a[a.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",a[a.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",a[a.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",a[a.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",a[a.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",a[a.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",a[a.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",a[a.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",a[a.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",a[a.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",a[a.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",a[a.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",a[a.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",a[a.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",a[a.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",a[a.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",a[a.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",a[a.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",a[a.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",a[a.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",a[a.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",a[a.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",a[a.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",a[a.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",a[a.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",a[a.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",a[a.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",a[a.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",a[a.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",a[a.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",a[a.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",a[a.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",a[a.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",a[a.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",a[a.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",a[a.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",a[a.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",a[a.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",a[a.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",a[a.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",a[a.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",a[a.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",a[a.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",a[a.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",a[a.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",a[a.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",a[a.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",a[a.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",a[a.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",a[a.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",a[a.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",a[a.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",a[a.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",a[a.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",a[a.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",a[a.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",a[a.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",a[a.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",a[a.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",a[a.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",a[a.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",a[a.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",a[a.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",a[a.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",a[a.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",a[a.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",a[a.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",a[a.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",a[a.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",a[a.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",a[a.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",a[a.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",a[a.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",a[a.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",a[a.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",a[a.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",a[a.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",a[a.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",a[a.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",a[a.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",a[a.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",a[a.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",a[a.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",a[a.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",a[a.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",a[a.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",a[a.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",a[a.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",a[a.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",a[a.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",a[a.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",a[a.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",a[a.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",a[a.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",a[a.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",a[a.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",a[a.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",a[a.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",a[a.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",a[a.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",a[a.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",a))(jp||{}),Xp=(a=>(a[a.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",a[a.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",a[a.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",a))(Xp||{});function Ye(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var bt=(a=>(a[a.UNKNOWN=0]="UNKNOWN",a[a.R8G8B8=20]="R8G8B8",a[a.A8R8G8B8=21]="A8R8G8B8",a[a.X8R8G8B8=22]="X8R8G8B8",a[a.R5G6B5=23]="R5G6B5",a[a.X1R5G5B5=24]="X1R5G5B5",a[a.A1R5G5B5=25]="A1R5G5B5",a[a.A4R4G4B4=26]="A4R4G4B4",a[a.R3G3B2=27]="R3G3B2",a[a.A8=28]="A8",a[a.A8R3G3B2=29]="A8R3G3B2",a[a.X4R4G4B4=30]="X4R4G4B4",a[a.A2B10G10R10=31]="A2B10G10R10",a[a.A8B8G8R8=32]="A8B8G8R8",a[a.X8B8G8R8=33]="X8B8G8R8",a[a.G16R16=34]="G16R16",a[a.A2R10G10B10=35]="A2R10G10B10",a[a.A16B16G16R16=36]="A16B16G16R16",a[a.A8P8=40]="A8P8",a[a.P8=41]="P8",a[a.L8=50]="L8",a[a.A8L8=51]="A8L8",a[a.A4L4=52]="A4L4",a[a.V8U8=60]="V8U8",a[a.L6V5U5=61]="L6V5U5",a[a.X8L8V8U8=62]="X8L8V8U8",a[a.Q8W8V8U8=63]="Q8W8V8U8",a[a.V16U16=64]="V16U16",a[a.A2W10V10U10=67]="A2W10V10U10",a[a.Q16W16V16U16=110]="Q16W16V16U16",a[a.R16F=111]="R16F",a[a.G16R16F=112]="G16R16F",a[a.A16B16G16R16F=113]="A16B16G16R16F",a[a.R32F=114]="R32F",a[a.G32R32F=115]="G32R32F",a[a.A32B32G32R32F=116]="A32B32G32R32F",a[a.UYVY=Ye("UYVY")]="UYVY",a[a.R8G8_B8G8=Ye("RGBG")]="R8G8_B8G8",a[a.YUY2=Ye("YUY2")]="YUY2",a[a.D3DFMT_G8R8_G8B8=Ye("GRGB")]="D3DFMT_G8R8_G8B8",a[a.DXT1=Ye("DXT1")]="DXT1",a[a.DXT2=Ye("DXT2")]="DXT2",a[a.DXT3=Ye("DXT3")]="DXT3",a[a.DXT4=Ye("DXT4")]="DXT4",a[a.DXT5=Ye("DXT5")]="DXT5",a[a.ATI1=Ye("ATI1")]="ATI1",a[a.AT1N=Ye("AT1N")]="AT1N",a[a.ATI2=Ye("ATI2")]="ATI2",a[a.AT2N=Ye("AT2N")]="AT2N",a[a.BC4U=Ye("BC4U")]="BC4U",a[a.BC4S=Ye("BC4S")]="BC4S",a[a.BC5U=Ye("BC5U")]="BC5U",a[a.BC5S=Ye("BC5S")]="BC5S",a[a.DX10=Ye("DX10")]="DX10",a))(bt||{}),Fb={[bt.DXT1]:"bc1-rgba-unorm",[bt.DXT2]:"bc2-rgba-unorm",[bt.DXT3]:"bc2-rgba-unorm",[bt.DXT4]:"bc3-rgba-unorm",[bt.DXT5]:"bc3-rgba-unorm",[bt.ATI1]:"bc4-r-unorm",[bt.BC4U]:"bc4-r-unorm",[bt.BC4S]:"bc4-r-snorm",[bt.ATI2]:"bc5-rg-unorm",[bt.BC5U]:"bc5-rg-unorm",[bt.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},pt={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},be={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:e_,HEADER_DX10_FIELDS:t_,DXGI_FORMAT:jp,D3D10_RESOURCE_DIMENSION:Xp,D3DFMT:bt},a_={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function i_(a,e){let{format:t,fourCC:i,width:r,height:s,dataOffset:o,mipmapCount:d}=s_(a);if(!e.includes(t))throw new Error(`Unsupported texture format: ${i} ${t}, supported: ${e}`);if(d<=1)return{format:t,width:r,height:s,resource:[new Uint8Array(a,o)],alphaMode:"no-premultiply-alpha"};let h=r_(t,r,s,o,d,a);return{format:t,width:r,height:s,resource:h,alphaMode:"no-premultiply-alpha"}}function r_(a,e,t,i,r,s){let o=[],d=a_[a],h=e,l=t,u=i;for(let p=0;p<r;++p){let y=Math.ceil(Math.max(4,h)/4)*4,_=Math.ceil(Math.max(4,l)/4)*4,v=d?y/4*_/4*d:h*l*4,T=new Uint8Array(s,u,v);o.push(T),u+=v,h=Math.max(h>>1,1),l=Math.max(l>>1,1)}return o}function s_(a){let e=new Uint32Array(a,0,be.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[be.HEADER_FIELDS.MAGIC]!==be.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");let t=e[be.HEADER_FIELDS.HEIGHT],i=e[be.HEADER_FIELDS.WIDTH],r=Math.max(1,e[be.HEADER_FIELDS.MIPMAP_COUNT]),s=e[be.HEADER_FIELDS.PF_FLAGS],o=e[be.HEADER_FIELDS.FOURCC],d=n_(e,s,o,a),h=be.MAGIC_SIZE+be.HEADER_SIZE+(o===be.D3DFMT.DX10?be.HEADER_DX10_SIZE:0);return{format:d,fourCC:o,width:i,height:t,dataOffset:h,mipmapCount:r}}function n_(a,e,t,i){if(e&be.PIXEL_FORMAT_FLAGS.FOURCC){if(t===be.D3DFMT.DX10){let r=new Uint32Array(i,be.MAGIC_SIZE+be.HEADER_SIZE,be.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(r[be.HEADER_DX10_FIELDS.MISC_FLAG]===be.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(r[be.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===be.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");let s=r[be.HEADER_DX10_FIELDS.DXGI_FORMAT];if(s in pt)return pt[s];throw new Error(`DDSParser cannot parse texture data with DXGI format ${s}`)}if(t in Fb)return Fb[t];throw new Error(`DDSParser cannot parse texture data with fourCC format ${t}`)}if(e&be.PIXEL_FORMAT_FLAGS.RGB||e&be.PIXEL_FORMAT_FLAGS.RGBA)return o_(a);throw e&be.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&be.PIXEL_FORMAT_FLAGS.LUMINANCE||e&be.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&be.PIXEL_FORMAT_FLAGS.ALPHA||e&be.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function o_(a){let e=a[be.HEADER_FIELDS.RGB_BITCOUNT],t=a[be.HEADER_FIELDS.R_BIT_MASK],i=a[be.HEADER_FIELDS.G_BIT_MASK],r=a[be.HEADER_FIELDS.B_BIT_MASK],s=a[be.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(t===255&&i===65280&&r===16711680&&s===4278190080)return pt[be.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(t===16711680&&i===65280&&r===255&&s===4278190080)return pt[be.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(t===1072693248&&i===1047552&&r===1023&&s===3221225472)return pt[be.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(t===65535&&i===4294901760&&r===0&&s===0)return pt[be.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(t===4294967295&&i===0&&r===0&&s===0)return pt[be.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(t===31744&&i===992&&r===31&&s===32768)return pt[be.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(t===63488&&i===2016&&r===31&&s===0)return pt[be.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(t===3840&&i===240&&r===15&&s===61440)return pt[be.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(t===255&&i===0&&r===0&&s===65280)return pt[be.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(t===65535&&i===0&&r===0&&s===0)return pt[be.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(t===255&&i===0&&r===0&&s===0)return pt[be.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
bitCount = ${e}, rBitMask = ${t}, gBitMask = ${i}, aBitMask = ${s}`)}var oS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadDDS"},name:"loadDDS",test(a){return zt(a,[".dds"])},async load(a,e,t){let i=await jo(),r=await(await fetch(a)).arrayBuffer(),s=i_(r,i),o=new Ci(s);return Qa(o,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},c_=(a=>(a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGBA=6408]="RGBA",a[a.RGBA8UI=36220]="RGBA8UI",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.RGBA8I=36238]="RGBA8I",a[a.RGBA8=32856]="RGBA8",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",a[a.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",a[a.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",a[a.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",a[a.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",a[a.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",a[a.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",a[a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",a[a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",a[a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",a))(c_||{}),d_=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(d_||{}),h_=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(h_||{}),l_={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},f_=[171,75,84,88,32,49,49,187,13,10,26,10],u_={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},b_=64,p_=67305985,g_={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},m_={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},__={32819:2,32820:2,33635:2},y_={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Le={FILE_HEADER_SIZE:b_,FILE_IDENTIFIER:f_,FORMATS_TO_COMPONENTS:m_,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:y_,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:l_,FIELDS:u_,TYPES_TO_BYTES_PER_COMPONENT:g_,TYPES_TO_BYTES_PER_PIXEL:__,ENDIANNESS:p_};function x_(a,e){let t=new DataView(a);if(!w_(t))throw new Error("Invalid KTX identifier in header");let{littleEndian:i,glType:r,glFormat:s,glInternalFormat:o,pixelWidth:d,pixelHeight:h,numberOfMipmapLevels:l,offset:u}=S_(t),p=Le.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[o];if(!p)throw new Error(`Unknown texture format ${o}`);if(!e.includes(p))throw new Error(`Unsupported texture format: ${p}, supportedFormats: ${e}`);let y=T_(r,s,o),_=v_(t,r,y,d,h,u,l,i);return{format:p,width:d,height:h,resource:_,alphaMode:"no-premultiply-alpha"}}function v_(a,e,t,i,r,s,o,d){let h=i+3&-4,l=r+3&-4,u=i*r;e===0&&(u=h*l);let p=u*t,y=i,_=r,v=h,T=l,A=s,P=new Array(o);for(let I=0;I<o;I++){let F=a.getUint32(A,d),D=A+4;P[I]=new Uint8Array(a.buffer,D,p),D+=p,A+=F+4,A=A%4!==0?A+4-A%4:A,y=y>>1||1,_=_>>1||1,v=y+4-1&-4,T=_+4-1&-4,p=v*T*t}return P}function T_(a,e,t){let i=Le.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[t];if(a!==0&&(Le.TYPES_TO_BYTES_PER_COMPONENT[a]?i=Le.TYPES_TO_BYTES_PER_COMPONENT[a]*Le.FORMATS_TO_COMPONENTS[e]:i=Le.TYPES_TO_BYTES_PER_PIXEL[a]),i===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return i}function S_(a){let e=a.getUint32(Le.FIELDS.ENDIANNESS,!0)===Le.ENDIANNESS,t=a.getUint32(Le.FIELDS.GL_TYPE,e),i=a.getUint32(Le.FIELDS.GL_FORMAT,e),r=a.getUint32(Le.FIELDS.GL_INTERNAL_FORMAT,e),s=a.getUint32(Le.FIELDS.PIXEL_WIDTH,e),o=a.getUint32(Le.FIELDS.PIXEL_HEIGHT,e)||1,d=a.getUint32(Le.FIELDS.PIXEL_DEPTH,e)||1,h=a.getUint32(Le.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,l=a.getUint32(Le.FIELDS.NUMBER_OF_FACES,e),u=a.getUint32(Le.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),p=a.getUint32(Le.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(o===0||d!==1)throw new Error("Only 2D textures are supported");if(l!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:t,glFormat:i,glInternalFormat:r,pixelWidth:s,pixelHeight:o,numberOfMipmapLevels:u,offset:Le.FILE_HEADER_SIZE+p}}function w_(a){for(let e=0;e<Le.FILE_IDENTIFIER.length;e++)if(a.getUint8(e)!==Le.FILE_IDENTIFIER[e])return!1;return!0}var cS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadKTX"},name:"loadKTX",test(a){return zt(a,".ktx")},async load(a,e,t){let i=await jo(),r=await(await fetch(a)).arrayBuffer(),s=x_(r,i),o=new Ci(s);return Qa(o,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},A_='(function(){"use strict";const s={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:i},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:i}};function f(r){const t=r.format;if(s[t]){const n=s[t].convertFunction,o=r.resource;for(let e=0;e<o.length;e++)o[e]=n(o[e]);r.format=s[t].convertedFormat}}function i(r){const t=r.byteLength/3,n=new Uint32Array(t);for(let o=0;o<t;++o)n[o]=r[o*3]+(r[o*3+1]<<8)+(r[o*3+2]<<16)+4278190080;return new Uint8Array(n.buffer)}function d(r){const t=[];for(let n=0;n<r.numLevels;n++){const o=r.getImageData(n,0,0),e=new Uint8Array(o.byteLength);e.set(o),t.push(e)}return t}const w={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function p(r){const t=w[r];if(t)return t;throw new Error(`Unsupported glInternalFormat: ${r}`)}const h={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function F(r){const t=h[r];if(t)return t;throw new Error(`Unsupported VkFormat: ${r}`)}function U(r){return r.classId===2?F(r.vkFormat):p(r.glInternalformat)}const T={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function y(r){const t=T[r];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${r}`)}const a={jsUrl:"",wasmUrl:""};let l,u,c;async function g(){if(!c){const r=new URL(a.jsUrl,location.origin).href,t=new URL(a.wasmUrl,location.origin).href;importScripts(r),c=new Promise(n=>{LIBKTX({locateFile:o=>t}).then(o=>{n(o)})})}return c}async function v(r,t){const n=await fetch(r);if(n.ok){const o=await n.arrayBuffer();return new t.ktxTexture(new Uint8Array(o))}throw new Error(`Failed to load KTX(2) texture: ${r}`)}const x=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function B(r){const t=await g(),n=await v(r,t);let o;if(n.needsTranscoding){o=u;const R=t.TranscodeTarget[l];if(n.transcodeBasis(R,0)!==t.ErrorCode.SUCCESS)throw new Error("Unable to transcode basis texture.")}else o=U(n);const e=d(n),b={width:n.baseWidth,height:n.baseHeight,format:o,mipLevelCount:n.numLevels,resource:e,alphaMode:"no-premultiply-alpha"};return f(b),b}async function A(r,t,n){r&&(a.jsUrl=r),t&&(a.wasmUrl=t),u=x.filter(o=>n.includes(o))[0],l=y(u),await g()}const m={init:async r=>{const{jsUrl:t,wasmUrl:n,supportedTextures:o}=r;await A(t,n,o)},load:async r=>{var t;try{const n=await B(r.url);return{type:"load",url:r.url,success:!0,textureOptions:n,transferables:(t=n.resource)==null?void 0:t.map(o=>o.buffer)}}catch(n){throw n}}};self.onmessage=async r=>{var t;const n=r.data,o=await((t=m[n.type])==null?void 0:t.call(m,n));o&&self.postMessage(o,o.transferables)}})();\n',Si=null,Cn=class{constructor(){Si||(Si=URL.createObjectURL(new Blob([A_],{type:"application/javascript"}))),this.worker=new Worker(Si)}};Cn.revokeObjectURL=function(){Si&&(URL.revokeObjectURL(Si),Si=null)};var Db={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};var lr,Hp={};function E_(a){return lr||(lr=new Cn().worker,lr.onmessage=e=>{let{success:t,url:i,textureOptions:r}=e.data;Hp[i](r)},lr.postMessage({type:"init",jsUrl:Db.jsUrl,wasmUrl:Db.wasmUrl,supportedTextures:a})),lr}function P_(a,e){let t=E_(e);return new Promise(i=>{Hp[a]=i,t.postMessage({type:"load",url:a})})}var dS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadKTX2"},name:"loadKTX2",test(a){return zt(a,".ktx2")},async load(a,e,t){let i=await jo(),r=await P_(a,i),s=new Ci(r);return Qa(s,t,a)},async unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var Ah=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],hS={extension:B.ResolveParser,test:a=>zt(a,[".ktx",".ktx2",".dds"]),parse:a=>{var e,t;let i,r=a.split(".");if(r.length>2){let s=r[r.length-2];Ah.includes(s)&&(i=s)}else i=r[r.length-1];return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i,src:a}}},Ms,lS={extension:{type:B.DetectionParser,priority:2},test:async()=>!!(await Lo()||Uo()),add:async a=>{let e=await Up();return Ms=R_(e),[...Ms,...a]},remove:async a=>Ms?a.filter(e=>!(e in Ms)):a};function R_(a){let e=["basis"],t={};return a.forEach(i=>{let r=i.split("-")[0];r&&!t[r]&&(t[r]=!0,e.push(r))}),e.sort((i,r)=>{let s=Ah.indexOf(i),o=Ah.indexOf(r);return s===-1?1:o===-1?-1:s-o}),e}var M_=new qe,Eh=class{cull(a,e,t=!0){this._cullRecursive(a,e,t)}_cullRecursive(a,e,t=!0){var i;if(a.cullable&&a.measurable&&a.includeInBuild){let r=(i=a.cullArea)!=null?i:Io(a,t,M_);a.culled=r.x>=e.x+e.width||r.y>=e.y+e.height||r.x+r.width<=e.x||r.y+r.height<=e.y}else a.culled=!1;if(!(!a.cullableChildren||a.culled||!a.renderable||!a.measurable||!a.includeInBuild))for(let r=0;r<a.children.length;r++)this._cullRecursive(a.children[r],e,t)}};Eh.shared=new Eh;var C_=Eh,Ph=class{static init(){this._renderRef=this.render.bind(this),this.render=()=>{C_.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}};Ph.extension={priority:10,type:B.Application,name:"culler"};var fS={extension:{type:B.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(function(){return Tg})}},O_=Object.defineProperty,On=Object.getOwnPropertySymbols,zp=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,kb=(a,e,t)=>e in a?O_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fd=(a,e)=>{for(var t in e||(e={}))zp.call(e,t)&&kb(a,t,e[t]);if(On)for(var t of On(e))Vp.call(e,t)&&kb(a,t,e[t]);return a},I_=(a,e)=>{var t={};for(var i in a)zp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&On)for(var i of On(a))e.indexOf(i)<0&&Vp.call(a,i)&&(t[i]=a[i]);return t},Wp=class Rh extends ht{constructor(e){e=fd(fd({},Rh.defaultOptions),e),super(e),this.enabled=!0,this._state=Et.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,t,i,r){e.applyFilter(this,t,i,r)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){let t=e,{gpu:i,gl:r}=t,s=I_(t,["gpu","gl"]),o,d;return i&&(o=Zt.from(i)),r&&(d=fa.from(r)),new Rh(fd({gpuProgram:o,glProgram:d},s))}};Wp.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};var qr=Wp;var Yp=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();
vTextureCoord = filterTextureCoord();
}
`,G_=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,Ub=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv);

return sample * alphaUniforms.uAlpha;
}`,B_=Object.defineProperty,F_=Object.defineProperties,D_=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertySymbols,$p=Object.prototype.hasOwnProperty,Kp=Object.prototype.propertyIsEnumerable,Lb=(a,e,t)=>e in a?B_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ud=(a,e)=>{for(var t in e||(e={}))$p.call(e,t)&&Lb(a,t,e[t]);if(In)for(var t of In(e))Kp.call(e,t)&&Lb(a,t,e[t]);return a},k_=(a,e)=>F_(a,D_(e)),U_=(a,e)=>{var t={};for(var i in a)$p.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&In)for(var i of In(a))e.indexOf(i)<0&&Kp.call(a,i)&&(t[i]=a[i]);return t},L_=class qp extends qr{constructor(e){e=ud(ud({},qp.defaultOptions),e);let t=Zt.from({vertex:{source:Ub,entryPoint:"mainVertex"},fragment:{source:Ub,entryPoint:"mainFragment"}}),i=fa.from({vertex:Yp,fragment:G_,name:"alpha-filter"}),r=e,{alpha:s}=r,o=U_(r,["alpha"]),d=new Je({uAlpha:{value:s,type:"f32"}});super(k_(ud({},o),{gpuProgram:t,glProgram:i,resources:{alphaUniforms:d}}))}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};L_.defaultOptions={alpha:1};var Zp={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},N_=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function j_(a){let e=Zp[a],t=e.length,i=N_,r="",s="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",o;for(let d=0;d<a;d++){let h=s.replace("%index%",d.toString());o=d,d>=t&&(o=a-d-1),h=h.replace("%value%",e[o].toString()),r+=h,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",a.toString()),i}var X_=`
in vec2 aPosition;

uniform float uStrength;

out vec2 vBlurTexCoords[%size%];

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();

float pixelStrength = uInputSize.%dimension% * uStrength;

vec2 textureCoord = filterTextureCoord();
%blur%
}`;function H_(a,e){let t=Math.ceil(a/2),i=X_,r="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let o=0;o<a;o++){let d=s.replace("%index%",o.toString());d=d.replace("%sampleIndex%",`${o-(t-1)}.0`),r+=d,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",a.toString()),i=i.replace("%dimension%",e?"z":"w"),i}function z_(a,e){let t=H_(e,a),i=j_(e);return fa.from({vertex:t,fragment:i,name:`blur-${a?"horizontal":"vertical"}-pass-filter`})}var V_=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
@builtin(position) position: vec4<f32>,
%blur-struct%
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {

let filteredCord = filterTextureCoord(aPosition);

let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

return VSOutput(
filterVertexPosition(aPosition),
%blur-vertex-out%
);
}

@fragment
fn mainFragment(
@builtin(position) position: vec4<f32>,
%blur-fragment-in%
) -> @location(0) vec4<f32> {

var   finalColor = vec4(0.0);

%blur-sampling%

return finalColor;
}`;function W_(a,e){let t=Zp[e],i=t.length,r=[],s=[],o=[];for(let p=0;p<e;p++){r[p]=`@location(${p}) offset${p}: vec2<f32>,`,a?s[p]=`filteredCord + vec2(${p-i+1} * pixelStrength, 0.0),`:s[p]=`filteredCord + vec2(0.0, ${p-i+1} * pixelStrength),`;let y=p<i?p:e-p-1,_=t[y].toString();o[p]=`finalColor += textureSample(uTexture, uSampler, offset${p}) * ${_};`}let d=r.join(`
`),h=s.join(`
`),l=o.join(`
`),u=V_.replace("%blur-struct%",d).replace("%blur-vertex-out%",h).replace("%blur-fragment-in%",d).replace("%blur-sampling%",l).replace("%dimension%",a?"z":"w");return Zt.from({vertex:{source:u,entryPoint:"mainVertex"},fragment:{source:u,entryPoint:"mainFragment"}})}var Y_=Object.defineProperty,Nb=Object.getOwnPropertySymbols,$_=Object.prototype.hasOwnProperty,K_=Object.prototype.propertyIsEnumerable,jb=(a,e,t)=>e in a?Y_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,bd=(a,e)=>{for(var t in e||(e={}))$_.call(e,t)&&jb(a,t,e[t]);if(Nb)for(var t of Nb(e))K_.call(e,t)&&jb(a,t,e[t]);return a},Qp=class Jp extends qr{constructor(e){e=bd(bd({},Jp.defaultOptions),e);let t=z_(e.horizontal,e.kernelSize),i=W_(e.horizontal,e.kernelSize);super(bd({glProgram:t,gpuProgram:i,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}}},e)),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,i,r){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,i,r);else{let s=ze.getSameSizeTexture(t),o=t,d=s;this._state.blend=!1;let h=e.renderer.type===yt.WEBGPU;for(let l=0;l<this.passes-1;l++){e.applyFilter(this,o,d,l===0?!0:h);let u=d;d=o,o=u}this._state.blend=!0,e.applyFilter(this,o,i,r),ze.returnTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};Qp.defaultOptions={strength:8,quality:4,kernelSize:5};var pd=Qp,q_=Object.defineProperty,Z_=Object.defineProperties,Q_=Object.getOwnPropertyDescriptors,Gn=Object.getOwnPropertySymbols,e3=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable,Xb=(a,e,t)=>e in a?q_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fr=(a,e)=>{for(var t in e||(e={}))e3.call(e,t)&&Xb(a,t,e[t]);if(Gn)for(var t of Gn(e))t3.call(e,t)&&Xb(a,t,e[t]);return a},J_=(a,e)=>Z_(a,Q_(e)),ey=(a,e)=>{var t={};for(var i in a)e3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Gn)for(var i of Gn(a))e.indexOf(i)<0&&t3.call(a,i)&&(t[i]=a[i]);return t},Mh=class extends qr{constructor(...e){var t;let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={strength:i},e[1]!==void 0&&(i.quality=e[1]),e[2]!==void 0&&(i.resolution=e[2]||"inherit"),e[3]!==void 0&&(i.kernelSize=e[3])),i=fr(fr({},pd.defaultOptions),i);let r=i,{strength:s,strengthX:o,strengthY:d,quality:h}=r,l=ey(r,["strength","strengthX","strengthY","quality"]);super(J_(fr({},l),{compatibleRenderers:yt.BOTH,resources:{}})),this._repeatEdgePixels=!1,this.blurXFilter=new pd(fr({horizontal:!0},i)),this.blurYFilter=new pd(fr({horizontal:!1},i)),this.quality=h,this.strengthX=o??s,this.strengthY=d??s,this.repeatEdgePixels=!1}apply(e,t,i,r){let s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){let d=ze.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,d,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,d,i,r),ze.returnTexture(d)}else o?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,i,r)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,i,r))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return this.strength}set blur(e){this.strength=e}get blurX(){return this.strengthX}set blurX(e){this.strengthX=e}get blurY(){return this.strengthY}set blurY(e){this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};Mh.defaultOptions={strength:8,quality:4,kernelSize:5};var ty=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
vec4 color = texture(uTexture, vTextureCoord);
float randomValue = rand(gl_FragCoord.xy * uSeed);
float diff = (randomValue - 0.5) *  uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (color.a > 0.0) {
color.rgb /= color.a;
}

color.r += diff;
color.g += diff;
color.b += diff;

// Premultiply alpha again.
color.rgb *= color.a;

finalColor = color;
}
`,Hb=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
uNoise:f32,
uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

fn rand(co:vec2<f32>) -> f32
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);


var sample = textureSample(uTexture, uSampler, uv);
var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
var diff = (randomValue - 0.5) * noiseUniforms.uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (sample.a > 0.0) {
sample.r /= sample.a;
sample.g /= sample.a;
sample.b /= sample.a;
}

sample.r += diff;
sample.g += diff;
sample.b += diff;

// Premultiply alpha again.
sample.r *= sample.a;
sample.g *= sample.a;
sample.b *= sample.a;

return sample;
}`,ay=Object.defineProperty,iy=Object.defineProperties,ry=Object.getOwnPropertyDescriptors,Bn=Object.getOwnPropertySymbols,a3=Object.prototype.hasOwnProperty,i3=Object.prototype.propertyIsEnumerable,zb=(a,e,t)=>e in a?ay(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,gd=(a,e)=>{for(var t in e||(e={}))a3.call(e,t)&&zb(a,t,e[t]);if(Bn)for(var t of Bn(e))i3.call(e,t)&&zb(a,t,e[t]);return a},sy=(a,e)=>iy(a,ry(e)),ny=(a,e)=>{var t={};for(var i in a)a3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Bn)for(var i of Bn(a))e.indexOf(i)<0&&i3.call(a,i)&&(t[i]=a[i]);return t},oy=class r3 extends qr{constructor(e={}){e=gd(gd({},r3.defaultOptions),e);let t=Zt.from({vertex:{source:Hb,entryPoint:"mainVertex"},fragment:{source:Hb,entryPoint:"mainFragment"}}),i=fa.from({vertex:Yp,fragment:ty,name:"noise-filter"}),r=e,{noise:s,seed:o}=r,d=ny(r,["noise","seed"]);super(sy(gd({},d),{gpuProgram:t,glProgram:i,resources:{noiseUniforms:new Je({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}})),this.noise=s,this.seed=o??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};oy.defaultOptions={noise:.5};var cy=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
float clip = step(3.5,
step(uMaskClamp.x, vMaskCoord.x) +
step(uMaskClamp.y, vMaskCoord.y) +
step(vMaskCoord.x, uMaskClamp.z) +
step(vMaskCoord.y, uMaskClamp.w));

// TODO look into why this is needed
float npmAlpha = uAlpha;
vec4 original = texture(uTexture, vTextureCoord);
vec4 masky = texture(uMaskTexture, vMaskCoord);
float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

float a = alphaMul * masky.r * npmAlpha * clip;

if (uInverse == 1.0) {
a = 1.0 - a;
}

finalColor = original * a;
}
`,dy=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
gl_Position = filterVertexPosition(aPosition);
vTextureCoord = filterTextureCoord(aPosition);
vMaskCoord = getFilterCoord(aPosition);
}
`,Vb=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
uFilterMatrix:mat3x3<f32>,
uMaskClamp:vec4<f32>,
uAlpha:f32,
uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>,
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition),
getFilterCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) filterUv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var maskClamp = filterUniforms.uMaskClamp;
var uAlpha = filterUniforms.uAlpha;

var clip = step(3.5,
step(maskClamp.x, filterUv.x) +
step(maskClamp.y, filterUv.y) +
step(filterUv.x, maskClamp.z) +
step(filterUv.y, maskClamp.w));

var mask = textureSample(uMaskTexture, uSampler, filterUv);
var source = textureSample(uTexture, uSampler, uv);
var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

var a: f32 = alphaMul * mask.r * uAlpha * clip;

if (filterUniforms.uInverse == 1.0) {
a = 1.0 - a;
}

return source * a;
}
`,hy=Object.defineProperty,ly=Object.defineProperties,fy=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,s3=Object.prototype.hasOwnProperty,n3=Object.prototype.propertyIsEnumerable,Wb=(a,e,t)=>e in a?hy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,uy=(a,e)=>{for(var t in e||(e={}))s3.call(e,t)&&Wb(a,t,e[t]);if(Fn)for(var t of Fn(e))n3.call(e,t)&&Wb(a,t,e[t]);return a},by=(a,e)=>ly(a,fy(e)),py=(a,e)=>{var t={};for(var i in a)s3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Fn)for(var i of Fn(a))e.indexOf(i)<0&&n3.call(a,i)&&(t[i]=a[i]);return t},Ch=class extends qr{constructor(e){let t=e,{sprite:i}=t,r=py(t,["sprite"]),s=new Hs(i.texture),o=new Je({uFilterMatrix:{value:new ie,type:"mat3x3<f32>"},uMaskClamp:{value:s.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),d=Zt.from({vertex:{source:Vb,entryPoint:"mainVertex"},fragment:{source:Vb,entryPoint:"mainFragment"}}),h=fa.from({vertex:dy,fragment:cy,name:"mask-filter"});super(by(uy({},r),{gpuProgram:d,glProgram:h,resources:{filterUniforms:o,uMaskTexture:i.texture.source}})),this.sprite=i,this._textureMatrix=s}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,t,i,r){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,t,i,r)}};function Yb(a,e,t,i,r,s,o,d){let h=o-t,l=d-i,u=r-t,p=s-i,y=a-t,_=e-i,v=h*h+l*l,T=h*u+l*p,A=h*y+l*_,P=u*u+p*p,I=u*y+p*_,F=1/(v*P-T*T),D=(P*A-T*I)*F,H=(v*I-T*A)*F;return D>=0&&H>=0&&D+H<1}var o3=class c3{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{let{queue:t}=this,i=0;for(;t.length&&i<c3.uploadsPerFrame;){let r=t.shift();this.uploadQueueItem(r),i++}t.length?tt.system.addOnce(this._tick,this,Ra.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){let t=Array.isArray(e)?e:[e];for(let i of t)i instanceof le?this._addContainer(i):this.resolveQueueItem(i,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(let t of e.children)this._addContainer(t)}upload(e){return e&&this.add(e),new Promise(t=>{this.queue.length?(this.resolves.push(t),this.dedupeQueue(),tt.system.addOnce(this._tick,this,Ra.UTILITY)):t()})}dedupeQueue(){let e=Object.create(null),t=0;for(let i=0;i<this.queue.length;i++){let r=this.queue[i];e[r.uid]||(e[r.uid]=!0,this.queue[t++]=r)}this.queue.length=t}_resolve(){let{resolves:e}=this,t=e.slice(0);e.length=0;for(let i of t)i()}};o3.uploadsPerFrame=4;var gy=o3,my=Object.defineProperty,Dn=Object.getOwnPropertySymbols,d3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,$b=(a,e,t)=>e in a?my(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,_y=(a,e)=>{for(var t in e||(e={}))d3.call(e,t)&&$b(a,t,e[t]);if(Dn)for(var t of Dn(e))h3.call(e,t)&&$b(a,t,e[t]);return a},yy=(a,e)=>{var t={};for(var i in a)d3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Dn)for(var i of Dn(a))e.indexOf(i)<0&&h3.call(a,i)&&(t[i]=a[i]);return t},qa=class extends ha{constructor(...e){var t;let i=e[0];i instanceof qt&&(i={geometry:i,shader:e[1]},e[3]&&(i.geometry.topology=e[3]));let r=i,{geometry:s,shader:o,texture:d,roundPixels:h,state:l}=r,u=yy(r,["geometry","shader","texture","roundPixels","state"]);super(_y({label:"Mesh"},u)),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=o??null,this.texture=(t=d??o?.texture)!=null?t:K.WHITE,this.state=l??Et.for2d(),this._geometry=s,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=h??!1}get material(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){var t;this._geometry!==e&&((t=this._geometry)==null||t.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof Kr?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){let{x:t,y:i}=e;if(!this.bounds.containsPoint(t,i))return!1;let r=this.geometry.getBuffer("aPosition").data,s=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){let o=this.geometry.getIndex().data,d=o.length;for(let h=0;h+2<d;h+=s){let l=o[h]*2,u=o[h+1]*2,p=o[h+2]*2;if(Yb(t,i,r[l],r[l+1],r[u],r[u+1],r[p],r[p+1]))return!0}}else{let o=r.length/2;for(let d=0;d+2<o;d+=s){let h=d*2,l=(d+1)*2,u=(d+2)*2;if(Yb(t,i,r[h],r[h+1],r[l],r[l+1],r[u],r[u+1]))return!0}}return!1}destroy(e){var t;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}(t=this._geometry)==null||t.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}},xy=Object.defineProperty,vy=Object.defineProperties,Ty=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,l3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable,Kb=(a,e,t)=>e in a?xy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Sy=(a,e)=>{for(var t in e||(e={}))l3.call(e,t)&&Kb(a,t,e[t]);if(kn)for(var t of kn(e))f3.call(e,t)&&Kb(a,t,e[t]);return a},wy=(a,e)=>vy(a,Ty(e)),Ay=(a,e)=>{var t={};for(var i in a)l3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&kn)for(var i of kn(a))e.indexOf(i)<0&&f3.call(a,i)&&(t[i]=a[i]);return t},Oh=class a extends we{constructor(...e){let t=e[0];Array.isArray(e[0])&&(t={textures:e[0],autoUpdate:e[1]});let i=t,{textures:r,autoUpdate:s}=i,o=Ay(i,["textures","autoUpdate"]),[d]=r;super(wy(Sy({},o),{texture:d instanceof K?d:d.texture})),this._textures=null,this._durations=null,this._autoUpdate=s??!0,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=r}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(tt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(tt.shared.add(this.update,this,Ra.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;let t=e.deltaTime,i=this.animationSpeed*t,r=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];let o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this._updateTexture())}_updateTexture(){let e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){let t=[];for(let i=0;i<e.length;++i)t.push(K.from(e[i]));return new a(t)}static fromImages(e){let t=[];for(let i=0;i<e.length;++i)t.push(K.from(e[i]));return new a(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof K)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(tt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(tt.shared.add(this.update,this),this._isConnectedToTicker=!0))}},Ih=class{constructor({matrix:e,observer:t}={}){this.dirty=!0,this._matrix=e??new ie,this.observer=t,this.position=new Ve(this,0,0),this.scale=new Ve(this,1,1),this.pivot=new Ve(this,0,0),this.skew=new Ve(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){var t;this.dirty=!0,e===this.skew&&this.updateSkew(),(t=this.observer)==null||t._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}},Ey=Object.defineProperty,Un=Object.getOwnPropertySymbols,u3=Object.prototype.hasOwnProperty,b3=Object.prototype.propertyIsEnumerable,qb=(a,e,t)=>e in a?Ey(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ur=(a,e)=>{for(var t in e||(e={}))u3.call(e,t)&&qb(a,t,e[t]);if(Un)for(var t of Un(e))b3.call(e,t)&&qb(a,t,e[t]);return a},Py=(a,e)=>{var t={};for(var i in a)u3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Un)for(var i of Un(a))e.indexOf(i)<0&&b3.call(a,i)&&(t[i]=a[i]);return t},p3=class Us extends ha{constructor(...e){let t=e[0]||{};t instanceof K&&(t={texture:t}),e.length>1&&(t.width=e[1],t.height=e[2]),t=ur(ur({},Us.defaultOptions),t);let i=t??{},{texture:r,anchor:s,tilePosition:o,tileScale:d,tileRotation:h,width:l,height:u,applyAnchorToTexture:p,roundPixels:y}=i,_=Py(i,["texture","anchor","tilePosition","tileScale","tileRotation","width","height","applyAnchorToTexture","roundPixels"]);super(ur({label:"TilingSprite"},_)),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Ve({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=p,this.texture=r,this._width=l??r.width,this._height=u??r.height,this._tileTransform=new Ih({observer:{_onUpdate:()=>this.onViewUpdate()}}),s&&(this.anchor=s),this.tilePosition=o,this.tileScale=d,this.tileRotation=h,this.roundPixels=y??!1}static from(e,t={}){return typeof e=="string"?new Us(ur({texture:Oe.get(e)},t)):new Us(ur({texture:e},t))}get uvRespectAnchor(){return Qt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){Qt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){let e=this._bounds,t=this._anchor,i=this._width,r=this._height;e.maxX=-t._x*i,e.minX=e.maxX+i,e.maxY=-t._y*r,e.minY=e.maxY+r}containsPoint(e){let t=this._width,i=this._height,r=-t*this._anchor._x,s=0;return e.x>=r&&e.x<=r+t&&(s=-i*this._anchor._y,e.y>=s&&e.y<=s+i)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};p3.defaultOptions={texture:K.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};var Ry=p3,My=Object.defineProperty,Ln=Object.getOwnPropertySymbols,g3=Object.prototype.hasOwnProperty,m3=Object.prototype.propertyIsEnumerable,Zb=(a,e,t)=>e in a?My(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Cy=(a,e)=>{for(var t in e||(e={}))g3.call(e,t)&&Zb(a,t,e[t]);if(Ln)for(var t of Ln(e))m3.call(e,t)&&Zb(a,t,e[t]);return a},Oy=(a,e)=>{var t={};for(var i in a)g3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Ln)for(var i of Ln(a))e.indexOf(i)<0&&m3.call(a,i)&&(t[i]=a[i]);return t},Nr=class extends ha{constructor(e,t){let i=e,{text:r,resolution:s,style:o,anchor:d,width:h,height:l,roundPixels:u}=i,p=Oy(i,["text","resolution","style","anchor","width","height","roundPixels"]);super(Cy({},p)),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=r??"",this.style=o,this.resolution=s??null,this.allowChildren=!1,this._anchor=new Ve({_onUpdate:()=>{this.onViewUpdate()}}),d&&(this.anchor=d),this.roundPixels=u??!1,h!==void 0&&(this.width=h),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){let t=this.bounds.width,i=this.bounds.height,r=-t*this.anchor.x,s=0;return e.x>=r&&e.x<=r+t&&(s=-i*this.anchor.y,e.y>=s&&e.y<=s+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}};function Rl(a,e){var t;let i=(t=a[0])!=null?t:{};return(typeof i=="string"||a[1])&&(i={text:i,style:a[1]}),i}var je=class extends Nr{constructor(...e){let t=Rl(e,"Text");super(t,Pt),this.renderPipeId="text"}updateBounds(){let e=this._bounds,t=this._anchor,i=na.measureText(this._text,this._style),{width:r,height:s}=i;e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*s,e.maxY=e.minY+s}},Gh=class extends gy{resolveQueueItem(e,t){return e instanceof le?this.resolveContainerQueueItem(e,t):e instanceof Fe||e instanceof K?t.push(e.source):e instanceof dt&&t.push(e),null}resolveContainerQueueItem(e,t){e instanceof we||e instanceof Ry||e instanceof qa?t.push(e.texture.source):e instanceof je?t.push(e):e instanceof We?t.push(e.context):e instanceof Oh&&e.textures.forEach(i=>{i.source?t.push(i.source):t.push(i.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:r}=i.data;return r.source}else if(i.action==="fill"){let{texture:r}=i.data.style;return r.source}return null}},Bh=class extends Nr{constructor(...e){var t,i,r;let s=Rl(e,"BitmapText");(t=s.style)!=null||(s.style=s.style||{}),(r=(i=s.style).fill)!=null||(i.fill=16777215),super(s,Pt),this.renderPipeId="bitmapText"}updateBounds(){let e=this._bounds,t=this._anchor,i=pn.measureText(this.text,this._style),r=i.scale,s=i.offsetY*r,o=i.width*r,d=i.height*r,h=this._style._stroke;h&&(o+=h.width,d+=h.width),e.minX=-t._x*o,e.maxX=e.minX+o,e.minY=-t._y*(d+s),e.maxY=e.minY+d}set resolution(e){}get resolution(){return this._resolution}},Fh=class extends Nr{constructor(...e){let t=Rl(e,"HtmlText");super(t,yn),this.renderPipeId="htmlText"}updateBounds(){let e=this._bounds,t=this._anchor,i=yp(this.text,this._style),{width:r,height:s}=i;e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*s,e.maxY=e.minY+s}},Dh=class extends Gh{uploadQueueItem(e){e instanceof Fe?this.uploadTextureSource(e):e instanceof je?this.uploadText(e):e instanceof Fh?this.uploadHTMLText(e):e instanceof Bh?this.uploadBitmapText(e):e instanceof dt&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:r}=i.data;this.uploadTextureSource(r.source)}else if(i.action==="fill"){let{texture:r}=i.data.style;this.uploadTextureSource(r.source)}return null}},kh=class extends Dh{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}};kh.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"prepare"};var Nn=class{constructor(){this._tempState=Et.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,i){let r=e.renderer,s=this._didUploadHash[i.uid];r.shader.bind(i,s),s||(this._didUploadHash[i.uid]=!0),r.shader.updateUniformGroup(r.globalUniforms.uniformGroup),r.geometry.bind(t,i.glProgram)}execute(e,t){let i=e.renderer;this._tempState.blendMode=t.blendMode,i.state.set(this._tempState);let r=t.textures.textures;for(let s=0;s<t.textures.count;s++)i.texture.bind(r[s],s);i.geometry.draw(t.topology,t.size,t.start)}};Nn.extension={type:[B.WebGLPipesAdaptor],name:"batch"};var Cs=Et.for2d(),jn=class{start(e,t,i){let r=e.renderer,s=r.encoder,o=i.gpuProgram;this._shader=i,this._geometry=t,s.setGeometry(t,o),Cs.blendMode="normal",r.pipeline.getPipeline(t,o,Cs);let d=r.globalUniforms.bindGroup;s.resetBindGroup(1),s.setBindGroup(0,d,o)}execute(e,t){let i=this._shader.gpuProgram,r=e.renderer,s=r.encoder;if(!t.bindGroup){let h=t.textures;t.bindGroup=ml(h.textures,h.count)}Cs.blendMode=t.blendMode;let o=r.bindGroup.getBindGroup(t.bindGroup,i,1),d=r.pipeline.getPipeline(this._geometry,i,Cs,t.topology);t.bindGroup._touch(r.textureGC.count),s.setPipeline(d),s.renderPassEncoder.setBindGroup(1,o),s.renderPassEncoder.drawIndexed(t.size,1,t.start)}};jn.extension={type:[B.WebGPUPipesAdaptor],name:"batch"};var Uh=class _3{constructor(e,t){this.state=Et.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null);var i,r;this.renderer=e,this._adaptor=t,(r=(i=this._adaptor).init)==null||r.call(i,this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let t=this._batchersByInstructionSet[e.uid];t||(t=this._batchersByInstructionSet[e.uid]=Object.create(null),t.default||(t.default=new Sl)),this._activeBatches=t,this._activeBatch=this._activeBatches.default;for(let i in this._activeBatches)this._activeBatches[i].begin()}addToBatch(e,t){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(t);let i=this._activeBatches[e.batcherName];i||(i=this._activeBatches[e.batcherName]=_3.getBatcher(e.batcherName),i.begin()),this._activeBatch=i}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);let t=this._activeBatches;for(let i in t){let r=t[i],s=r.geometry;s.indexBuffer.setDataWithSize(r.indexBuffer,r.indexSize,!0),s.buffers[0].setDataWithSize(r.attributeBuffer.float32View,r.attributeSize,!1)}}upload(e){let t=this._batchersByInstructionSet[e.uid];for(let i in t){let r=t[i],s=r.geometry;r.dirty&&(r.dirty=!1,s.buffers[0].update(r.attributeSize*4))}}execute(e){if(e.action==="startBatch"){let t=e.batcher,i=t.geometry,r=t.shader;this._adaptor.start(this,i,r)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};Uh.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"batch"},Uh._availableBatchers=Object.create(null);var y3=Uh;pe.handleByMap(B.Batcher,y3._availableBatchers),pe.add(Sl);var Iy={name:"texture-bit",vertex:{header:`

struct TextureUniforms {
uTextureMatrix:mat3x3<f32>,
}

@group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
`,main:`
uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
@group(2) @binding(0) var uTexture: texture_2d<f32>;
@group(2) @binding(1) var uSampler: sampler;


`,main:`
outColor = textureSample(uTexture, uSampler, vUV);
`}},Gy={name:"texture-bit",vertex:{header:`
uniform mat3 uTextureMatrix;
`,main:`
uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
uniform sampler2D uTexture;


`,main:`
outColor = texture(uTexture, vUV);
`}},By=new qe,Fy=class extends wi{constructor(){super(),this.filters=[new Ch({sprite:new we(K.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(a){this.filters[0].sprite=a}get inverse(){return this.filters[0].inverse}set inverse(a){this.filters[0].inverse=a}},Xn=class{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,t,i){let r=this._renderer;if(r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1,maskedContainer:t}),e.inverse=t._maskOptions.inverse,e.renderMaskToTexture){let s=e.mask;s.includeInBuild=!0,s.collectRenderables(i,r,null),s.includeInBuild=!1}r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:t,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){let t=this._renderer,i=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){let r=ye.get(Fy);if(r.inverse=e.inverse,i){e.mask.mask.measurable=!0;let s=Io(e.mask.mask,!0,By);e.mask.mask.measurable=!1,s.ceil();let o=t.renderTarget.renderTarget.colorTexture.source,d=ze.getOptimalTexture(s.width,s.height,o._resolution,o.antialias);t.renderTarget.push(d,!0),t.globalUniforms.push({offset:s,worldColor:4294967295});let h=r.sprite;h.texture=d,h.worldTransform.tx=s.minX,h.worldTransform.ty=s.minY,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer,filterTexture:d})}else r.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){let r=this._activeMaskStage[this._activeMaskStage.length-1];i&&(t.type===yt.WEBGL&&t.renderTarget.finishRenderPass(),t.renderTarget.pop(),t.globalUniforms.pop()),t.filter.push({renderPipeId:"filter",action:"pushFilter",container:r.maskedContainer,filterEffect:r.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){t.filter.pop();let r=this._activeMaskStage.pop();i&&ze.returnTexture(r.filterTexture),ye.return(r.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}};Xn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"alphaMask"};var Hn=class{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,i){this._renderer.renderPipes.batch.break(i);let r=this._colorStack;r[this._colorStackIndex]=r[this._colorStackIndex-1]&e.mask;let s=this._colorStack[this._colorStackIndex];s!==this._currentColor&&(this._currentColor=s,i.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1})),this._colorStackIndex++}pop(e,t,i){this._renderer.renderPipes.batch.break(i);let r=this._colorStack;this._colorStackIndex--;let s=r[this._colorStackIndex-1];s!==this._currentColor&&(this._currentColor=s,i.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._colorStack=null}};Hn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"colorMask"};var zn=class{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,t,i){var r,s;let o=e,d=this._renderer;d.renderPipes.batch.break(i),d.renderPipes.blendMode.setBlendMode(o.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let h=o.mask;h.includeInBuild=!0,this._maskHash.has(o)||this._maskHash.set(o,{instructionsStart:0,instructionsLength:0});let l=this._maskHash.get(o);l.instructionsStart=i.instructionSize,h.collectRenderables(i,d,null),h.includeInBuild=!1,d.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let u=i.instructionSize-l.instructionsStart-1;l.instructionsLength=u;let p=d.renderTarget.renderTarget.uid;(s=(r=this._maskStackHash)[p])!=null||(r[p]=0)}pop(e,t,i){let r=e,s=this._renderer;s.renderPipes.batch.break(i),s.renderPipes.blendMode.setBlendMode(r.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:t._maskOptions.inverse,canBundle:!1});let o=this._maskHash.get(e);for(let d=0;d<o.instructionsLength;d++)i.instructions[i.instructionSize++]=i.instructions[o.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var t,i;let r=this._renderer,s=r.renderTarget.renderTarget.uid,o=(i=(t=this._maskStackHash)[s])!=null?i:t[s]=0;e.action==="pushMaskBegin"?(r.renderTarget.ensureDepthStencil(),r.stencil.setStencilMode(Ne.RENDERING_MASK_ADD,o),o++,r.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?r.stencil.setStencilMode(Ne.INVERSE_MASK_ACTIVE,o):r.stencil.setStencilMode(Ne.MASK_ACTIVE,o),r.colorMask.setMask(15)):e.action==="popMaskBegin"?(r.colorMask.setMask(0),o!==0?r.stencil.setStencilMode(Ne.RENDERING_MASK_REMOVE,o):(r.renderTarget.clear(null,mt.STENCIL),r.stencil.setStencilMode(Ne.DISABLED,o)),o--):e.action==="popMaskEnd"&&(e.inverse?r.stencil.setStencilMode(Ne.INVERSE_MASK_ACTIVE,o):r.stencil.setStencilMode(Ne.MASK_ACTIVE,o),r.colorMask.setMask(15)),this._maskStackHash[s]=o}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}};zn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"stencilMask"};var Ls=(a=>(a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a))(Ls||{}),Lh=class{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}},Vn=class{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){let e=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=e.MAX_UNIFORM_BUFFER_BINDINGS?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){let{_gl:t}=this,i=this.getGlBuffer(e);t.bindBuffer(i.type,i.buffer)}bindBufferBase(e,t){let{_gl:i}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,i.bindBufferBase(i.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let i=0,r=this._nextBindBaseIndex;for(;i<2;){r>=this._maxBindings&&(r=this._minBaseLocation,i++);let s=this._boundBufferBases[r];if(s&&s._lastBindCallId===this._bindCallId){r++;continue}break}return t=r,this._nextBindBaseIndex=r+1,i>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){let t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,i,r){let{_gl:s}=this;i||(i=0),t||(t=0),this._boundBufferBases[t]=null,s.bindBufferRange(s.UNIFORM_BUFFER,t||0,e.buffer,i*256,r||256)}updateBuffer(e){let{_gl:t}=this,i=this.getGlBuffer(e);if(e._updateID===i.updateID)return i;i.updateID=e._updateID,t.bindBuffer(i.type,i.buffer);let r=e.data,s=e.descriptor.usage&ve.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return r?i.byteLength>=r.byteLength?t.bufferSubData(i.type,0,r,0,e._updateSize/r.BYTES_PER_ELEMENT):(i.byteLength=r.byteLength,t.bufferData(i.type,r,s)):(i.byteLength=e.descriptor.size,t.bufferData(i.type,i.byteLength,s)),i}destroyAll(){let e=this._gl;for(let t in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[t].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,t){let i=this._gpuBuffers[e.uid],r=this._gl;t||r.deleteBuffer(i.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){let{_gl:t}=this,i=Ls.ARRAY_BUFFER;e.descriptor.usage&ve.INDEX?i=Ls.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&ve.UNIFORM&&(i=Ls.UNIFORM_BUFFER);let r=new Lh(t.createBuffer(),i);return this._gpuBuffers[e.uid]=r,e.on("destroy",this.onBufferDestroy,this),r}resetState(){this._boundBufferBases=Object.create(null)}};Vn.extension={type:[B.WebGLSystem],name:"buffer"};var Dy=Object.defineProperty,ky=Object.defineProperties,Uy=Object.getOwnPropertyDescriptors,Qb=Object.getOwnPropertySymbols,Ly=Object.prototype.hasOwnProperty,Ny=Object.prototype.propertyIsEnumerable,Jb=(a,e,t)=>e in a?Dy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Os=(a,e)=>{for(var t in e||(e={}))Ly.call(e,t)&&Jb(a,t,e[t]);if(Qb)for(var t of Qb(e))Ny.call(e,t)&&Jb(a,t,e[t]);return a},e1=(a,e)=>ky(a,Uy(e)),Nh=class x3{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){var t,i;e=Os(Os({},x3.defaultOptions),e);let r=this.multiView=e.multiView;if(e.context&&r&&(Qt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),r=!1),r?this.canvas=xe.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{let s=this._renderer.background.alpha<1,o=(t=e.premultipliedAlpha)!=null?t:!0,d=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:s,premultipliedAlpha:o,antialias:d,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:(i=e.powerPreference)!=null?i:"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Qt("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof xe.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let t=this._renderer.view.canvas;t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,t){let i,r=this.canvas;if(e===2&&(i=r.getContext("webgl2",t)),!i&&(i=r.getContext("webgl",t),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions=e1(Os({},t),{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")});else{this.extensions=e1(Os({},t),{colorBufferFloat:e.getExtension("EXT_color_buffer_float")});let i=e.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var t;this.gl.isContextLost()&&((t=this.extensions.loseContext)==null||t.restoreContext())},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){var e;let t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(e=this.extensions.loseContext)==null||e.loseContext()}forceContextLoss(){var e;(e=this.extensions.loseContext)==null||e.loseContext(),this._contextLossForced=!0}validateContext(e){let t=e.getContextAttributes();t&&t.stencil;let i=this.supports,r=this.webGLVersion===2,s=this.extensions;i.uint32Indices=r||!!s.uint32ElementIndex,i.uniformBufferObject=r,i.vertexArrayObject=r||!!s.vertexArrayObject,i.srgbTextures=r||!!s.srgb,i.nonPowOf2wrapping=r,i.nonPowOf2mipmaps=r,i.msaa=r,i.uint32Indices}};Nh.extension={type:[B.WebGLSystem],name:"context"},Nh.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};var jy=Nh;function v3(a,e){var t,i,r;for(let s in a.attributes){let o=a.attributes[s],d=e[s];d?((t=o.format)!=null||(o.format=d.format),(i=o.offset)!=null||(o.offset=d.offset),(r=o.instance)!=null||(o.instance=d.instance)):Qt(`Attribute ${s} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}Xy(a)}function Xy(a){var e,t;let{buffers:i,attributes:r}=a,s={},o={};for(let d in i){let h=i[d];s[h.uid]=0,o[h.uid]=0}for(let d in r){let h=r[d];s[h.buffer.uid]+=Ca(h.format).stride}for(let d in r){let h=r[d];(e=h.stride)!=null||(h.stride=s[h.buffer.uid]),(t=h.start)!=null||(h.start=o[h.buffer.uid]),o[h.buffer.uid]+=Ca(h.format).stride}}var jh=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(jh||{}),T3=(a=>(a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a))(T3||{}),Hy=(a=>(a[a.CLAMP=33071]="CLAMP",a[a.REPEAT=10497]="REPEAT",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a))(Hy||{}),Te=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(Te||{}),t1={uint8x2:Te.UNSIGNED_BYTE,uint8x4:Te.UNSIGNED_BYTE,sint8x2:Te.BYTE,sint8x4:Te.BYTE,unorm8x2:Te.UNSIGNED_BYTE,unorm8x4:Te.UNSIGNED_BYTE,snorm8x2:Te.BYTE,snorm8x4:Te.BYTE,uint16x2:Te.UNSIGNED_SHORT,uint16x4:Te.UNSIGNED_SHORT,sint16x2:Te.SHORT,sint16x4:Te.SHORT,unorm16x2:Te.UNSIGNED_SHORT,unorm16x4:Te.UNSIGNED_SHORT,snorm16x2:Te.SHORT,snorm16x4:Te.SHORT,float16x2:Te.HALF_FLOAT,float16x4:Te.HALF_FLOAT,float32:Te.FLOAT,float32x2:Te.FLOAT,float32x3:Te.FLOAT,float32x4:Te.FLOAT,uint32:Te.UNSIGNED_INT,uint32x2:Te.UNSIGNED_INT,uint32x3:Te.UNSIGNED_INT,uint32x4:Te.UNSIGNED_INT,sint32:Te.INT,sint32x2:Te.INT,sint32x3:Te.INT,sint32x4:Te.INT};function zy(a){var e;return(e=t1[a])!=null?e:t1.float32}var Vy={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},Wn=class{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=r=>t.bindVertexArrayOES(r),e.deleteVertexArray=r=>t.deleteVertexArrayOES(r));let i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(e.drawArraysInstanced=(r,s,o,d)=>{i.drawArraysInstancedANGLE(r,s,o,d)},e.drawElementsInstanced=(r,s,o,d,h)=>{i.drawElementsInstancedANGLE(r,s,o,d,h)},e.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,t){let i=this.gl;this._activeGeometry=e;let r=this.getVao(e,t);this._activeVao!==r&&(this._activeVao=r,i.bindVertexArray(r)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this._renderer.buffer;for(let i=0;i<e.buffers.length;i++){let r=e.buffers[i];t.updateBuffer(r)}}checkCompatibility(e,t){let i=e.attributes,r=t._attributeData;for(let s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){let i=e.attributes,r=t._attributeData,s=["g",e.uid];for(let o in i)r[o]&&s.push(o,r[o].location);return s.join("-")}getVao(e,t){var i;return((i=this._geometryVaoHash[e.uid])==null?void 0:i[t._key])||this.initGeometryVao(e,t)}initGeometryVao(e,t,i=!0){let r=this._renderer.gl,s=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);let o=this.getSignature(e,t);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));let d=this._geometryVaoHash[e.uid],h=d[o];if(h)return d[t._key]=h,h;v3(e,t._attributeData);let l=e.buffers;h=r.createVertexArray(),r.bindVertexArray(h);for(let u=0;u<l.length;u++){let p=l[u];s.bind(p)}return this.activateVao(e,t),d[t._key]=h,d[o]=h,r.bindVertexArray(null),h}onGeometryDestroy(e,t){let i=this._geometryVaoHash[e.uid],r=this.gl;if(i){if(t)for(let s in i)this._activeVao!==i[s]&&this.unbind(),r.deleteVertexArray(i[s]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){let t=this.gl;for(let i in this._geometryVaoHash){if(e)for(let r in this._geometryVaoHash[i]){let s=this._geometryVaoHash[i];this._activeVao!==s&&this.unbind(),t.deleteVertexArray(s[r])}this._geometryVaoHash[i]=null}}activateVao(e,t){var i,r;let s=this._renderer.gl,o=this._renderer.buffer,d=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);let h=null;for(let l in d){let u=d[l],p=u.buffer,y=o.getGlBuffer(p),_=t._attributeData[l];if(_){h!==y&&(o.bind(p),h=y);let v=_.location;s.enableVertexAttribArray(v);let T=Ca(u.format),A=zy(u.format);if(((i=_.format)==null?void 0:i.substring(1,4))==="int"?s.vertexAttribIPointer(v,T.size,A,u.stride,u.offset):s.vertexAttribPointer(v,T.size,A,T.normalised,u.stride,u.offset),u.instance)if(this.hasInstance){let P=(r=u.divisor)!=null?r:1;s.vertexAttribDivisor(v,P)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,r){let{gl:s}=this._renderer,o=this._activeGeometry,d=Vy[e||o.topology];if(r!=null||(r=o.instanceCount),o.indexBuffer){let h=o.indexBuffer.data.BYTES_PER_ELEMENT,l=h===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;r>1?s.drawElementsInstanced(d,t||o.indexBuffer.data.length,l,(i||0)*h,r):s.drawElements(d,t||o.indexBuffer.data.length,l,(i||0)*h)}else r>1?s.drawArraysInstanced(d,i||0,t||o.getSize(),r):s.drawArrays(d,i||0,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}};Wn.extension={type:[B.WebGLSystem],name:"geometry"};var Wy=Object.defineProperty,a1=Object.getOwnPropertySymbols,Yy=Object.prototype.hasOwnProperty,$y=Object.prototype.propertyIsEnumerable,i1=(a,e,t)=>e in a?Wy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,r1=(a,e)=>{for(var t in e||(e={}))Yy.call(e,t)&&i1(a,t,e[t]);if(a1)for(var t of a1(e))$y.call(e,t)&&i1(a,t,e[t]);return a},Ky=new qt({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),Xh=class S3{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){let{useBackBuffer:t,antialias:i}=r1(r1({},S3.defaultOptions),e);this.useBackBuffer=t,this._antialias=i,this._renderer.context.supports.msaa||(Qt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Et.for2d();let r=new fa({vertex:`
attribute vec2 aPosition;
out vec2 vUv;

void main() {
gl_Position = vec4(aPosition, 0.0, 1.0);

vUv = (aPosition + 1.0) / 2.0;

// flip dem UVs
vUv.y = 1.0 - vUv.y;
}`,fragment:`
in vec2 vUv;
out vec4 finalColor;

uniform sampler2D uTexture;

void main() {
finalColor = texture(uTexture, vUv);
}`,name:"big-triangle"});this._bigTriangleShader=new ht({glProgram:r,resources:{uTexture:K.WHITE.source}})}renderStart(e){let t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){let i=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=i.colorTexture,e.target=this._getBackBufferTexture(i.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:Ky,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new K({source:new Fe({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};Xh.extension={type:[B.WebGLSystem],name:"backBuffer",priority:1},Xh.defaultOptions={useBackBuffer:!1};var qy=Xh,Yn=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}};Yn.extension={type:[B.WebGLSystem],name:"colorMask"};var $n=class{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){let t=this._renderer,{geometry:i,shader:r,state:s,skipSync:o,topology:d,size:h,start:l,instanceCount:u}=e;t.shader.bind(r,o),t.geometry.bind(i,t.shader._activeProgram),s&&t.state.set(s),t.geometry.draw(d,h,l,u??i.instanceCount)}destroy(){this._renderer=null}};$n.extension={type:[B.WebGLSystem],name:"encoder"};var Hh=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}},wa=[];wa[Ne.NONE]=void 0,wa[Ne.DISABLED]={stencilWriteMask:0,stencilReadMask:0},wa[Ne.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},wa[Ne.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},wa[Ne.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},wa[Ne.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}};var Kn=class{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Ne.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Ne.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Ne.DISABLED,stencilReference:0}),this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid],r=this._gl,s=wa[e],o=this._stencilCache;if(i.stencilMode=e,i.stencilReference=t,e===Ne.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,r.disable(r.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,r.enable(r.STENCIL_TEST)),(e!==o.stencilMode||o.stencilReference!==t)&&(o.stencilMode=e,o.stencilReference=t,r.stencilFunc(this._comparisonFuncMapping[s.stencilBack.compare],t,255),r.stencilOp(r.KEEP,r.KEEP,this._stencilOpsMapping[s.stencilBack.passOp]))}};Kn.extension={type:[B.WebGLSystem],name:"stencil"};var qn=class{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!Pp())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){let t=this.getUniformGroupData(e);e.buffer||(e.buffer=new rt({data:new Float32Array(t.layout.size/4),usage:ve.UNIFORM|ve.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){let t=e._signature,i=this._syncFunctionHash[t];if(!i){let r=Object.keys(e.uniformStructures).map(d=>e.uniformStructures[d]),s=this._adaptor.createUboElements(r),o=this._generateUboSync(s.uboElements);i=this._syncFunctionHash[t]={layout:s,syncFunction:o}}return this._syncFunctionHash[t]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,t,i){let r=this.getUniformGroupData(e);e.buffer||(e.buffer=new rt({data:new Float32Array(r.layout.size/4),usage:ve.UNIFORM|ve.COPY_DST}));let s=null;return t||(t=e.buffer.data,s=e.buffer.dataInt32),i||(i=0),r.syncFunction(e.uniforms,t,s,i),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;let t=this.syncUniformGroup(e);return e.buffer.update(),t}destroy(){this._syncFunctionHash=null}},w3={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function Zy(a){let e=a.map(s=>({data:s,offset:0,size:0})),t=16,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s];if(i=w3[o.data.type],!i)throw new Error(`Unknown type ${o.data.type}`);o.data.size>1&&(i=Math.max(i,t)*o.data.size);let d=i===12?16:i;o.size=i;let h=r%t;h>0&&t-h<d?r+=(t-h)%16:r+=(i-h%i)%i,o.offset=r,r+=i}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}var $a=[{type:"mat3x3<f32>",test:a=>a.value.a!==void 0,ubo:`
var matrix = uv[name].toArray(true);
data[offset] = matrix[0];
data[offset + 1] = matrix[1];
data[offset + 2] = matrix[2];
data[offset + 4] = matrix[3];
data[offset + 5] = matrix[4];
data[offset + 6] = matrix[5];
data[offset + 8] = matrix[6];
data[offset + 9] = matrix[7];
data[offset + 10] = matrix[8];
`,uniform:`
gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.width!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
data[offset + 2] = v.width;
data[offset + 3] = v.height;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
cv[0] = v.x;
cv[1] = v.y;
cv[2] = v.width;
cv[3] = v.height;
gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
}
`},{type:"vec2<f32>",test:a=>a.type==="vec2<f32>"&&a.size===1&&a.value.x!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y) {
cv[0] = v.x;
cv[1] = v.y;
gl.uniform2f(ud[name].location, v.x, v.y);
}
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
data[offset + 3] = v.alpha;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
cv[3] = v.alpha;
gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
}
`},{type:"vec3<f32>",test:a=>a.type==="vec3<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
}
`}];function A3(a,e,t,i){let r=[`
var v = null;
var v2 = null;
var t = 0;
var index = 0;
var name = null;
var arrayOffset = null;
`],s=0;for(let d=0;d<a.length;d++){let h=a[d],l=h.data.name,u=!1,p=0;for(let y=0;y<$a.length;y++)if($a[y].test(h.data)){p=h.offset/4,r.push(`name = "${l}";`,`offset += ${p-s};`,$a[y][e]||$a[y].ubo),u=!0;break}if(!u)if(h.data.size>1)p=h.offset/4,r.push(t(h,p-s));else{let y=i[h.data.type];p=h.offset/4,r.push(`
v = uv.${l};
offset += ${p-s};
${y};
`)}s=p}let o=r.join(`
`);return new Function("uv","data","dataInt32","offset",o)}var Qy=Object.defineProperty,Jy=Object.defineProperties,ex=Object.getOwnPropertyDescriptors,s1=Object.getOwnPropertySymbols,tx=Object.prototype.hasOwnProperty,ax=Object.prototype.propertyIsEnumerable,n1=(a,e,t)=>e in a?Qy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ix=(a,e)=>{for(var t in e||(e={}))tx.call(e,t)&&n1(a,t,e[t]);if(s1)for(var t of s1(e))ax.call(e,t)&&n1(a,t,e[t]);return a},rx=(a,e)=>Jy(a,ex(e));function pi(a,e){return`
for (let i = 0; i < ${a*e}; i++) {
data[offset + (((i / ${a})|0) * 4) + (i % ${a})] = v[i];
}
`}var E3={f32:`
data[offset] = v;`,i32:`
dataInt32[offset] = v;`,"vec2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];`,"vec3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];`,"vec4<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];`,"vec2<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];
dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 4] = v[2];
data[offset + 5] = v[3];`,"mat3x3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 4] = v[3];
data[offset + 5] = v[4];
data[offset + 6] = v[5];
data[offset + 8] = v[6];
data[offset + 9] = v[7];
data[offset + 10] = v[8];`,"mat4x4<f32>":`
for (let i = 0; i < 16; i++) {
data[offset + i] = v[i];
}`,"mat3x2<f32>":pi(3,2),"mat4x2<f32>":pi(4,2),"mat2x3<f32>":pi(2,3),"mat4x3<f32>":pi(4,3),"mat2x4<f32>":pi(2,4),"mat3x4<f32>":pi(3,4)},sx=rx(ix({},E3),{"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];
`});function nx(a,e){let t=Math.max(w3[a.data.type]/16,1),i=a.data.value.length/a.data.size,r=(4-i%4)%4,s=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
offset += ${e};

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*t}; i++)
{
for(var j = 0; j < ${i}; j++)
{
${s}[arrayOffset++] = v[t++];
}
${r!==0?`arrayOffset += ${r};`:""}
}
`}function ox(a){return A3(a,"uboStd40",nx,E3)}var Zn=class extends qn{constructor(){super({createUboElements:Zy,generateUboSync:ox})}};Zn.extension={type:[B.WebGLSystem],name:"ubo"};var zh=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Pe}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Pe}copyToTexture(e,t,i,r,s){let o=this._renderTargetSystem,d=this._renderer,h=o.getGpuRenderTarget(e),l=d.gl;return this.finishRenderPass(e),l.bindFramebuffer(l.FRAMEBUFFER,h.resolveTargetFramebuffer),d.texture.bind(t,0),l.copyTexSubImage2D(l.TEXTURE_2D,0,s.x,s.y,i.x,i.y,r.width,r.height),t}startRenderPass(e,t=!0,i,r){let s=this._renderTargetSystem,o=e.colorTexture,d=s.getGpuRenderTarget(e),h=r.y;e.isRoot&&(h=o.pixelHeight-r.height),e.colorTextures.forEach(p=>{this._renderer.texture.unbind(p)});let l=this._renderer.gl;l.bindFramebuffer(l.FRAMEBUFFER,d.framebuffer);let u=this._viewPortCache;(u.x!==r.x||u.y!==h||u.width!==r.width||u.height!==r.height)&&(u.x=r.x,u.y=h,u.width=r.width,u.height=r.height,l.viewport(r.x,h,r.width,r.height)),!d.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(d),this.clear(e,t,i)}finishRenderPass(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);if(!t.msaa)return;let i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,t.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,t.framebuffer),i.blitFramebuffer(0,0,t.width,t.height,0,0,t.width,t.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer)}initGpuRenderTarget(e){let t=this._renderer,i=t.gl,r=new Hh;return e.colorTexture.resource===t.canvas?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),r.framebuffer=null,r):(this._initColor(e,r),i.bindFramebuffer(i.FRAMEBUFFER,null),r)}destroyGpuRenderTarget(e){let t=this._renderer.gl;e.framebuffer&&(t.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(t.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(t.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(i=>{t.deleteRenderbuffer(i)}),e.msaaRenderBuffer=null}clear(e,t,i){if(!t)return;let r=this._renderTargetSystem;typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let s=this._renderer.gl;if(t&mt.COLOR){i!=null||(i=r.defaultClearColor);let o=this._clearColorCache,d=i;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3])&&(o[0]=d[0],o[1]=d[1],o[2]=d[2],o[3]=d[3],s.clearColor(d[0],d[1],d[2],d[3]))}s.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;let t=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,t),(e.stencil||e.depth)&&this._resizeStencil(t)}_initColor(e,t){let i=this._renderer,r=i.gl,s=r.createFramebuffer();if(t.resolveTargetFramebuffer=s,r.bindFramebuffer(r.FRAMEBUFFER,s),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((o,d)=>{let h=o.source;h.antialias&&(i.context.supports.msaa?t.msaa=!0:Qt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(h,0);let l=i.texture.getGlSource(h).texture;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+d,3553,l,0)}),t.msaa){let o=r.createFramebuffer();t.framebuffer=o,r.bindFramebuffer(r.FRAMEBUFFER,o),e.colorTextures.forEach((d,h)=>{let l=r.createRenderbuffer();t.msaaRenderBuffer[h]=l})}else t.framebuffer=s;this._resizeColor(e,t)}_resizeColor(e,t){let i=e.colorTexture.source;if(t.width=i.pixelWidth,t.height=i.pixelHeight,e.colorTextures.forEach((r,s)=>{s!==0&&r.source.resize(i.width,i.height,i._resolution)}),t.msaa){let r=this._renderer,s=r.gl,o=t.framebuffer;s.bindFramebuffer(s.FRAMEBUFFER,o),e.colorTextures.forEach((d,h)=>{let l=d.source;r.texture.bindSource(l,0);let u=r.texture.getGlSource(l).internalFormat,p=t.msaaRenderBuffer[h];s.bindRenderbuffer(s.RENDERBUFFER,p),s.renderbufferStorageMultisample(s.RENDERBUFFER,4,u,l.pixelWidth,l.pixelHeight),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+h,s.RENDERBUFFER,p)})}}_initStencil(e){if(e.framebuffer===null)return;let t=this._renderer.gl,i=t.createRenderbuffer();e.depthStencilRenderBuffer=i,t.bindRenderbuffer(t.RENDERBUFFER,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i),this._resizeStencil(e)}_resizeStencil(e){let t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,this._renderer.context.webGLVersion===2?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){let t=e.colorTexture.resource;this._renderer.context.multiView&&Kt.test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&Kt.test(e.colorTexture.resource)){let t=this._renderer.context.canvas,i=e.colorTexture;i.context2D.drawImage(t,0,i.pixelHeight-t.height)}}};function cx(a,e,t,i,r,s){let o=s?1:-1;return a.identity(),a.a=1/i*2,a.d=o*(1/r*2),a.tx=-1-e*a.a,a.ty=-o-t*a.d,a}var dx=Object.defineProperty,o1=Object.getOwnPropertySymbols,hx=Object.prototype.hasOwnProperty,lx=Object.prototype.propertyIsEnumerable,c1=(a,e,t)=>e in a?dx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fx=(a,e)=>{for(var t in e||(e={}))hx.call(e,t)&&c1(a,t,e[t]);if(o1)for(var t of o1(e))lx.call(e,t)&&c1(a,t,e[t]);return a},br=new Map;function P3(a,e){if(!br.has(a)){let t=new K({source:new Kt(fx({resource:a},e))}),i=()=>{br.get(a)===t&&br.delete(a)};t.once("destroy",i),t.source.once("destroy",i),br.set(a,t)}return br.get(a)}function ux(a){let e=a.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}var bx=Object.defineProperty,d1=Object.getOwnPropertySymbols,px=Object.prototype.hasOwnProperty,gx=Object.prototype.propertyIsEnumerable,h1=(a,e,t)=>e in a?bx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,l1=(a,e)=>{for(var t in e||(e={}))px.call(e,t)&&h1(a,t,e[t]);if(d1)for(var t of d1(e))gx.call(e,t)&&h1(a,t,e[t]);return a},R3=class M3{constructor(e={}){if(this.uid=Be("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e=l1(l1({},M3.defaultOptions),e),this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new Fe({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(i=>i.source)];let t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof K||e.depthStencilTexture instanceof Fe?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Fe({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,t,i=this.resolution,r=!1){this.dirtyId++,this.colorTextures.forEach((s,o)=>{r&&o===0||s.source.resize(e,t,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,t,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};R3.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};var Vh=R3,Qn=class{constructor(e){this.rootViewPort=new Pe,this.viewport=new Pe,this.onRenderTargetChange=new wn("onRenderTargetChange"),this.projectionMatrix=new ie,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:t,clearColor:i,frame:r}){var s,o;this._renderTargetStack.length=0,this.push(e,t,i,r),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=ux(this.rootRenderTarget),(o=(s=this.adaptor).prerender)==null||o.call(s,this.rootRenderTarget)}postrender(){var e,t;(t=(e=this.adaptor).postrender)==null||t.call(e,this.rootRenderTarget)}bind(e,t=!0,i,r){let s=this.getRenderTarget(e),o=this.renderTarget!==s;this.renderTarget=s,this.renderSurface=e;let d=this.getGpuRenderTarget(s);(s.pixelWidth!==d.width||s.pixelHeight!==d.height)&&(this.adaptor.resizeGpuRenderTarget(s),d.width=s.pixelWidth,d.height=s.pixelHeight);let h=s.colorTexture,l=this.viewport,u=h.pixelWidth,p=h.pixelHeight;if(!r&&e instanceof K&&(r=e.frame),r){let y=h._resolution;l.x=r.x*y+.5|0,l.y=r.y*y+.5|0,l.width=r.width*y+.5|0,l.height=r.height*y+.5|0}else l.x=0,l.y=0,l.width=u,l.height=p;return cx(this.projectionMatrix,0,0,l.width/h.resolution,l.height/h.resolution,!s.isRoot),this.adaptor.startRenderPass(s,t,i,l),o&&this.onRenderTargetChange.emit(s),s}clear(e,t=mt.ALL,i){t&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,t,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,t=mt.ALL,i,r){let s=this.bind(e,t,i,r);return this._renderTargetStack.push({renderTarget:s,frame:r}),s}pop(){this._renderTargetStack.pop();let e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){var t;return e.isTexture&&(e=e.source),(t=this._renderSurfaceToRenderTargetHash.get(e))!=null?t:this._initRenderTarget(e)}copyToTexture(e,t,i,r,s){i.x<0&&(r.width+=i.x,s.x-=i.x,i.x=0),i.y<0&&(r.height+=i.y,s.y-=i.y,i.y=0);let{pixelWidth:o,pixelHeight:d}=e;return r.width=Math.min(r.width,o-i.x),r.height=Math.min(r.height,d-i.y),this.adaptor.copyToTexture(e,t,i,r,s)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,t)=>{e!==t&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let t=null;return Kt.test(e)&&(e=P3(e).source),e instanceof Vh?t=e:e instanceof Fe&&(t=new Vh({colorTextures:[e]}),Kt.test(e.source.resource)&&(t.isRoot=!0),e.once("destroy",()=>{t.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);let i=this._gpuRenderTargetHash[t.uid];i&&(this._gpuRenderTargetHash[t.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(e,t),t}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}},Jn=class extends Qn{constructor(e){super(e),this.adaptor=new zh,this.adaptor.init(e,this)}};Jn.extension={type:[B.WebGLSystem],name:"renderTarget"};var jr=class extends xt{constructor({buffer:e,offset:t,size:i}){super(),this.uid=Be("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Be("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=t|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Be("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}};function mx(a,e){let t=[],i=[`
var g = s.groups;
var sS = r.shader;
var p = s.glProgram;
var ugS = r.uniformGroup;
var resources;
`],r=!1,s=0,o=e._getProgramData(a.glProgram);for(let h in a.groups){let l=a.groups[h];t.push(`
resources = g[${h}].resources;
`);for(let u in l.resources){let p=l.resources[u];if(p instanceof Je)if(p.ubo){let y=a._uniformBindMap[h][Number(u)];t.push(`
    sS.bindUniformBlock(
        resources[${u}],
        '${y}',
        ${a.glProgram._uniformBlockData[y].index}
    );
`)}else t.push(`
    ugS.updateUniformGroup(resources[${u}], p, sD);
`);else if(p instanceof jr){let y=a._uniformBindMap[h][Number(u)];t.push(`
sS.bindUniformBlock(
    resources[${u}],
    '${y}',
    ${a.glProgram._uniformBlockData[y].index}
);
`)}else if(p instanceof Fe){let y=a._uniformBindMap[h][u],_=o.uniformData[y];_&&(r||(r=!0,i.push(`
    var tS = r.texture;
    `)),e._gl.uniform1i(_.location,s),t.push(`
    tS.bind(resources[${u}], ${s});
`),s++)}}}let d=[...i,...t].join(`
`);return new Function("r","s","sD",d)}var Wh=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}};function f1(a,e,t){let i=a.createShader(e);return a.shaderSource(i,t),a.compileShader(i),i}function md(a){let e=new Array(a);for(let t=0;t<e.length;t++)e[t]=!1;return e}function C3(a,e){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return md(2*e);case"bvec3":return md(3*e);case"bvec4":return md(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Is=null,u1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},_x={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function O3(a,e){if(!Is){let t=Object.keys(u1);Is={};for(let i=0;i<t.length;++i){let r=t[i];Is[a[r]]=u1[r]}}return Is[e]}function yx(a,e){let t=O3(a,e);return _x[t]||"float32"}function xx(a,e,t=!1){let i={},r=e.getProgramParameter(a,e.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){let d=e.getActiveAttrib(a,o);if(d.name.startsWith("gl_"))continue;let h=yx(e,d.type);i[d.name]={location:0,format:h,stride:Ca(h).stride,offset:0,instance:!1,start:0}}let s=Object.keys(i);if(t){s.sort((o,d)=>o>d?1:-1);for(let o=0;o<s.length;o++)i[s[o]].location=o,e.bindAttribLocation(a,o,s[o]);e.linkProgram(a)}else for(let o=0;o<s.length;o++)i[s[o]].location=e.getAttribLocation(a,s[o]);return i}function vx(a,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORM_BLOCKS);for(let r=0;r<i;r++){let s=e.getActiveUniformBlockName(a,r),o=e.getUniformBlockIndex(a,s),d=e.getActiveUniformBlockParameter(a,r,e.UNIFORM_BLOCK_DATA_SIZE);t[s]={name:s,index:o,size:d}}return t}function Tx(a,e){let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){let s=e.getActiveUniform(a,r),o=s.name.replace(/\[.*?\]$/,""),d=!!s.name.match(/\[.*?\]$/),h=O3(e,s.type);t[o]={name:o,index:r,type:h,size:s.size,isArray:d,value:C3(h,s.size)}}return t}function b1(a,e){let t=a.getShaderSource(e).split(`
`).map((l,u)=>`${u}: ${l}`),i=a.getShaderInfoLog(e),r=i.split(`
`),s={},o=r.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!s[l]?(s[l]=!0,!0):!1),d=[""];o.forEach(l=>{t[l-1]=`%c${t[l-1]}%c`,d.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let h=t.join(`
`);d[0]=h}function Sx(a,e,t,i){a.getProgramParameter(e,a.LINK_STATUS)||(a.getShaderParameter(t,a.COMPILE_STATUS)||b1(a,t),a.getShaderParameter(i,a.COMPILE_STATUS)||b1(a,i),a.getProgramInfoLog(e))}function wx(a,e){let t=f1(a,a.VERTEX_SHADER,e.vertex),i=f1(a,a.FRAGMENT_SHADER,e.fragment),r=a.createProgram();a.attachShader(r,t),a.attachShader(r,i);let s=e.transformFeedbackVaryings;s&&(typeof a.transformFeedbackVaryings!="function"||a.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?a.SEPARATE_ATTRIBS:a.INTERLEAVED_ATTRIBS)),a.linkProgram(r),a.getProgramParameter(r,a.LINK_STATUS)||Sx(a,r,t,i),e._attributeData=xx(r,a,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=Tx(r,a),e._uniformBlockData=vx(r,a),a.deleteShader(t),a.deleteShader(i);let o={};for(let d in e._uniformData){let h=e._uniformData[d];o[d]={location:a.getUniformLocation(r,d),value:C3(h.type,h.size)}}return new Wh(r,o)}var Gs={textureCount:0,blockIndex:0},eo=class{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=Oi()}bind(e,t){if(this._setProgram(e.glProgram),t)return;Gs.textureCount=0,Gs.blockIndex=0;let i=this._shaderSyncFunctions[e.glProgram._key];i||(i=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),i(this._renderer,e,Gs)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,Gs)}bindUniformBlock(e,t,i=0){let r=this._renderer.buffer,s=this._getProgramData(this._activeProgram),o=e._bufferResource;o||this._renderer.ubo.updateUniformGroup(e);let d=e.buffer,h=r.updateBuffer(d),l=r.freeLocationForBufferBase(h);if(o){let{offset:p,size:y}=e;p===0&&y===d.data.byteLength?r.bindBufferBase(h,l):r.bindBufferRange(h,l,p)}else r.getLastBindBaseLocation(h)!==l&&r.bindBufferBase(h,l);let u=this._activeProgram._uniformBlockData[t].index;s.uniformBlockBindings[i]!==l&&(s.uniformBlockBindings[i]=l,this._renderer.gl.uniformBlockBinding(s.program,u,l))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;let t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){let t=e._key;return this._programDataHash[t]=wx(this._gl,e),this._programDataHash[t]}destroy(){for(let e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null}_generateShaderSync(e,t){return mx(e,t)}resetState(){this._activeProgram=null}};eo.extension={type:[B.WebGLSystem],name:"shader"};var Ax={f32:`if (cv !== v) {
cu.value = v;
gl.uniform1f(location, v);
}`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2f(location, v[0], v[1]);
}`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3f(location, v[0], v[1], v[2]);
}`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4f(location, v[0], v[1], v[2], v[3]);
}`,i32:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,u32:`if (cv !== v) {
cu.value = v;
gl.uniform1ui(location, v);
}`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2ui(location, v[0], v[1]);
}`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3ui(location, v[0], v[1], v[2]);
}`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
}`,bool:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},Ex={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function Px(a,e){let t=[`
var v = null;
var cv = null;
var cu = null;
var t = 0;
var gl = renderer.gl;
var name = null;
`];for(let i in a.uniforms){if(!e[i]){a.uniforms[i]instanceof Je?a.uniforms[i].ubo?t.push(`
    renderer.shader.bindUniformBlock(uv.${i}, "${i}");
`):t.push(`
    renderer.shader.updateUniformGroup(uv.${i});
`):a.uniforms[i]instanceof jr&&t.push(`
    renderer.shader.bindBufferResource(uv.${i}, "${i}");
`);continue}let r=a.uniformStructures[i],s=!1;for(let o=0;o<$a.length;o++){let d=$a[o];if(r.type===d.type&&d.test(r)){t.push(`name = "${i}";`,$a[o].uniform),s=!0;break}}if(!s){let o=(r.size===1?Ax:Ex)[r.type].replace("location",`ud["${i}"].location`);t.push(`
cu = ud["${i}"];
cv = cu.value;
v = uv["${i}"];
${o};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var to=class{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,i){let r=this._renderer.shader._getProgramData(t);(!e.isStatic||e._dirtyId!==r.uniformDirtyGroups[e.uid])&&(r.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(r.uniformData,e.uniforms,this._renderer,i))}_getUniformSyncFunction(e,t){var i;return((i=this._uniformGroupSyncHash[e._signature])==null?void 0:i[t._key])||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){let i=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),r=this._getSignature(e,t._uniformData,"u");return this._cache[r]||(this._cache[r]=this._generateUniformsSync(e,t._uniformData)),i[t._key]=this._cache[r],i[t._key]}_generateUniformsSync(e,t){return Px(e,t)}_getSignature(e,t,i){let r=e.uniforms,s=[`${i}-`];for(let o in r)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}destroy(){this._renderer=null,this._cache=null}};to.extension={type:[B.WebGLSystem],name:"uniformGroup"};function Rx(a){let e={};if(e.normal=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e.add=[a.ONE,a.ONE],e.multiply=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.screen=[a.ONE,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[a.SRC_ALPHA,a.ONE,a.ONE,a.ONE],e["screen-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.erase=[a.ZERO,a.ONE_MINUS_SRC_ALPHA],!(a instanceof xe.get().getWebGLRenderingContext()))e.min=[a.ONE,a.ONE,a.ONE,a.ONE,a.MIN,a.MIN],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,a.MAX,a.MAX];else{let t=a.getExtension("EXT_blend_minmax");t&&(e.min=[a.ONE,a.ONE,a.ONE,a.ONE,t.MIN_EXT,t.MIN_EXT],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,t.MAX_EXT,t.MAX_EXT])}return e}var Mx=0,Cx=1,Ox=2,Ix=3,Gx=4,Bx=5,I3=class Yh{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[Mx]=this.setBlend,this.map[Cx]=this.setOffset,this.map[Ox]=this.setCullFace,this.map[Ix]=this.setDepthTest,this.map[Gx]=this.setFrontFace,this.map[Bx]=this.setDepthMask,this.checks=[],this.defaultState=Et.for2d()}contextChange(e){this.gl=e,this.blendModesMap=Rx(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t>>=1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||(e=this.defaultState);for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(Yh._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(Yh._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;let t=this.blendModesMap[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,t){let i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};I3.extension={type:[B.WebGLSystem],name:"state"};var Fx=I3,$h=class{constructor(e){this.target=T3.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=Te.UNSIGNED_BYTE,this.internalFormat=jh.RGBA,this.format=jh.RGBA,this.samplerType=0}},Dx={id:"buffer",upload(a,e,t){e.width===a.width||e.height===a.height?t.texSubImage2D(t.TEXTURE_2D,0,0,0,a.width,a.height,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,a.width,a.height,0,e.format,e.type,a.resource),e.width=a.width,e.height=a.height}},kx={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},Ux={id:"compressed",upload(a,e,t){t.pixelStorei(t.UNPACK_ALIGNMENT,4);let i=a.pixelWidth,r=a.pixelHeight,s=!!kx[a.format];for(let o=0;o<a.resource.length;o++){let d=a.resource[o];s?t.compressedTexImage2D(t.TEXTURE_2D,o,e.internalFormat,i,r,0,d):t.texImage2D(t.TEXTURE_2D,o,e.internalFormat,i,r,0,e.format,e.type,d),i=Math.max(i>>1,1),r=Math.max(r>>1,1)}}},G3={id:"image",upload(a,e,t,i){let r=e.width,s=e.height,o=a.pixelWidth,d=a.pixelHeight,h=a.resourceWidth,l=a.resourceHeight;h<o||l<d?((r!==o||s!==d)&&t.texImage2D(e.target,0,e.internalFormat,o,d,0,e.format,e.type,null),i===2?t.texSubImage2D(t.TEXTURE_2D,0,0,0,h,l,e.format,e.type,a.resource):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource)):r===o&&s===d?t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource):i===2?t.texImage2D(e.target,0,e.internalFormat,o,d,0,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,e.format,e.type,a.resource),e.width=o,e.height=d}},Lx={id:"video",upload(a,e,t,i){if(!a.isValid){t.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}G3.upload(a,e,t,i)}},p1={linear:9729,nearest:9728},Nx={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},_d={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},jx={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function g1(a,e,t,i,r,s,o,d){let h=s;if(!d||a.addressModeU!=="repeat"||a.addressModeV!=="repeat"||a.addressModeW!=="repeat"){let l=_d[o?"clamp-to-edge":a.addressModeU],u=_d[o?"clamp-to-edge":a.addressModeV],p=_d[o?"clamp-to-edge":a.addressModeW];e[r](h,e.TEXTURE_WRAP_S,l),e[r](h,e.TEXTURE_WRAP_T,u),e.TEXTURE_WRAP_R&&e[r](h,e.TEXTURE_WRAP_R,p)}if((!d||a.magFilter!=="linear")&&e[r](h,e.TEXTURE_MAG_FILTER,p1[a.magFilter]),t){if(!d||a.mipmapFilter!=="linear"){let l=Nx[a.minFilter][a.mipmapFilter];e[r](h,e.TEXTURE_MIN_FILTER,l)}}else e[r](h,e.TEXTURE_MIN_FILTER,p1[a.minFilter]);if(i&&a.maxAnisotropy>1){let l=Math.min(a.maxAnisotropy,e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[r](h,i.TEXTURE_MAX_ANISOTROPY_EXT,l)}a.compare&&e[r](h,e.TEXTURE_COMPARE_FUNC,jx[a.compare])}function Xx(a){return{r8unorm:a.RED,r8snorm:a.RED,r8uint:a.RED,r8sint:a.RED,r16uint:a.RED,r16sint:a.RED,r16float:a.RED,rg8unorm:a.RG,rg8snorm:a.RG,rg8uint:a.RG,rg8sint:a.RG,r32uint:a.RED,r32sint:a.RED,r32float:a.RED,rg16uint:a.RG,rg16sint:a.RG,rg16float:a.RG,rgba8unorm:a.RGBA,"rgba8unorm-srgb":a.RGBA,rgba8snorm:a.RGBA,rgba8uint:a.RGBA,rgba8sint:a.RGBA,bgra8unorm:a.RGBA,"bgra8unorm-srgb":a.RGBA,rgb9e5ufloat:a.RGB,rgb10a2unorm:a.RGBA,rg11b10ufloat:a.RGB,rg32uint:a.RG,rg32sint:a.RG,rg32float:a.RG,rgba16uint:a.RGBA,rgba16sint:a.RGBA,rgba16float:a.RGBA,rgba32uint:a.RGBA,rgba32sint:a.RGBA,rgba32float:a.RGBA,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT,depth24plus:a.DEPTH_COMPONENT,"depth24plus-stencil8":a.DEPTH_STENCIL,depth32float:a.DEPTH_COMPONENT,"depth32float-stencil8":a.DEPTH_STENCIL}}var Hx=Object.defineProperty,zx=Object.defineProperties,Vx=Object.getOwnPropertyDescriptors,m1=Object.getOwnPropertySymbols,Wx=Object.prototype.hasOwnProperty,Yx=Object.prototype.propertyIsEnumerable,_1=(a,e,t)=>e in a?Hx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Na=(a,e)=>{for(var t in e||(e={}))Wx.call(e,t)&&_1(a,t,e[t]);if(m1)for(var t of m1(e))Yx.call(e,t)&&_1(a,t,e[t]);return a},$x=(a,e)=>zx(a,Vx(e));function Kx(a,e){let t={},i=a.RGBA;return a instanceof xe.get().getWebGLRenderingContext()?e.srgb&&(t={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(t={"rgba8unorm-srgb":a.SRGB8_ALPHA8,"bgra8unorm-srgb":a.SRGB8_ALPHA8},i=a.RGBA8),Na(Na(Na(Na(Na(Na($x(Na({r8unorm:a.R8,r8snorm:a.R8_SNORM,r8uint:a.R8UI,r8sint:a.R8I,r16uint:a.R16UI,r16sint:a.R16I,r16float:a.R16F,rg8unorm:a.RG8,rg8snorm:a.RG8_SNORM,rg8uint:a.RG8UI,rg8sint:a.RG8I,r32uint:a.R32UI,r32sint:a.R32I,r32float:a.R32F,rg16uint:a.RG16UI,rg16sint:a.RG16I,rg16float:a.RG16F,rgba8unorm:a.RGBA},t),{rgba8snorm:a.RGBA8_SNORM,rgba8uint:a.RGBA8UI,rgba8sint:a.RGBA8I,bgra8unorm:i,rgb9e5ufloat:a.RGB9_E5,rgb10a2unorm:a.RGB10_A2,rg11b10ufloat:a.R11F_G11F_B10F,rg32uint:a.RG32UI,rg32sint:a.RG32I,rg32float:a.RG32F,rgba16uint:a.RGBA16UI,rgba16sint:a.RGBA16I,rgba16float:a.RGBA16F,rgba32uint:a.RGBA32UI,rgba32sint:a.RGBA32I,rgba32float:a.RGBA32F,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT16,depth24plus:a.DEPTH_COMPONENT24,"depth24plus-stencil8":a.DEPTH24_STENCIL8,depth32float:a.DEPTH_COMPONENT32F,"depth32float-stencil8":a.DEPTH32F_STENCIL8}),e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{}),e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{}),e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{}),e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{}),e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{}),e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{})}function qx(a){return{r8unorm:a.UNSIGNED_BYTE,r8snorm:a.BYTE,r8uint:a.UNSIGNED_BYTE,r8sint:a.BYTE,r16uint:a.UNSIGNED_SHORT,r16sint:a.SHORT,r16float:a.HALF_FLOAT,rg8unorm:a.UNSIGNED_BYTE,rg8snorm:a.BYTE,rg8uint:a.UNSIGNED_BYTE,rg8sint:a.BYTE,r32uint:a.UNSIGNED_INT,r32sint:a.INT,r32float:a.FLOAT,rg16uint:a.UNSIGNED_SHORT,rg16sint:a.SHORT,rg16float:a.HALF_FLOAT,rgba8unorm:a.UNSIGNED_BYTE,"rgba8unorm-srgb":a.UNSIGNED_BYTE,rgba8snorm:a.BYTE,rgba8uint:a.UNSIGNED_BYTE,rgba8sint:a.BYTE,bgra8unorm:a.UNSIGNED_BYTE,"bgra8unorm-srgb":a.UNSIGNED_BYTE,rgb9e5ufloat:a.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:a.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:a.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:a.UNSIGNED_INT,rg32sint:a.INT,rg32float:a.FLOAT,rgba16uint:a.UNSIGNED_SHORT,rgba16sint:a.SHORT,rgba16float:a.HALF_FLOAT,rgba32uint:a.UNSIGNED_INT,rgba32sint:a.INT,rgba32float:a.FLOAT,stencil8:a.UNSIGNED_BYTE,depth16unorm:a.UNSIGNED_SHORT,depth24plus:a.UNSIGNED_INT,"depth24plus-stencil8":a.UNSIGNED_INT_24_8,depth32float:a.FLOAT,"depth32float-stencil8":a.FLOAT_32_UNSIGNED_INT_24_8_REV}}var Zx=4,ao=class{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:G3,buffer:Dx,video:Lx,compressed:Ux},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=Kx(e,this._renderer.context.extensions),this._mapFormatToType=qx(e),this._mapFormatToFormat=Xx(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(K.EMPTY,t)}initSource(e){this.bind(e)}bind(e,t=0){let i=e.source;e?(this.bindSource(i,t),this._useSeparateSamplers&&this._bindSampler(i.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){let i=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||(e=K.EMPTY.source);let r=this.getGlSource(e);i.bindTexture(r.target,r.texture)}}_bindSampler(e,t=0){let i=this._gl;if(!e){this._boundSamplers[t]=null,i.bindSampler(t,null);return}let r=this._getGlSampler(e);this._boundSamplers[t]!==r&&(this._boundSamplers[t]=r,i.bindSampler(t,r))}unbind(e){let t=e.source,i=this._boundTextures,r=this._gl;for(let s=0;s<i.length;s++)if(i[s]===t){this._activateLocation(s);let o=this.getGlSource(t);r.bindTexture(o.target,null),i[s]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){let t=this._gl,i=new $h(t.createTexture());if(i.type=this._mapFormatToType[e.format],i.internalFormat=this._mapFormatToInternalFormat[e.format],i.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){let r=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(r))+1}return this._glTextures[e.uid]=i,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),i}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){let i=this._gl,r=this.getGlSource(e);i.bindTexture(i.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=e,g1(e.style,i,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e){let t=this._glTextures[e.uid];t&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(t.texture))}onSourceUpdate(e){let t=this._gl,i=this.getGlSource(e);t.bindTexture(t.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=e;let r=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==r&&(this._premultiplyAlpha=r,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,i,t,this._renderer.context.webGLVersion):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.pixelWidth,e.pixelHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);let i=this.getGlSource(e);this._gl.generateMipmap(i.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){let t=this._gl,i=this._gl.createSampler();return this._glSamplers[e._resourceId]=i,g1(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){let{pixels:t,width:i,height:r}=this.getPixels(e),s=xe.get().createCanvas();s.width=i,s.height=r;let o=s.getContext("2d");if(o){let d=o.createImageData(i,r);d.data.set(t),o.putImageData(d,0,0)}return s}getPixels(e){let t=e.source.resolution,i=e.frame,r=Math.max(Math.round(i.width*t),1),s=Math.max(Math.round(i.height*t),1),o=new Uint8Array(Zx*r*s),d=this._renderer,h=d.renderTarget.getRenderTarget(e),l=d.renderTarget.getGpuRenderTarget(h),u=d.gl;return u.bindFramebuffer(u.FRAMEBUFFER,l.resolveTargetFramebuffer),u.readPixels(Math.round(i.x*t),Math.round(i.y*t),r,s,u.RGBA,u.UNSIGNED_BYTE,o),{pixels:new Uint8ClampedArray(o.buffer),width:r,height:s}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(K.EMPTY.source),this._boundSamplers=Object.create(null)}};ao.extension={type:[B.WebGLSystem],name:"texture"};var io=class{init(){let e=new Je({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),t=Oi(),i=Vr({name:"graphics",bits:[yl,vl(t),Al,Yr]});this.shader=new ht({glProgram:i,resources:{localUniforms:e,batchSamplers:Tl(t)}})}execute(e,t){let i=t.context,r=i.customShader||this.shader,s=e.renderer,o=s.graphicsContext,{batcher:d,instructions:h}=o.getContextRenderData(i);r.groups[0]=s.globalUniforms.bindGroup,s.state.set(e.state),s.shader.bind(r),s.geometry.bind(d.geometry,r.glProgram);let l=h.instructions;for(let u=0;u<h.instructionSize;u++){let p=l[u];if(p.size){for(let y=0;y<p.textures.count;y++)s.texture.bind(p.textures.textures[y],y);s.geometry.draw(p.topology,p.size,p.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}};io.extension={type:[B.WebGLPipesAdaptor],name:"graphics"};var ro=class{init(){let e=Vr({name:"mesh",bits:[Al,Gy,Yr]});this._shader=new ht({glProgram:e,resources:{uTexture:K.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ie}}}})}execute(e,t){let i=e.renderer,r=t._shader;if(r){if(!r.glProgram)return}else{r=this._shader;let s=t.texture,o=s.source;r.resources.uTexture=o,r.resources.uSampler=o.style,r.resources.textureUniforms.uniforms.uTextureMatrix=s.textureMatrix.mapCoord}r.groups[100]=i.globalUniforms.bindGroup,r.groups[101]=e.localUniformsBindGroup,i.encoder.draw({geometry:t._geometry,shader:r,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};ro.extension={type:[B.WebGLPipesAdaptor],name:"mesh"};var so=class{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}};so.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"customRender"};function Kh(a,e){let t=a.instructionSet,i=t.instructions;for(let r=0;r<t.instructionSize;r++){let s=i[r];e[s.renderPipeId].execute(s)}}var Qx=new ie,no=class{constructor(e){this._renderer=e}addRenderGroup(e,t){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,t):this._addRenderableDirect(e,t)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,t){this._renderer.renderPipes.batch.break(t),e._batchableRenderGroup&&(ye.return(e._batchableRenderGroup),e._batchableRenderGroup=null),t.add(e)}_addRenderableCacheAsTexture(e,t){var i;let r=(i=e._batchableRenderGroup)!=null?i:e._batchableRenderGroup=ye.get(Pi);r.renderable=e.root,r.transform=e.root.relativeGroupTransform,r.texture=e.texture,r.bounds=e._textureBounds,t.add(e),this._renderer.renderPipes.batch.addToBatch(r,t)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;let t=Qx.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:t,worldColor:4294967295}),Kh(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),Kh(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}};no.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"renderGroup"};function qh(a,e){e||(e=0);for(let t=e;t<a.length&&a[t];t++)a[t]=null}var Jx=new le,y1=xr|zs|gl;function B3(a,e=!1){ev(a);let t=a.childrenToUpdate,i=a.updateTick++;for(let r in t){let s=Number(r),o=t[r],d=o.list,h=o.index;for(let l=0;l<h;l++){let u=d[l];u.parentRenderGroup===a&&u.relativeRenderGroupDepth===s&&F3(u,i,0)}qh(d,h),o.index=0}if(e)for(let r=0;r<a.renderGroupChildren.length;r++)B3(a.renderGroupChildren[r],e)}function ev(a){let e=a.root,t;if(a.renderGroupParent){let i=a.renderGroupParent;a.worldTransform.appendFrom(e.relativeGroupTransform,i.worldTransform),a.worldColor=js(e.groupColor,i.worldColor),t=e.groupAlpha*i.worldAlpha}else a.worldTransform.copyFrom(e.localTransform),a.worldColor=e.localColor,t=e.localAlpha;t=t<0?0:t>1?1:t,a.worldAlpha=t,a.worldColorAlpha=a.worldColor+((t*255|0)<<24)}function F3(a,e,t){if(e===a.updateTick)return;a.updateTick=e,a.didChange=!1;let i=a.localTransform;a.updateLocalTransform();let r=a.parent;if(r&&!r.renderGroup?(t|=a._updateFlags,a.relativeGroupTransform.appendFrom(i,r.relativeGroupTransform),t&y1&&x1(a,r,t)):(t=a._updateFlags,a.relativeGroupTransform.copyFrom(i),t&y1&&x1(a,Jx,t)),!a.renderGroup){let s=a.children,o=s.length;for(let l=0;l<o;l++)F3(s[l],e,t);let d=a.parentRenderGroup,h=a;h.renderPipeId&&!d.structureDidChange&&d.updateRenderable(h)}}function x1(a,e,t){if(t&zs){a.groupColor=js(a.localColor,e.groupColor);let i=a.localAlpha*e.groupAlpha;i=i<0?0:i>1?1:i,a.groupAlpha=i,a.groupColorAlpha=a.groupColor+((i*255|0)<<24)}t&gl&&(a.groupBlendMode=a.localBlendMode==="inherit"?e.groupBlendMode:a.localBlendMode),t&xr&&(a.globalDisplayStatus=a.localDisplayStatus&e.globalDisplayStatus),a._updateFlags=0}function tv(a,e){let{list:t,index:i}=a.childrenRenderablesToUpdate,r=!1;for(let s=0;s<i;s++){let o=t[s];if(r=e[o.renderPipeId].validateRenderable(o),r)break}return a.structureDidChange=r,r}var av=new ie,oo=class{constructor(e){this._renderer=e}render({container:e,transform:t}){let i=e.parent,r=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;let s=this._renderer,o=av;t&&(o=o.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(t));let d=s.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),s.globalUniforms.start({worldTransformMatrix:t?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),Kh(e.renderGroup,d),d.uniformBatch&&d.uniformBatch.renderEnd(),t&&e.renderGroup.localTransform.copyFrom(o),e.parent=i,e.renderGroup.renderGroupParent=r}destroy(){this._renderer=null}_updateCachedRenderGroups(e,t){var i;if(e.isCachedAsTexture){if(!e.updateCacheTexture)return;t=e}e._parentCacheAsTextureRenderGroup=t;for(let r=e.renderGroupChildren.length-1;r>=0;r--)this._updateCachedRenderGroups(e.renderGroupChildren[r],t);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){let r=e.root.getLocalBounds();r.ceil();let s=e.texture;e.texture&&ze.returnTexture(e.texture);let o=this._renderer,d=e.textureOptions.resolution||o.view.resolution,h=(i=e.textureOptions.antialias)!=null?i:o.view.antialias;e.texture=ze.getOptimalTexture(r.width,r.height,d,h),e._textureBounds||(e._textureBounds=new qe),e._textureBounds.copyFrom(r),s!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(ze.returnTexture(e.texture),e.texture=null)}_updateRenderGroups(e){let t=this._renderer,i=t.renderPipes;if(e.runOnRender(t),e.instructionSet.renderPipes=i,e.structureDidChange?qh(e.childrenRenderablesToUpdate.list,0):tv(e,i),B3(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,t)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,t.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let r=0;r<e.renderGroupChildren.length;r++)this._updateRenderGroups(e.renderGroupChildren[r])}_updateRenderables(e){let{list:t,index:i}=e.childrenRenderablesToUpdate;for(let r=0;r<i;r++){let s=t[r];s.didViewUpdate&&e.updateRenderable(s)}qh(t,i)}_buildInstructions(e,t){let i=e.root,r=e.instructionSet;r.reset();let s=t.renderPipes?t:t.batch.renderer,o=s.renderPipes;o.batch.buildStart(r),o.blendMode.buildStart(),o.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(r,s,null),o.batch.buildEnd(r),o.blendMode.buildEnd(r)}};oo.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"renderGroup"};var co=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];ye.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.bounds=e.visualBounds,t.texture=e._texture}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=ye.get(Pi);return t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.bounds=e.visualBounds,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)ye.return(this._gpuSpriteHash[e]);this._gpuSpriteHash=null,this._renderer=null}};co.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"sprite"};var iv=Object.defineProperty,v1=Object.getOwnPropertySymbols,rv=Object.prototype.hasOwnProperty,sv=Object.prototype.propertyIsEnumerable,T1=(a,e,t)=>e in a?iv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,S1=(a,e)=>{for(var t in e||(e={}))rv.call(e,t)&&T1(a,t,e[t]);if(v1)for(var t of v1(e))sv.call(e,t)&&T1(a,t,e[t]);return a},Zh=class D3{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ee(0),this.color=this._backgroundColor,this.alpha=1}init(e){e=S1(S1({},D3.defaultOptions),e),this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};Zh.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"background",priority:0},Zh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};var nv=Zh,Er={};pe.handle(B.BlendMode,a=>{if(!a.name)throw new Error("BlendMode extension must have a name property");Er[a.name]=a.ref},a=>{delete Er[a.name]});var ho=class{constructor(e){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(e,t,i){if(this._activeBlendMode===t){this._isAdvanced&&this._renderableList.push(e);return}this._activeBlendMode=t,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!Er[t],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(e))}_beginAdvancedBlendMode(e){this._renderer.renderPipes.batch.break(e);let t=this._activeBlendMode;if(!Er[t])return;let i=this._filterHash[t];i||(i=this._filterHash[t]=new wi,i.filters=[new Er[t]]);let r={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=r.renderables,e.add(r)}_endAdvancedBlendMode(e){this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(let e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}};ho.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"blendMode"};var ov=Object.defineProperty,w1=Object.getOwnPropertySymbols,cv=Object.prototype.hasOwnProperty,dv=Object.prototype.propertyIsEnumerable,A1=(a,e,t)=>e in a?ov(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,yd=(a,e)=>{for(var t in e||(e={}))cv.call(e,t)&&A1(a,t,e[t]);if(w1)for(var t of w1(e))dv.call(e,t)&&A1(a,t,e[t]);return a},xd={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},Qh=class k3{constructor(e){this._renderer=e}_normalizeOptions(e,t={}){return e instanceof le||e instanceof K?yd({target:e},t):yd(yd({},t),e)}async image(e){let t=new Image;return t.src=await this.base64(e),t}async base64(e){e=this._normalizeOptions(e,k3.defaultImageOptions);let{format:t,quality:i}=e,r=this.canvas(e);if(r.toBlob!==void 0)return new Promise((s,o)=>{r.toBlob(d=>{if(!d){o(new Error("ICanvas.toBlob failed!"));return}let h=new FileReader;h.onload=()=>s(h.result),h.onerror=o,h.readAsDataURL(d)},xd[t],i)});if(r.toDataURL!==void 0)return r.toDataURL(xd[t],i);if(r.convertToBlob!==void 0){let s=await r.convertToBlob({type:xd[t],quality:i});return new Promise((o,d)=>{let h=new FileReader;h.onload=()=>o(h.result),h.onerror=d,h.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer;if(t instanceof K)return i.texture.generateCanvas(t);let r=i.textureGenerator.generateTexture(e),s=i.texture.generateCanvas(r);return r.destroy(!0),s}pixels(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer,r=t instanceof K?t:i.textureGenerator.generateTexture(e),s=i.texture.getPixels(r);return t instanceof le&&r.destroy(!0),s}texture(e){return e=this._normalizeOptions(e),e.target instanceof K?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){var t;e=this._normalizeOptions(e);let i=this.canvas(e),r=document.createElement("a");r.download=(t=e.filename)!=null?t:"image.png",r.href=i.toDataURL("image/png"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}log(e){var t;let i=(t=e.width)!=null?t:200;e=this._normalizeOptions(e);let r=this.canvas(e),s=r.toDataURL(),o=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${s}) no-repeat;`,"background-size: contain;"].join(" ")}destroy(){this._renderer=null}};Qh.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"extract"},Qh.defaultImageOptions={format:"png",quality:1};var hv=Qh,Jh=class a extends K{static create(e){return new a({source:new Fe(e)})}resize(e,t,i){return this.source.resize(e,t,i),this}},lv=Object.defineProperty,fv=Object.defineProperties,uv=Object.getOwnPropertyDescriptors,E1=Object.getOwnPropertySymbols,bv=Object.prototype.hasOwnProperty,pv=Object.prototype.propertyIsEnumerable,P1=(a,e,t)=>e in a?lv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,gv=(a,e)=>{for(var t in e||(e={}))bv.call(e,t)&&P1(a,t,e[t]);if(E1)for(var t of E1(e))pv.call(e,t)&&P1(a,t,e[t]);return a},mv=(a,e)=>fv(a,uv(e)),_v=new Pe,yv=new qe,xv=[0,0,0,0],lo=class{constructor(e){this._renderer=e}generateTexture(e){var t;e instanceof le&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});let i=e.resolution||this._renderer.resolution,r=e.antialias||this._renderer.view.antialias,s=e.target,o=e.clearColor;o?o=Array.isArray(o)&&o.length===4?o:Ee.shared.setValue(o).toArray():o=xv;let d=((t=e.frame)==null?void 0:t.copyTo(_v))||pl(s,yv).rectangle;d.width=Math.max(d.width,1/i)|0,d.height=Math.max(d.height,1/i)|0;let h=Jh.create(mv(gv({},e.textureSourceOptions),{width:d.width,height:d.height,resolution:i,antialias:r})),l=ie.shared.translate(-d.x,-d.y);return this._renderer.render({container:s,transform:l,target:h,clearColor:o}),h.source.updateMipmaps(),h}destroy(){this._renderer=null}};lo.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"textureGenerator"};var fo=class{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:t,worldTransformMatrix:i,worldColor:r,offset:s}){let o=this._renderer.renderTarget.renderTarget,d=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:o,worldTransformMatrix:new ie,worldColor:4294967295,offset:new Ce},h={projectionMatrix:t||this._renderer.renderTarget.projectionMatrix,resolution:e||o.size,worldTransformMatrix:i||d.worldTransformMatrix,worldColor:r||d.worldColor,offset:s||d.offset,bindGroup:null},l=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(l);let u=l.uniforms;u.uProjectionMatrix=h.projectionMatrix,u.uResolution=h.resolution,u.uWorldTransformMatrix.copyFrom(h.worldTransformMatrix),u.uWorldTransformMatrix.tx-=h.offset.x,u.uWorldTransformMatrix.ty-=h.offset.y,$r(h.worldColor,u.uWorldColorAlpha,0),l.update();let p;this._renderer.renderPipes.uniformBatch?p=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(l,!1):(p=this._bindGroupPool.pop()||new Ht,this._activeBindGroups.push(p),p.setResource(l,0)),h.bindGroup=p,this._currentGlobalUniformData=h}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===yt.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new Je({uProjectionMatrix:{value:new ie,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}};fo.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"globalUniforms"};var vv=1,uo=class{constructor(){this._tasks=[],this._offset=0}init(){tt.system.add(this._update,this)}repeat(e,t,i=!0){let r=vv++,s=0;return i&&(this._offset+=1e3,s=this._offset),this._tasks.push({func:e,duration:t,start:performance.now(),offset:s,last:performance.now(),repeat:!0,id:r}),r}cancel(e){for(let t=0;t<this._tasks.length;t++)if(this._tasks[t].id===e){this._tasks.splice(t,1);return}}_update(){let e=performance.now();for(let t=0;t<this._tasks.length;t++){let i=this._tasks[t];if(e-i.offset-i.last>=i.duration){let r=e-i.start;i.func(r),i.last=e}}}destroy(){tt.system.remove(this._update,this),this._tasks.length=0}};uo.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"scheduler",priority:0};var R1=!1;function Tv(a){if(!R1){if(xe.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let e=[`%c  %c  %c  %c  %c PixiJS %c v${An} (${a}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${An} - ${a} - http://www.pixijs.com/`);R1=!0}}var Xr=class{constructor(e){this._renderer=e}init(e){if(e.hello){let t=this._renderer.name;this._renderer.type===yt.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),Tv(t)}}};Xr.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"hello",priority:-2},Xr.defaultOptions={hello:!1};function Sv(a){let e=!1;for(let i in a)if(a[i]==null){e=!0;break}if(!e)return a;let t=Object.create(null);for(let i in a){let r=a[i];r&&(t[i]=r)}return t}function wv(a){let e=0;for(let t=0;t<a.length;t++)a[t]==null?e++:a[t-e]=a[t];return a.length-=e,a}var Av=Object.defineProperty,M1=Object.getOwnPropertySymbols,Ev=Object.prototype.hasOwnProperty,Pv=Object.prototype.propertyIsEnumerable,C1=(a,e,t)=>e in a?Av(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,O1=(a,e)=>{for(var t in e||(e={}))Ev.call(e,t)&&C1(a,t,e[t]);if(M1)for(var t of M1(e))Pv.call(e,t)&&C1(a,t,e[t]);return a},Rv=0,el=class U3{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e=O1(O1({},U3.defaultOptions),e),this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedHashes)t.context[t.hash]=Sv(t.context[t.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedArrays)wv(t.context[t.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,t){this._managedHashes.push({context:e,hash:t})}addManagedArray(e,t){this._managedArrays.push({context:e,hash:t})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=Rv++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){var e,t,i,r;let s=this._now,o=this._managedRenderables,d=this._renderer.renderPipes,h=0;for(let l=0;l<o.length;l++){let u=o[l];if(u===null){h++;continue}let p=(e=u.renderGroup)!=null?e:u.parentRenderGroup,y=(i=(t=p?.instructionSet)==null?void 0:t.gcTick)!=null?i:-1;if(((r=p?.gcTick)!=null?r:0)===y&&(u._lastUsed=s),s-u._lastUsed>this.maxUnusedTime){if(!u.destroyed){let _=d;p&&(p.structureDidChange=!0),_[u.renderPipeId].destroyRenderable(u)}u._lastUsed=-1,h++,u.off("destroyed",this._removeRenderable,this)}else o[l-h]=u}o.length-=h}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){let t=this._managedRenderables.indexOf(e);t>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[t]=null)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(let i of e.renderGroupChildren)this._updateInstructionGCTick(i,t)}};el.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"renderableGC",priority:0},el.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};var Mv=el,Cv=Object.defineProperty,I1=Object.getOwnPropertySymbols,Ov=Object.prototype.hasOwnProperty,Iv=Object.prototype.propertyIsEnumerable,G1=(a,e,t)=>e in a?Cv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,B1=(a,e)=>{for(var t in e||(e={}))Ov.call(e,t)&&G1(a,t,e[t]);if(I1)for(var t of I1(e))Iv.call(e,t)&&G1(a,t,e[t]);return a},tl=class L3{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){var t;e=B1(B1({},L3.defaultOptions),e),this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=(t=e.textureGCAMaxIdle)!=null?t:e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this._renderer.texture.managedTextures;for(let t=0;t<e.length;t++){let i=e[t];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};tl.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"textureGC"},tl.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};var Gv=tl,Bv=Object.defineProperty,F1=Object.getOwnPropertySymbols,Fv=Object.prototype.hasOwnProperty,Dv=Object.prototype.propertyIsEnumerable,D1=(a,e,t)=>e in a?Bv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,k1=(a,e)=>{for(var t in e||(e={}))Fv.call(e,t)&&D1(a,t,e[t]);if(F1)for(var t of F1(e))Dv.call(e,t)&&D1(a,t,e[t]);return a},al=class N3{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e=k1(k1({},N3.defaultOptions),e),e.view&&(e.canvas=e.view),this.screen=new Pe(0,0,e.width,e.height),this.canvas=e.canvas||xe.get().createCanvas(),this.antialias=!!e.antialias,this.texture=P3(this.canvas,e),this.renderTarget=new Vh({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,t,i){this.texture.source.resize(e,t,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:e!=null&&e.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};al.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"view",priority:0},al.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};var kv=al,j3=[nv,fo,Xr,kv,oo,Gv,lo,hv,Pn,Mv,uo],X3=[ho,y3,co,no,Xn,zn,Hn,so],Uv=[...j3,Zn,qy,jy,Vn,ao,Jn,Wn,to,eo,$n,Fx,Kn,Yn],Lv=[...X3],Nv=[Nn,ro,io],H3=[],z3=[],V3=[];pe.handleByNamedList(B.WebGLSystem,H3),pe.handleByNamedList(B.WebGLPipes,z3),pe.handleByNamedList(B.WebGLPipesAdaptor,V3),pe.add(...Uv,...Lv,...Nv);var il=class extends ko{constructor(){let e={name:"webgl",type:yt.WEBGL,systems:H3,renderPipes:z3,renderPipeAdaptors:V3};super(e)}},jv={__proto__:null,WebGLRenderer:il},bo=class{constructor(e){this._hash=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(e){this._gpu=e}getBindGroup(e,t,i){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,t,i)}_createBindGroup(e,t,i){var r;let s=this._gpu.device,o=t.layout[i],d=[],h=this._renderer;for(let p in o){let y=(r=e.resources[p])!=null?r:e.resources[o[p]],_;if(y._resourceType==="uniformGroup"){let v=y;h.ubo.updateUniformGroup(v);let T=v.buffer;_={buffer:h.buffer.getGPUBuffer(T),offset:0,size:T.descriptor.size}}else if(y._resourceType==="buffer"){let v=y;_={buffer:h.buffer.getGPUBuffer(v),offset:0,size:v.descriptor.size}}else if(y._resourceType==="bufferResource"){let v=y;_={buffer:h.buffer.getGPUBuffer(v.buffer),offset:v.offset,size:v.size}}else if(y._resourceType==="textureSampler"){let v=y;_=h.texture.getGpuSampler(v)}else if(y._resourceType==="textureSource"){let v=y;_=h.texture.getGpuSource(v).createView({})}d.push({binding:o[p],resource:_})}let l=h.shader.getProgramData(t).bindGroups[i],u=s.createBindGroup({layout:l,entries:d});return this._hash[e._key]=u,u}destroy(){for(let e of Object.keys(this._hash))this._hash[e]=null;this._hash=null,this._renderer=null}};bo.extension={type:[B.WebGPUSystem],name:"bindGroup"};var po=class{constructor(e){this._gpuBuffers=Object.create(null),this._managedBuffers=[],e.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(e){this._gpu=e}getGPUBuffer(e){return this._gpuBuffers[e.uid]||this.createGPUBuffer(e)}updateBuffer(e){let t=this._gpuBuffers[e.uid]||this.createGPUBuffer(e),i=e.data;return e._updateID&&i&&(e._updateID=0,this._gpu.device.queue.writeBuffer(t,0,i.buffer,0,(e._updateSize||i.byteLength)+3&-4)),t}destroyAll(){for(let e in this._gpuBuffers)this._gpuBuffers[e].destroy();this._gpuBuffers={}}createGPUBuffer(e){this._gpuBuffers[e.uid]||(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this),e.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(e));let t=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e.data&&(Nd(e.data.buffer,t.getMappedRange()),t.unmap()),this._gpuBuffers[e.uid]=t,t}onBufferChange(e){this._gpuBuffers[e.uid].destroy(),e._updateID=0,this._gpuBuffers[e.uid]=this.createGPUBuffer(e)}onBufferDestroy(e){this._managedBuffers.splice(this._managedBuffers.indexOf(e),1),this._destroyBuffer(e)}destroy(){this._managedBuffers.forEach(e=>this._destroyBuffer(e)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(e){this._gpuBuffers[e.uid].destroy(),e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this),e.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[e.uid]=null}};po.extension={type:[B.WebGPUSystem],name:"buffer"};var rl=class{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);let t=this.byteIndex,i=t+e*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,t}addGroup(e){let t=this.addEmptyGroup(e.length);for(let i=0;i<e.length;i++)this.data[t/4+i]=e[i];return t}destroy(){this.data=null}},go=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}};go.extension={type:[B.WebGPUSystem],name:"colorMask"};var Hr=class{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(e).then(t=>{this.gpu=t,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){let t=await xe.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(s=>t.features.has(s)),r=await t.requestDevice({requiredFeatures:i});return{adapter:t,device:r}}destroy(){this.gpu=null,this._renderer=null}};Hr.extension={type:[B.WebGPUSystem],name:"device"},Hr.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};var Xv=Object.defineProperty,U1=Object.getOwnPropertySymbols,Hv=Object.prototype.hasOwnProperty,zv=Object.prototype.propertyIsEnumerable,L1=(a,e,t)=>e in a?Xv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,N1=(a,e)=>{for(var t in e||(e={}))Hv.call(e,t)&&L1(a,t,e[t]);if(U1)for(var t of U1(e))zv.call(e,t)&&L1(a,t,e[t]);return a},mo=class{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,t,i,r){let s=this._renderer.pipeline.getPipeline(e,t,i,r);this.setPipeline(s)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,t){this._boundVertexBuffer[e]!==t&&(this._boundVertexBuffer[e]=t,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(t)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;let t=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),t)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,t,i){if(this._boundBindGroup[e]===t)return;this._boundBindGroup[e]=t,t._touch(this._renderer.textureGC.count);let r=this._renderer.bindGroup.getBindGroup(t,i,e);this.renderPassEncoder.setBindGroup(e,r)}setGeometry(e,t){let i=this._renderer.pipeline.getBufferNamesToBind(e,t);for(let r in i)this._setVertexBuffer(r,e.attributes[i[r]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,t){for(let i in e.groups){let r=e.groups[i];t||this._syncBindGroup(r),this.setBindGroup(i,r,e.gpuProgram)}}_syncBindGroup(e){for(let t in e.resources){let i=e.resources[t];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(e){let{geometry:t,shader:i,state:r,topology:s,size:o,start:d,instanceCount:h,skipSync:l}=e;this.setPipelineFromGeometryProgramAndState(t,i.gpuProgram,r,s),this.setGeometry(t,i.gpuProgram),this._setShaderBindGroups(i,l),t.indexBuffer?this.renderPassEncoder.drawIndexed(o||t.indexBuffer.data.length,h??t.instanceCount,d||0):this.renderPassEncoder.draw(o||t.getSize(),h??t.instanceCount,d||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);let t=this._boundPipeline,i=N1({},this._boundVertexBuffer),r=this._boundIndexBuffer,s=N1({},this._boundBindGroup);this._clearCache();let o=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(o.x,o.y,o.width,o.height,0,1),this.setPipeline(t);for(let d in i)this._setVertexBuffer(d,i[d]);for(let d in s)this.setBindGroup(d,s[d],null);this._setIndexBuffer(r)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}};mo.extension={type:[B.WebGPUSystem],name:"encoder",priority:1};var _o=class{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Ne.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=e,i.stencilReference=t;let r=this._renderer;r.pipeline.setStencilMode(e),r.encoder.renderPassEncoder.setStencilReference(t)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}};_o.extension={type:[B.WebGPUSystem],name:"stencil"};var Ns={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function Vv(a){let e=a.map(i=>({data:i,offset:0,size:0})),t=0;for(let i=0;i<e.length;i++){let r=e[i],s=Ns[r.data.type].size,o=Ns[r.data.type].align;if(!Ns[r.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${r.data.type}`);r.data.size>1&&(s=Math.max(s,o)*r.data.size),t=Math.ceil(t/o)*o,r.size=s,r.offset=t,t+=s}return t=Math.ceil(t/16)*16,{uboElements:e,size:t}}function Wv(a,e){let{size:t,align:i}=Ns[a.data.type],r=(i-t)/4,s=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
${e!==0?`offset += ${e};`:""}

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*(t/4)}; i++)
{
for(var j = 0; j < ${t/4}; j++)
{
${s}[arrayOffset++] = v[t++];
}
${r!==0?`arrayOffset += ${r};`:""}
}
`}function Yv(a){return A3(a,"uboWgsl",Wv,sx)}var yo=class extends qn{constructor(){super({createUboElements:Vv,generateUboSync:Yv})}};yo.extension={type:[B.WebGPUSystem],name:"ubo"};var Sa=128,xo=class{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new rl({minUniformOffsetAlignment:Sa});let t=256/Sa;for(let i=0;i<t;i++){let r=ve.UNIFORM|ve.COPY_DST;i===0&&(r|=ve.COPY_SRC),this._buffers.push(new rt({data:this._batchBuffer.data,usage:r}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let e in this._bindGroupHash)this._bindGroupHash[e]=null;this._batchBuffer.clear()}getUniformBindGroup(e,t){if(!t&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);let i=e.buffer.data,r=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,r/4),this._bindGroupHash[e.uid]=this._getBindGroup(r/Sa),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);let t=e.buffer.data,i=this._batchBuffer.addGroup(t);return this._getBufferResource(i/Sa)}getArrayBindGroup(e){let t=this._batchBuffer.addGroup(e);return this._getBindGroup(t/Sa)}getArrayBufferResource(e){let t=this._batchBuffer.addGroup(e)/Sa;return this._getBufferResource(t)}_getBufferResource(e){if(!this._bufferResources[e]){let t=this._buffers[e%2];this._bufferResources[e]=new jr({buffer:t,offset:(e/2|0)*256,size:Sa})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){let t=new Ht({0:this._getBufferResource(e)});this._bindGroups[e]=t}return this._bindGroups[e]}_uploadBindGroups(){let e=this._renderer.buffer,t=this._buffers[0];t.update(this._batchBuffer.byteIndex),e.updateBuffer(t);let i=this._renderer.gpu.device.createCommandEncoder();for(let r=1;r<this._buffers.length;r++){let s=this._buffers[r];i.copyBufferToBuffer(e.getGPUBuffer(t),Sa,e.getGPUBuffer(s),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}};xo.extension={type:[B.WebGPUPipes],name:"uniformBatch"};var $v=Object.defineProperty,Kv=Object.defineProperties,qv=Object.getOwnPropertyDescriptors,j1=Object.getOwnPropertySymbols,Zv=Object.prototype.hasOwnProperty,Qv=Object.prototype.propertyIsEnumerable,X1=(a,e,t)=>e in a?$v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Jv=(a,e)=>{for(var t in e||(e={}))Zv.call(e,t)&&X1(a,t,e[t]);if(j1)for(var t of j1(e))Qv.call(e,t)&&X1(a,t,e[t]);return a},eT=(a,e)=>Kv(a,qv(e)),tT={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function aT(a,e,t,i,r){return a<<24|e<<16|t<<10|i<<5|r}function iT(a,e,t,i){return t<<6|a<<3|i<<1|e}var vo=class{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(Ne.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=wa[e],this._updatePipeHash())}setPipeline(e,t,i,r){let s=this.getPipeline(e,t,i);r.setPipeline(s)}getPipeline(e,t,i,r){e._layoutKey||(v3(e,t.attributeData),this._generateBufferKey(e)),r||(r=e.topology);let s=aT(e._layoutKey,t._layoutKey,i.data,i._blendModeId,tT[r]);return this._pipeCache[s]?this._pipeCache[s]:(this._pipeCache[s]=this._createPipeline(e,t,i,r),this._pipeCache[s])}_createPipeline(e,t,i,r){let s=this._gpu.device,o=this._createVertexBufferLayouts(e,t),d=this._renderer.state.getColorTargets(i);d[0].writeMask=this._stencilMode===Ne.RENDERING_MASK_ADD?0:this._colorMask;let h=this._renderer.shader.getProgramData(t).pipeline,l={vertex:{module:this._getModule(t.vertex.source),entryPoint:t.vertex.entryPoint,buffers:o},fragment:{module:this._getModule(t.fragment.source),entryPoint:t.fragment.entryPoint,targets:d},primitive:{topology:r,cullMode:i.cullMode},layout:h,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(l.depthStencil=eT(Jv({},this._stencilState),{format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"})),s.createRenderPipeline(l)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){let t=this._gpu.device;return this._moduleCache[e]=t.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){let t=[],i=0,r=Object.keys(e.attributes).sort();for(let o=0;o<r.length;o++){let d=e.attributes[r[o]];t[i++]=d.offset,t[i++]=d.format,t[i++]=d.stride,t[i++]=d.instance}let s=t.join("|");return e._layoutKey=Ir(s,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){let t=[],i=0,r=Object.keys(e.attributeData).sort();for(let o=0;o<r.length;o++){let d=e.attributeData[r[o]];t[i++]=d.location}let s=t.join("|");return e._attributeLocationsKey=Ir(s,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,t){let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];let r=this._createVertexBufferLayouts(e,t),s=Object.create(null),o=t.attributeData;for(let d=0;d<r.length;d++){let h=Object.values(r[d].attributes)[0].shaderLocation;for(let l in o)if(o[l].location===h){s[d]=l;break}}return this._bindingNamesCache[i]=s,s}_createVertexBufferLayouts(e,t){t._attributeLocationsKey||this._generateAttributeLocationsKey(t);let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];let r=[];return e.buffers.forEach(s=>{var o;let d={arrayStride:0,stepMode:"vertex",attributes:[]},h=d.attributes;for(let l in t.attributeData){let u=e.attributes[l];((o=u.divisor)!=null?o:1)!==1&&Qt(`Attribute ${l} has an invalid divisor value of '${u.divisor}'. WebGPU only supports a divisor value of 1`),u.buffer===s&&(d.arrayStride=u.stride,d.stepMode=u.instance?"instance":"vertex",h.push({shaderLocation:t.attributeData[l].location,offset:u.offset,format:u.format}))}h.length&&r.push(d)}),this._bufferLayoutsCache[i]=r,r}_updatePipeHash(){let e=iT(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}};vo.extension={type:[B.WebGPUSystem],name:"pipeline"};var sl=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}},nl=class{init(e,t){this._renderer=e,this._renderTargetSystem=t}copyToTexture(e,t,i,r,s){let o=this._renderer,d=this._getGpuColorTexture(e),h=o.texture.getGpuSource(t.source);return o.encoder.commandEncoder.copyTextureToTexture({texture:d,origin:i},{texture:h,origin:s},r),t}startRenderPass(e,t=!0,i,r){let s=this._renderTargetSystem.getGpuRenderTarget(e),o=this.getDescriptor(e,t,i);s.descriptor=o,this._renderer.pipeline.setRenderTarget(s),this._renderer.encoder.beginRenderPass(s),this._renderer.encoder.setViewport(r)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);return t.contexts[0]?t.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,t,i){typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let r=this._renderTargetSystem,s=r.getGpuRenderTarget(e),o=e.colorTextures.map((h,l)=>{let u=s.contexts[l],p,y;u?p=u.getCurrentTexture().createView():p=this._renderer.texture.getGpuSource(h).createView({mipLevelCount:1}),s.msaaTextures[l]&&(y=p,p=this._renderer.texture.getTextureView(s.msaaTextures[l]));let _=t&mt.COLOR?"clear":"load";return i!=null||(i=r.defaultClearColor),{view:p,resolveTarget:y,clearValue:i,storeOp:"store",loadOp:_}}),d;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=s.msaa?4:1),e.depthStencilTexture){let h=t&mt.STENCIL?"clear":"load",l=t&mt.DEPTH?"clear":"load";d={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:h,depthClearValue:1,depthLoadOp:l,depthStoreOp:"store"}}return{colorAttachments:o,depthStencilAttachment:d}}clear(e,t=!0,i,r){if(!t)return;let{gpu:s,encoder:o}=this._renderer,d=s.device;if(o.commandEncoder===null){let h=d.createCommandEncoder(),l=this.getDescriptor(e,t,i),u=h.beginRenderPass(l);u.setViewport(r.x,r.y,r.width,r.height,0,1),u.end();let p=h.finish();d.queue.submit([p])}else this.startRenderPass(e,t,i,r)}initGpuRenderTarget(e){e.isRoot=!0;let t=new sl;return e.colorTextures.forEach((i,r)=>{if(Kt.test(i.resource)){let s=i.resource.getContext("webgpu"),o=i.transparent?"premultiplied":"opaque";try{s.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:o})}catch{}t.contexts[r]=s}if(t.msaa=i.source.antialias,i.source.antialias){let s=new Fe({width:0,height:0,sampleCount:4});t.msaaTextures[r]=s}}),t.msaa&&(t.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),t}destroyGpuRenderTarget(e){e.contexts.forEach(t=>{t.unconfigure()}),e.msaaTextures.forEach(t=>{t.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&t.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);t.width=e.width,t.height=e.height,t.msaa&&e.colorTextures.forEach((i,r)=>{let s=t.msaaTextures[r];s?.resize(i.source.width,i.source.height,i.source._resolution)})}},To=class extends Qn{constructor(e){super(e),this.adaptor=new nl,this.adaptor.init(e,this)}};To.extension={type:[B.WebGPUSystem],name:"renderTarget"};var So=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e,this.maxTextures=e.device.limits.maxSampledTexturesPerShaderStage}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){let t=this._gpu.device,i=e.gpuLayout.map(s=>t.createBindGroupLayout({entries:s})),r={bindGroupLayouts:i};return this._gpuProgramData[e._layoutKey]={bindGroups:i,pipeline:t.createPipelineLayout(r)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}};So.extension={type:[B.WebGPUSystem],name:"shader"};var ct={};ct.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},ct.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},ct["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},ct["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},ct["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},ct.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},ct.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},ct.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};var wo=class{constructor(){this.defaultState=new Et,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e){return[{format:"bgra8unorm",writeMask:0,blend:ct[e.blendMode]||ct.normal}]}destroy(){this.gpu=null}};wo.extension={type:[B.WebGPUSystem],name:"state"};var rT={type:"image",upload(a,e,t){let i=a.resource,r=(a.pixelWidth|0)*(a.pixelHeight|0),s=i.byteLength/r;t.device.queue.writeTexture({texture:e},i,{offset:0,rowsPerImage:a.pixelHeight,bytesPerRow:a.pixelHeight*s},{width:a.pixelWidth,height:a.pixelHeight,depthOrArrayLayers:1})}},W3={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},sT={blockBytes:4,blockWidth:1,blockHeight:1},nT={type:"compressed",upload(a,e,t){let i=a.pixelWidth,r=a.pixelHeight,s=W3[a.format]||sT;for(let o=0;o<a.resource.length;o++){let d=a.resource[o],h=Math.ceil(i/s.blockWidth)*s.blockBytes;t.device.queue.writeTexture({texture:e,mipLevel:o},d,{offset:0,bytesPerRow:h},{width:Math.ceil(i/s.blockWidth)*s.blockWidth,height:Math.ceil(r/s.blockHeight)*s.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),r=Math.max(r>>1,1)}}},Y3={type:"image",upload(a,e,t){let i=a.resource;if(!i)return;let r=Math.min(e.width,a.resourceWidth||a.pixelWidth),s=Math.min(e.height,a.resourceHeight||a.pixelHeight),o=a.alphaMode==="premultiply-alpha-on-upload";t.device.queue.copyExternalImageToTexture({source:i},{texture:e,premultipliedAlpha:o},{width:r,height:s})}},oT={type:"video",upload(a,e,t){Y3.upload(a,e,t)}},ol=class{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let t=this.pipelines[e];return t||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
    var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
    vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

    struct VertexOutput {
    @builtin(position) position : vec4<f32>,
    @location(0) texCoord : vec2<f32>,
    };

    @vertex
    fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
    var output : VertexOutput;
    output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
    output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
    return output;
    }

    @group(0) @binding(0) var imgSampler : sampler;
    @group(0) @binding(1) var img : texture_2d<f32>;

    @fragment
    fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
    return textureSample(img, imgSampler, texCoord);
    }
`})),t=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=t),t}generateMipmap(e){let t=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=e,r=e.depthOrArrayLayers||1,s=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!s){let h={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};i=this.device.createTexture(h)}let o=this.device.createCommandEncoder({}),d=t.getBindGroupLayout(0);for(let h=0;h<r;++h){let l=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),u=s?1:0;for(let p=1;p<e.mipLevelCount;++p){let y=i.createView({baseMipLevel:u++,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),_=o.beginRenderPass({colorAttachments:[{view:y,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),v=this.device.createBindGroup({layout:d,entries:[{binding:0,resource:this.sampler},{binding:1,resource:l}]});_.setPipeline(t),_.setBindGroup(0,v),_.draw(3,1,0,0),_.end(),l=y}}if(!s){let h={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r};for(let l=1;l<e.mipLevelCount;++l)o.copyTextureToTexture({texture:i,mipLevel:l-1},{texture:e,mipLevel:l},h),h.width=Math.ceil(h.width/2),h.height=Math.ceil(h.height/2)}return this.device.queue.submit([o.finish()]),s||i.destroy(),e}},Ao=class{constructor(e){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:Y3,buffer:rT,video:oT,compressed:nT},this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuSources"),e.renderableGC.addManagedHash(this,"_gpuSamplers"),e.renderableGC.addManagedHash(this,"_bindGroupHash"),e.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(e){this._gpu=e}initSource(e){if(e.autoGenerateMipmaps){let h=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(h))+1}let t=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(t|=GPUTextureUsage.RENDER_ATTACHMENT,t|=GPUTextureUsage.COPY_SRC);let i=W3[e.format]||{blockBytes:4,blockWidth:1,blockHeight:1},r=Math.ceil(e.pixelWidth/i.blockWidth)*i.blockWidth,s=Math.ceil(e.pixelHeight/i.blockHeight)*i.blockHeight,o={label:e.label,size:{width:r,height:s},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:t},d=this._gpu.device.createTexture(o);return this._gpuSources[e.uid]=d,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),d}onSourceUpdate(e){let t=this.getGpuSource(e);t&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,t,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onSourceUnload(e){let t=this._gpuSources[e.uid];t&&(this._gpuSources[e.uid]=null,t.destroy())}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new ol(this._gpu.device));let t=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(t)}onSourceDestroy(e){e.off("update",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("destroy",this.onSourceDestroy,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}onSourceResize(e){let t=this._gpuSources[e.uid];t?(t.width!==e.pixelWidth||t.height!==e.pixelHeight)&&(this._textureViewHash[e.uid]=null,this._bindGroupHash[e.uid]=null,this.onSourceUnload(e),this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return this._gpuSources[e.uid]||this.initSource(e)}getTextureBindGroup(e){var t;return(t=this._bindGroupHash[e.uid])!=null?t:this._createTextureBindGroup(e)}_createTextureBindGroup(e){let t=e.source;return this._bindGroupHash[e.uid]=new Ht({0:t,1:t.style,2:new Je({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){var t;let i=e.source;return(t=this._textureViewHash[i.uid])!=null?t:this._createTextureView(i)}_createTextureView(e){return this._textureViewHash[e.uid]=this.getGpuSource(e).createView(),this._textureViewHash[e.uid]}generateCanvas(e){let t=this._renderer,i=t.gpu.device.createCommandEncoder(),r=xe.get().createCanvas();r.width=e.source.pixelWidth,r.height=e.source.pixelHeight;let s=r.getContext("webgpu");return s.configure({device:t.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:xe.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:t.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:r.width,height:r.height}),t.gpu.device.queue.submit([i.finish()]),r}getPixels(e){let t=this.generateCanvas(e),i=ca.getOptimalCanvasAndContext(t.width,t.height),r=i.context;r.drawImage(t,0,0);let{width:s,height:o}=t,d=r.getImageData(0,0,s,o),h=new Uint8ClampedArray(d.data.buffer);return ca.returnCanvasAndContext(i),{pixels:h,width:s,height:o}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(let e of Object.keys(this._bindGroupHash)){let t=Number(e),i=this._bindGroupHash[t];i?.destroy(),this._bindGroupHash[t]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}};Ao.extension={type:[B.WebGPUSystem],name:"texture"};var Eo=class{init(){let e=new Je({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),t=zr({name:"graphics",bits:[_l,xl(Oi()),cg,Wr]});this.shader=new ht({gpuProgram:t,resources:{localUniforms:e}})}execute(e,t){let i=t.context,r=i.customShader||this.shader,s=e.renderer,o=s.graphicsContext,{batcher:d,instructions:h}=o.getContextRenderData(i),l=s.encoder;l.setGeometry(d.geometry,r.gpuProgram);let u=s.globalUniforms.bindGroup;l.setBindGroup(0,u,r.gpuProgram);let p=s.renderPipes.uniformBatch.getUniformBindGroup(r.resources.localUniforms,!0);l.setBindGroup(2,p,r.gpuProgram);let y=h.instructions,_=null;for(let v=0;v<h.instructionSize;v++){let T=y[v];if(T.topology!==_&&(_=T.topology,l.setPipelineFromGeometryProgramAndState(d.geometry,r.gpuProgram,e.state,T.topology)),r.groups[1]=T.bindGroup,!T.gpuBindGroup){let A=T.textures;T.bindGroup=ml(A.textures,A.count),T.gpuBindGroup=s.bindGroup.getBindGroup(T.bindGroup,r.gpuProgram,1)}l.setBindGroup(1,T.bindGroup,r.gpuProgram),l.renderPassEncoder.drawIndexed(T.size,1,T.start)}}destroy(){this.shader.destroy(!0),this.shader=null}};Eo.extension={type:[B.WebGPUPipesAdaptor],name:"graphics"};var Po=class{init(){let e=zr({name:"mesh",bits:[Ar,Iy,Wr]});this._shader=new ht({gpuProgram:e,resources:{uTexture:K.EMPTY._source,uSampler:K.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ie}}}})}execute(e,t){let i=e.renderer,r=t._shader;if(!r)r=this._shader,r.groups[2]=i.texture.getTextureBindGroup(t.texture);else if(!r.gpuProgram)return;let s=r.gpuProgram;if(s.autoAssignGlobalUniforms&&(r.groups[0]=i.globalUniforms.bindGroup),s.autoAssignLocalUniforms){let o=e.localUniforms;r.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(o,!0)}i.encoder.draw({geometry:t._geometry,shader:r,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};Po.extension={type:[B.WebGPUPipesAdaptor],name:"mesh"};var cT=[...j3,yo,mo,Hr,po,Ao,To,So,wo,vo,go,_o,bo],dT=[...X3,xo],hT=[jn,Po,Eo],$3=[],K3=[],q3=[];pe.handleByNamedList(B.WebGPUSystem,$3),pe.handleByNamedList(B.WebGPUPipes,K3),pe.handleByNamedList(B.WebGPUPipesAdaptor,q3),pe.add(...cT,...dT,...hT);var cl=class extends ko{constructor(){let e={name:"webgpu",type:yt.WEBGPU,systems:$3,renderPipes:K3,renderPipeAdaptors:q3};super(e)}},lT={__proto__:null,WebGPURenderer:cl},fT={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},uS=new Proxy(fT,{get(a,e){return a[e]}}),bS=new Pe(0,0,1,1);var uT=(a=>(a[a.NONE=0]="NONE",a[a.LOW=2]="LOW",a[a.MEDIUM=4]="MEDIUM",a[a.HIGH=8]="HIGH",a))(uT||{}),Z3=(a=>(a.CLAMP="clamp-to-edge",a.REPEAT="repeat",a.MIRRORED_REPEAT="mirror-repeat",a))(Z3||{}),pS=new Proxy(Z3,{get(a,e){return a[e]}}),Q3=(a=>(a.NEAREST="nearest",a.LINEAR="linear",a))(Q3||{}),gS=new Proxy(Q3,{get(a,e){return a[e]}});var bT=Object.defineProperty,H1=Object.getOwnPropertySymbols,pT=Object.prototype.hasOwnProperty,gT=Object.prototype.propertyIsEnumerable,z1=(a,e,t)=>e in a?bT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,V1=(a,e)=>{for(var t in e||(e={}))pT.call(e,t)&&z1(a,t,e[t]);if(H1)for(var t of H1(e))gT.call(e,t)&&z1(a,t,e[t]);return a},mT=class J3 extends le{constructor(e={}){e=V1(V1({},J3.defaultOptions),e),super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let t=0;t<e.length;t++){let i=e[t];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)}return e[0]}detach(...e){for(let t=0;t<e.length;t++){let i=e[t],r=this.renderLayerChildren.indexOf(i);r!==-1&&this.renderLayerChildren.splice(r,1),i.parentRenderLayer=null;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detachAll(){let e=this.renderLayerChildren;for(let t=0;t<e.length;t++)e[t].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,t,i){let r=this.renderLayerChildren,s=r.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let o=0;o<s;o++)r[o].parent||Qt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",r[o]),r[o].collectRenderables(e,t,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,t,i){if(!e)return;let r=this.renderLayerChildren;for(let s=0;s<r.length;s++)r[s]._getGlobalBoundsRecursive(!0,t,this)}};mT.defaultOptions={sortableChildren:!1,sortFunction:(a,e)=>a.zIndex-e.zIndex};function _T(a,e,t,i){let r=t.buffers[0],s=r.data,{verticesX:o,verticesY:d}=t,h=a/(o-1),l=e/(d-1),u=0,p=i[0],y=i[1],_=i[2],v=i[3],T=i[4],A=i[5],P=i[6],I=i[7],F=i[8];for(let D=0;D<s.length;D+=2){let H=u%o*h,N=(u/o|0)*l,j=p*H+y*N+_,re=v*H+T*N+A,de=P*H+I*N+F;s[D]=j/de,s[D+1]=re/de,u++}r.update()}function e5(a,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],d=e[5],h=e[6],l=e[7],u=e[8];return a[0]=o*u-d*l,a[1]=r*l-i*u,a[2]=i*d-r*o,a[3]=d*h-s*u,a[4]=t*u-r*h,a[5]=r*s-t*d,a[6]=s*l-o*h,a[7]=i*h-t*l,a[8]=t*o-i*s,a}function t5(a,e,t){let i=e[0],r=e[1],s=e[2],o=e[3],d=e[4],h=e[5],l=e[6],u=e[7],p=e[8],y=t[0],_=t[1],v=t[2],T=t[3],A=t[4],P=t[5],I=t[6],F=t[7],D=t[8];return a[0]=y*i+_*o+v*l,a[1]=y*r+_*d+v*u,a[2]=y*s+_*h+v*p,a[3]=T*i+A*o+P*l,a[4]=T*r+A*d+P*u,a[5]=T*s+A*h+P*p,a[6]=I*i+F*o+D*l,a[7]=I*r+F*d+D*u,a[8]=I*s+F*h+D*p,a}function yT(a,e,t){let i=t[0],r=t[1],s=t[2];return a[0]=e[0]*i+e[1]*r+e[2]*s,a[1]=e[3]*i+e[4]*r+e[5]*s,a[2]=e[6]*i+e[7]*r+e[8]*s,a}var xT=[0,0,0,0,0,0,0,0,0],vT=[0,0,0],Bs=[0,0,0];function W1(a,e,t,i,r,s,o,d,h){let l=xT;l[0]=e,l[1]=i,l[2]=s,l[3]=t,l[4]=r,l[5]=o,l[6]=1,l[7]=1,l[8]=1;let u=e5(a,l);Bs[0]=d,Bs[1]=h,Bs[2]=1;let p=yT(vT,u,Bs),y=a;return a[0]=p[0],a[1]=0,a[2]=0,a[3]=0,a[4]=p[1],a[5]=0,a[6]=0,a[7]=0,a[8]=p[2],t5(a,y,l)}var TT=[0,0,0,0,0,0,0,0,0],ST=[0,0,0,0,0,0,0,0,0];function wT(a,e,t,i,r,s,o,d,h,l,u,p,y,_,v,T,A){let P=W1(TT,e,t,s,o,l,u,_,v),I=W1(ST,i,r,d,h,p,y,T,A);return t5(a,e5(P,P),I)}var dl=class extends wp{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];let{width:t,height:i}=e;this.corners=[0,0,t,0,t,i,0,i]}setCorners(e,t,i,r,s,o,d,h){let l=this.corners;l[0]=e,l[1]=t,l[2]=i,l[3]=r,l[4]=s,l[5]=o,l[6]=d,l[7]=h,this.updateProjection()}updateProjection(){let{width:e,height:t}=this,i=this.corners,r=wT(this._projectionMatrix,0,0,i[0],i[1],e,0,i[2],i[3],e,t,i[4],i[5],0,t,i[6],i[7]);_T(e,t,this,r)}},AT=Object.defineProperty,ET=Object.defineProperties,PT=Object.getOwnPropertyDescriptors,Ro=Object.getOwnPropertySymbols,a5=Object.prototype.hasOwnProperty,i5=Object.prototype.propertyIsEnumerable,Y1=(a,e,t)=>e in a?AT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,vd=(a,e)=>{for(var t in e||(e={}))a5.call(e,t)&&Y1(a,t,e[t]);if(Ro)for(var t of Ro(e))i5.call(e,t)&&Y1(a,t,e[t]);return a},RT=(a,e)=>ET(a,PT(e)),MT=(a,e)=>{var t={};for(var i in a)a5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Ro)for(var i of Ro(a))e.indexOf(i)<0&&i5.call(a,i)&&(t[i]=a[i]);return t},CT=class r5 extends qa{constructor(e){e=vd(vd({},r5.defaultOptions),e);let t=e,{texture:i,verticesX:r,verticesY:s}=t,o=MT(t,["texture","verticesX","verticesY"]),d=new dl(Rr({width:i.width,height:i.height,verticesX:r,verticesY:s}));super(Rr(RT(vd({},o),{geometry:d}))),this._texture=i,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){let e=this.geometry;if(!e)return;let{width:t,height:i}=this.texture;(e.width!==t||e.height!==i)&&(e.width=t,e.height=i,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,t,i,r,s,o,d,h){this.geometry.setCorners(e,t,i,r,s,o,d,h)}};CT.defaultOptions={texture:K.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};var OT=Object.defineProperty,$1=Object.getOwnPropertySymbols,IT=Object.prototype.hasOwnProperty,GT=Object.prototype.propertyIsEnumerable,K1=(a,e,t)=>e in a?OT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,q1=(a,e)=>{for(var t in e||(e={}))IT.call(e,t)&&K1(a,t,e[t]);if($1)for(var t of $1(e))GT.call(e,t)&&K1(a,t,e[t]);return a},s5=class n5 extends Kr{constructor(e){let{width:t,points:i,textureScale:r}=q1(q1({},n5.defaultOptions),e);super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=t,this.textureScale=r,this._build()}get width(){return this._width}_build(){let e=this.points;if(!e)return;let t=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),r=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),r.data=new Uint16Array((e.length-1)*6));let s=i.data,o=r.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let d=0,h=e[0],l=this._width*this.textureScale,u=e.length;for(let y=0;y<u;y++){let _=y*4;if(this.textureScale>0){let v=h.x-e[y].x,T=h.y-e[y].y,A=Math.sqrt(v*v+T*T);h=e[y],d+=A/l}else d=y/(u-1);s[_]=d,s[_+1]=0,s[_+2]=d,s[_+3]=1}let p=0;for(let y=0;y<u-1;y++){let _=y*2;o[p++]=_,o[p++]=_+1,o[p++]=_+2,o[p++]=_+2,o[p++]=_+1,o[p++]=_+3}i.update(),r.update(),this.updateVertices()}updateVertices(){let e=this.points;if(e.length<1)return;let t=e[0],i,r=0,s=0,o=this.buffers[0].data,d=e.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<d;l++){let u=e[l],p=l*4;l<e.length-1?i=e[l+1]:i=u,s=-(i.x-t.x),r=i.y-t.y;let y=(1-l/(d-1))*10;y>1&&(y=1);let _=Math.sqrt(r*r+s*s);_<1e-6?(r=0,s=0):(r/=_,s/=_,r*=h,s*=h),o[p]=u.x+r,o[p+1]=u.y+s,o[p+2]=u.x-r,o[p+3]=u.y-s,t=u}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};s5.defaultOptions={width:200,points:[],textureScale:0};var BT=s5,FT=Object.defineProperty,DT=Object.defineProperties,kT=Object.getOwnPropertyDescriptors,Mo=Object.getOwnPropertySymbols,o5=Object.prototype.hasOwnProperty,c5=Object.prototype.propertyIsEnumerable,Z1=(a,e,t)=>e in a?FT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Td=(a,e)=>{for(var t in e||(e={}))o5.call(e,t)&&Z1(a,t,e[t]);if(Mo)for(var t of Mo(e))c5.call(e,t)&&Z1(a,t,e[t]);return a},UT=(a,e)=>DT(a,kT(e)),LT=(a,e)=>{var t={};for(var i in a)o5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Mo)for(var i of Mo(a))e.indexOf(i)<0&&c5.call(a,i)&&(t[i]=a[i]);return t},NT=class d5 extends qa{constructor(e){let t=Td(Td({},d5.defaultOptions),e),{texture:i,points:r,textureScale:s}=t,o=LT(t,["texture","points","textureScale"]),d=new BT(Rr({width:i.height,points:r,textureScale:s}));s>0&&(i.source.style.addressMode="repeat"),super(Rr(UT(Td({},o),{texture:i,geometry:d}))),this.autoUpdate=!0,this.onRender=this._render}_render(){let e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};NT.defaultOptions={textureScale:0};var jT=Object.defineProperty,Q1=Object.getOwnPropertySymbols,XT=Object.prototype.hasOwnProperty,HT=Object.prototype.propertyIsEnumerable,J1=(a,e,t)=>e in a?jT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,e2=(a,e)=>{for(var t in e||(e={}))XT.call(e,t)&&J1(a,t,e[t]);if(Q1)for(var t of Q1(e))HT.call(e,t)&&J1(a,t,e[t]);return a},zT=class hl{constructor(e){if(e instanceof K)this.texture=e,Id(this,hl.defaultOptions,{});else{let t=e2(e2({},hl.defaultOptions),e);Id(this,t,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return yr(this._tint)}set tint(e){typeof e=="number"?this._tint=e:this._tint=Ee.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};zT.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};var t2={vertex:{attributeName:"aVertex",format:"float32x2",code:`
const texture = p.texture;
const sx = p.scaleX;
const sy = p.scaleY;
const ax = p.anchorX;
const ay = p.anchorY;
const trim = texture.trim;
const orig = texture.orig;

if (trim)
{
w1 = trim.x - (ax * orig.width);
w0 = w1 + trim.width;

h1 = trim.y - (ay * orig.height);
h0 = h1 + trim.height;
}
else
{
w1 = -ax * (orig.width);
w0 = w1 + orig.width;

h1 = -ay * (orig.height);
h0 = h1 + orig.height;
}

f32v[offset] = w1 * sx;
f32v[offset + 1] = h1 * sy;

f32v[offset + stride] = w0 * sx;
f32v[offset + stride + 1] = h1 * sy;

f32v[offset + (stride * 2)] = w0 * sx;
f32v[offset + (stride * 2) + 1] = h0 * sy;

f32v[offset + (stride * 3)] = w1 * sx;
f32v[offset + (stride * 3) + 1] = h0 * sy;
`,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
var x = p.x;
var y = p.y;

f32v[offset] = x;
f32v[offset + 1] = y;

f32v[offset + stride] = x;
f32v[offset + stride + 1] = y;

f32v[offset + (stride * 2)] = x;
f32v[offset + (stride * 2) + 1] = y;

f32v[offset + (stride * 3)] = x;
f32v[offset + (stride * 3) + 1] = y;
`,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
var rotation = p.rotation;

f32v[offset] = rotation;
f32v[offset + stride] = rotation;
f32v[offset + (stride * 2)] = rotation;
f32v[offset + (stride * 3)] = rotation;
`,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
var uvs = p.texture.uvs;

f32v[offset] = uvs.x0;
f32v[offset + 1] = uvs.y0;

f32v[offset + stride] = uvs.x1;
f32v[offset + stride + 1] = uvs.y1;

f32v[offset + (stride * 2)] = uvs.x2;
f32v[offset + (stride * 2) + 1] = uvs.y2;

f32v[offset + (stride * 3)] = uvs.x3;
f32v[offset + (stride * 3) + 1] = uvs.y3;
`,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
const c = p.color;

u32v[offset] = c;
u32v[offset + stride] = c;
u32v[offset + (stride * 2)] = c;
u32v[offset + (stride * 3)] = c;
`,dynamic:!1}},VT=Object.defineProperty,WT=Object.defineProperties,YT=Object.getOwnPropertyDescriptors,Co=Object.getOwnPropertySymbols,h5=Object.prototype.hasOwnProperty,l5=Object.prototype.propertyIsEnumerable,a2=(a,e,t)=>e in a?VT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,gi=(a,e)=>{for(var t in e||(e={}))h5.call(e,t)&&a2(a,t,e[t]);if(Co)for(var t of Co(e))l5.call(e,t)&&a2(a,t,e[t]);return a},i2=(a,e)=>WT(a,YT(e)),$T=(a,e)=>{var t={};for(var i in a)h5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Co)for(var i of Co(a))e.indexOf(i)<0&&l5.call(a,i)&&(t[i]=a[i]);return t},KT=new qe(0,0,0,0),qT=class ll extends ha{constructor(e={}){e=i2(gi(gi({},ll.defaultOptions),e),{dynamicProperties:gi(gi({},ll.defaultOptions.dynamicProperties),e?.dynamicProperties)});let t=e,{dynamicProperties:i,shader:r,roundPixels:s,texture:o,particles:d}=t,h=$T(t,["dynamicProperties","shader","roundPixels","texture","particles"]);super(gi({label:"ParticleContainer"},h)),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=o||null,this.shader=r,this._properties={};for(let l in t2){let u=t2[l],p=i[l];this._properties[l]=i2(gi({},u),{dynamic:p})}this.allowChildren=!0,this.roundPixels=s??!1,this.particleChildren=d??[]}addParticle(...e){for(let t=0;t<e.length;t++)this.particleChildren.push(e[t]);return this.onViewUpdate(),e[0]}removeParticle(...e){let t=!1;for(let i=0;i<e.length;i++){let r=this.particleChildren.indexOf(e[i]);r>-1&&(this.particleChildren.splice(r,1),t=!0)}return t&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return KT}updateBounds(){}destroy(e=!1){var t,i,r;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let s=typeof e=="boolean"?e:e?.textureSource,o=(i=this.texture)!=null?i:(t=this.particleChildren[0])==null?void 0:t.texture;o&&o.destroy(s)}this.texture=null,(r=this.shader)==null||r.destroy()}removeParticles(e,t){let i=this.particleChildren.splice(e,t);return this.onViewUpdate(),i}removeParticleAt(e){let t=this.particleChildren.splice(e,1);return this.onViewUpdate(),t[0]}addParticleAt(e,t){return this.particleChildren.splice(t,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,t){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,t){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,t){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,t){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,t){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};qT.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};var ZT=Object.defineProperty,Oo=Object.getOwnPropertySymbols,f5=Object.prototype.hasOwnProperty,u5=Object.prototype.propertyIsEnumerable,r2=(a,e,t)=>e in a?ZT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,QT=(a,e)=>{for(var t in e||(e={}))f5.call(e,t)&&r2(a,t,e[t]);if(Oo)for(var t of Oo(e))u5.call(e,t)&&r2(a,t,e[t]);return a},JT=(a,e)=>{var t={};for(var i in a)f5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Oo)for(var i of Oo(a))e.indexOf(i)<0&&u5.call(a,i)&&(t[i]=a[i]);return t},eS=class b5 extends ha{constructor(e){var t,i,r,s,o,d,h,l,u,p;e instanceof K&&(e={texture:e});let y=e,{width:_,height:v,leftWidth:T,rightWidth:A,topHeight:P,bottomHeight:I,texture:F,roundPixels:D}=y,H=JT(y,["width","height","leftWidth","rightWidth","topHeight","bottomHeight","texture","roundPixels"]);super(QT({label:"NineSliceSprite"},H)),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=(i=T??((t=F?.defaultBorders)==null?void 0:t.left))!=null?i:Va.defaultOptions.leftWidth,this._topHeight=(s=P??((r=F?.defaultBorders)==null?void 0:r.top))!=null?s:Va.defaultOptions.topHeight,this._rightWidth=(d=A??((o=F?.defaultBorders)==null?void 0:o.right))!=null?d:Va.defaultOptions.rightWidth,this._bottomHeight=(l=I??((h=F?.defaultBorders)==null?void 0:h.bottom))!=null?l:Va.defaultOptions.bottomHeight,this.bounds.maxX=this._width=(u=_??F.width)!=null?u:Va.defaultOptions.width,this.bounds.maxY=this._height=(p=v??F.height)!=null?p:Va.defaultOptions.height,this.allowChildren=!1,this.texture=F??b5.defaultOptions.texture,this.roundPixels=D??!1}updateBounds(){}get width(){return this._width}set width(e){this.bounds.maxX=this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this.bounds.maxY=this._height=e,this.onViewUpdate()}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this.bounds.maxX=this._width=e,this.bounds.maxY=this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};eS.defaultOptions={texture:K.EMPTY};function Xo(a){return!((1080<a||a<400)&&a!=0)}function Gi(a){a=encodeURIComponent(a);let e=Math.floor(256*Math.random()),t=e.toString(16).padStart(2,"0");for(let i=0;i<a.length;++i)e=3793+4513*e&255,t+=(a.charCodeAt(i)^e).toString(16).padStart(2,"0");return t}function n(a){let e="",t=parseInt(a.substring(0,2),16);for(let r=2;r<a.length;r+=2){var i=parseInt(a.substring(r,r+2),16);t=3793+4513*t&255,e+=String.fromCharCode(i^t)}return decodeURIComponent(e)}function p5(a){return a||""}function Bi(a){return new Function(n("8cafab2be513bcc6a6d5").concat(a,n("d2c6a7a7")))()}function Jr(a,e){return a&&typeof a=="object"&&e&&typeof e=="object"?(Object.keys(e).forEach(t=>{var i=a[t],r=e[t];Array.isArray(i)&&Array.isArray(r)?a[t]=i.concat(r):a[t]=i&&typeof i=="object"&&r&&typeof r=="object"?Jr(Object.assign({},i),r):r}),a):e}function g5(a){var e=new Uint16Array(a.length);for(let t=0;t<a.length;++t)e[t]=a.charCodeAt(t);return e}function Ml(a){return 8<=a.length&&a[a.length-7]===65534?a.slice(-6):null}function Se(){window.localStorage.setItem(n("c2a4efbca830d73aa5b5eab4a9"),JSON.stringify(L))}function ua(a){C.Ph&&(a=Math.max(L["1x"],Math.min(a,50)),C.fc=a,ai.Xi((C.fc-.25)/4),C.Me.text=+a[n("9fa4ce544aac4072")](2)+n("fbd4"))}var m5,vt,Jt,Cl,_5,Ol,y5,Zr,Il,E,x5,R,b,G,v5,C,L,De,Oa,Mt,Ho,T5,Gl,S5,Qr,Ja,Bl,Ct,zo,Fi,Di,w5,ei,ti,ai,Ia,z,A5,ki,Ui,et,ba,Ga,Ze,J;v5=class extends le{constructor(a){super(),this.lf=Object.assign({gq:{x:1,y:1},$p:{x:1,y:1}},a),this.initialize()}initialize(){this.ba=this.lf.ba,this.ga=this.lf.ga,"anchor"in this.ba&&this.ba.anchor.set(.5),"anchor"in this.ga&&this.ga.anchor.set(.5),this.addChild(this.ba),this.addChild(this.ga),this.Tn()}dg(){this.Vo=this.width/2.5,this.Eo=this.ga.width/2}Tn(){this.Bk=function(){this.lf.fq?.()},this.To=function(){this.ga.position.set(0,0),this.lf.cq?.()},this.Uo=function(a){a=(t=this[n("189d3527730e3f83")](a)).x;var e=t.y,t=Math.min(Math.sqrt(a*a+e*e),this.Vo+this.Eo/2);a=Math.atan2(e,a),this.ga.position.set(t*Math.cos(a),t*Math.sin(a)),this.lf.So?.({angle:a,Vj:t})}}},C={k:n("be27f425b2a0a1e68772ba1fefe9cabcbe2fbe16bd91f984a202f300b48cb28eb102"),nn:n("7e783362a7a005b0b4516d2bccfa3ceda0683f53ffc220c0fd4e364eb4c833c0bb1d2650d2da4187e0401b1c98fd498ee85e5572f6"),Xd:null,ik:0,Zl:!1,Ph:!1,fc:1,bd:[],Vh:[],Mi:[],Xf:0,Uh:0,pe:!1,Fe:!1,Me:0,Re:0,fg:0,Ne:!1,sh:[],ag:!1,Fh:!0,ua:0,cg:!1,Ld:null,al:0,kc:{},Fj:0,qj:0,Fk:0,Wp:!1,Id:{},Xh:()=>{}},L={"1a":0,"1b":0,"1c":0,"1d":10,"1e":0,"1f":0,"1g":0,"1h":!0,"1i":.25,"1j":0,"1k":!0,"1l":!0,"1m":!0,"1n":!1,"1o":0,"1p":1,"1q":1,"1r":238,"1s":!0,"1t":0,"1u":0,"1v":0,"1w":24,"1x":.25,"1y":0,"1z":1,"1aa":0,"1ab":0,"1ac":0,"1ad":0},De={},Oa={[n("687dcfdd0dc8c24b")]:n("feaaf2d76b7ea57263e4edab4c79ab307efea4d57751ba0866c8af9b376a8e6850eecec14c54"),[n("d59527e93aaf")]:C.k+n("5d6bed56912701780c35c22aaf33067b486ca942963d420a050890"),[n("53572527b46dfc786b3e")]:C.k+n("ae1a4207c2b616a9df245d7bfca211aa9b7dc633a58cb6fbb639ef"),[n("33a65953d2")]:C.k+n("2e9ac287423696295fa4ddfb7c22912a1bfd46b3250c377b36b96f"),[n("d637f107b1")]:C.k+n("2e9ac287423696295fa4ddfb7c22912a1bfd46b3250c307b36b96f"),[n("8d3c632172e9")]:C.k+n("9ff5935453a1477acebb8c286db540798ad2f75107bb1b56d98f"),[n("e9182c395f6ede")]:C.k+n("daceaeabae1ac21d8b9081c7a01ec51ecfc9ea8eb151c0ef95"),[n("2271a3101487da")]:C.k+n("cd9b7dc621b7b1e8bca572ba1fa3b6ebf8fc19e3508dcde48bb1"),[n("8b7eea5b3d7022")]:C.k+n("039137b0f7cdeb9662df28ccc9a9fc6536f65375a597b77a75ab"),[n("ebdeaafb5d9045")]:C.k+n("acd8dc39c0f4906fdd66d3b5fee0976c993fb8fcf3ce2c63aa72"),[n("2f027687815480")]:C.k+n("5c88ac691044c0df0dd683052e50c7dc498fe84c451e9cb31aa2"),[n("20b32556164550")]:C.k+n("144064a1689c3807750e7bdd66980f14014720841ea6440b421a"),[n("19c8dc69afbe28")]:C.k+n("9ff5935453a1477acebb8c286db540798ad2f75104bb1b56d98f"),[n("3a09bb680cff38")]:C.k+n("aa9e5efbde4a122ddba051f7f02e152e9ff93abe8610ae21acb4"),[n("99485ce92f3ea6")]:C.k+n("34a04441487c18e755ee5b3d0678eff461a7c0647146a4eb22fa"),[n("34c731220a394bbb")]:C.k+n("66d21abf1a0e4e11079c153334ea59e253357e6b1de95ba04e3d6e61ecf4"),[n("780bfdee4efd8f7e")]:C.k+n("a85cd8bddc888c13d9e2d731f26c9be09dbbbc69db6f99a2f0a22c63aa72"),[n("39e8fc498f9e0e42")]:C.k+n("86327a5ffaee2ef1e77c7513d4ca39c2b3151e4bfdc93b80ae1b4e41ccd4"),[n("801385f6b6e5f764")]:C.k+n("51e7e1c2a5b335e430a9febe9ba732f744e0a5f682b400b559efc5ec83b9"),[n("3a09bb680cff31e5")]:C.k+n("a7fd9b5c5ba94f72c6839410758d584192daff485c8e5a038ec3ef422d93"),[n("19c8dc69afbe2e65")]:C.k+n("8074f095f4a0a43be13aefe9cab4a338b5539481f387b14aa95df49bf28a"),[n("ab1eeabb1d500094")]:C.k+n("6256163316824a950318094f28965d6657b172e711655f244bbe12fd1068"),[n("ef62b64741144451")]:C.k+n("7ce88c09f024a0bfedb6e365ce30a7bca9ef883df703b5cea5d3f817f60e"),[n("d74a9e6f693c6c76")]:C.k+n("cc383cd9a0d4704fbd4633959ec0774cf91f58cd87d3451ed50208c786de"),[n("f0837566c67507fe")]:C.k+n("8fe5a34463b1776afeabbc385da57069bae2e77044b6423b96e0876a45bb"),[n("6d1ca805c3524114")]:C.k+n("7e2a7257f2e626f9ef746d2bccf221faab2d1643f5c13388a4177659f4cc"),[n("142711c22ad9685a")]:C.k+n("96026a6feade3ec1f74c4503e4da09d283052e5bcdd90b909c0d5e31dca4"),[n("586bdd8e6e9dac1d")]:C.k+n("86327a5ffaee2ef1e77c7513d4ca39c2b3151e4bfdc93b80ac1c4e41ccd4"),[n("7b6e3a4bcd003341")]:C.k+n("f70dcb2c0b591f0296532440c55de811220a4f18ec5eea533d743ff2fd23"),[n("6190a4b1d7e655ac")]:C.k+n("5246262326927a853308395f18864d964741621701954fd4584d020d0098"),[n("2efdb7e40073c670")]:C.k+n("baee4e8bce3ae23dabb0a1e7803ee53eefe9cabfa93df74ce0d4ba95b800"),[n("bb2efa8b0d407384")]:C.k+n("4efa22a7221676093f843ddb1c02710a7bdd66850f5d4e0501"),[n("d58410ad6bfae9bb")]:C.k+n("1523a58ee97f79a0746dbae2e77b4eb30024e1acc42805b65d79"),[n("9e6d27149083568d")]:C.k+n("46f23a9f3a2e6e3127bc35d3140a790273d55e8b3d097b5467c157940003"),[n("89b84c993fcebdf9")]:C.k+n("fdcb4df6f18761d86c95a28acf9366db28ccc9a2f63b2aea6568f0"),[n("acbfa95a82b1c133")]:C.k+n("5c88ac691044c0df0dd683052e50c7dc498fe85d177082f35ab5d820")},Mt={[n("6075c7d505c0ca43")]:n("5fb5539493e187ba0efb4ce8adfd98ba06cf54d0b5cc86c81ad84a"),[n("b8d9937eca")]:n("f14741620513954490095e1e3b0f8a54681da606c3066e4d7f54e64cbe"),[n("6fe1168e92c994c34598118b9fc5d8dc4fdff89c62")]:n("44b0b451386ce8f725feab2d1640e7c73dcab3151e48fdc73dc0ff020850c6da49dadf590917c7cb5f"),[n("bfa3a45e2299")]:n("0c787c996094300f7d0673d55e882f0f75027bdd6682071f4518489a58ca"),[n("5cecf9430148c3d20fc6c7594d0b9af415dcc0521138d3af1da8")]:n("c11771b23543a594a0596ece0b5fba64b82d76361327b064b8333a6f3c25ac718f7c0c7302"),[n("21c5e218e0dd026a19d2ea10e2")]:n("6d7bdd66811711481c05d21abf0b0e481401da024705e26be41a66536614ee12e00e3c"),[n("b8cbb358f528ccbf99de49")]:n("6c989c790034d0af1da693753e28cfaf15a29b7dc633aba0edaca93ca634bae8"),[n("8b7dd82b5a15")]:n("1c486ca95084001f4d1643c56e981f1f45124bcd766007f61ae80634"),[n("0130ca64a044377a402aae0ebd3c4610")]:n("b10701a24553d584d0491ede7b4fca94a85d66c60354ae88ab533b9e244ee16da171"),[n("18ad1f2d53217bdd10b62b27")]:n("9dab2d1651e7c138ccf5026a6ffbde38c4f10a5277c4d602daca50014d84d61c8e"),[n("72c461c2234b714e2f")]:n("1d2bad96d16741b84c7582eaef7b5eb844718ad2f7454683404ade8fcc04569c0e"),[n("79a1b2e1d8dc4ff1cdb341fd49a3d2")]:n("5004a0e524d0f44b314abf991acceb4b095e878122decf5a0955cbd905d1c74d5e2cc2f0"),[n("b7a5fc6f")]:n("786c888d0cb8dc23e932e7e1c2b4b333e136efe9cab0ab3abe0ca2d0"),[n("154bde91d85c4d")]:n("1d2bad96d16741b84c7582eaef7b5eb844718ad2f74f5a9d54509985c919"),[n("3ba17261f0")]:n("9b69afc86f2543feca3780a461395cfec23388ac690d5ecd9d09c595"),[n("11d1d608d4cb42063cb8ab0dd8c2461b74df")]:n("c43034d1b8ec6877a57e2bad96c06747bd4a33959eda7f47bd406bce8cd45b58915808da988a"),[n("5b4108059a5dac172f315766a64ca51b32553e")]:n("a29656f3d6420a55c3d8498fe85e0525dbac51f7f02a0d22dfa611a8d261ed21f1"),[n("0ede91e65564")]:n("bb498fe84f0523deaa17e08401193cdea213e88c09e130a5b4aab8b664"),[n("b58373511c928a49f9971a480097f144e0f27f5d0b89ee38f59b0eb87486eaa1ed8772cc60efe3b8f8fc6fb525eac6d5d2f323a14ce2dfb9a9e74a9845c7b79dd0de408d4bdadee8c4cb4783a4b63a913db7a2fcb0df338d28ccbfe5d53a36855123d3f0bc4b2ce95937bae8953767ed002e94fded220ee56b37")]:n("c672ba1fbaaeeeb1a73cb5539482e181bf08bd5b9c86f8c3b31f93"),[n("ef62b8383a014756bc61b44f491c3c22be72483eca66")]:n("ae1a4207c2b616a9df245d7bfcaa09a9d720a56384b8a196f272ca68a7bae0bcac7ad355f7a1a589f324ac4c98daeec3b31f93"),[n("8e4c156fb79164eed9690d7ad7ea799fae7c2f7fe7e1")]:n("0ddbbd86e17771a87c65b2fadf6b6ea87461bae2e76148bb4b63d4b5c83446ac1e"),[n("2557ef95ec4e0eee1d51e9a6f00701d47767e4")]:n("f460048188bc5827952e1bfd46b037376d3a63e54eb82236692960b260d2"),[n("1f1864d3e707edd9687d1baaf810e2c9")]:n("82b676d3f6622a75e3f869afc87e2545fbcc7197d04f2b1bb4c62c9e"),[n("ec7863f0bf821771c40c6f8eb5806902b2")]:n("5a4e2e2b2e9a429d0b10014720965d9d0314094f289a5d6e11ad59f545"),[n("31e5f62cfd83055874ebe221e8e01a4271ff962ee084772e0ce88e3f88f302")]:n("05d3b5fef98f69d0649daaf2d76366a07c69b2fadf677ab5707bf1fecc6210")},Ho={[n("077b7c08f853ff5b3d7020")]:n("a9725fa85d6d8ad3f00701a21014f18cdc464f8d4b1a9197a8462f952718ae97ec080d8a7a1bfd46b03120612135f23a9f292e7e2e21ad63c4602577102494779b055b2d433d9a52"),[n("2555d2aada7559f91f2e9d")]:n("af88c55643971015f6cd8b6c1ede7b4ada9cb55335c06b51ae8ca55b29d22451ea32973464216700b67baa2f2f7f787c99739420107b1725c22aaf391e6e1e319d7fc15a5d470014")},T5=new Audio(C.k+n("3266c60346b29aa55328d97f78ae75b52b3c216700bb69ac2d3322303eec")),Gl=[10001,10002,10003,10004,10005,10006,10007,10008,10009,10010,10011,10012,10013,10014,10015,10017,140,142,147,23,24,25],S5=[32,33,34,35,313,314,202],Qr={},L["1g"]=65280,L["1v"]=65280,L["1ad"]=65280,(Di=window.localStorage.getItem(n("d610f300b48cc38eb101c61885")))&&(Di=JSON.parse(Di))["1r"]===238&&Object.assign(L,Di),L["1t"]&&(Oa[n("6a38590e1a905d")]=L["1t"]),Mt[L["1c"]]||(L["1c"]=Object.keys(Mt)[0],Se()),Oa[L["1b"]]||(L["1b"]=Object.keys(Mt)[0],Se()),Ct=Ja=null,zo=Bl=-1,Fi=class extends le{constructor(a){super(a),this[n("dc4868ca8ec56f5c8050")]="static",this.on("pointerdown",this.Hn)}Hn(a){(a.shiftKey||C.cg)&&(Bl=a.pointerId,Ja=this)}},Di=class extends Fi{constructor(a){super(a),a=new We().rect(0,0,4,200).fill({color:16777215}),this.$=new We().circle(0,0,8).fill({color:16777215}),this.$[n("39cfcd09d3da721f25d7")]="static",this.$[n("043633a57bb638")]="pointer",this.$[n("9adb33def75b095ecc")][n("7831")]=2,this.$.on("pointerdown",this.Al),this.addChild(a),this.addChild(this.$),this[n("4b94244a8e72b423")]=new Pe(0,0,10,200)}Al(a){Ct=this,zo=a.pointerId}Xi(a,e){e&&ua(.25+3.75*a),this.$.y=Math.max(this.$.height/2,Math.min((1-a)*this.height,this.height-this.$.height/2))}},(ei=new(w5=class extends Fi{constructor(a){super(a),(a=new je({[n("84a1a32ffc")]:a.Yf,[n("f8ba4e329028")]:{[n("2570c8b6dd5c4ab14472d6")]:n("4d6e9b53b02c20"),[n("2a5d83535aec99bb57")]:12,[n("77ce108697")]:16777215}})).position.y=5,a.position.x=100,a.anchor.x=.5,this.Yf=a,this.addChild(a)}dg(a){for(;this.children[1];)this.removeChild(this.children[1]);let e=this.Yf.height+15;for(var[t,i]of a.entries())(a=new je({[n("bf84a44a37")]:(t+1).toString()+". "+i[n("d609f10ab1")].substring(0,20),[n("e280d08c8a12")]:{[n("172e76e4ef0afce3763c58")]:n("bfa09561229a36"),[n("471e26d4bf2fa4c42a")]:12,[n("d5a03ee435")]:16777215}})).position.y=e,a.position.x=5,t=new je({[n("e287c18d92")]:i[n("4cfee16a3e55")],[n("72f040fc1a62")]:{[n("32259b2b428199a4532785")]:n("eaabf8ae8f11c3"),[n("23b24a78d38bc0604e")]:12,[n("980fb387f0")]:16777215}}),t.position.x=195,t.position.y=e,t.anchor.x=1,e=e+a.height+5+5,this.addChild(a),this.addChild(t);this[n("455eae8c88482e9d")]=new Pe(0,0,this.width,this.height)}})({Yf:n("e47d75")})).position.x=50,ei.position.y=150,(ti=new w5({Yf:n("c5e4023b06e88f")})).position.x=50,ti.position.y=350,ai=new Di,Za&&(ei.scale.set(.8,.8),ti.scale.set(.8,.8)),Ia=Bi(n("8aec25f3ea7027")),z=Bi(n("c0f56d70b17863f9bc")),A5=Bi(n("c15c22822c51a68ca648")),z[n("df619437116d36338b7d8a2e046e")](n("13ac616bfb"))[n("ddbd3ae420a697e68cb412ec0c")](n("3cf90c6e2e62eef230f0"),n("df7e8e")),z.head.insertAdjacentHTML(n("4231613329a56dbc243f"),p5('<link rel="stylesheet" href="'+C.k+'/public/css/new.css" />')),ki=null,Ui=[],z.getElementById("social-buttons").remove(),et=new We,new Pt({fontFamily:n("fbfca9bd1edef2"),fontSize:12,fill:16777215}),ba=new Fi,Ga=new we,Ze=new we,J=null,G={},(b={}).oc=Bi(n("2d69c68ed54d44")),b.d=b.oc[n("6693479a1f1649131a")],G.e=function(){return(L["1n"]?1:b.oc[n("7b48181896536422ea4ce01a55597d13e4")])||1},b.oc.addEventListener(n("241909964c"),async function(){var a,e,t,i,r,s,o,d,h,l,u,p,y,_,v,T,A,P,I,F,D,H,N,j,re,de,Z,q,se,te,Ie,Tt,ne,he,Li,Ae,Ot,pa,ea,ga,Ni,Vt,ma,_a,Ba,ya,xa,Fa,It,Gt,Bt,Ft,ji,ii,ri,Vo,Wo,Yo,$o,Fl,Dl,Ko,qo,Xe;function Xi(c){this.yd=c,this.ta=0}function Zo(c){this.yd=c,this.ta=0}function Da(c,f,g,m,x,S,w,M,O,k){this.Bb=c,this.Aj=f,this[n("0126e64cf103755d")]=null,this.Cj=!1,this.nb=g,this.ob=m,this.gh=x,this.ih=S,this.kl=w||(O||x)/2,this.In=M||(k||S)/2,this.Kj=O||x,this.Oj=k||S,this.Yn=.5-(this.kl-.5*this.Kj)/this.gh,this.db=.5-(this.In-.5*this.Oj)/this.ih,this.jo=this.gh/this.Kj,this.po=this.ih/this.Oj}function ae(c,f,g,m,x,S,w,M,O,k,U,X,V,Y,W,ce,oe,Re){this.ng=c,this.Ih=f,this.uk=g,this.Po=m,this.Ck=x,this.Zo=S,this.Hk=w,this.fp=M,this.Pk=O,this.np=k,this.Wk=U,this.xp=X,this.bl=V,this.Dp=Y,this.il=W,this.ql=ce,this.si=oe,this.El=Re}function ta(){}function si(c){this.wf=c}function Qo(){this.cd=[]}function kl(c,f){this.bj=c,this.Ff=f,this.Wg=this.Ug=0}function va(){this.ma=new le,this.ma.sortableChildren=!0,this.P=new h,this.P.zIndex=1.6,this.Y=0,this.o=Array(797),this.o[0]=this.Gj(0,new b.mc,new b.mc);for(var c=1;c<797;c++)this.o[c]=this.Gj(c,new b.mc,new b.mc);this.Lj=this.Jj=this.oi=0}function Hi(c,f){this.O=c,this.O.Ra(!1),this.id=f,this.id.Ra(!1)}function es(c){this.va=c,this.Ba=!1,this.Nf=1}function Jo(c,f){this.hb=c,this.Jn=f}function _e(c){++_e.Zn,this.Tj=c,this.gk=this.ek=this.ck=this.ak=this.Zj=null,this.Sb=this.lk=this.qd=!1}function Ul(){}function St(){}function ec(){this.rd=b.Nc.fk,this.rb=0,this.Rc=500,this.og=4e3,this.Nh=7e3}function Ge(c){this.l=c,this.Ag=[],this.jl=0}function zi(c){this.yi=c}function ni(c,f){this.S=c,this.Oi=80<=c.oa,this.Fd=this.Ed=this.Jg=this.Hg=0,this.le=this.Oi?1:c.xd,this.$h=1,this.ei=!1,this.Og=this.Cf=0,this.Wa=1,this.Ym=6.283185307179586*Math.random(),this.He=new b.cn,this.He.Yd(E.l.K.rd,this.S.qi===b.ce.ff?null:E.B.V().Ef(this.S.qi),E.B.V().jn(this.S.oa)),f.ml(c.T,this.He)}function tc(){this.Xa=new y(new b.mc,new b.mc),this.Xa.id.L.Tp="add",this.Xa.id.L.zIndex=100,this.Xa.O.L.zIndex=500}function ac(c,f){this.O=c,this.id=f}function wt(){this.Ob=this.vb=this.Lb=this.Hb=this.Ka=0,this.lh=[]}function ic(c,f){for(var g=0;g<c.length;g++)if(parseInt(c[g][n("241c02")])===f)return g;return-1}function oi(){}function rc(){}function Dt(){}function sc(){this.Ac=[],this.$e=[]}function fe(){this.fi=[],this.ii=[],this.v=!1,this.Yc=_,this.M={}}function aa(){}function Vi(c,f,g){for(this.Ec=g,this.Ba=!1,this.ma=new le,this.ma.visible=!1,this.Bd=Array(c),c=0;c<this.Bd.length;c++)(g=new b.Gi(new Float32Array(3*f))).Hi(f),this.Bd[c]=g,this.ma[n("c47462f38bf16377a8")](g.jd());this.Gc=this.Fc=1,this.na()}function st(){}function Wi(c,f,g,m,x,S,w){(w===1&&C.bd.includes(S)||w===2&&C.Vh.includes(S)||w===3&&C.Mi.includes(S))&&(g=!1),this.af=c,this.Ko=f,this.cf=g,this.xk=m}function ts(){var c=new qt({[n("7cacca3bf238a0a6f0b0b5")]:{[n("56864e8c281f79150e805398161a4b1b")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5],[n("67f93dbf93df82b11dc4")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5]}}),f=new K;this.of=ht.from({[n("6fc71d")]:{[n("8aed29effa7a28")]:n("e7689b3f08751e37804ed450434c1c019f58dc584b4a11019e442441c111b537664c7d08e25ef80a6a6523b2e521f6b4327a29ebcd29effa7a2871fdd03dd1ff48360ca9e9799ddf4e1445d0da06c0d2524d0b9acd09de9c1a4271d39711bdf528173bdeee4f8f9b7fc124acbae2bab43aad6bfab6eda9fd7aa251a7b3e68abc02fb1db384f2a0bf1bd2189ad697b7c347e90c8492ca929c1295b3c26ed571c5a28ab98f5cd37f92eb94e3637db77369e5a5d46b6fbe7476bae3e33713955078cebec66846f91f2ec281c51116d60553e39ad844488a525cd2bda046319d3d13f4baec0a0a8a2c4cb669bf2576366530b26beb6f693c2b1aba68a23d0c660173d45acc6a2a6a02378b05c3521e451c08df01dc584b094a2cda004057b104a044371d3b4aae0ebd085b2569c1fc2be7e2327a29afa808b8bc2f3175f7db17caf9553c0ca9e9799fae0a52018781549094074d09eb9e5e8d8b0d406480f351f786311d2a89ee4efdc82af225a7abd4bab53efc30a5b5a9effe7aa325f7d1a493b304ab41bbbdf99faa0ad8218d80cd818f18c65cd8b889cfde4e9eb1db268747d3b7f9acc83b993fceaaf2a12721f47867e3fbbc382ba16b7ebae291371090002497adf96844b6487ddb89de4c7e854154de909c180bc6181c8f85965d31982162b599a7492d933f538261a5303a7c7074e722fc786b79093cbe7e92340c66081b866c9b3313395e1cca10b04741145054c70dcb5a5e1e4d09936f511df05df11f68562c48bb19be3a2a7221f4f627a1ae3f256ffabe7eada43a6211e4c626d1f35f0846e9c228c4f141491fdaca4187e5125a099a955c989c7c557382f25af59f624b0b9ffb3de8890b"),[n("750085499e071e4209")]:n("0d8efda5f26b60ad7a68b2faa96272ab757ebae291744fbb446282ebeb3f1b9d082eee96d0504a8d5b4192da895c5e8f0f0b8dc0b766268c0659a88aad1f78be680e8e75bf2b356b272bf23ae93c3e6f696bed2094110c780a24a86e8c28077d147bdc62d45232511b0f91478b075e1e4d1d9e5d711ee646b732220a390fdf59f50a7a3274a7a006b0b6563d77e3fd23efe33a6211e4c63797b315685ccece24d9eb5d0562c1d208d083042a1c9afa19d3c7591f33dfe646f5c0221b7b9ff94cb8ea2af825b7a1e19aa031fb3cbefebf9feb6fd144e2a2e28abf03bd5bea86fd84b0478954d0c381c2a4529838cfc99cd8dc4f95b3c226863580e2dbbddf398c799bf7b4e47076877a6af8babc382be92e4abae2916646ac5163d5bd9b5e03a9797bd794c45056c1076592da895c6f89456dd09fb35666c6751ce2caf94f1f99354aba72b41130653923f23ae96f694e787cef65b5371b60102482578f3c18791977ca13b34741145054c70dcb5a5e1e4d4bcf712440b311b746220a395fb90cfb1b6c7434b0a325f1ec623b6defff0ff2e2702204a0937196d2026a19eece24d9eb5d0572cddf0bc7830558138f895c8d800c5572f0e646f59375486c88fb59ff8e6ab010e7e1b4f0f467ad6bfafebeedb83af355f7d1a48aa002ea05bb92df82b200d254d0c381c6a2529a499c9ecfc9c60af3ee9e6cc64a80e2cae59b72927f99ede5a34136f62536b9f8b02f29fc372bade0d4514cb84a64e8aecc6847bd5430cec5826016d6050385d89c180bc90f1e9ac0801771c46004f7ddfb0a6ece7d59a35f973032631629bb67ab6f693c787d9b35d36202700f23946c8c3e287301319d05c35256163743c518961c1e5e110f86736e1eec46a045451d393bae0bc9")},[n("a650184c")]:{[n("29ecce2ed9fb57")]:{[n("52067a11249e4886330568")]:"vertmain",[n("af93de57418750")]:n("6cceda4d0522c6e646f5f12b172bdba729a3d729ef23afa0a1e7f672bf1befebcdf8fc6fb553e2c6a6d5f355a81c8a99f387bb0cd4188d9de9949205c101cfc8ed908f0b83f9c126874690b48aacc94e993fbdaaf0d02721f43034a7edab3a3efe2d7bc8bfd37e47805777c9abcf7559b1607fdb92d85a16d7744bd69c8a5208c90e6dd9c3f31770b1600484ddf97b6ece7d1bfd30f47063216776a25fb63837681e21b37f93130f640d37c22ba87f592c1b3b8c14d45130424654d21bbc4f496f585ebe153342a606b55335082c48bb49df1b7c2f7df7e72dfae8327b58afa97cebeb7c6204a1e03296a4026b6cbf991f88ae6e4506e69654f48307294adec919deda1a4271feac17a4da121620dca40ea0cd6ab261e7e4c6f0f616ad6bfafebeedeb6da044e0d3e1b1a406f61abc84ee80930ed4038b8b81c6a71ac90dd9839fd8dd3cd6b2c0268740d3b5fbacca4a993fceaaf2a12721f43034a7bdda6577a36f2bac91d77740e00025e4be9a280eef683b9da3941272c1071692da890f09dc181c8f85935d369a2113f4b9af0979d97f7dea30906764407076962de90b7e3c1c6beb2086200c61157ed731cc685b39596e8d499f061a4a124ec701dc584b5a1c1cda034207ed5de31975552c49ce19bf4e682c7ee0f228c0e87e2e76f8f63fb8bc2f7512d3866695d14b374bfbc709c3f7490f43cfc04186e41258788f8f5cdadc5005319af25de084775d7d8aa915a3da26ee36eae3adf0f467fe38b8febf9ebb31f907bd91f9c0e522bd5bea87f38ebf03f51f8b95cb878b048d4bdade9fbccb4d80cd9d60d569a3e9d1ef9579d17edbbc82b43252e12547e4bceb7f78b8383caf86c46057b15d59d2acd96f5ff91f2e8ad7f30703a5101487cd8b1a1ede0d0b8dc0e4067396305fab8ca054638c224da674b82d3d2d7074e778b63932783421b135d21346265520827bdd7f585f0b6ddd05c22756163643c769dc584b094f5eda023157b104a04237546619ea48e411616821abb676a5f0432d61c9f423efea3a6360b79164d3f3446a0ca9e83a9eac0a53748781279096764d0eee9e5fff8b0f3164828251f5f7624c79ccae0eb9db37a56183b5eaf0f467fe3cb8afe1bca731b844e2a2b1d7e642aa59ffd9acc8ec5f8545d29fcb968703c11684d39cd4cb4d80e0a466c67193ffe8e68962c86491e1e5a33236f75423a5f8ef6f78fe383ddcb6922006e76033959b8c2a6af91f2e8ad2810701d4101487cd8d1a57835e4fcb99ae5c6bc56c13f5c8a86e2e840e51a072b56761347075962deb7a2d693e7cfa23a23450264065a23ddb194e2c2c77ca12c14f56173043c518af0f09581816b0457502f640a044371d3e38ae0ebd5b3d7034b0a361a7b6327a29afab0db8bc2f7513a2866695b315685ffbd9799fae4216418781549095734d0b9adc00d2cc5e1c14dcaa12aac42a0b67cf9b0ea2d42ae325abbcea98a723fa30b2febeedeb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c3459853cfc99c9a8210d2e09e56da6c90e8cae48925c95a91fdacf55661a57b75f1a7eb6756ad697cf6a8842013f1155782ea993f19ec082c9fc5831216d6050385d89c180bc90f1e95d5f3022f9b2657abada7532d933f53bc2ea41621653b35b167ab27166d293cb668c46121315517c22ad97f592c486cdf05c35256143443c518dc584b094f5eda023104e246a04437577c0efb49f95b3c0134b0a312f0f4632d61c5ee38edfb6b7512d08664e4b317190ca89b799fae0a5201878154dad343184cde951cd2dd560428ddad51f786624b0d9ff94cbbdb2cb474f190e2e6f472bb1ce2b6faadeb6da04bf7d1a493b304ab4ce9a8fadeec4a9334ca92f2909403cd01ba94df949a16dfefd731f720c4b789a7ca22993fbdaaf2a1333df43c23a48abc3a5ae92f3ebae2913711e4002497b7dc6e5ba95930d9b4d45a708b5a54d3cd8b1a1edf790b8dc0a066268c0659a88aad1f78be680e8e25e10376366563e538fc786b296f7ead759527117a4064d7779c2e1b69197bdc62d45043014527d21fbd4f486e585ebe153133f040f703644c2c48bb69e317692f63efe061a7b6327f5bafab0db8bc2f7513a2866695b315685cd9c430c2ec601654d0df05cc8304291c988b1ad8cd0b5572f1a547f793743d6c888859fdff6ab261e7e1b4f0f467ad6bfaaed8b8b62be513b7b0f784ba02bd5a9bceaedda80ac343c7c0e793d5458d4aafde9ebecb4ff1a4c0339137c6a28ab9df398c78aaeab8e57761a15a60f1bbfc7e3eff5c2bade0d77740e60025e4be9a280eef683b9da3941272c1026292d8f80f0bad181a8f97b35d36846d04eeddfb0a6ec87d5ca66eb52b3d637d76fe2deb7a2d6d2f6bed209406066c1123957dcc685b395e1fca12c116165c0113854da6581f094e2d99033357b071a045451d393bae08bd197d2f64f2bb76bca325783cbeab2ef4e07b394ff58b658cb315685ffbd9799fae5a3350cfc308d0d4125a098f882d989c0f0320dfb318a0c4624b0b9ffb3de88a7fe723ada6f4fdf47ead6bfafeb8edac36fe05bb8df3cde44ebd5bea9dfd9ffb5ce3048c9ac29a941a8d4aafde9ecd9b11d9e79d71d976d3b588acc94a993fcedaaef8647cb67875b2fbdb2f2b8d383edef5952245a64471cabdc76e0eec6c78c1c5831255965441da89d04413c90d6f9ac2f11771c46004f7ddfb0a6ec87d52a063b0363a6b3b6ee721fc786b7a092ba7538e3d11704065a63ddb6a1d790e6cca13b20440165055b20dcb295e1c3c47da02315fa607c05335082c4ebb50e21d6e3478edfd6ca5af327a29fcfe2fa9ab2c1347a1917196d3026a19bf9c1e88ae6e4503929656858305581c988b00d8da1a4271c6a60cb1c3351d0ad5a713bf9b7cc174f0e3f2b0a563ad6a89bdbfefeb6cd544e0d3b1d69242aa59ae8ee499ab1dc522839ed499835fdd2d8f83d8889c1a95b3b126863583d4d9e48a67d97fdbbd83b43023b24163ef8bf66569a8383caffa842013a14b7fc1b7db7758f2584aca98c55741816645d684dc0f09dc181cfdd5f302369a2c50a88aa4496589195bb774a430364b3320a46dad637e3f1f6bef51c46053315766c22ad97f592c013b9b05c35212401f13845c9c0e384311018d153233a606b500625b3d5fb87feb4d3d6522c7b676a5a3240c3cb8ab38f8f66b2553f7e03bc9f9557d1baa81799fae1f4e028780269096764d0b9a9e5e8d8b0d406480f318a0c2624a79d5bd19bfd22ef912adbfeba7e364c97cf8ebfab8ad6bb5529185a7d7f354dd4ce8dbb9de9a4a92419496c7c1c344eb1fd9c989ceab57c5ef9b65db779bf496fcb964d0628cc0b6f4707fa56c28e5affb2f298f383cafe08f220af117268dfd9b2a5eb24478c092dc511d917649db87cb654d894f42de89ef5366c70713f7b9ec087bd97f0eea32e16761342723a37dab247e3e6d2fbb7a942117710115887486284e2e5d7bdd62d450434b030385449813384311018d153230a604c453307c2c49c9")},[n("916461a5726bf2a6ed")]:{[n("edbb01d4039ba3cb9c8803")]:"fragmain",[n("f75b961f094f18")]:n("6cceda4d0522c6e646f5f12b172bdba729a3d729ef23afa0a1e7f672bf1befebcdf8fc6fb553e2c6a6d5f355a81c8a99f387bb0cd4188d9de9949205c101cfc8ed908f0b83f9c126874690b48aacc94e993fbdaaf0d02721f43034a7edab3a3efe2d7bc8bfd37e47805777c9abcf7559b1607fdb92d85a16d7744bd69c8a5208c90e6dd9c3f31770b1600484ddf97b6ece7d1bfd30f47063216776a25fb63837681e21b37f93130f640d37c22ba87f592c1b3b8c14d45130424654d21bbc4f496f585ebe153342a606b55335082c48bb49df1b7c2f7df7e72dfae8327b58afa97cebeb7c6204a1e03296a4026b6cbf991f88ae6e4506e69654f48307294adec919deda1a4271feac17a4da121620dca40ea0cd6ab261e7e4c6f0f616ad6bfafebeedeb6da044e0d3e1b1a406f61abc84ee80930ed4038b8b81c6a71ac90dd9839fd8dd3cd6b2c0268740d3b5fbacca4a993fceaaf2a12721f43034a7bdda6577a36f2bac91d77740e00025e4be9a280eef683b9da3941272c1071692da890f09dc181c8f85935d369a2113f4b9af0979d97f7dea30906764407076962de90b7e3c1c6beb2086200c61157ed731cc685b39596e8d499f061a4a124ec701dc584b5a1c1cda034207ed5de31975552c49ce19bf4e682c7ee0f228c0e87e2e76f8f63fb8bc2f7512d3866695d14b374bfbc709c3f7490f43cfc04186e41258788f8f5cdadc5005319af25de084775d7d8aa915a3da26ee36eae3adf0f467fe38b8febf9ebb31f907bd91f9c0e522bd5bea87f38ebf03f51f8b95cb878b048d4bdade9fbccb4d80cd9d60d569a3e9d1ef9579d17edbbc82b43252e12547e4bceb7f78b8383caf86c46057b15d59d2acd96f5ff91f2e8ad7f30703a5101487cd8b1a1ede0d0b8dc0e4067396305fab8ca054638c224da674b82d3d2d7074e778b63932783421b135d21346265520827bdd7f585f0b6ddd05c22756163643c769dc584b094f5eda023157b104a04237546619ea48e411616821abb676a5f0432d61c9f423efea3a6360b79164d3f3446a0ca9e83a9eac0a53748781279096764d0eee9e5fff8b0f3164828251f5f7624c79ccae0eb9db37a56183b5eaf0f467fe3cb8afe1bca731b844e2a2b1d7e642aa59ffd9acc8ec5f8545d29fcb968703c11684d39cd4cb4d80e0a466c67193ffe8e68962c86491e1e5a33236f75423a5f8ef6f78fe383ddcb6922006e76033959b8c2a6af91f2e8ad2810701d4101487cd8d1a57835e4fcb99ae5c6bc56c13f5c8a86e2e840e51a072b56761347075962deb7a2d693e7cfa23a23450264065a23ddb194e2c2c77ca12c14f56173043c518af0f09581816b0457502f640a044371d3e38ae0ebd5b3d7034b0a361a7b6327a29afab0db8bc2f7513a2866695b315685ffbd9799fae4216418781549095734d0b9adc00d2cc5e1c14dcaa12aac42a0b67cf9b0ea2d42ae325abbcea98a723fa30b2febeedeb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c3459853cfc99c9a8210d2e09e56da6c90e8cae48925c95a91fdacf55661a57b75f1a7eb6756ad697cf6a8842013f1155782ea993f19ec082c9fc5831216d6050385d89c180bc90f1e95d5f3022f9b2657abada7532d933f53bc2ea41621653b35b167ab27166d293cb668c46121315517c22ad97f592c486cdf05c35256143443c518dc584b094f5eda023104e246a04437577c0efb49f95b3c0134b0a312f0f4632d61c5ee38edfb6b7512d08664e4b317190ca89b799fae0a5201878154dad343184cde951cd2dd560428ddad51f786624b0d9ff94cbbdb2cb474f190e2e6f472bb1ce2b6faadeb6da04bf7d1a493b304ab4ce9a8fadeec4a9334ca92f2909403cd01ba94df949a16dfefd731f720c4b789a7ca22993fbdaaf2a1333df43c23a48abc3a5ae92f3ebae2913711e4002497b7dc6e5ba95930d9b4d45a708b5a54d3cd8b1a1edf790b8dc0a066268c0659a88aad1f78be680e8e25e10376366563e538fc786b296f7ead759527117a4064d7779c2e1b69197bdc62d45043014527d21fbd4f486e585ebe153133f040f703644c2c48bb69e317692f63efe061a7b6327f5bafab0db8bc2f7513a2866695b315685cd9c430c2ec601654d0df05cc8304291c988b1ad8cd0b5572f1a547f793743d6c888859fdff6ab261e7e1b4f0f467ad6bfaaed8b8b62be513b7b0f784ba02bd5a9bceaedda80ac343c7c0e793d5458d4aafde9ebecb4ff1a4c0339137c6a28ab9df398c78aaeab8e57761a15a60f1bbfc7e3eff5c2bade0d77740e60025e4be9a280eef683b9da3941272c1026292d8f80f0bad181a8f97b35d36846d04eeddfb0a6ec87d5ca66eb52b3d637d76fe2deb7a2d6d2f6bed209406066c1123957dcc685b395e1fca12c116165c0113854da6581f094e2d99033357b071a045451d393bae08bd197d2f64f2bb76bca325783cbeab2ef4e07b394ff58b658cb315685ffbd9799fae5a3350cfc308d0d4125a098f882d989c0f0320dfb318a0c4624b0b9ffb3de88a7fe723ada6f4fdf47ead6bfafeb8edac36fe05bb8df3cde44ebd5bea9dfd9ffb5ce3048c9ac29a941a8d4aafde9ecd9b11d9e79d71d976d3b588acc94a993fcedaaef8647cb67875b2fbdb2f2b8d383edef5952245a64471cabdc76e0eec6c78c1c5831255965441da89d04413c90d6f9ac2f11771c46004f7ddfb0a6ec87d52a063b0363a6b3b6ee721fc786b7a092ba7538e3d11704065a63ddb6a1d790e6cca13b20440165055b20dcb295e1c3c47da02315fa607c05335082c4ebb50e21d6e3478edfd6ca5af327a29fcfe2fa9ab2c1347a1917196d3026a19bf9c1e88ae6e4503929656858305581c988b00d8da1a4271c6a60cb1c3351d0ad5a713bf9b7cc174f0e3f2b0a563ad6a89bdbfefeb6cd544e0d3b1d69242aa59ae8ee499ab1dc522839ed499835fdd2d8f83d8889c1a95b3b126863583d4d9e48a67d97fdbbd83b43023b24163ef8bf66569a8383caffa842013a14b7fc1b7db7758f2584aca98c55741816645d684dc0f09dc181cfdd5f302369a2c50a88aa4496589195bb774a430364b3320a46dad637e3f1f6bef51c46053315766c22ad97f592c013b9b05c35212401f13845c9c0e384311018d153233a606b500625b3d5fb87feb4d3d6522c7b676a5a3240c3cb8ab38f8f66b2553f7e03bc9f9557d1baa81799fae1f4e028780269096764d0b9a9e5e8d8b0d406480f318a0c2624a79d5bd19bfd22ef912adbfeba7e364c97cf8ebfab8ad6bb5529185a7d7f354dd4ce8dbb9de9a4a92419496c7c1c344eb1fd9c989ceab57c5ef9b65db779bf496fcb964d0628cc0b6f4707fa56c28e5affb2f298f383cafe08f220af117268dfd9b2a5eb24478c092dc511d917649db87cb654d894f42de89ef5366c70713f7b9ec087bd97f0eea32e16761342723a37dab247e3e6d2fbb7a942117710115887486284e2e5d7bdd62d450434b030385449813384311018d153230a604c453307c2c49c9")}},[n("6e8d55721df646e61374")]:{[n("19ffcf29e5fa6a2244")]:f.source,[n("1bb94e6ff2a0cd7751")]:f.source.style,[n("edab01c9178d81c986")]:{[n("26c2abd646549e7258da82ad533a")]:{value:[1,.5,.25,.5],type:"vec4<f32>"},[n("4ce8da7a2855e7d131f6f546344c")]:{value:[0,0],type:"vec2<f32>"},[n("422650303ea37dab2f146a3b3dba64")]:{value:[0,0],type:"vec2<f32>"}}}}),this.Ud=new qa({[n("3f1724ddae11b1c43e")]:c,[n("bf83a953279137")]:this.of})}function Wt(){this.L=new we,this.Tk=this.Rk=0}function Qe(c){this.K=c,this.S=new b.Uf.Sf,this.qb=!1,this.nd=!0,this.sf=!1,this.ai=this.wb=0,this.Wa=1,this.Tb=this.Gg=0,this.qa={},this.ab=0,this.Ub=new Float32Array(400),this.Za=new Float32Array(400),this.ia=new Float32Array(400),this.aa=this.ka=this.Ia=this.gl=null,this.ui()}function kt(c,f,g,m,x){this.Ka=c,this.Hb=f,this.Lb=g,this.vb=m,this.Ob=x}function Ut(c){this.H=new b.$g,this.H.ma[n("34e412637b6113e758")](this.H.P),this.Ng=this.dd=null,this.ed=c,this.Y=0,this.ah=this.Yg=this.Xg=this.Vg=this.Sg=this.Qg=this.xd=1,this.Dm(n("edfb5d93178495c29380"))}function He(c){this.va=c}b.d[n("a81e8f8fe9918b12d5ef8641cd4c92")](n("d3e3b4ab32a52eb8bafc"))[n("d45662deb4cc")][n("77cc10998bc09c97")]=n("d8cb7644bf46"),R={A:function(c,f,g){c[n("f59503c709")](),c[n("2255855143fe86")](f,g)},g:function(c,f,g){c[n("d3f7a1a927")](),c[n("b14452805069c29c")](f,g)}},G.Ta=function(c){var f=c.parent;f?.removeChild(c)},n("8d0c7a2e65ebfe21dde76420"),Jt=n("322b803146b4ddfa7b6ece0b1bfd46b62327612227ae26ae2529613c3aba3e883d"),Cl=n("23bc5162d7ab8c296af91f588ad2f75056975a53c58bdc59159b525cd291b5576d9d2a"),_5=n("e41014f181d44b5c894e0b8db6ad5b2d912959a097e4493e91205bbd32e170672a2528b0"),Ol=n("2692daff43568d5a4bccd5f37424812045b3d5a84c2a882c4ce273a42f3e612774e73aed642b623a"),n("dba9ef8836fd00b586e7c0e421fb06b48df999aa068d02979ec9909445984bded5dc9389"),y5=n("9e0a5277cbde05d2c3444d0becd90b90cb49152fc6ee04a4c2331d3bd4e60fb8d322e523f0e3b6e1e827e63e"),Zr=void 0,Q=b.oc[n("142c67df56b6162a522a")],Zr=Q||=n("2c1800"),Il=(()=>{switch(Zr){case n("a16748"):var c=n("bf85aa6d16b5");break;case n("c310a0"):c=n("7ca9db10c414");break;case n("31c4c1"):c=n("e0d7506ca267");break;case n("108421"):c=n("2bb95e41eab3");break;default:c=n("0efabefe4770")}return c})(),window.moment.locale(Il),E=null,a=b.oc[n("ca92bde58000dd2481b0d5a29334")],G.N=function(c){return a[c]},G.te=function(c){return c[Zr]||(c[n("ae5a1e")]?c[n("5ff50f")]:c[n("b63f")])},G.Pp=function(c){return encodeURIComponent(c)},G.ha=function(c,f){return setTimeout(c,f)},G.em=function(c){clearTimeout(c)},G.Li=function(c){var f=(Math.floor(c)%60).toString(),g=(Math.floor(c/60)%60).toString(),m=(Math.floor(c/3600)%24).toString(),x=(c=Math.floor(c/86400).toString(),G.N(n("d5b323e135e4afe5b0ab71f400ab90"))),S=G.N(n("19ffef25f1a06b394cf78d3ccae3552b")),w=G.N(n("0eeaa4c87e0da04c7bc2f6c47345")),M=G.N(n("f91f0f4511408b596c17ad47e015"));return 0<c?c+n("c7ddfb0a")+x+n("73014756")+m+n("483cb8ab")+S+n("2a1ede0d")+g+n("dc082c9f")+w+n("8fe5a332")+f+n("daceaedd")+M:0<m?m+n("483cb8ab")+S+n("18cc685b")+g+n("66d21ac9")+w+n("047074e7")+f+n("e73ddb6a")+M:0<g?g+n("94c0e457")+w+n("4efa22d1")+f+n("681c988b")+M:f+n("f70dcb5a")+M},G.wm=function(c){return c.includes(n("07507b1fed"))?c.replaceAll(n("0ef7a2c474"),'target="_black" href'):c},G.Wi=function(c,f=null,g=null){var m=b.d[n("487af8fe2de9eb5a3c44ffc63ad1")](n("aac80fcfc74f04"));n("91777da07060fea6fc6e")!==typeof f&&f!==null&&(n("8ca8a03bf507bb8df181")!==typeof f[n("a2da00")]&&(m[n("92ca30")]=f[n("718b97")]),n("f1171d4010009e469c0e")!==typeof f[n("9fb1d26b4db7")]&&f[n("e0d0514a8a56")]&&(m[n("d769aa33356f")]=n("b789ca53558f")),n("d8dc744fb94b77c185d5")!==typeof f[n("82f721f3e365")]&&f[n("bdca5a1624c0")]&&(m[n("0f2474e4f636")]=n("b2a711a3d335")),n("8fb5ff6676a27c68f2ac")!==typeof f[n("bdcd4d1f32c1ac06acd12e16")])&&(m[n("c47674f8bbea6569a57a67f1")]=f[n("34e604684b7a15f955ea1761")]),m[n("92d72dd5f3")]=n("b5d252104d8f892ad7cf491132d1b11db5c2"),m[n("272b5bf9")]=c,g&&(m[n("cb13a3d220e135")]=m[n("d44a78d5bdc87e52af597fdb85d24a528a5243")]=function(){try{g()}catch{}m[n("8cb2a033ff00b6")]=m[n("97a7f7787ead7977eca4c06646b74d77c9bfcc")]=null}),(b.d[n("b14a568551")]||b.d[n("1c0a3b9b659d071e411b12846a803e1a4b330f9255")](n("e5be02f90d"))[0])[n("ee1ec0f1976dd0469eeed4ed")](m)},G.fa=function(c,f){return f.prototype=Object.create(c.prototype),(f.prototype.constructor=f).parent=c,f},G.Im=function(c){return(c%=6.283185307179586)<0?c+6.283185307179586:c},G.Rp=function(c,f,g){return G.Hd(g,c,f)},G.Hd=function(c,f,g){return g<c?g:c<f?f:Number.isFinite(c)?c:.5*(f+g)},G.Q=function(c,f,g,m){return c<f?Math.min(f,c+g*m):Math.max(f,c-g*m)},G.yj=function(c,f,g){return f+(c-f)*Math.pow(.5,g/33.333)},G.Mf=function(c,f,g){return c-(c-f)*g},G.bh=function(c,f){return Math.sqrt(c*c+f*f)},G.Rj=function(c,f,g,m){var x=f+m;if(c==null)throw new TypeError;for(m=c.length>>>0,g=(g>>=0)<0?Math.max(m+g,0):Math.min(g,m),f=(f>>=0)<0?Math.max(m+f,0):Math.min(f,m),x=x===void 0?m:x>>0,m=Math.min((x<0?Math.max(m+x,0):Math.min(x,m))-f,m-g),x=1,f<g&&g<f+m&&(x=-1,f+=m-1,g+=m-1);0<m;)f in c?c[g]=c[f]:delete c[g],f+=x,g+=x,m--},G.Up=function(c,f,g,m){var x=6.283185307179586*Math.random();return[c+(g=Math.sqrt(g*g+Math.random()*(m-g)*(m+g)))*Math.cos(x),f+g*Math.sin(x)]},G.io=function(){return 2147483647*Math.random()},G.oo=function(){var c=[32,33,34,35];return c[parseInt(Math.random()*c.length)]},G.Yp=(e=[n("2bec"),n("f232"),n("ddfc"),n("680a"),n("e72c"),n("e084"),n("7d58"),n("0a2c"),n("fb94"),n("2e86"),n("cc7c"),n("82f1"),n("b78b"),n("1562"),n("82f6"),n("8b5a"),n("1402"),n("edb6"),n("a018"),n("f742"),n("34ee"),n("c15e"),n("ce32"),n("bf9e"),n("c8f6"),n("090a"),n("6040"),n("189b"),n("95f5"),n("cb08"),n("1f25"),n("2c0b"),n("e125"),n("5e97"),n("0c24"),n("64cf")].map(function(c){return c.charCodeAt(0)}),function(c){n("f91f15481808965e6416")==typeof c&&(c=16);for(var f="",g=0;g<c;g++)f+=String.fromCharCode(e[Math.floor(Math.random()*e.length)]);return f}),G.Zp=function(c,f,g,m){f=g*(1-.5*f);var x=Math.min(f,1-f);return G.xh(c,x?(g-f)/x:0,f,m)},G.xh=function(c,f,g,m){var x=(f*=1-Math.abs(2*g-1))*(1-Math.abs(c/60%2-1));return g-=f/2,0<=c&&c<60?[g+f,g+x,g,m]:60<=c&&c<120?[g+x,g+f,g,m]:120<=c&&c<180?[g,g+f,g+x,m]:180<=c&&c<240?[g,g+x,g+f,m]:240<=c&&c<300?[g+x,g,g+f,m]:[g+f,g,g+x,m]},G.vc=function(c,f,g){$[n("8e783555")](c)[n("49dcaa15a1")](f)[n("0c3921b175")](g)},G.aq=function(c,f,g,m){var x={};x[n("53702c36b2")]=n("fda93ae4"),x[n("86623a75")]=c,(c={})[n("f3d6909507c717999ef8849e1a")]=n("819371c6648fe5cdef9c6ece"),c[n("84baa827fa36ada9e9aebd")]=function(S){S[n("6cd1cb511735da801ba8c6320c28d8a719")]&&m(S[n("67f406bb8ff989")]/S[n("19fef438fce2")]*100)},x[n("c780a1480d952852ab73")]=c,$[n("9000b882ec")](x)[n("adf84e095d")](f)[n("7fd4ee9c66")](g)},G.Rb=function(){return Date.now()},G.xc=function(c,f){for(var g in c)c.hasOwnProperty(g)&&f(g,c[g])},G.bq=function(c){for(var f=c.length-1;0<f;f--){var g=Math.floor(Math.random()*(f+1)),m=c[f];c[f]=c[g],c[g]=m}return c},b.Qh=Bi(n("ab1ddfec4e1973d7d502d0d4")),b.sg=Bi(n("9ca9bf1bc1278b96d3")),b.Yo=(t=n("e13506602c389320"),Xi.prototype.G=function(){var c=this.yd[t](this.ta);return this.ta+=1,c},i=n("6b7b082aa64e855345"),Xi.prototype.za=function(){var c=this.yd[i](this.ta);return this.ta+=2,c},r=n("0115e640cc18730b3b"),Xi.prototype.xg=function(){var c=this.yd[r](this.ta);return this.ta+=4,c},s=n("11e5f630d3ea78296db9a9"),Xi.prototype.Bc=function(){var c=this.yd[s](this.ta);return this.ta+=4,c},Xi),b.di=(o=n("2d6dca94f84c47dc"),Zo.prototype.ne=function(c){this.yd[o](this.ta,c),this.ta+=1},d=n("422061210fb97ce87c"),Zo.prototype.oe=function(c){this.yd[d](this.ta,c),this.ta+=2},Zo),b.Op=function(){},b.bc=(Da.rh=function(){return new Da("",null,0,0,0,0,0,0,0,0)},Da.xo=function(c,f,g){return new Da(c,f,g[n("2f18")],g[n("b8f0")],g[n("f6f0")],g[n("e8d1")],g[n("03c47d")],g[n("81827a")],g[n("e0c155")],g[n("23a44d")])},Da.prototype.ig=function(){return this.Cj||(this.Aj!=null&&(this.Texture=new K({source:this.Aj,frame:new Pe(this.nb,this.ob,this.gh,this.ih)})),this.Cj=!0),this.Texture},Da.prototype.Xe=function(){this.Texture!=null&&this.Texture.eo()},Da),b.Dh=(ae.prototype.Xe=function(){for(var c=0;c<this.ng.length;c++)this.ng[c].Vp(),this.ng[c].eo();for(this.ng=[],c=0;c<this.Ih.length;c++)this.Ih[c].Xe();this.Ih=[]},ae.rh=function(){var c=new ae.ue(b.Ma.Pa,b.Ma.Pa),f=new ae.ve(n("06b2faaa6c7daa7b68f9"),[b.Ma.Pa],[b.Ma.Pa]);return new ae([],[],{},c,{},new ae.vf(b.Ma.Pa),{},f,{},new ae.xf("",f,c),{},new ae.Ja([b.Ma.Pa]),{},new ae.Ja([b.Ma.Pa]),{},new ae.Ja([b.Ma.Pa]),{},new ae.Ja([b.Ma.Pa]))},ae.ym=function(c,f,g,m){var x=new ae.ue(b.Ma.Pa,b.Ma.Pa);return c=new ae.ve(n("adbb1d5357c4d502d3c0"),[c],[f]),new ae([],[],{},x,{},new ae.vf(b.Ma.Pa),{},c,{},new ae.xf("",c,x),{},new ae.Ja([g]),{},new ae.Ja([m]),{},new ae.Ja([b.Ma.Pa]),{},new ae.Ja([b.Ma.Pa]))},ae.Bm=function(c,f,g,m){var x={};G.xc(c[n("57eb36a6b4fe99a73ce4")],function(ue,ge){x[ue]=n("b90f09df")+ge});for(var S={},M=0;M<c[n("41c1a81dabf7350a28c38f15aeca")].length;M++){var w=c[n("997970a5734feda2c06b67bd4662")][M];S[w[n("932df1")]]=new ae.ve(x[w[n("26c79ad0475e")]],w[n("e8db4b4889")].map(function(ge){return f[ge]}),w[n("69bd87f39a")].map(function(ge){return f[ge]}))}M=c[n("a4868d1ec62c8490c2929911")];var M=new ae.ve(x[M[n("3233862c5ba2")]],M[n("8e7d3152f7")].map(function(ue){return f[ue]}),M[n("1a4cb04269")].map(function(ue){return f[ue]})),O={},k=(G.xc(c[n("67fd10bf98d884bd1b")],function(ue,ge){O[parseInt(ue)]=new ae.Ja(ge[n("49d8aa0fa8")].map(function(Me){return f[Me[n("fbde988916dfef")]]}))}),w=new ae.Ja(c[n("34e00f624b5c14e052e20961")][n("0efdb1d277")].map(function(ue){return f[ue[n("783bdfac15a2d0")]]})),{}),U=(G.xc(c[n("4b91224bbb68952b3070")],function(ue,ge){k[parseInt(ue)]=new ae.Ja(ge[n("140737947d")].map(function(Me){return f[Me[n("224181524fd886")]]}))}),new ae.Ja(c[n("9ac633d8ea47355fc9dd0bc2c8")][n("59a8baffb8")].map(function(ue){return f[ue[n("41c0a613acd929")]]}))),X={},V=(G.xc(c[n("0912ea48c9176c34")],function(ue,ge){X[parseInt(ue)]=new ae.Ja(ge[n("8b5eec0d6a")].map(function(Me){return f[Me[n("f43753a091a654")]]}))}),new ae.Ja(c[n("a8118b8ff9938511dff69c")][n("1c0f3f9c45")].map(function(ue){return f[ue[n("882bafbce5b2a0")]]}))),Y={},W=(G.xc(c[n("b8ee966acf7e9bfc84f86167")],function(ue,ge){Y[parseInt(ue)]=new ae.Ja(ge[n("7ae95dfe1b")].map(function(Me){return f[Me[n("882bafbce5b2a0")]]}))}),new ae.Ja(c[n("4076eef237e6e3641d77e1f523eae0")][n("6211450603")].map(function(ue){return f[ue[n("2bae4879c68fdf")]]}))),ce={},oe=(G.xc(c[n("5a1b731f2a864f9f261a4701")],function(ue,ge){ue=parseInt(ue),ce[ue]=new ae.ue(f[ge[n("1c0f3f9c45")]],f[ge[n("f6e0d4e68d")]])}),c[n("fc3d51bd74b82d3d513b2db967ae24")]),oe=new ae.ue(f[oe[n("b78ad8595e")]],f[oe[n("3ea86cbe35")]]),Re={},Lt=(G.xc(c[n("a5f7453145f3df25e9f74c14")],function(ue,ge){ue=parseInt(ue),Re[ue]=new ae.vf(f[ge[n("0d9ceeb3f4")]])}),c[n("26d68ad0465298447bd19baf5d349a")]),Lt=new ae.vf(f[Lt[n("a655094acf")]]),ot={};return G.xc(c[n("fefba5f06f57ad7672")],function(ue,ge){ue=parseInt(ue),ot[ue]=new ae.xf(ge[n("5e9b49850e16")],new ae.ve(x[ge[n("898960d563")][n("3a3b8e2453aa")]],null,ge[n("bb1fd6c751")][n("980eb684eb")].map(function(Me){return f[Me]})),new ae.ue(null,f[ge[n("11f2fc36e1ef7826")][n("edb903cf06")]]))}),c=new ae.xf({},M,oe),new ae(g,m,ce,oe,Re,Lt,S,M,ot,c,O,w,k,U,X,V,Y,W)},ae.prototype.Ee=function(c){return this.Hk.hasOwnProperty(c)?this.Hk[c]:this.fp},ae.prototype.Ef=function(c){return this.Pk.hasOwnProperty(c)?this.Pk[c]:this.np},ae.prototype.pj=function(c){return this.Wk.hasOwnProperty(c)?this.Wk[c]:this.xp},ae.prototype.rj=function(c){return this.bl.hasOwnProperty(c)?this.bl[c]:this.Dp},ae.prototype.wj=function(c){return this.si.hasOwnProperty(c)?this.si[c]:this.El},ae.prototype.Zg=function(c){return this.il.hasOwnProperty(c)?this.il[c]:this.ql},ae.prototype.jn=function(c){return this.uk.hasOwnProperty(c)?this.uk[c]:this.Po},ae.prototype.dh=function(c){return this.Ck.hasOwnProperty(c)?this.Ck[c]:this.Zo},ae.xf=function(c,f,g){this.un=c,this.eh=f,this.Bn=g},ae.ve=function(c,f,g){this.jh=c,this.Oa=f,this.Wd=g},ae.Ja=function(c){this.Oa=c},ae.ue=function(c,f){this.Oa=c,this.Wd=f},ae.vf=function(c){this.Oa=c},ae),b.Ma=(ta.prototype.sa=async function(){var c=(await me.load(n("f0e400059d2857a09dba1f79ba3a5bae72fc23316d392fa371f73a356b"))).source,m=(this.Nn=new b.bc(n("c319a4d1291d3de5aa1ea4d226f428"),c,158,86,67,124,148,63.5,128,128),this.Rn=new b.bc(n("1d78fabcce714aa05c49c6bac07642a854"),c,158,4,87,74,203,63.5,128,128),new b.bc(n("9322f9e36f1778e8f220f4fa66"),c,4,4,146,146,63.5,63.5,128,128),(await me.load(n("cafebe9ba732f106b790b1d79003fd0ff787f382b541d01f85"))).source),c=new b.bc(n("b6231d2fe5ae05a8cd"),m,0,0,42,80,75,64,128,128),f=new b.bc(n("e5b202fe36b784e999b6"),m,46,0,20,48,109,63,128,128),g=new b.bc(n("883dafbdd3aea536fe3eb58ffb92"),m,70,0,32,32,0,0,0,0),m=new b.bc(n("1c093b897f82091a4a2a04965b9c"),m,46,52,64,64,0,0,0,0);c=b.Dh.ym(m,g,c,f),this.Na=new b.Yj({},c),this.gc=this.oh=-1e4,(c=b.oc.document.createElement(n("b307d4c841094a"))).width=80,c.height=80,this.th={od:c,jk:c.getContext(n("985bbe"),{willReadFrequently:!0}),Ze:new K({source:Fe.from(c)})},this.sb=null,this.Jh=[]},ta.Pa=b.bc.rh(),ta.prototype.C=function(){},ta.prototype.Mh=function(c,f,g){var m=this,x=this.Na.yk();if(0<x&&G.Rb()-this.oh<12e5)c?.();else{if(this.sb!=null&&!this.sb.Sb){if(G.Rb()-this.oh<3e5)return void(c!=null&&c());this.sb.$o(),this.sb=null}var S=new b.cp(x);S.gp(function(w,M){S===m.sb&&g!=null&&g(w,M)}),S.jp(function(w){S===m.sb&&f!=null&&f(w)}),S.op(function(){S===m.sb&&f!=null&&f(Error())}),S.tp(function(){S===m.sb&&c!=null&&c()}),S.yp(function(w){if(S===m.sb)m.gc=G.Rb(),m.sb=null,m.Na.V().Xe(),m.Na=w,c?.(),m.Kp();else try{w.V().Xe()}catch{}}),S.rl(),this.oh=G.Rb(),this.sb=S}},ta.prototype.re=function(){return 0<this.Na.yk()},ta.prototype.Fg=function(c){this.Jh.push(c)},ta.prototype.Kp=function(){for(var c=0;c<this.Jh.length;c++)this.Jh[c]()},ta.prototype.V=function(){return this.Na.V()},ta),b.$l=(si.prototype.Yb=function(c){return this.wf[c]},si.rm=(Qo.prototype.Ce=function(c,f){for(var g=0;g<this.cd.length;g++)if(this.cd[g].bj===c)throw Error();return this.cd.push(new si.Km(c,f)),this},Qo.prototype.Om=function(){for(var c=0,f=0;f<this.cd.length;f++)c+=this.cd[f].Ff;for(var f={},g=0,m=0;m<this.cd.length;m++){var x=this.cd[m];x.Ff/=c,x.Ug=g,x.Wg=g+x.Ff,g=x.Wg,f[x.bj]=x}return new si(f)},Qo),si.Km=(kl.prototype.Hf=function(c){return this.Ug+(this.Wg-this.Ug)*c},kl),si),b.$g=(va.Sn=797,va.prototype.Gj=function(c,f,g){var m=new l(f,g);return f.L.zIndex=.001*(2*(797-c)+4),g.L.zIndex=.001*(2*(797-c)-2+3),m},va.prototype.Yd=function(c,f,g,m,x,S,w,M){var O=g.Oa;if(c=(c===b.Nc.$d?f.eh:g).Wd,0<O.length&&0<c.length)for(f=0;f<this.o.length;f++)this.o[f].O.uc(O[f%O.length]),this.o[f].id.uc(c[f%c.length]),this.o[f].O.Ye(M),this.o[f].id.Ye(M);this.P.Yd(m,x,S,w)},va.prototype.aj=function(c){E.l.U.S.oa=c;var f=E.B.V().Ee(c);if(c=f.Oa,f=f.Wd,c.length&&f.length)for(let g=0;g<this.o.length;++g)this.o[g].O.uc(c[g%c.length]),this.o[g].id.uc(f[g%f.length])},va.prototype.pl=function(c){E.l.U.S.eb=c,c=E.B.V().Zg(c),this.P.qf(.004,this.P.Sc,c.Oa)},h=(()=>{class c extends le{constructor(){super(),this.sortableChildren=!0,this.sd=[],this.ud=[],this.vd=[],this.Sc=[],this.ef=new le,this.hf=[];for(var g=0;g<4;g++){var m=new b.mc;m.uc(E.B.Nn),this.ef.addChild(m.L),this.hf.push(m)}this.ef.zIndex=.0011,this.addChild(this.ef),this.Ik(),this.Xc=new b.mc,this.Xc.uc(E.B.Rn),this.Xc.L.zIndex=.001,this.addChild(this.Xc.L),this.Qk()}}return c.prototype.Yd=function(f,g,m,x){this.qf(.002,this.sd,f.Oa),this.qf(.003,this.ud,g.Oa),this.qf(.004,this.Sc,x.Oa),this.qf(.005,this.vd,m.Oa)},c.prototype.qf=function(f,g,m){for(;m.length>g.length;){var x=new b.mc;g.push(x),this.addChild(x.L)}for(;m.length<g.length;)g.pop().Ad();for(x=0;x<m.length;x++){f+=1e-4;var S=g[x];S.uc(m[x]),S.L.zIndex=f}},c.prototype.ja=function(f,g,m,x){for(this.visible=!0,this.position.set(f,g),this.rotation=x,f=0;f<this.sd.length;f++)this.sd[f].Vb(m);for(f=0;f<this.ud.length;f++)this.ud[f].Vb(m);for(f=0;f<this.vd.length;f++)this.vd[f].Vb(m);for(f=0;f<this.Sc.length;f++)this.Sc[f].Vb(m)},c.prototype.Aa=function(){this.visible=!1},c.prototype.sl=function(f,g){this.ef.visible=!0,g/=1e3;for(var m=1/this.hf.length,x=0;x<this.hf.length;x++){var S=1-(g+m*x)%1;this.hf[x].L.alpha=1-S,this.hf[x].Vb(f*(.5+4.5*S))}},c.prototype.Ik=function(){this.ef.visible=!1},c.prototype.Bl=function(f,g,m){this.Xc.L.visible=!0,this.Xc.L.alpha=G.Q(this.Xc.L.alpha,f.sf?.9:.2,m,.0025),this.Xc.Vb(g)},c.prototype.Qk=function(){this.Xc.L.visible=!1},c})(),va.prototype.Va=function(c){return this.Jj+this.Lj*Math.sin(.3141592653589793*c-this.oi)},va.prototype.Nl=function(c,f,g,m){var x=2*c.wb,S=c.ia,w=c.ab,M=4*w-3,O=(this.oi=f/400*3.141592653589793,this.Jj=1.5*x,this.Lj=.15*x*c.Gg,S[0]),k=S[1];m(O,k)?(V=S[2],Y=S[3],W=S[4],ce=S[5],U=Math.atan2(ce+2*k-3*Y,W+2*O-3*V),this.P.ja(O,k,x,U),this.o[0].ja(O,k,x,this.Va(0),U),this.o[1].ja(.64453125*O+.45703125*V+-.1015625*W,.64453125*k+.45703125*Y+-.1015625*ce,x,this.Va(1),l.bb(this.o[0],this.o[2])),this.o[2].ja(.375*O+.75*V+-.125*W,.375*k+.75*Y+-.125*ce,x,this.Va(2),l.bb(this.o[1],this.o[3])),this.o[3].ja(.15234375*O+.94921875*V+-.1015625*W,.15234375*k+.94921875*Y+-.1015625*ce,x,this.Va(3),l.bb(this.o[2],this.o[4]))):(this.P.Aa(),this.o[0].Aa(),this.o[1].Aa(),this.o[2].Aa(),this.o[3].Aa());for(var U,X,V,Y,W,ce,oe=4,Re=2,Lt=2*w-4;Re<Lt;Re+=2)m(O=S[Re],k=S[Re+1])?(U=S[Re-2],X=S[Re-1],V=S[Re+2],Y=S[Re+3],W=S[Re+4],ce=S[Re+5],this.o[oe].ja(O,k,x,this.Va(oe),l.bb(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.06640625*U+.84375*O+.2578125*V+-.03515625*W,-.06640625*X+.84375*k+.2578125*Y+-.03515625*ce,x,this.Va(oe),l.bb(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.0625*U+.5625*O+.5625*V+-.0625*W,-.0625*X+.5625*k+.5625*Y+-.0625*ce,x,this.Va(oe),l.bb(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.03515625*U+.2578125*O+.84375*V+-.06640625*W,-.03515625*X+.2578125*k+.84375*Y+-.06640625*ce,x,this.Va(oe),l.bb(this.o[oe-1],this.o[oe+1]))):(this.o[oe].Aa(),oe++,this.o[oe].Aa(),oe++,this.o[oe].Aa(),oe++,this.o[oe].Aa()),oe++;for(m(O=S[2*w-4],k=S[2*w-3])?(U=S[2*w-6],X=S[2*w-5],V=S[2*w-2],Y=S[2*w-1],this.o[M-5].ja(O,k,x,this.Va(M-5),l.bb(this.o[M-6],this.o[M-4])),this.o[M-4].ja(-.1015625*U+.94921875*O+.15234375*V,-.1015625*X+.94921875*k+.15234375*Y,x,this.Va(M-4),l.bb(this.o[M-5],this.o[M-3])),this.o[M-3].ja(-.125*U+.75*O+.375*V,-.125*X+.75*k+.375*Y,x,this.Va(M-3),l.bb(this.o[M-4],this.o[M-2])),this.o[M-2].ja(-.1015625*U+.45703125*O+.64453125*V,-.1015625*X+.45703125*k+.64453125*Y,x,this.Va(M-2),l.bb(this.o[M-3],this.o[M-1])),this.o[M-1].ja(V,Y,x,this.Va(M-1),l.bb(this.o[M-2],this.o[M-1]))):(this.o[M-5].Aa(),this.o[M-4].Aa(),this.o[M-3].Aa(),this.o[M-2].Aa(),this.o[M-1].Aa()),this.Y===0&&0<M&&this.ma.addChild(this.P),0<this.Y&&M==0&&G.Ta(this.P);this.Y<M;)this.ma.addChild(this.o[this.Y].O.L),this.ma.addChild(this.o[this.Y].id.L),this.Y+=1;for(;this.Y>M;)--this.Y,this.o[this.Y].id.Ad(),this.o[this.Y].O.Ad();m=c.qa[b.De.Cm],this.o[0].Bf()&&m!=null&&m.Ba?this.P.sl(x,f):this.P.Ik(),f=c.qa[b.De.Tm],this.o[0].Bf()&&f!=null&&f.Ba?this.P.Bl(c,x,g):this.P.Qk()},Hi.prototype.ja=function(c,f,g,m,x){this.O.Ra(!0),this.O.Gf(c,f),this.O.Vb(g),this.O.xj(x),this.id.Ra(!0),this.id.Gf(c,f),this.id.Vb(m),this.id.xj(x)},Hi.prototype.Aa=function(){this.O.Ra(!1),this.id.Ra(!1)},Hi.prototype.Bf=function(){return this.O.Bf()},Hi.bb=function(c,f){return Math.atan2(c.O.L.position.y-f.O.L.position.y,c.O.L.position.x-f.O.L.position.x)},l=Hi,va),b.De=(es.Tm=0,es.Cm=2,es.vn=6,es),b.Yj=(b.Dh.rh(),Jo.prototype.yk=function(){return this.hb[n("d8db7f5db55e77c08e")]},Jo.prototype.V=function(){return this.Jn},Jo),b.cp=(_e.yc={vk:n("9374edb6"),zk:n("2e8f88f0"),Wo:n("2bec552c"),Gk:n("06a7b0aa"),Jk:n("f95a0318")},_e.Zn=1e5,_e.tg=new b.$l.rm().Ce(_e.yc.vk,1).Ce(_e.yc.zk,10).Ce(_e.yc.Wo,50).Ce(_e.yc.Gk,15).Ce(_e.yc.Jk,5).Om(),_e.prototype.yp=function(c){this.Zj=c},_e.prototype.tp=function(c){this.ak=c},_e.prototype.jp=function(c){this.ck=c},_e.prototype.op=function(c){this.ek=c},_e.prototype.gp=function(c){this.gk=c},_e.prototype.$o=function(){this.qd=!0},_e.prototype.rl=function(){this.lk||(this.lk=!0,this.qd?this.nf():this.pp())},_e.prototype.pp=function(){var c=this;this.qd?this.nf():$.ajax({type:n("d90d1e58"),url:Cl+n("c2f6b693a22ee638a7b2eff8fc19f112a186e096f355de1bbf9df59eb700ce5f8880cb9b"),[n("521b7c17108e7d853e18")]:{onprogress:function(f){var g;f.lengthComputable&&(g=_e.yc.vk,c.yg(g,_e.tg.Yb(g).Hf(f.loaded/f.total)))}}}).fail(function(){c.ci()}).done(function(f){f<=c.Tj?c.cl():c.Ep()})},_e.prototype.Ep=function(){var c=this;this.qd?this.nf():$.ajax({type:n("271f6cce"),url:C.k+n("1f7513d4c224ccb3151e0ca9ed2d88ad6b1254c5da17c1d44e"),[n("256ecfaaef734eb0496d")]:{onprogress:function(f){var g;f.lengthComputable&&(g=_e.yc.zk,c.yg(g,_e.tg.Yb(g).Hf(f.loaded/f.total)))}}}).fail(function(){c.ci()}).done(async function(f){if(f[n("e281c1838f04c11684")]<=c.Tj)c.cl();else if((m=await fetch(C.k+n("8abe7edbef6f3904a0e57196d0567d1adec539daec4a0758d1c716cc"))).ok){if(Jr(f,m=JSON.parse(n(await m.text()))),L["1ac"]&&(m=await fetch(n("ebf499aa1fd354d1b281c7a0529a3f8b8bdccfc008dff39f62c06082f2cae29372d9239de0adb43055a5656fb2fadf2f288a6c2bac94cf7754a64071ceabdd6852"))).ok){var g,m=JSON.parse(n(await m.text())),x={};for(g of[n("c5d33e1d3afea21fb9"),n("cc7a62fea3d27750904c75d3"),n("c5de260c0dd3a808"),n("b46899f2cce1be62df79")])x[g]=Object.entries(m[g]).reduce((O,[k,U])=>(U[n("7d079b")]+=2e4,U[n("819062c760")]=U[n("82f125e6e3")].map(X=>(X[n("34f71360516614")]=n("3222ab")+X[n("95f4722f70e5f5")],X)),O[parseInt(k)+2e4]=U,O),{});x[n("684ac1d202fcdc4d1138f6aa17b1")]=m[n("f9191045132f8d42600bc75de602")].map(O=>(O[n("f58f13")]+=3e4,O[n("0110e247e0")]=O[n("c9582a8f28")].map(k=>n("3eae5f")+k),O)),x[n("997e7eb4697bedb5e57b40a0")]=Object.entries(m[n("97bcfc726fb96f6bdbb9c266")]).reduce((O,[k,U])=>(O["a_"+k]=U,O),{}),x[n("387b1fec55e2104b2972f6")]=Object.entries(m[n("f8bb5f2c9522508b69b236")]).reduce((O,[k,U])=>(U[n("9015b79be090a402")]=n("8fa1ce")+U[n("08ad2f2378283cba")],O["a_"+k]=U,O),{}),Jr(f,x)}if(L["1aa"]&&(g=await fetch(n("67f01dae9befc8ed2e8543a4d696b39118da149d94de918a51d9eed731f2608ef3dde78962d363dbbd86f57b7da5786ff4edab4c7abf6e6beba3842065a64071ceabdd6852"),{method:"POST"})).ok){for(var S in m=await g.json(),(g={})[n("ebf994bb1ce4188187")]=m[n("2c18179a43451be040")],g[n("2254885455c48dca6e528f49")]=m[n("71859fc5869512db3d8398d8")],g[n("471028ce8f15aeca")]=m[n("8af32de9ca763355")],g[n("00bc2d26703d02be6bad")]=m[n("a7b5c66f5fb46977cc94")],g[n("c14026932c59a9bca0593f")]=m[n("f271d1629fe8d6cd9368c8")],g[n("73571e0f99698b181a5539079c44")]=m[n("92d03fccf8662a5bfbd218c4fd5b")],g[n("0909e055e3336e30")]=m[n("06e4a3f06456ad6d")],g[n("da9ff995aa1ad214a69ac781")]=m[n("4a2f69253aaa6284160a7711")],g[n("87cfec9b79f16c8e")]=m[n("d45273c6aae47b5b")],m=g[n("074c6c02ff49ff1b4b2972f6")],n("54d6fd4e3668e8d93dd4da460345"),m)x=m[S],x[n("e9391e6f193182")]&&(x[n("d923284f283dab7f8c")]=!0,x[n("f8bb5f279d3957b9658123276c")]=x[n("63660067866c802c0e4c0c2a87")]);Jr(f,C.Id=g)}if(L["1ab"]&&(S=await fetch("https://timmapwormate.com/store",{body:'{"country":"gb","v":"v2"}',method:"POST"})).ok){for(var w in g=await S.json(),(S={})[n("baae05a8cd0be932b6")]=g[n("7aee45e80d4b2972f6")],S[n("8036aeb2f7a6a324cc30a9af")]=g[n("f264d86485f4ddfabe62df79")],S[n("6e97517536ea57f1")]=g[n("9de67e2465fbc020")],S[n("de02cf04969be09c8503")]=g[n("867a276cfef308f4ed6b")],S[n("0f3274e5fa2bfbc27e2b6d")]=g[n("0100e653ec19697c6019ff")],S[n("1092390a7a24249579901e027f19")]=g[n("f5951cc117ab89de9c973bd9e286")],S[n("9c9eb506ce3c8383")]=g[n("34f61d6e56441bfb")],S[n("2085070b500014926c90090f")]=g[n("799e9ed4899b0dd5c59b60c0")],S[n("4ceaeb7e226cf3d3")]=g[n("4ceaeb7e226cf3d3")],m=S[n("3f0424cab701b7d303112ace")],g=S[n("0a68a77460dea2d3735a904c75d3")],m)x=m[w],x[n("bdcd4a0335ddae")]&&(x[n("5b652e0daa63953d0e")]=!0,x[n("2d6cca8cd0565a925076d69cd1")]=n("a65f1c4ddac8498eef1a420797f132b1df2a1528cabc13bfd32ef434ecb0ebb8")+x[n("97bafc667ab87478fa80c0664b")]);for(var M in g)w=g[M],w[n("08b02e")]=w[n("92ca30")]+3e4;Jr(f,S)}c.Lp(f)}else c.ci()})},_e.prototype.Lp=function(c){if(L["1e"])try{var f=JSON.parse(L["1e"]);if(f&&f[n("3540de84dc")]){c[n("882dafa3f8a8bc3ad408b197")][n("1571e3bac6696ebf6961f28fd37d")]={[n("ef498221065701099a")]:!0,[n("97bafc667ab87478fa80c0664b")]:f[n("a6510155cf")]};for(var g=[],m=0;m<9;m++)g.push(n("8343f104585b7c09ff53e0217c2b78eccc")+(8-m)),c[n("9c9fbb08c91e8cb7cd9692")][n("e8ce5e49b35e5bcc84ae5f1c872e5fa9a7")+m]={[n("f91e1e54091b8d55")]:n("8d097b324ee1e637e1e97a176be5"),[n("8b44")]:175*m,[n("34fc")]:0,[n("a7af")]:170,[n("97a0")]:170};c[n("97bbf263758d6f7cfea9e57b40a0")].push({[n("e13b07")]:19999,[n("16d3a1d97f")]:1,[n("bc6a8beab3e5")]:!1,[n("49d4a412afcb36e133aeb6")]:!1,[n("5fe013bb80f1")]:0,[n("84a5b43eeb3c88beeab2bc3a")]:0,[n("7afb4ee4136a")]:"c_blood",[n("b306d4d552")]:g,[n("da8cf082a9")]:f[n("21f5cf3bd2")]}),c[n("ddbd34f90f9591fb90a626ea1bbb92d884bd1b")].push({[n("1ba579")]:n("d2a0e196a208f5"),[n("9c83bf02c5")]:{[n("f58319")]:n("ae7c0532c6ac19")},[n("d28ffd96a2")]:[19999]})}}catch{}if(L["1j"])try{var x,S=JSON.parse(L["1j"])[n("980dbb9ffd")][0];S&&S[n("dc4b77c385")]&&(c[n("caafe9a5ba2ae204968af791")][n("f43242b5a7aa4f388822539077b42321")]={[n("734d0625825b8d0516")]:!0,[n("1417338b799d331d793d3f9b48")]:S[n("c5d02e142c")]},c[n("53763021be67b70e326f29")][n("a7afdd6874bf586ddb8fdc7d44815454e8d8")]={[n("51b6b6fca1b325ed")]:n("a6401c4bf5d819ceda501d1ec5a615b7"),[n("1f28")]:S[n("8d06")],[n("95ff")]:S[n("6d27")],[n("d294")]:S[n("2402")],[n("34ed")]:S[n("027b")],[n("1253ac")]:S[n("ac8d96")],[n("ddbe26")]:S[n("75168e")],[n("e283cc")]:130,[n("7fc0f6")]:130},x=S[n("ce2be911b7")].toLowerCase(),c[x+n("7ff4e89177")][n("7e367928")]={[n("97b8eb6378a9")]:0,[n("7e7f3278e1f606f0e0783a7c")]:0,[n("188b3b1879")]:[{[n("5534b26fb02535")]:n("818577c65a95f2cbfd9566e37a9beeb2ce32")}]},c[x+n("bb3adcdc56112fc68206b7d73e")].push([999]))}catch{}var w=this;if(this.qd)this.nf();else{var M,O=[],f=[],g=[];for(M in c[n("51b6b6fca1b325ed1da3b8f8")])c[n("7e7b2569f6e636f0c27e2b6d")].hasOwnProperty(M)&&(m=c[n("7035d7bb00b0c4223c20d9bf")][M],S=m[n("26de9bfa5f48985243")],x=m[n("84a7a33be92da3ade98daf2bf8")],S=S?x:Cl+x,x=m[n("4eb9798d37307d1f33")],m=m[n("41c1ab15f78371")],m=new _e.tl(M,S,x,m),O.push(m),f.push(m),g.push(S),me.add({[n("c2b2e8bca724")]:S,[n("9496a404")]:S}));me.load(g,function(X){var V=_e.yc.Gk;w.yg(V,_e.tg.Yb(V).Hf(+X))}).then(X=>{O.forEach(function(V){V.texture=X[V.Sl]}),w.Ol(c,O)})}},_e.prototype.Ol=function(c,f){var g,m,x,S=this;this.qd?this.nf():(m={},x=0,function w(){x<f.length?(g=f[x++],m[g.T]=new b.fm(g.texture,g.texture.source),w()):G.ha(function(){return S.km(c,m)},0)}())},_e.prototype.km=function(c,f){var g=this,m={},x=0,S=Object.values(c[n("e5a402ff00b585d884bd1b")]).length,w=(G.xc(c[n("0908ee5be411610478e1e7")],function(k,U){U=b.bc.xo(U[n("c146268c3143b59d")]+n("e41015f6")+k,f[U[n("72f751fd02724a6c")]].Ze,U),m[k]=U,++x%10==0&&(k=_e.yc.Jk,g.yg(k,_e.tg.Yb(k).Hf(x/S)))}),Object.values(f).map(function(k){return k.Ze})),M=Object.values(m),O=new b.Yj(c,b.Dh.Bm(c,m,w,M));G.ha(function(){return g.sm(O)},0)},_e.tl=function(c,f){this.T=c,this.Sl=f},_e.prototype.sm=function(c){var f;this.Sb?c.V().Xe():(this.Sb=!0,f=this,G.ha(function(){return f.Zj(c)},0))},_e.prototype.cl=function(){var c;this.Sb||(this.Sb=!0,c=this,G.ha(function(){return c.ak()},0))},_e.prototype.ci=function(){var c,f=Error();this.Sb||(this.Sb=!0,c=this,G.ha(function(){return c.ck(f)},0))},_e.prototype.nf=function(){var c;this.Sb||(this.Sb=!0,c=this,G.ha(function(){return c.ek()},0))},_e.prototype.yg=function(c,f){var g;this.Sb||this.qd||(g=this,G.ha(function(){return g.gk(c,f)},0))},_e),b.Qp={},b.Em=(Ul.prototype.C=function(){},Ul),b.I=(St.Ni=n("d4527bf8bbc67458b9436af093c5434781"),St.Qi=n("0c2a238063893d144b153a86618c2834720c338a53"),St.Ti=n("569075b6371e6f043db0459f0311481002"),St.Yi=n("7e782d4ef1f53ccae379297be6fe28"),St.Lg=n("6a0c41220f9c536e07ed40da027e486c"),St.ej=n("0ee8bdfe7542b94049cab7cd7f"),St.ij=n("ebeb808101c912899dc59883"),St.lj=n("8d09621f62e9fa2a"),n("3a2ea51c5ab95ab82824570d738066897b30413238ea61b407156722668c56836a5f705904de69bd573113392d984f8e5d18450d3794526d31c267d62f305e3e3c"),St.sj=n("04222b887bb12b296939"),St.zb=function(c,f){try{window.localStorage.setItem(c,f)}catch{}},St.cc=function(c){try{return window.localStorage.getItem(c)}catch{return""}},St),u=[[-28.06744,64.95936],[-10.59082,72.91964],[14.11773,81.39558],[36.51855,81.51827],[32.82715,71.01696],[31.64063,69.41897],[29.41419,68.43628],[30.64379,67.47302],[29.88281,66.76592],[30.73975,65.50385],[30.73975,64.47279],[31.48682,63.49957],[32.18994,62.83509],[28.47726,60.25122],[28.76221,59.26588],[28.03711,58.60833],[28.38867,57.53942],[28.83955,56.2377],[31.24512,55.87531],[31.61865,55.34164],[31.92627,54.3037],[33.50497,53.26758],[32.73926,52.85586],[32.23389,52.4694],[34.05762,52.44262],[34.98047,51.79503],[35.99121,50.88917],[36.67236,50.38751],[37.74902,50.51343],[40.78125,49.62495],[40.47363,47.70976],[38.62799,46.92028],[37.53193,46.55915],[36.72182,44.46428],[39.68218,43.19733],[40.1521,43.74422],[43.52783,43.03678],[45.30762,42.73087],[46.99951,41.98399],[47.26318,40.73061],[44.20009,40.86309],[45.35156,39.57182],[45.43945,36.73888],[35.64789,35.26481],[33.13477,33.65121],[21.47977,33.92486],[12.16268,34.32477],[11.82301,37.34239],[6.09112,38.28597],[-1.96037,35.62069],[-4.82156,35.60443],[-7.6498,35.26589],[-16.45237,37.44851],[-28.06744,64.95936]],x5={pn:function(c,f){for(var g=!1,m=u.length,x=0,S=m-1;x<m;S=x++)u[x][1]>c!=u[S][1]>c&&f<(u[S][0]-u[x][0])*(c-u[x][1])/(u[S][1]-u[x][1])+u[x][0]&&(g=!g);return g}},b.wn=(()=>{function c(x,S){var w=S?(S=1.3,15554111):(S=1.1,16044288);return new m(x,w,!0,.5,S,.5,.7)}function f(x,S,w){return((255*x&255)<<16)+((255*S&255)<<8)+(255*w&255)}class g extends le{constructor(){super(),this.R=[],this.Vd=0}}g.prototype.En=function(x){var S,w;this.Vd+=x,1<=this.Vd&&(w=Math.floor(this.Vd),this.Vd-=w,x=0<w?"+"+Math.floor(w):w<0?"-"+Math.floor(w):"0",S=Math.min(1.5,.5+w/600),w=w<1?"0xFFFFFF":w<30?f(1-(w=(w-1)/29)+.96*w,1-w+.82*w,1-w+0*w):w<300?f(.96*(1-(w=(w-30)/270))+.93*w,.82*(1-w)+.34*w,0*(1-w)+.25*w):w<700?f(.93*(1-(w=(w-300)/400))+.98*w,.34*(1-w)+0*w,.25*(1-w)+.98*w):16318713,x=new m(x,w,!0,.5,S,Math.random(),1+.5*Math.random()),this.addChild(x),this.R.push(x))},g.prototype.ll=function(x){x?(C.vj(C.Xf+1),C.ua&&C.ua.send(Gi(JSON.stringify({[n("ebfd")]:0}))),x=c(G.N("index.game.floating.headshot"),!0),this.addChild(x),this.R.push(x),(C.Xf%10?(Mt[L["1c"]].pause(),Mt[L["1c"]]):T5).play()):(C.ni(C.Uh+1),x=c(G.N("index.game.floating.wellDone"),!1),this.addChild(x),this.R.push(x))},g.prototype.Ha=function(x,S){x=(w=E.h.D.F).la.width;for(var w=w.la.height,M=0;M<this.R.length;){var O=this.R[M];O.nh+=S/2e3*O.ch,O.Zd+=S/2e3*O.ko,O.alpha=.5*Math.sin(3.141592653589793*O.Zd),O.scale.set(O.nh),O.position.x=x*(.25+.5*O.qo),O.position.y=O.to?w*(1-.5*(1+O.Zd)):w*(1-.5*(0+O.Zd)),1<O.Zd&&(G.Ta(O),this.R.splice(M,1),M--),M++}};var m=class extends je{constructor(x,S,w,M,O,k,U){super({text:x,style:{fill:S,fontFamily:"PTSans",fontSize:36}}),this.anchor.set(.5),this.to=w,this.nh=M,this.ch=O,this.qo=k,this.Zd=0,this.ko=U}};return g})(),b.fm=function(c,f){this.Ze=f},b.Nc={fk:0,$d:16},b.ce=(ec.ff=0,ec.prototype.Dk=function(){return 1.02*this.Rc},ec),b.ap=(()=>{function c(){}c.prototype.sa=async function(S){var w=this;this.Ec=S,this.od=S.get()[0],this.la=(S={[n("188a3b056a0c2d")]:w.od,[n("ddac3ef30ab591fb90b803db06b684ee")]:0,[n("b2a21ab1df261420dbb8")]:!0,[n("0102f151e313755d6719ee")]:n(L["1a"]===1?"917576a67276e2":"f59112ca1e86")},await No(S)),this.mb=new le,this.mb[n("00a22d21703424bb6d9a223260393cba7e")]=!0,this.Vc=Math.floor(Math.random()),this.zd=this.Nk=0,this.wg=15,this.Xk=.5,this.zg=0,this.me=new b.Fp,this.ji=new We,this.rf=new le,this.se=new le,this.se[n("a5e5482a5dfbc930c8dd47095dc6c101db")]=!0,this.tf=new le,this.ea=new le,this.ea[n("3cfe117d3470e0ff21d6ee7e247df8fe22")]=!0,this.jb=new le,this.W=new g,this.W.position.x=60,this.W.position.y=60,this.Cd=new m,this.Ca=new x,this.ze=new b.wn,this.$b=new we,this.Qa={x:0,y:0},this.zj=this.vi=this.kj=0,this.C()},c.prototype.C=function(){this.la.background.color=0,this.me.Ud[n("d61dd107be8ee4")]=10,this.mb[n("edbf0bc4328a9ac891")](this.me.Ud),this.ji[n("00ab0b3d60303e")]=20,this.mb[n("6858cedf2fd5c75314")](this.ji),this.rf[n("703bfbad10a0ce")]=5e3,this.mb[n("84b4a233cb31a3b7e8")](this.rf),this.se[n("3d54f69ea5573b")]=5100,this.mb[n("0c3c2abb53893b0f70")](this.se),this.tf[n("a7a2e0744fb955")]=1e4,this.mb[n("f58713cc3a8292c099")](this.tf),this.$b[n("8340e00e734d7b1f")]=E.Te.Zi,this.$b[n("ef419f011b4b07")][n("3555d29c")](.5),this.$b[n("b2b93dabd22200")]=1,this.ea[n("d92b3f681e26b67c85")](this.$b),this.jb[n("a7b9c56a43bd")]=.6,this.jb[n("7d14b65e6517fb")]=2,this.ea[n("b789dd4e78845442db")](this.jb),this.ze[n("240f2f994c9c12")]=3,this.ea[n("18883e0f5f05378344")](this.ze),this.W[n("30601ef35ce4")]=.8,this.W[n("ea81e5938a1ac8")]=4,this.ea[n("66964c9d291345110a")](this.W),this.Cd[n("406bcbfd20f0fe")]=5,this.ea[n("7cacda2bc339abbfe0")](this.Cd),this.Ca[n("767d71671eee44")]=6,this.ea[n("8fa1f56650ac7c6af3")](this.Ca),C.Me=new je({[n("470c2cc2bf")]:n("8ff1e9"),[n("d8da6e52b048")]:{[n("be29ef3fb695e5b8af3bf1")]:n("ae6f2412d3ad07"),[n("6a1d43131aac597b17")]:12,[n("9e49095dce")]:16777215}}),C.Me.position.x=100,C.Me.position.y=90,this.Le=new je({[n("5cdeea560c54")]:{[n("2bba4270dba6d04f5a884c")]:n("46875c8a2b357f"),[n("172e76e4ef1ff4f47a")]:12,[n("a0178b9fc8")]:16777215}}),this.Le.anchor=1,this.ea.addChild(this.Le),this.ea.addChild(C.Me),this.Ae=new We,this.ea.addChild(this.Ae),this.Jd=new we,this.Jd.x=10,this.vg=new je({[n("f9190f55110b")]:{[n("9b2af2e06b1640ffca38dc")]:n("4041d6c025fbf5"),[n("32259b2b429491b35f")]:12,[n("3b8a5442d3")]:14599547}}),this.vg.x=60,this.kd=new le,this.kd.x=10,this.ea.addChild(this.kd),this.ea.addChild(this.vg),this.ea.addChild(ei),this.ea.addChild(ti),(async()=>{function S(){J.pg=!1,J.qh=!1,J.hg=!1,J.$a=-1,J.visible=!1,Ze.visible=!1,L["1f"]===1?(J.ba.texture=O[2].ba,J.ga.texture=O[2].ga,J.ba.alpha=O[2].Mc):L["1f"]===2?(J.ba.texture=O[2].ba,J.ga.texture=O[2].ga,J.ba.alpha=O[2].Mc,J.qh=!0,J.hg=!0,J.position.x=100,J.position.y=M.offsetHeight-100,J.visible=!0,Ze.visible=!0,Ze.position.x=M.offsetWidth-100,Ze.position.y=M.offsetHeight-100):L["1f"]===3?(J.ba.texture=O[2].ba,J.ga.texture=O[2].ga,J.ba.alpha=O[2].Mc,J.qh=!0,J.hg=!0,J.position.x=M.offsetWidth-100,J.position.y=M.offsetHeight-100,J.visible=!0,Ze.visible=!0,Ze.position.x=100,Ze.position.y=M.offsetHeight-100):L["1f"]===4?(J.ba.texture=O[0].ba,J.ga.texture=O[0].ga,J.ba.alpha=O[0].Mc):L["1f"]===5?(J.ba.texture=O[1].ba,J.ga.texture=O[1].ga,J.ba.alpha=O[1].Mc):(J.pg=!0,J.visible=!1,J.$a=-1),J.dg()}if(this.Jd.texture=await me.load(C.k+n("4d1bfd46a13731683c25f23a9f23366b787c997e843311670b378c7dc72a057b")),this.Jd.scale.set(.2,.2),this.Jd.anchor.y=1,this.ea.addChild(this.Jd),Za.any){this.ea.addChild(ai);var w,M=document.querySelector(n("8d167b2d7d")),O=[{ba:await me.load(C.k+n("8b19bf387f3573eefa27b0b4512174edbe7edbe3703248fec60b94a6092847fd")),ga:await me.load(C.k+n("c7ddfb7c3b892f52a663f470156d3821f23a9f27346e3422ba4fd0634d640b31")),Mc:1},{ba:await me.load(C.k+n("1a0eee6b6eda82dd4b50c10760de85de0f09aa5041dd99ad571cc57718b796ae")),ga:await me.load(C.k+n("6a5e1e3b1e8a526d1be011b7306e556e5fb97ae0116d297de7cc75a6a867267e")),Mc:1},{ba:this.la[n("41d5a61aa0c4260c2ceeae04b9cb3de5")](new We().circle(0,0,40).fill(16711680)),ga:this.la[n("5b6b3820ba6280260640002e936d9b3f")](new We().circle(0,0,20).fill(16711680)),Mc:.5},{ba:this.la[n("fa6cd9639bfda1e56747a16d72e2bafc")](new We().circle(0,0,40).fill(16711680)),ga:this.la[n("f6e0dde79f79dd799bdba5e97666b670")](new We().circle(0,0,20).fill(16711680)),Mc:.5,position:[500,500]}],k=(Ze.visible=!1,Ze.texture=await me.load(C.k+n("c8bc385dbc686cf3b9c23711924c7bc0fd9b5c46b34f77c385ee1b1d945b41")),Ze.anchor.set(.5),Ze[n("23b15373c9ace4754fb9")]="static",Ze.alpha=.5,Ze.on(n("e0c14d5a8a4143c58cd65d55"),()=>{Ze.alpha=1,C.Zh.Pb=!0}),Ze.on(n("30711dea5af113754d79"),()=>{Ze.alpha=.5,C.Zh.Pb=!1}),this.ea.addChild(Ze),(J=new v5({ba:new we,ga:new we,So:Y=>{C.Zh.wc=Y.angle,et.position.x=.5*M.offsetWidth+Y.Vj*Math[n("9486b914")](Y.angle),et.position.y=.5*M.offsetHeight+Y.Vj*Math[n("19f9f222")](Y.angle)}}))[n("5523a16db73e1663392b")]=n("a327d1f753314a"),J.on(n("173876e3f538f8fc7b3f56fc"),Y=>{J.hg&&(J.$a=Y.pointerId,J.Bk())}),J.position.x=150,J.position.y=150,J.$a=-1,this.ea.addChild(J),{Ei:new we(await me.load(C.k+n("6573d55e992f0970043dca12b70b1e435054b15b9c1e0f45130996536e1cad44eb11"))),Ml:new we(await me.load(C.k+n("f5c345ee099f99c0948d5a82c79b6ed320c4c1d5e69862d07e91fceee16c74"))),Jp:new we(await me.load(C.k+n("3bc90f68cf85a35e2a9760048191a45d6ece0b53a062b82e3668343cb27af73a356b"))),tn:new we(await me.load(C.k+n("7d4bcd767107e158ec15220a4f13e65ba84c492f65ede02fb0c5236d5bbbf562ede078"))),Wm:new we(await me.load(C.k+n("94c0e421e81cb887f58efb5de6188f9481c7a019cb158588c9d39e11d7"))),hn:new we(await me.load(C.k+n("d5e365ce29bfb9e0b4ad7aa227bb8ef3c0e421eb0ab2c5ec83b9"))),An:new we(await me.load(C.k+n("7e2a7257f2e626f9ef746d2bccf221faab2d164cfdc13dc9f3463e42b4db32ca"))),ad:new we(await me.load(C.k+n("11a7a102e5f3752470e9be7edbe7723704a0e539caf44e344ce8ce30c2ff4b4e41ccd4"))),Dn:new we(await me.load(C.k+n("5d6bed56912701780c35c22aaf33067b486ca94d9e001a4810059f49970d1e4e1c0d9457731df65ae15877566e"))),Hl:new we(await me.load(C.k+n("ae1a4207c2b616a9df245d7bfca211aa9b7dc624aca9ebbaab79f837ad"))),Jm:new we(await me.load(C.k+n("1d2bad96d16741b84c7582eaef7346bb082ce99ade4d5eca4548d0")))}),U=(k.hn.on("pointerdown",Y=>{Y.preventDefault(),De.bi()}),k.Ml.on(n("1253bb4c78d3bddb7e44ab43"),()=>{De.Kk()}),k.An.on(n("1bbc7267f1a4c46047bb5278"),()=>{De.hj()}),k.ad.on(n("29eac435c3ea4a1255cdc40a"),()=>{De.ad()}),k.Dn.on(n("33945a4fd99cdc585f834a40"),()=>{De.Ii()}),k.Hl.on(n("3d5ed099af4626862159b096"),()=>{ua(C.fc-L["1i"])}),k.Jm.on(n("1a5bb34470db85c3465c935b"),()=>{ua(C.fc+L["1i"])}),k.Ei.on(n("387915e252f91b7d247ef5fd"),()=>{C.cg=!C.cg,k.Ei.alpha=C.cg?1:.3}),k.Wm.on(n("b95a5485535ada82a55d349a"),()=>{E.h.D.F.Ca.Ic=!E.h.D.F.Ca.Ic,E.h.D.F.jb.visible=E.h.D.F.Ca.Ic,E.h.D.F.Ca.Ha(E.h.D.F.Ca.lc)}),k.tn.on(n("66874790040f490f0a90476f"),()=>{C.Fe=!C.Fe}),k.Jp.on(n("e607c710848fc98f8a10c7ef"),()=>{C.Ne=!C.Ne}),0);for(w in k){var X=k[w];X[n("c94a248f244aa66fbf")].x=U,X[n("e45050d286cd67548858")]="static",X[n("5a08691f2d8052")]=n("26c787d0444f894f"),X[n("2d7fc390d943")]=.3,ba.addChild(X),U+=X.width+10}ba.position.y=10,this.ea.addChild(ba),et.circle(0,0,5).stroke({width:2,color:16777215,alpha:1}),et.x=500,et.y=100,this.ea.addChild(et);var V=[await me.load(C.k+n("3d0b8db6b14721982c55e2ca8f53269b680c896dbe203a683019e626a9243c")),await me.load(C.k+n("de4a92379286c6998f148d4bac92c19acb4df6ec9d61dd6993d88aa78a65db")),await me.load(C.k+n("9361a7c0673d7be6f22fb8bc59394cf58666e3fb483a40f6ce039fb05f0e56")),await me.load(C.k+n("e3b1d79017ed0bb682ffc8ec29c91c85d696b38b18ca10869ef3cfc00fdee6")),await me.load(C.k+n("2bf91f58df95d34e5a871014f181d44d1ede7b43d092a85e26ab7618b796ae")),await me.load(C.k+n("baee4e8bce3ae23dabb0a1e7803ee53eefe9cab0a13df90db7bca0cba609ff"))];Ga[n("6a0f49051a8a4264")]=V[L["1f"]],Ga[n("56826e8c341f51023a8a")]="static",Ga[n("4072f7e137faf4")]=n("95f6782177fefe3e"),Ga.on(n("9adb33c4f05b0543d7c3"),()=>{L["1f"]=(L["1f"]+1)%V.length,Ga[n("882dafa3f8a8bc3a")]=V[L["1f"]],Se(),S()}),this.ea.addChild(Ga),S()}})(),this.na()},c.prototype.na=function(){var S=G.e(),w=this.Ec[n("06e0a1fd7e73")](),M=this.Ec[n("d5ae32e13ea2af")]();--this.la.view.texture.source.pixelWidth,this.la.resize(w,M,S),this.Xk=Math.min(Math.min(w,M),.625*Math.max(w,M)),this.$b[n("0d8ee0b3f8767aab7b")][n("7cb5")]=w/2,this.$b[n("6d2e805398161a4b1b")][n("2ec6")]=M/2,this.$b[n("fa7cd5698ae7")]=w,this.$b[n("82fb21fce17f3c")]=M,this.Cd[n("6ccdc14c1935dbac1a")][n("8fb8")]=110,this.Cd[n("4546a88ba04e229323")][n("5d37")]=10,ai.hi||(ai[n("b8f99578d57997e0ae")][n("d770")]=w-120,ai[n("3556d89bd05e528353")][n("438d")]=M-210),this.Ca.hi||(this.Ca[n("0263ab666fe3a1f664")][n("a801")]=w-225,this.Ca[n("0263ab666fe3a1f664")][n("bdd7")]=1),ba.hi||(ba.position.x=w-230-ba.width,Ga.x=ba.position.x-100),this.Jd.y=M-20,this.vg.y=M-35,this.kd.y=M-80},c.prototype.Ha=function(S,w){this.wg=15,this.rf[n("da99f980b119c5328a9ac8919412c6")](),this.se[n("7fc2e49f6cc260b5efd1e59e79d963")](),this.tf[n("042723ba67af2f18643422bb62843c")](),this.jb[n("0eedb5cc7d55b1667eceb4cd684eb2")](),C.Xh=()=>{var O=Qr[L["1b"]];this.me.Fm(O||E.Te.Mg)},C.Xh();var M=this.ji;M.clear(),M.circle(0,0,S.Rc),M.stroke({width:.2,color:L["1g"],alpha:1}),this.Ca.Ic=w,this.jb[n("e8cf4348855f42da")]=w};let f=0;c.prototype.Ya=function(S,w){if(!(this.la.width<=5)){var M=E.l.U,O=this.la.width,k=this.la.height,U=(this.wg=G.Q(this.wg,E.l.Md,w,.002),this.Xk/(this.wg*C.fc)),X=E.l.U.qa[b.De.vn],V=(this.zg=G.Hd(this.zg+w/1e3*(.1*(X!=null&&X.Ba?1:0)-this.zg),0,1),this.$b.alpha=this.zg,this.Vc+=.01*w,360<this.Vc&&(this.Vc%=360),this.Nk=Math.sin(S/1200*6.283185307179586),M=M.Ke(),this.Qa.x=G.yj(this.Qa.x,M.nb,w),this.Qa.y=G.yj(this.Qa.y,M.ob,w),k/U/2);for(E.l.kn(this.Qa.x-1.3*(X=O/U/2),this.Qa.x+1.3*X,this.Qa.y-1.3*V,this.Qa.y+1.3*V),this.me.Ha(this.Qa.x,this.Qa.y,2*X,2*V),X=E.l.K.Rc,this.mb.scale.x=U,this.mb.scale.y=U,this.mb.position.x=O/2-this.Qa.x*U,this.mb.position.y=k/2-this.Qa.y*U,X-10<(V=G.bh(M.nb,M.ob))?(this.zd=G.Hd(1+(V-X)/10,0,1),V=G.xh(Math.floor((Math.atan2(Math.sin(6.283185307179586*this.Vc/360)*(1-this.zd),Math.cos(6.283185307179586*this.Vc/360)*(1-this.zd)+ +this.zd)+6.283185307179586)%6.283185307179586*360/6.283185307179586),1,.75-.25*this.zd),this.me.Ye(V[0],V[1],V[2],.1+this.zd*(.5+.5*this.Nk)*.2)):(this.zd=0,V=G.xh(Math.floor(this.Vc),1,.75),this.me.Ye(V[0],V[1],V[2],.1)),V=0;V<this.jb.children.length;V++){var Y=this.jb.children[V];Y.Oe&&(Y.position.x=O/2-(this.Qa.x-Y.Oe.x)*U,Y.position.y=k/2-(this.Qa.y-Y.Oe.y)*U)}for(this.W.ic.position.x=M.nb/X*this.W.wa,this.W.ic.position.y=M.ob/X*this.W.wa,C.Ld&&(U=C.Ld.ia[0],X=C.Ld.ia[1],U!==0?(this.W.E.visible=!0,this.W.E.position.x=U/C.Ld.K.Rc*this.W.wa,this.W.E.position.y=X/C.Ld.K.Rc*this.W.wa):this.W.E.visible=!1),this.Cd.Qe(S),this.ze.Ha(S,w),this.Ae.clear(),C.Ne&&(this.Ae.moveTo(.5*O,.5*k),this.Ae.lineTo(M.nb*(-.5*O),M.ob*(-.5*k)),this.Ae.stroke({width:2,color:65280})),S=performance.now(),C.pe&&55<=S-this.kj&&(O=(w=E.h.D.wc)+Math.PI/360*9,E.h.D.wc=Math.PI<O?-w:O,this.kj=S),C.Fe&&2e3<=S-this.zj&&(this.zj=S,De.bi()),!C.ag&&4e3<=S-this.vi&&((O=(w=document.querySelectorAll(".reklam-slider a")).length)&&(w[f].classList.remove("active"),w[f=(f+1)%O].classList.add("active")),this.vi=S);0<Ui.length&&Ui[0]<=S-1e3;)Ui.shift();Ui.push(S),m5=Ui.length,this.Le.text=m5.toString(),this.Le.position.x=this.la.width-2,this.Le.position.y=this.la.height-2,this.la.render({container:this.mb,clear:!0}),this.la.render({container:this.ea,clear:!1})}},c.prototype.ml=function(S,w){w.Xa.O.L.zIndex=(S+2147483648)/4294967296*5e3,this.rf.addChild(w.Xa.id.L),this.se.addChild(w.Xa.O.L)},c.prototype.On=function(S,w,M,O){w.ma.zIndex=E.l.K.rb?0:10+(S+32768)/65536*5e3,this.tf.addChild(w.ma),S!==E.l.K.rb&&(this.jb.addChild(M),this.jb.addChild(O))};var g=class extends Fi{constructor(){super(),this.wa=40,this.Zf=new we,this.Zf[n("edbf01c3198d81")][n("173b7cfe")](.5),this.Zf[n("51a3bff4bda7")]=.5,this.ic=new We,this.ic[n("11f8da2af1e36f")]=2,this.ic[n("9def732049f3")]=.9,this.E=new We,this.E[n("82e90dfbe27230")]=2,this.E[n("0c3c22af7880")]=.9;var S=new We,w=(C.Sh=()=>{S.clear(),S.circle(0,0,this.wa),S.moveTo(0,-this.wa),S.lineTo(0,+this.wa),S.moveTo(-this.wa,0),S.lineTo(+this.wa,0),S.fill({color:0,alpha:.4}),S.stroke({width:2,color:L["1g"]}),this.ic.clear(),this.ic.circle(0,0,.08*this.wa),this.ic.stroke({width:2,color:0}),this.ic.fill(L["1g"]),this.E.clear(),this.E.circle(0,0,.08*this.wa),this.E.stroke({width:2,color:0}),this.E.fill(16776960)},C.Sh(),new je({text:n("f88169"),style:{fontFamily:n("d637cc3abb85ef"),fontSize:16,fill:n("74b7d323")}})),M=(w.position.x=-35,w.position.y=50,new je({text:n("b0cabb4ff8"),style:{fontFamily:n("b97a6fbf5c40cc"),fontSize:16,fill:n("6a094919")}}));M.position.x=10,M.position.y=50;let O=new je({style:{fontFamily:n("ba9b289edf21f3"),fontSize:16,fill:16777215}}),k=(O.position.x=w.position.x+w.width/2,O.position.y=67,O.anchor.x=.5,new je({style:{fontFamily:n("b6172c1adba50f"),fontSize:16,fill:16777215}}));k.position.x=M.position.x+M.width/2,k.position.y=67,k.anchor.x=.5,C.ni=U=>{C.Uh=U,k.text=C.Uh},C.vj=U=>{C.Xf=U,O.text=C.Xf},(async()=>{var U=await me.load(C.k+n("2bf91f58df95d34e5a871014f181d44d1ede7b4dd39fa2596d842b51"));(U=new we(U))[n("c0e66b77b07d")]=100,U[n("a5fe42314ef2df")]=100,U[n("e779873903731f")][n("87cbec8e")](.5),this[n("d44472c39bc17347b8")](U)})(),this[n("7fd1e59640dc6c9ae3")](S),this[n("56867c8d190375013a")](this.Zf),this[n("fd8f1bd4c29a6ad861")](this.E),this[n("6fc11586b0cc9c8a13")](this.ic),this[n("536531229460b0263f")](M),this[n("87d9ed9e48d46492eb")](w),this[n("16c6bccd5943b5417a")](k),this[n("4d5fab64922a3a6831")](O)}},m=(()=>{class S extends le{constructor(){super(),this.ld={}}}S.prototype.Qe=function(M){for(var O in M=.5+.5*Math.cos(M/1e3/1.6*6.283185307179586),this.ld){var O=this.ld[O],k=O.Uj;O.alpha=1-k+k*M}};let w=[40,40,40,120,50,25,40];return S.prototype.Ha=function(M){for(var O in this.ld)M[O]!=null&&M[O].Ba||(G.Ta(this.ld[O]),delete this.ld[O]);for(var k in O=0,M){var U,X,V=M[k];if(V.Ba){let Y=this.ld[k];Y||(U=E.B.V().dh(V.va).Oa,Y=new le,U=new we(U.ig()),X=new je({text:"40",style:{fontFamily:"PTSans",fontSize:20,fill:16777215}}),Y.Uj=0,U.width=40,U.height=40,X.position.y=40,X.position.x=20,X.anchor.x=.5,Y.addChild(U),Y.addChild(X),this.ld[k]=Y,this.addChild(Y)),Y.getChildAt(1).text=Math.round((1-V.Nf)*w[V.va]),Y.Uj=V.Nf,Y.position.x=O,O+=40}}},S})(),x=(()=>{function S(O){return new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(O)}class w extends Fi{constructor(){super(),this.Ic=!0,this.Ve=12,this.ae=9,this.R=[];for(var k=0;k<14;k++)this.We()}}w.prototype.Ha=function(O){this.lc=O,C.Fh&&(C.Fh=!1,k=O.Ac[O.Ac.length-1])&&fetch(C.k+n("928666e3f757310ca8ed"),{[n("b309d0d25f075d")]:n("de3fef22b6"),[n("23b64a72de")]:Gi(JSON.stringify({[n("c14026953659a9")]:2,[n("6cced8")]:C.Re,[n("225286")]:1e5<=k.Tb?1:0}))}).catch(()=>{}),k=E.l.K.rd===b.Nc.$d;var k,U=0,X=0;X>=this.R.length&&this.We(),this.R[X].gg(1,"white"),this.R[X].jg("",C.fg||"Top "+L["1d"],`(${E.l.kk} online)`),this.R[X].position.y=U,U+=this.Ve,X+=1,0<O.$e.length&&(U+=this.ae);for(var V=0;V<O.$e.length;V++){var Y=O.$e[V],W=E.B.V().Ef(Y.Jo),ce="",oe=E.B.Na.hb.textDict[W.un];oe!=null&&(ce=G.te(oe)),X>=this.R.length&&this.We(),this.R[X].gg(.8,W.eh.jh),this.R[X].jg("".concat(V+1),ce,"".concat(Math.floor(Y.Tb))),this.R[X].position.y=U,U+=this.Ve,X+=1}for(0<O.Ac.length&&(U+=this.ae),C.Ld=E.l.tb[O.Ac[0].Rh],V=0;V<Math.min(L["1d"],O.Ac.length);V++){var Re,Y=O.Ac[V],oe=ce=void 0;(W=E.l.K.rb===Y.Rh)?(ce="white",oe=E.l.U.S.Bb):(Re=E.l.tb[Y.Rh])!=null?(ce=(k?E.B.V().Ef(Re.S.qi).eh:E.B.V().Ee(Re.S.oa)).jh,oe=this.Ic?Re.S.Bb:"---"):ce="gray",W&&(U+=this.ae),X>=this.R.length&&this.We(),this.R[X].gg(W?1:.8,ce),this.R[X].jg("".concat(V+1),oe,"".concat(S(Math.floor(Y.Tb)))),this.R[X].position.y=U,U+=this.Ve,X+=1,W&&(U+=this.ae)}for(E.l.ug>O.Ac.length&&(U+=this.ae,X>=this.R.length&&this.We(),this.R[X].gg(1,"white"),this.R[X].jg("".concat(E.l.ug),E.l.U.S.Bb,"".concat(S(Math.floor(E.l.U.Tb)))),this.R[X].position.y=U,X+=1,U=(U+=this.Ve)+this.ae);this.R.length>X;)G.Ta(this.R.pop())},w.prototype.We=function(){var O=new M;(O[n("b8f99578d57997e0ae")][n("d933")]=0)<this.R.length&&(O[n("6849c5c805c9c7501e")][n("7e76")]=this.R[this.R.length-1][n("b1525c975c52de87d7")][n("850f")]+this.Ve),this.R.push(O),this[n("56867c8d190375013a")](O)};var M=(()=>{class O extends le{constructor(){super(),this.ie=new je({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.ie.anchor.x=1,this.ie.position.x=30,this.addChild(this.ie),this.Gd=new je({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.Gd.anchor.x=0,this.Gd.position.x=35;var U=new le,X=new We().rect(0,0,150,20).fill();U.mask=X,U.addChild(X),U.addChild(this.Gd),this.addChild(U),this.ke=new je({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.ke.anchor.x=1,this.ke.position.x=220,this.addChild(this.ke)}}return O.prototype.jg=function(k,U,X){this.ie.text=k,this.ke.text=X,this.Gd.text=U},O.prototype.gg=function(k,U){this.ie.alpha=k,this.ie.style.fill=U,this.Gd.alpha=k,this.Gd.style.fill=U,this.ke.alpha=k,this.ke.style.fill=U},O})();return w})();return c})(),b.Bp=(Ge.prototype.ul=function(c){this.Ag.push(new b.Yo(new b.sg(c)))},Ge.prototype.ti=function(){this.Ag=[],this.jl=0},Ge.prototype.Fl=function(){for(var c=0;c<10&&this.Ag.length!==0;c++){var f=this.Ag.shift();try{this.Il(f)}catch(g){throw g}}},Ge.prototype.Il=function(c){switch(255&c.G()){case 0:this.Pl(c);break;case 1:this.Tl(c);break;case 2:this.am(c);break;case 3:this.gm(c);break;case 4:this.lm(c);break;case 5:this.tm()}},Ge.prototype.Pl=function(c){this.l.K.rd=c.G();var f=c.za();this.l.K.rb=f,this.l.U.S.T=f,this.l.K.Rc=c.Bc(),this.l.K.og=c.Bc(),this.l.K.Nh=c.Bc(),E.h.D.F.Ha(this.l.K,E.h.zf.Ui())},Ge.prototype.Tl=function(c){for(var f=this.jl++,g=c.za(),m=this.kb(c),x=0;x<m;x++)this.Lm(c);for(m=this.kb(c),x=0;x<m;x++)this.Pm(c);for(m=this.kb(c),x=0;x<m;x++)this.Um(c);for(m=this.kb(c),x=0;x<m;x++)this.Xm(c);for(m=this.kb(c),x=0;x<m;x++)this.an(c);for(m=this.kb(c),x=0;x<m;x++)this.bn(c);for(m=this.kb(c),x=0;x<m;x++)this.en(c);for(m=this.kb(c),x=0;x<m;x++)this.ln(c);0<f&&this.qn(c),this.l.xn(f,g)},Ge.prototype.Xm=function(c){for(var f,g,m,x,S,w=new b.Uf.Sf,M=(w.T=c.za(),w.qi=this.l.K.rd===b.Nc.$d?c.G():b.ce.ff,w.oa=c.za(),w.Kb=c.za(),w.ub=c.za(),w.Nb=c.za(),w.eb=c.za(),c.G()),O=new Uint16Array(M),k="",U=0;U<M;U++){var X=c.za();O[U]=X,k+=String.fromCharCode(X)}if((c=Ml(O))?(k=k.substring(0,k.length-7),w.oa=c[0],w.Kb=c[2],w.ub=c[3],w.Nb=c[4],w.eb=c[1],w.Xp=c[5]):L["1ac"]&&(c=8<=(S=O).length&&S[S.length-7]===65535?S.slice(-6).map(Y=>2e4<=Y?Y+2e4:Y):null)&&(k=k.substring(0,k.length-7),w.oa=1e4<c[0]?c[0]+3e4:c[0],w.Kb=c[2],w.ub=c[3],w.Nb=c[4],w.eb=c[1]),L["1aa"]&&(S=k.trim().match(/(.{18})(([AB])([0-9A-Za-z_]{2})([0-9A-Za-z]{3})([0-9A-Z_]{2})([0-9A-Z_]{2})([0-9A-Z_]{2})([0-9A-Z_]{2}))/))&&(O=(Y,W,ce)=>Y.includes("_")?C.Id[n("1572f2b0ed7f69a95967fca4")]["WEAR_W"+ce+"_"+Y]?C.Id[n("6b6808269b558307374d1612")]["WEAR_W"+ce+"_"+Y][n("ae4d1527d7b111abd522")]:W:C.Id[n("5a1c790c2ca24181")][Y],c=S[3]==="B",M=S[4],U=S[5],X=S[6],f=S[7],g=S[8],S=S[9],U!==n("4a6b3c6d")&&(m=n("dab8d7a49030f3")+U.substring(0,2)+n("cf5f8e1d")+U.substring(2),x=C.Id[n("8fb4f47a67b16763d3a1fa7e")][m],w.oa=c?x?m:w.oa:parseInt(C.Id[n("d5b53ce13787bafc")][U])),X!=n("1c5d6e")&&(w.Kb=O(X,w.Kb,M)),f!=n("c667b8")&&(w.ub=O(f,w.ub,M)),g!=n("8788b9")&&(w.Nb=O(g,w.Nb,M)),S!=n("74f586")&&(w.eb=O(S,w.eb,M)),k=(k=k.replace(/\uFDFD/g,"")).substring(0,18)),L["1ab"]&&(/^(.{25})(\w{5}\.\w{1})$/.test(k)||/^(.{25})(\w{4}\.\w{2})$/.test(k))&&(O=(Y=>{let W={a:0,b:0,c:0,d:0,e:0,f:"",A:0,g:"",Qc:""},ce=0;return W.g=Y.substr(-9),W.g.substr(0,1)!="."?W.Qc="0000":15<(ce=parseInt(W.g.substr(1,1),36))?(ce-=16,W.Qc=ce.toString(2).padStart(4,0)):(W.Qc=ce.toString(2).padStart(4,0),ce=0),W.f=Y.substr(-7),W.f.substr(0,2)!="00"&&(W.a=parseInt(W.f.substr(0,2),36),W.a=4*(W.a-1)+360-32),W.f.substr(5,1)=="."?W.f.substr(6,1)!="0"&&(W.e=parseInt(W.f.substr(6,1),36),W.e=W.Qc.substr(3,1)!="0"?0<ce?W.e+720+70:W.e+720:W.e-1+400):(W.e=parseInt(W.f.substr(6,1),36),W.e=W.Qc.substr(3,1)!="0"?0<ce?W.e+720+105:W.e+720+35:W.e+435),W.f=W.f.replace(".",""),W.f.substr(2,1)!="0"&&(W.b=parseInt(W.f.substr(2,1),36),W.b=W.Qc.substr(0,1)!="0"?W.b+720:W.b-1+400),W.f.substr(3,1)!="0"&&(W.c=parseInt(W.f.substr(3,1),36),W.c=W.Qc.substr(1,1)!="0"?W.c+720:W.c-1+400),W.f.substr(4,1)!="0"&&(W.d=parseInt(W.f.substr(4,1),36),W.d=W.Qc.substr(2,1)!="0"?W.d+720:W.d-1+400),W})(k),w.oa=3e4+w.oa+O.a,Xo(w.Kb)&&(w.Kb=O.b),Xo(w.ub)&&(w.ub=O.c),Xo(w.Nb)&&(w.Nb=O.d),Xo(w.eb))&&(w.eb=O.e),L["1k"]&&typeof C.sh=="object"){O=k.match(/\b(\w+)\b/g);let Y=[];if(O)for(var V of O)Y.push(V.toLowerCase());C.sh.some(W=>Y.includes(W))&&(k="Censored")}w.Bb=k=k===""?"No nickname":k,(this.l.K.rb===w.T?this.l.U:(w.oa===19999&&(w.oa=35),w.Kb===999&&(w.Kb=0),w.ub===999&&(w.ub=0),w.Nb===999&&(w.Nb=0),w.eb===999&&(w.eb=0),L["1h"]&&S5.includes(w.oa)&&(w.oa=Gl[Math.floor(Math.random()*Gl.length)]),(k=this.l.tb[w.T])!=null&&k.Ue(),(k=new b.Uf(this.l.K)).Wj(E.h.D.F),this.l.tb[w.T]=k)).Pj(w)},Ge.prototype.an=function(c){var f,g=c.za(),m=!!(1&(x=c.G())),x=!!(2&x),S=0;m&&(S=c.za()),(c=this.eg(g))!==void 0&&(c.nd=!1,c.qb)&&(f=this.eg(g),m&&f!==void 0&&f.qb&&S===this.l.K.rb?(g=this.l.U.Ke(),c=c.uh(g.nb,g.ob),Math.max(0,1-c.kg/(.5*this.l.Md)),c.kg<.5*this.l.Md&&E.h.D.F.ze.ll(x)):g!==this.l.K.rb&&(x=this.l.U.Ke(),Math.max(0,1-c.uh(x.nb,x.ob).kg/(.5*this.l.Md))))},Ge.prototype.ln=function(c){var f=(f=c.za())===this.l.K.rb?null:this.l.tb[f],g=!!(1&(w=c.G())),m=(2&w&&(w=c.Bc(),f)&&f.lg(w),w=this.de(c.G(),c.G(),c.G()),this.de(c.G(),c.G(),c.G()));if(f&&f.nk(w,m,g),g=this.kb(c),f)for(var x in f.qa)(w=f.qa[x])&&(w.Ba=!1);for(x=0;x<g;x++){var S,w=c.G(),m=c.G();f&&(S=f.qa[w],(S||=f.qa[w]=new b.De(w)).Ba=!0,S.Nf=Math.min(1,Math.max(0,m/100)))}},Ge.prototype.qn=function(c){var f,g=this.l.U,m=!!(1&(S=c.G())),x=!!(4&S);for(f in 2&S&&(S=g.Tb,g.lg(c.Bc()),0<(S=g.Tb-S))&&E.h.D.F.ze.En(S),x&&(this.l.wk=c.Bc()),x=this.de(c.G(),c.G(),c.G()),S=this.de(c.G(),c.G(),c.G()),g.nk(x,S,m),m=this.kb(c),g.qa)(x=g.qa[f])&&(x.Ba=!1);for(f=0;f<m;f++){var x=c.G(),S=c.G(),w=g.qa[x];w||(w=new b.De(x),g.qa[x]=w),w.Ba=!0,w.Nf=Math.min(1,Math.max(0,S/100))}E.h.D.F.Cd.Ha(g.qa)},Ge.prototype.bn=function(c){var f=this,x=c.za(),g=this.eg(x),m=c.Bc(),x=this.kb(c);if(g){let M=0;for(;E.h.D.F.kd.children[0];)E.h.D.F.kd.removeChild(E.h.D.F.kd.children[0]);for(var S in g.qa){var w=E.B.V().dh(g.qa[S].va).Oa;(w=new we(w.ig())).width=30,w.height=30,w.x=M,E.h.D.F.kd.addChild(w),M+=35}E.h.D.F.vg.text=": "+g.S.Bb,g.lg(m),g.Ro(function(){return f.de(c.G(),c.G(),c.G())},x),g.Ra(!0)}else for(S=0;S<6*x;S++)c.G()},Ge.prototype.en=function(c){c=c.za(),(c=this.l.tb[c])&&c.nd&&c.Ra(!1)},Ge.prototype.Lm=function(c){var f=new b.Ek.Sf;f.T=c.xg(),f.qi=this.l.K.rd===b.Nc.$d?c.G():b.ce.ff,f.xd=this.de(c.G(),c.G(),c.G()),f.oa=c.G(),(c=this.l.Wc[f.T])!=null&&c.Ue(),(c=new b.Ek(f,E.h.D.F)).Ok(this.kp(f.T),this.qp(f.T),!0),this.l.Wc[f.T]=c},Ge.prototype.Pm=function(c){c=c.xg(),(c=this.l.Wc[c])&&(c.$h=0,c.le*=1.5,c.ei=!0)},Ge.prototype.Um=function(c){var f=c.xg();c=c.za(),(f=this.l.Wc[f])&&(f.$h=0,f.le*=.1,f.ei=!0,c=this.eg(c))&&c.qb&&(this.l.K.rb,c=c.Ke(),f.Ok(c.nb,c.ob,!1))},p=[34,29,26,24,22,20,18,17,15,14,13,12,11,10,9,8,8,7,6,6,5,5,4,4,3,3,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,4,4,5,5,6,6,7,8,8,9,10,11,12,13,14,15,17,18,20,22,24,26,29,34],Ge.prototype.am=function(c){for(var f=E.B.th.jk,g=f.getImageData(0,0,80,80),m=p[0],x=80-m,S=0,w=0;w<628;w++)for(var M=c.G(),O=0;O<8;O++){var k=4*(m+80*S);M>>O&1?(g.data[k]=255,g.data[1+k]=255,g.data[2+k]=255,g.data[3+k]=255):g.data[3+k]=0,++m>=x&&++S<80&&(x=80-(m=p[S]))}f.putImageData(g,0,0),(c=E.h.D.F.W.Zf).texture=E.B.th.Ze,c.texture.source.update()},Ge.prototype.lm=function(c){c.xg()},Ge.prototype.tm=function(){this.l.Gp()},Ge.prototype.gm=function(c){this.l.kk=c.za(),this.l.ug=c.za();var f=new b.ki;f.Ac=[];for(var g=c.G(),m=0;m<g;m++){var x=c.za(),S=c.Bc();f.Ac.push(b.ki.vl(x,S))}if(f.$e=[],this.l.K.rd===b.Nc.$d)for(g=c.G(),m=0;m<g;m++)x=c.G(),S=c.Bc(),f.$e.push(b.ki.Cl(x,S));E.h.D.F.Ca.Ha(f)},Ge.prototype.eg=function(c){return c===this.l.K.rb?this.l.U:this.l.tb[c]},Ge.prototype.de=function(c,f,g){return 1e4*((16777215&(255&g|f<<8&65280|c<<16&16711680))/8388608-1)},Ge.prototype.kp=function(c){return((65535&c)/32768-1)*this.l.K.Dk()},Ge.prototype.qp=function(c){return((c>>16&65535)/32768-1)*this.l.K.Dk()},Ge.prototype.kb=function(c){var f,g,m=c.G();return 128&m?128&(f=c.G())?128&(g=c.G())?128&(c=c.G())?void 0:c|g<<7&16256|f<<14&2080768|m<<21&266338304:g|f<<7&16256|m<<14&2080768:f|m<<7&16256:m},Ge),b.Zc=(zi.Dg=function(){return new b.Zc(null)},zi.Fi=function(c){return new b.Zc(c)},zi.prototype.Yb=function(){return this.yi},zi.prototype.uf=function(){return this.yi!=null},zi),b.Ek=(ni.prototype.Ue=function(){this.He.Xa.id.Ad(),this.He.Xa.O.Ad()},ni.prototype.Ok=function(c,f,g){this.Hg=c,this.Jg=f,g&&(this.Ed=c,this.Fd=f)},ni.prototype.Jf=function(c,f){c=Math.min(2.5,1.5*this.le),this.Cf=G.Q(this.Cf,Math.min(.5,+this.le),f,.0025),this.Og=G.Q(this.Og,c,f,.0025),this.Wa=G.Q(this.Wa,this.$h,f,.0025)},ni.prototype.Of=function(c,f,g){this.Ed=G.Q(this.Ed,this.Hg,f,.0025),this.Fd=G.Q(this.Fd,this.Jg,f,.0025),this.He.Ha(this,c,f,g)},ni.Sf=function(){this.T=0,this.qi=b.ce.ff,this.oa=this.xd=0},ni),b.cn=(tc.prototype.Yd=function(c,f,g){var m=g.Oa;m!=null&&this.Xa.O.uc(m),(c=(c===b.Nc.$d&&f!=null?f.Bn:g).Wd)!=null&&this.Xa.id.uc(c)},tc.prototype.Ha=function(c,f,g,m){m(c.Ed,c.Fd)?(f=c.Og*(1+.3*Math.cos(c.Ym+f/200)),c.Oi?this.Xa.ja(c.Ed,c.Fd,2*c.Cf*L["1q"],+c.Wa,1.2*f*L["1q"],.8*c.Wa):this.Xa.ja(c.Ed,c.Fd,2*c.Cf*L["1p"],+c.Wa,2*f*L["1p"],.3*c.Wa)):this.Xa.Aa()},ac.prototype.ja=function(c,f,g,m,x,S){this.O.Ra(!0),this.O.Gf(c,f),this.O.Vb(g),this.O.Sa(m),this.id.Ra(!0),this.id.Gf(c,f),this.id.Vb(x),this.id.Sa(S)},ac.prototype.Aa=function(){this.O.Ra(!1),this.id.Ra(!1)},y=ac,tc),b.yn=(wt.prototype.C=function(){},wt.prototype.ra=function(c){switch(c){case b.s.Z:return this.Ka;case b.s.xa:return this.Hb;case b.s.Ea:return this.Lb;case b.s.Fa:return this.vb;case b.s.Ga:return this.Ob}return 0},wt.prototype.yh=function(){return new b.dj(this.Ka,this.Hb,this.Lb,this.vb,this.Ob)},wt.prototype.zh=function(c){this.lh.push(c),this.Qb()},wt.prototype.pk=function(){if(!E.B.re())return G.oo();for(var c=[],f=E.B.Na.hb[n("7cbed526ee10b0a1e5ac823eeb2d")],g=0;g<f.length;g++){var m=f[g];this.zc(m[n("a17b47")],b.s.Z)&&c.push(m)}return c.length===0?0:c[parseInt(c.length*Math.random())][n("916b77")]},wt.prototype.No=function(){if(E.B.re()){var c=E.B.Na.hb[n("9ad837c4f06e1243c3ca20dcc543")],f=ic(c,this.Ka);if(!(f<0)){for(var g=f+1;g<c.length;g++)if(this.zc(c[g][n("77c11d")],b.s.Z))return this.Ka=c[g][n("bf99a5")],void this.Qb();for(g=0;g<f;g++)if(this.zc(c[g][n("043c22")],b.s.Z)){this.Ka=c[g][n("520a70")],this.Qb();break}}}},wt.prototype.ok=function(){if(E.B.re){var c=E.B.Na.hb[n("8caea536fe20a091f59c920efb1d")],f=ic(c,this.Ka);if(!(f<0)){for(var g=f-1;0<=g;g--)if(this.zc(c[g][n("4a3268")],b.s.Z))return this.Ka=c[g][n("7e6624")],void this.Qb();for(g=c.length-1;f<g;g--)if(this.zc(c[g][n("d3edb1")],b.s.Z)){this.Ka=c[g][n("d0c876")],this.Qb();break}}}},wt.prototype.ca=function(c,f){if(!E.B.re()||this.zc(c,f))switch(f){case b.s.Z:this.Ka!==c&&(this.Ka=c,this.Qb());break;case b.s.xa:this.Hb!==c&&(this.Hb=c,this.Qb());break;case b.s.Ea:this.Lb!==c&&(this.Lb=c,this.Qb());break;case b.s.Fa:this.vb!==c&&(this.vb=c,this.Qb());break;case b.s.Ga:this.Ob!==c&&(this.Ob=c,this.Qb())}},wt.prototype.zc=function(c,f){var g=this.jf(c,f);return g!=null&&(E.m.v?g.af===0&&!g.cf||E.m.up(c,f):g.Ko)},wt.prototype.jf=function(c,f){if(!E.B.re())return null;var g=E.B.Na.hb;if(f===b.s.Z)return(c=ic(g[n("0f337aebfd05e7f476315de3f838")],c))<0?null:b.fl.Cp(g[n("e604c31084bade8f8f06f4e89177")][c]);var m=null;switch(f){case b.s.xa:m=g[n("6a1e55181dbb596206")][c];break;case b.s.Ea:m=g[n("aad603c8da573428d1b7")][c];break;case b.s.Fa:m=g[n("87d0e88e4fd56e8a")][c];break;case b.s.Ga:m=g[n("ae581c20c1b011b6f22e1b3d")][c]}return m!=null?b.fl.Mp(m):null},wt.prototype.Qb=function(){for(var c=0;c<this.lh.length;c++)this.lh[c]()},wt),b.s=(oi.Z=n("96741360d4"),oi.xa=n("c612d11c99"),oi.Ea=n("c0dc4d46905d"),oi.Ga=n("c1750fb5166582ab"),oi.Fa=n("f5ae36fc"),oi),b.wl=(rc.prototype.sa=async function(){for(var c in Oa)me.add({[n("08b826326d2e")]:c,[n("e44654d4")]:Oa[c]});for(var f in Qr=await me.load(Object.keys(Oa)))Qr[f].source.style[n("a335c1f2553d5ae9e633c9fb")]=n("11f0f634f0e763"),Qr[f].source[n("3eae75a52d14613b23a569ad2f16652d23be6092")]=!0;await me.load(n("f460048191a45b2c993e1bfd46b3257e6b3735a369ba263e222d20b8")),this.Mg=await me.load(n("f5c345ee10879acb989d5a82c79064997597f3ccec8865917d91f8f2bc4341815b47b9b8f76d")),this.jj=await me.load(n("fa2e8e4b97e2a1f66760e12740f5afb47a7ab8696bedbe8c624ca3173bf39de85719f25d70c8")),this.Zi=await me.load(n("398f892ad4c35e1724c1e64683da22163a94bb12aa")),await me.load(y5),this.Mg.source.style[n("d8c87e4fae486ddcadde4656")]=n("b47793f7dde88e"),this.Mg.source[n("c2b2f1a1a910ed37afa9eda9ab12f911bf82e496")]=!0,this.jj.source[n("77c90c9e94eb98801ac2e08666f96c86ead9f989")]=!0,this.jj.source.style[n("ce3ef405a086e7969b08fc0c")]=n("e281c1858316dc"),this.Zi.source.style[n("ff516516f151f6054a576d1f")]=n("d8db7f5bb94c6a"),(c=b.d.createElement(n("4555a696bf5b38"))).width=80,c.height=80,this.th={od:c,jk:c[n("091dee48ce11613474fae7")](n("71d097"),{willReadFrequently:!0}),Ze:new K({source:Fe.from(c)})}},rc.prototype.C=function(c){function f(){--g==0&&c()}var g=4;f(),f(),f(),f()},rc),b.Jl=(Dt.prototype.sa=async function(){this.D=new b.Ul,await this.D.sa(),this.pa=new b.bm,await this.pa.sa(),this.Ji=new b.mm,this.Ri=new b.zm,this.Af=new b.Gm,this.fj=new b.Qm,this.mj=new b.Zm,this.tj=new b.dn,this.zf=new b.gn,this.Pf=new b.rn,await this.Pf.sa(),this.Dj=new b.zn,this.hh=new b.Fn,await this.hh.sa(),this.Bg=new b.Kn,this.Lc=new b.Un,this.Hc=new b.$n,this.pb=new b.lo,this.bk=new b.uo,this.yo=new b.Co,this.ya=[]},Dt.prototype.C=function(){this.ya=[this.D,this.pa,this.Ji,this.Ri,this.Af,this.fj,this.mj,this.tj,this.zf,this.Pf,this.Dj,this.hh,this.Bg,this.Lc,this.Hc,this.pb,this.bk,this.yo];for(var c=0;c<this.ya.length;c++)this.ya[c].C()},Dt.prototype.Qe=function(c,f){for(var g=this.ya.length-1;0<=g;g--)this.ya[g].Ya(c,f)},Dt.prototype.na=function(){for(var c=this.ya.length-1;0<=c;c--)this.ya[c].na()},Dt.prototype.J=function(c){e:{for(var f=this.ya,g=0;g<f.length;g++)if(f[g]===c){c=g;break e}c=-1}c<0||(this.ya[0].ee(),f=this.ya,c!==0&&(g=f[c],G.Rj(f,0,1,c),f[0]=g),this.tk())},Dt.prototype.ge=function(){this.ya[0].ee();do var c,f=this.ya;while(f.length+1!==0&&(c=f[0],G.Rj(f,1,0,+f.length-1),f[f.length-1]=c),this.ya[0].va!==b.fb.gf);this.tk()},Dt.prototype.tk=function(){var c=this.ya[0];c.gb(),c.da(),this.Wh()},Dt.prototype.lp=function(){return this.ya.length!==0&&this.ya[0].va===b.fb.gf&&this.Lc.rp()},Dt.prototype.vp=function(){return this.ya.length===0?null:this.ya[0]},Dt.prototype.Wh=function(){this.lp()&&this.J(this.Lc)},Dt),b.ki=(sc.vl=function(c,f){return{Rh:c,Tb:f}},sc.Cl=function(c,f){return{Jo:c,Tb:f}},sc),b.zp=(_=n("4fe724a7a0f0"),v=n("baac09a8cd3b"),n("51a4b1"),T=n("5e8847"),fe.yf=(aa.Kg=function(c){this.Ci=c},aa.prototype.Vl=function(){return n("9014bc87f183bf09fd0d")!=typeof vt},aa.prototype.hm=function(c,f){n("4a2e62392bb9798f3707")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(m=vt.currentUser.get()).getAuthResponse().id_token,m=new Date().getTime()+1e3*m.getAuthResponse().expires_in;if(new Date().getTime()<m)return void f(new aa.Kg(g,m))}vt.signIn().then(function(x){var S;n("1256ba4173c1b1c77f4f")===typeof x.error&&x.isSignedIn()?(S=x.getAuthResponse().id_token,x=new Date().getTime()+1e3*x.getAuthResponse().expires_in,f(new aa.Kg(S,x))):c()})})},aa.prototype.nm=function(c,f){n("2d6bc184d4445a8a5042")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(m=vt.currentUser.get()).getAuthResponse().id_token,m=new Date().getTime()+1e3*m.getAuthResponse().expires_in;if(new Date().getTime()<m)return void f(new aa.Kg(g,m))}c()})},aa.prototype.um=function(){n("f75d970e1e4a14009a54")!=typeof vt&&vt.signOut()},new aa),fe.prototype.C=function(){this.Mm()},fe.prototype.Pg=function(){return this.v?this.M[n("13b16663e581fd")]:""},fe.prototype.nj=function(){return this.v?this.M[n("8e6a2344e0cd35c8f3")]:""},fe.prototype.Kd=function(){return this.v?this.M[n("140b3f8473873b0679")]:""},fe.prototype.uj=function(){return this.v?this.M[n("cb1dbbdf3be12397a1e8")]:Ol},fe.prototype.Kf=function(){return this.v&&this.M[n("bc648dccafff7176aa6141febefc64")]},fe.prototype.Pd=function(){return this.v?this.M[n("c634e730a4a8")]:0},fe.prototype.Qf=function(){return this.v?this.M[n("011ee642e01a")]:1},fe.prototype.Rf=function(){return this.v?this.M[n("54c0ee571747d6ce2ac8f2")]:0},fe.prototype.Tf=function(){return this.v?this.M[n("be2af82196bccab0be23")]:50},fe.prototype.Cn=function(){return this.v?this.M[n("5052f9ca3aecf2")]:0},fe.prototype.Gn=function(){return this.v?this.M[n("d1272a61260fb3")]:0},fe.prototype.nl=function(){return this.v?this.M[n("b0ec9d76c06dbfe3")]:0},fe.prototype.Ln=function(){return this.v?this.M[n("d0c67e42a75673d491cd")]:0},fe.prototype.Pn=function(){return this.v?this.M[n("718a92d0bc82")]:0},fe.prototype.Vn=function(){return this.v?this.M[n("b46d9fe0d0da9964ce68")]:0},fe.prototype.ao=function(){return this.v?this.M[n("00b32720700633a57eb03c3a600927b275b23700")]:0},fe.prototype.fo=function(){return this.v?this.M[n("5e84499d0e00")]:0},fe.prototype.mo=function(){return this.v?this.M[n("0bd4689feb93f96d67b7")]:0},fe.prototype.ro=function(){return this.v?this.M[n("16d4bdda6942b3436dff8cd05b5680")]:0},fe.prototype.vo=function(){return this.v?this.M[n("b310dad2560469c6da15e9c7521512d7a0")]:0},fe.prototype.zo=function(){return this.v?this.M[n("63660031a3799d3f")]:{}},fe.prototype.hk=function(c){this.fi.push(c),c()},fe.prototype.Ah=function(c){this.ii.push(c),c()},fe.prototype.up=function(c,f){var g=this.M[n("3a3b8e224eaa72a53b1f6d2632")];if(g!=null){c=c.toString();for(var m=0;m<g.length;m++){var x=g[m];if(x[n("ae5614")]===c&&x[n("85027e486c")]===f)return!0}}return!1},fe.prototype.Gh=function(c){var f=this,g=this.Pg(),m=this.Pd(),x=this.Qf();this.Mo(function(){c?.()},function(S){f.M=S[n("1c182d8a52ae06125014")],(w=Ml(g5(S=f.M[n("5a05750e3581419c07")])))&&(f.M[n("338a5c45dc86d8475e")]=S.slice(0,-7),f.M[n("1a58b74470e684")]=w[0],f.M[n("3a239d3977ab")]=w[1],f.M[n("43913c53b4b1ad")]=w[2],f.M[n("8fadfe7767ac5c62")]=w[3],f.M[n("6b7b013f9c5394113a40")]=w[4]),f.qg(),S=f.Pg(),w=f.Pd();var w,M=f.Qf();g===S&&(1<M&&M!==x&&E.h.Lc.Ak(new b.Xo(M)),20<=(S=w-m))&&E.h.Lc.Ak(new b.bp(S)),c?.()})},fe.prototype.Mo=function(c,f){var g=Jt+n("c0b43055b46064b2fadf7d6ea5792bad96")+this.Yc+n("ff153334e451f123745d7b3eea48ec");G.vc(g,c,function(m){m[n("69b984f888")]!==1200?c():f(m)})},fe.prototype.Lk=function(c,f,g,m){c=Jt+n("82b676d3f6622a3cb8dd3be8e77b7513d4")+this.Yc+n("483cb8dd2ee8f74f224ee2c626d1ef")+n("144065a1718d7f5858")+c+n("8074f0e5f0acb632ad6a8e")+f,G.vc(c,function(){g()},function(x){(x[n("4fe33ea6b6")]!==1200?g:m)()})},fe.prototype.hp=function(c,f){var g=Jt+n("176d2bcceb39ffab2d1656e7ca3080a461")+this.Yc+n("1523a58efd6f77a9696bdeb3c27d56ba51");G.vc(g,c,function(m){(m[n("a1714cb040")]!==1200?c:f)()})},fe.prototype.Ap=function(c){var f=this;this.v&&this.Yh(),fe.yf.hm(function(){c()},function(g){f.Yk(T,g.Ci,c)})},fe.prototype.Yk=function(c,f,g){var m=this,x=c+n("34da")+f,x=Jt+n("4197f132b5c3255d7bfcbc09a4da6ab217")+x+n("ec181cf99cae552a9a");G.vc(x,function(){m.dl()},async function(S){if(S[n("172b76eefe")]!==1200)m.dl();else{m.Hp(c,f,S[n("6fd5028781fb918703c9")]);try{var w=await fetch(C.k+n("aa9e5efbcf4f19648085"),{method:n("dc7d51fcb4"),body:Gi(JSON.stringify({[n("bf82a453309b2b")]:1,[n("53712623a541bd")]:C.Xd}))}),M=JSON.parse(n(await w.text()));if(M[n("0912e25df81c")]){z[n("7030c7a606bce522142cd9bf13bf")](n("c0f9767ea8"))[n("20980c1d41072ea365b5")]="";for(var O=[];;)O.push(0)}if(M[n("92c62cd5ff553d")]&&(C.Fj=new Date(M[n("1f3559e2ca26c0")]),C.Zl=!0),M[n("2883051441")]&&(C.Ph=!0),M[n("23a74e7fc9ab")]&&(C.bd=M[n("67eb02b385ef")]),M[n("ebf48caa1c")]&&(C.Vh=M[n("00b9232777")]),M[n("e8dc535e")]&&(C.Mi=M[n("0593fedd")]),M[n("fd9d1ac2f79771c7")]){var k=M[n("4d4daa72a7272177")];z[n("08a83f3e7e241dba7c8431177b17")](n("b6691c2cc9a80ea4ce3be93eacfef0b0be23")).innerHTML=n("649095740c50dc9e5e8dcd531132c1e6478193754a3dd3bf10a89338ef23affef0a0b43ce120affebeefeb6cd544e2a2b1d7e642aa59ffd9acc8ec5f8542a19ac992c345980a989889ceaa5a82b39a77c07585a28bc8df39fa28ccc9a1e1723db37a74faa9ed6f70a57369b1b3ce7f06e66366d2bac57348f91f58c68dd60701a2594a9998d74d1ede0f0b8dc0b65b27802d13f4bcec0879ce7d1bfd32f4706365392fb066f4232f69306bec54c46051770038937d9b7f592e486cdf419d1656173143c51adc5849094e2bda004057b104a044371d3b4aae0ebd2940125cafd80ddbc1327858afa97cb8bc2f7513a2866695b3141b40f7cc799fae5c1252878020909405004ddecb1f989d7e5573f4e64683d7370867cda40ea0df3be53aabbde3fba538e57cf89dfca8ac33f902f7d1d28cbb00bd5b9c87f0c3ae01c754d0c181c7d600c11d9e9389ceaa5a82b3c0339137c4a28ab99b67d56a90a2a9e5677ee12642b2faab697ea2696bedf5932006e61577cbac8c296ff91f2c8ad2830700a11016f6cd8a691ede7b4ad686e40106d17577e2cb8a5e228a680cff63bd2320777075932deb7828692f38ba62cc3e0a67117b8477872e0a75033b9d05c35056173043c769dc584b094f5eda023157b104a045445c600cae0ebd1d632162f1b677d1a3257a6aefe93af8fc32334ee7cd20d7ef0a3440e9df799fac0a53748783259094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88d0ce93ca5f6b6e5a53be92ab9febf99eb6da200b197fd93b342aa5bffd9ac89bf1bc15c819cd19b9205d15cd9bf89cfdc0bc2a4c0319137c6f4caeadf38f828ccbda8e57663b73035d6edab4c3efe5b6fefa08f654ca64877d3bdc27345bb037dc08d941075944044db81da0f09aa5443d8d5f37417a66b46a99fec0879d97e7bea30906761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f585f04338805c35217450107da4b961f15580f17da034557b106e704220a3b5fb90cfe0c6c6522c6b676a7ee633c69f9be7fdcab2d1604a0e535d5e6092f46e8c63dd9fb44095fc59d07dacb125a7fdace0ed1c75c5573f4aa19a293753e0be8e50ca3d96ab263e7e0c1f0f616ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8542a19ac992c345981d8b8fcdd08d10c5ef8671cd20c5c39dbbc87ecf28ccbde5a33260b67623a48cbc3829a4697aefa3842162f1175082eaef7b5bac0369c092dc4347815e4fd98f97495481181cf980b4502f9d2613f5bea0572cd97f789a53ff323d637074e52dea0f7e3c1c6bed20c46053315766c22ad97f592c486cdf05c35256164543c46b90071c094f5e9b517513ae57ea03694c7b03ae0fc95b3d7272e3b676a7a325786af8f869aeca3a6213fad720d5e5026b68bf991a88ac690141d29d13dad45a094dcfd005d3c911132edfe64683c6321a25d3a859fff826ed36e7e1c2968779f837adfebeefeb6cd544e2a2b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cead16dde6d731846197f3d9a49964c9638afdb9b43157e12734fab0bc3829e92f3eeca2c2371090002495b0dd6e5baf082deec5836416d67347c798975d549e504fcb95aa5b2d936b55a895ec080d8c385ca369b26761423c2bb02deb0c1654733eb177c46051315613c228a87f592c486cdf05c35256164543c518dc584b094f5eda023157b077ec1b601d3b4aef5df91f22237ef7fd30e7ff327b5dafa97efbfc3a6213b79164d6e4447d1ade8e6e9ff65b1441d19657f483052e1c98fd0dcdde11072ec0ae15b1d32c1127dde51fa2d36ab217b2a6e6b9af34ad6b8cb2e1baeb6dd62780cde48bb142aa5bffd8d9c8ee2e8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbab962d16adbbdf0f56367a53865f8bdf77e69b5383ddbf5932050b3002495fd9b2a58ae4e3b9ca49410018c4152c79b9c197ac90f689ac2875333846b41a88aa45b3f992657a167ff213c6970749178ac2837653e6bed56883f04315710b45fc72a057b486cdd05c22756143443c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c0378eff461a7b673296debb62ff2fb712453eb8667e1b3156a43ea8e6e9fbb1d5042d0d04186e2125a0bc2cf18cddd1a430097f132e084011939cae50ba2cc22e125a7b8edbba179eb36a7febe9bbe2af20dbb80b1d7900ef50effd9daa78e41d01f85d696c7c344ed5cdaba89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12645fea5fe2f29fc796febb18c714ca14b62d5a18c296ff91f2cce95941001c10716c49ada0f08a8181c8d98b5463387600586ddfb7c6ece0b5fbf70ff353c763827a36db223356b732db07dc460256410348b718a7f595a04338805c32432715b16994fdc5849094e2bda004057b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa80ff4e3787513a2c735d1f70a3b46efc528dfe70a5375878156d4c3125a0b8f895ccedc5c5572f6e646f7de330c39c9ee4f8c9b7dc674f095e5a5b679ff36b8b6eda9ab34f90fb5cdf78abb42aa2faa9efe81b70c8543a49ac992c345ee38afd5dc93895a82b3d730f120c6c69dbbca2e8e3ddbbdf0b43023e12645b2fadf6e72ba383ddaf5915306e6153395e88c281bf91f2e8ad3f2465a921014878cd85e5ac15e41ca9eb5403ad17672e2cafb4e39d97f0cea32e1213f652635f23b9d6f693e2e2bad6684204e780c25933ddb6a0a7f19379945d45041014623d218b84f4b6d585ccf153342a606b55335082c49c819bf386b2967a7a001b0b6566d2bbabe7eadab2d6004a0937196d543315fbf996cc9ff5b011cc1dc11dbd245111c99ff498f9c5d026480f151f786241428c9b859fefa6ab263b1b6f6a3a325a535a3a8f8f8fc6db55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4ff1a4c0339137c6a28ab9df398c28cdcce5a34477ad6323a48dbc3a5ae92f3ebae2913711e4002497fd9a594fb55b3b9dd0d54347851845d89dd75e4995181dfbd5f30036876004f5ddfb0a28902c4dbc25e20676366735b27aaf2f29213127ac64c46051315613c228a87f592c486cdf05c35256164543c518dc584b094f5eda023157b375a044371d3b4aae0ebd5b3d7034b1d061a7c073216fafa809b8be5e7513a2866695b315680ca89b799edd4b0947878154d1c7430914c9d419d3da4d0964818751f78424196c88f959ff8e2cec30b1a0a1e68272ba6bb9befeabab2dbd0dbb90e0c0e455bd5a9fceacacfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b7f9acc83b993fceaaf2a12721f43035d4edab4c7fa56b2bac95842262f1172682ea993f19ec082c9fc58261578d430385d8dd4b4f8d104dd085af46318d600583ddfb082684680cfd25e37230683435a42dea0e7e3e6f3dba6297371139093f946ccc6859395e1bca10b04741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fbb7da84c3f6523b2b676a5a325783cb9d869afc87b3957b7901180a6667d1baa8e6e9dbb1d501490834186e553014f8f895cd9cf4b116cd1ac01abc235016c898f59ff8c29f274f0e1a1e7f634e438b9a8a9ee8a7aa253a186e693b315b505b398e8c8ec5d8542a7d694b4c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbf81b43023e12736b2faa92f29fc383ddcf5935447bd5333949d8c2a6af91f2e8ad2810701d4101487cd8a695f854b0b8dc0a55337956855a88da74e3985680d8b25e37020637074e52deb7a38603c3dac35d21646265725826a9f3f193101379c54d45041014623d218b84f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a305b0b4276d2bbabe7eadab2d6004a1e07197d043315fbf981988ae6e4503929656858305581c988b498eed5b193797f144a1d7331964d9a409a3ca3df974f197a1e7f43df87cf8e9a9effe3cfc00a190b1d69242aa5ba98eee9bbb1d8d1d8b80d0d0d4458d4aafde9cbccb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a789bc382be92f3ebae2913711e40025e4fd9b5c4fb55b3b9ca5941272c1071692da890f09dc181c8fd5f271279d3313f5c8ad5b3f9d605da075bf36217d7075932deb783a79787ced35d36200780425943dda1e4e2e5f2d8a5287070109190f845cdc5849094e2bda004057b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afab0db8bc2f7513a2866695b315680ca9e8799fd84b09478780219096764d0b9a9e5e8d8b0d406480f351f6f523113f9ff94ca9df3be17ca1bcf1bbb225f17cf99fa9effc3ef544e0d1b1d7e604f408a998b9de9a4a92439196d683830585158388d8d8dc4d95b2b7268444d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2baf91842013f1172682ea993f19ec082decc58364578d430384ad9c1a7ac90e6d9ac287562a82600582ddf97b6ecf0e5aa676f470636d3163e44cfc78697b293cf27599220a66007b83799d3f4e2e5f7bdd10920e12570643c46cdc584949051e9642645ff45bf71b2a4c7c08e055f41b2a7223a7a001b0b5546d2bccff25ebab2c15");let ot=z[n("9494a302ea10898ef088bd1bcf03a39fc8")](n("0f6e62e7e132f0f43a2470f9ef")),ue=z[n("6e8e456400fa67e01a625b7d15f97de112")](n("82bd37f0f4612d6ba7f823e8e06b2258bfcf3dd6e2026a19f3c63b"));for(var U of k=k.sort((ge,Me)=>ge[n("f26cc66193f5")]-Me[n("f7478b0e1e5e")])){k=z[n("f6e4caec9b7fd94892eaadf46c67")]("div");var X,V=z[n("b14141815452d2add54f5689535a")]("div");k.classList.add(n("4b8f284cb965a36f3a70302b")),V.dataset[n("9492a514")]=U[n("c2a0e1a7b032fa06bfa9e0")],V.dataset[n("8d0a66347de7")]=U[n("e603c10d869e")],V.textContent=U[n("5a1f7519328a")],k.appendChild(V),U[n("5b652e11b9658d3e")]&&((V=z[n("92c026c0f7533d6cf6ce31c8f05b")]("div")).classList.add(n("29e9ce2edbfb5d4d57d7df08")),k.appendChild(V)),U[n("c31da8d1")]&&(V=z[n("77cb0b8f9ad898ab13d5ec976dc0")]("a"),(X=z[n("aad81ed8cf4b1504dea619a0d833")]("img")).src=C.k+n("74e08401152cdea21de88c09")+U[n("08b0273c")],U[n("a2c616d9")]&&(V.href=U[n("babe0ea1")],V.target=n("2f3f53ced20ade")),V.appendChild(X),k.appendChild(V)),z[n("d5b722ed2bb388e9b1ab3ce40ea0")]('.server-list[data-country="'+U[n("6535886d872e1965")]+'"]').appendChild(k)}z[n("b5d7420d4bd3e809d1cb5c042ec0")](n("fa25cf688cf9a5e32f70ab6068e3bae02777a56e7a"))[n("e5b703fc2cac8ef2999206d305879dc187")](n("b2a018acd52c"),ge=>{if(ge=(ge=ge.target)&&ge.dataset[n("8fa3fe777db0677f")]){for(var Me of ue)Me.dataset[n("5e8c4f840c07560c")]!==ge?Me.classList.remove("active"):Me.classList.add("active");for(var Tc of ot)Tc.dataset[n("370b56dfd518cfd7")]!==ge?Tc.classList.remove("active"):Tc.classList.add("active")}}),z[n("3557c28dcb536889514bdc84ae40")](".server-list-container")[n("1c0c3a8b6587071d50390f845c9c041e5e")](n("dc4e72c683da"),ge=>{var Me=ge.target;Me&&(ge=Me.dataset[n("0581f4cb")])&&(Me=Me.dataset[n("f0b55b379820")],ki)&&ki(ge,Me)})}else z[n("f7598c0f09552e0b93556206ec46")](n("d5e833ed2aa9a9e5adba36ff0fff97f19da2")).innerHTML=n("681c99f808d4d81a4271d1af15b6c5624b0d9ff94eb9d73bec34efa4eba7ab7afc2cb8b0e5a4ab7aa253f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c6a51ec51ecfc99c8e9c1c95b2b62686379ef3ccf9892e8f4cdbbd86b43055a56576b9bff67876ad696bf4b9cf750db74a7b82eaef6a5ebe4177ccc583645a89520385aed546159c53499ac2f31771c4325fa38ca11f78b8680cfd32e16761367074e769b5233c627027ab758c7750504064d57b8c341f791f7bdd12d45043451912d21bbd4f491e585ccd153237a604c45335082c48bb19bf4e2a7221d5dc16d8ab5c0157cdbe7cdcab2d6004a0937197a6026a19bf981fc4f348450392c016d683042c1c988904c9da4f0364818251f7f0624a0fdbbb0ce3c920f23ca3a7e1beaf39ef77a9b4e1f8fc19e014b08ffd86f355de00b78cb9df9803cc5f929dc3d0d4458d4bda8cc5999a1795b2b6268637c4b79dbbc82e8e3d9fe3a9f66c3ead6163faedaa4e3efe2f6dfabed57751f1172482ea997b47a8082debc5831016d6070384ad9c1a7ac90e6d9ac287562a82600582ddf97b6ecf0e5aa676f47063673927a47bfc791f296f7cac7593240666483a8e6b9d770873032a8e499f0701014754d21ac9190f55110bda034557b106e11f7448651bf219be3f2a7221e4ff21eda3240a3cb8a969aecb3a6060b7916480a4177d1baa8e6e9dbb1c2353d7c710dac8125a09c3df498eea1a4273d3a800acc0260b30d5a559ff8c6ab261b1a7fdb9a372bb1defe9beb0af2df708bcc6a7a4f355a808af9ff3c8ed2d8543d0d697b0a71cdc108cde9ecd8b0b95b2b126864394f2ccfd9565993ebbaaf2a12721f43034a7edab3a3efc5c2bac93842065b04c6082ebec"),z[n("dbfda8ab2de932b78ff186a208ea")](n("08fc78686d363ab66680211a7b0b"))[n("8e703e42feca37ce")]=()=>{Ia[n("16c8a8cc74")](p5("https://wormateking.com/?a="+C.Xd),n("d11d31683428bc"))[n("f74e96090e5f")]()};M[n("9c88a61fc90387")]&&(z[n("cabce9a98b33f50cb78de0a7af2efc")](n("51b5a7f6f8a32ff830b8bea1b9af2bf5"))[n("7aff59f50a4c2f7ff6f62ae1")]=M[n("6e9a48711bf151")]),M[n("64d4")]&&(C.sh=M[n("0bdd")].map(ot=>ot.toLowerCase()));var Y=M[n("e8db4b5582585ccc")];if(Y){let ot='<div class="mm-merchant-cont-wrapper">';for(var W of Y)ot+='<a href="'+W[n("621f4d1b0d")]+'" target="_blank"><img src="'+W[n("d8c0774abb48")]+'"></a>';ot+=n("bd8b0c3364808510acc0624b0c"),z[n("29ebde39dfe77c055dc7d010dad4")](n("5807f7c671c0fb5d0359c3dd1098c558064d")).innerHTML=ot}if(O=M[n("2241865448d98dcb59")],S=!0,O){var ce,oe=z[n("b8ea886edd799bcaacf46f76aa61")]("div");oe.classList.add(n("8d0c6a2b7de3fe69e6ea7e2c7cf8"));for(ce of O){var Re=z[n("0a78be786febb5e47e46b94078d3")]("a"),Lt=z[n("74a6c422193ddf8e10a8d32aee25")]("img");S&&(Re.classList.add(n("3eae63a52b2561")),S=!1),Lt.src=ce[n("72ea59e41162")],Re.href=ce[n("e8d5435587")],Re.appendChild(Lt),oe.appendChild(Re)}z[n("53752023a5718a2f37693e3ab062")](n("c43b65f8a4ec6775e16f67f8b8d5")).innerHTML=oe.outerHTML}}catch{}g?.()}})},fe.prototype.Yh=function(){try{this.xl()}catch{}this.Dl()},fe.prototype.Gl=function(){this.v&&this.hp(function(){},function(){})},fe.prototype.dl=function(){E.h.J(E.h.pb)},fe.prototype.Hp=function(c,f,g){if(C.Xd=g[n("8503745d7b33ef")],!z[n("dda93ae424be86f980b813da10938f")](n("f3d381945adb1c9e8fc593890c9df3976dd06084e2ca"))){z[n("95e1723c5ce6fe21f8e06b1258dbc7")](n("26d181d74b57c14e46de82a41f2596")).outerHTML='<div id="final-playagain">Play Again</div>',z[n("9c8abb1be51d879ec19b9235d1308e")](n("1ec989df435fc9454ad691d84d5a8553"))[n("baa412aed226e33a")]=()=>{De.ad()},z[n("0f3164e7e13dc6e37b2d7afef43e")](n("a4d0d444c514c797c5938b52d2ee8677db68")).insertAdjacentHTML("afterend",n("91272087716fe1edab3a78a07c7decf5925604b54175d3b6db620cf91e5b8ad3f20701a2514fc1cd8a6f")),Ia[n("07597d35fb48e4116133")]={[n("5b673837")]:n("e164072c0432df2c8f3e087f546bd715970745454652c219ce531a4e4a5ac95532"),[n("1f364ee0ce35d1")]:n("ff596700e259e0"),[n("c47d63feaff17e")]:90,[n("5056fbc720cd")]:728,[n("3d5ede82a05f30")]:{}};var m,x,S,w=document.createElement("script"),M=(w.type=n("d613fd11aeceaeabb40ed6109190d69c9603"),w.src=n("887cf89da9ef8828e716fc8bfd82be17fd1bbc84ee80bf01c314849cd6988703861a859689cfa849d4b993678c3190e3dbeac33e843898eaf6f03127f12431aea9fb3d2ffa783dbae2e77b4da24a7dc2f6c369"),z[n("0c2c3bba6298010678003593779b")](n("730a1402945c971803")).appendChild(w),(w=document.createElement("script")).type=n("8b48e8067b6523c4f925e3e7642b6be3eb38"),w.src=n("ae1a420797f132b2c1305621d3ac14bddb3de63eb0bee5bba532ee36b8b6eda9e03cff0cf7d1d2d3b25ff90de2dffa89bd0c9944dac6c290d0169b4ddfca9bc48f1d87b5c4668720c4c1d1e78c64d768d0e5b3"),z[n("52126100249e4b8c360e7f19319d")](n("c2f6b6e6aa23e536a6b2e0bea76ef914a092a58c")).appendChild(w),z[n("ea8ad9989c06e3e49e66d77199f5")](n("43d17705aa95e45b2f8a245daa2db22d3d70")).innerHTML=n("2692dbfa43559c485a9ac2f1463a842013f4bcec08799e384abb6fbf6761367074e77eb8262e69787d9b35d3602541291ac22ad909284e281ba105c3505616450f930dca2e5e1e4f088a5c6d01e046e013691d3b48ae0fc85b3f0134b1d02dfbf6623c3cb8ab38e4fe7a7512d6866697f4522c5df5c5799fac0a5201d4d208c0c3125b7d8f895eefcb4f1c20cbe646f793754820deee4f899b7db226b6a1f4b9a72ee93eabb2e2f8fc6db55297c6a4a4f354db0db39db9dfee0ccc10918081c6a2529a4b9d9eced08c10c8f9d7318620c5c29db9bb2e8e3ddbbdf0b43023e12736b2fbda6b3efe2d66edb5c7371090002495b0dd6e5baf082deec5836416d67351d89ad44b4f895647d197ef512c99600481ddfb086ece7d5da361a23176371163e53aae2f39212e27ab75c46051315613a653bd133d5d3e07a06ed45043014720d21ac9393065334bcc732440c555a045421d393bae0ebd5b3d7034b0a361a7b6327b5ae8ee38e9e1717513a2c038c4e5547d1ade8e6e9fed470f43d6d011c1d5125a0b8f8829eec6500235d1b600b693743b6c888d1eb8ca3bef3fe7e0c1f0f616ad6a89febe9baa36e644e1a6"),z[n("5e9e5594100a77100a924b8d0509")](n("b583055b5fdfd700cecd4d1524dc"))[n("9806b488f084bd04")]=()=>{z[n("487ffff720eeed6d3544fce638c0fb42365d")]?z[n("0d9bf7a9e54466a87975f4bafc6f75")]():z[n("4ebd7f852b")][n("edac0ad1048780d0b3931bc40a8989c99880")]()},z[n("bc7c8beab2e85176a87065e3a7eb")](n("2692da8a5d4f9e4d42de89a055229d2b"))[n("273747f9c735cef5")]=()=>{De.ad()},z[n("39cdde18f8c25a1d24dcb736bcff23")](n("e5bb0ab50bb59fe882b342c2049687cb9b95")).insertAdjacentHTML(n("7504924e96181e49130a"),n("928667e6f24e2e0ca89b3fc1ff5c131491f743c2d245454acfcf18d4c058036697f03196d3330c20d4ac0fe88d0ca56384b7eda3e364cd")),z[n("e0d64747a15943da8dd75e7995744a")](n("e8ca5e4989494dd7dda35d3b")).insertAdjacentHTML(n("5ff204b48ce680b309fc"),n("b8acc948d86488aaf2a16b77e12642b2faab7d6fbe307dfaa4d57b4db3563395ea8c281bbf417fdc93941177c10714c09ccb074889495ad69ea6416e822c53b0ddfb0a38883f5bbb63b96f256d3031f23aeb6f6849787e9e35d36246265573d528cc685b395e1d8b4987474114160a965b8a4f4868585ccd437500e640e61e2a5b6614ff5de4106a3234b0a161a6c3327858afa97cb8bc2f7513a2866695b315680ca89b799fae0a5201878027d1cf414d0b9ad800dcdd4c5572f6e646f7c1330a64c9ae08b9d721e722efa5edb0b17ae03cabbfa9effc7aa324f7d3d5c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc948de788afbafff2721f4766af6bbea2f2888383cada7d5600ea74062d3b1c77d58f1407bc1959c4052875e0385da9c197ec90e6d9ac2875036803159a9ddfa7f6ecc0c1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c147406706169646dc584b4f110f8c432441c711b744704c7b57f859f90a662e76f1be29f0e8626575ebf929f1ab2d6204a1e603cae44a7d1baae035c3f90a5201f1d610c1cf590f4a8f882f989c790331d3ad51f6f36248089ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d0d7c0e421fc00acceafa8fb5fe154d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc948d86488aaf2a1617fa56675b2fbdd2f29fe6a7aedfdd27757a04c78c0ab846c42b95a33c389c25616d6070384ad9c1a7ac90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d211077d1373d5288a360a6f1e7bdc64d4504146141592058a0f0f58140098432c04ea51f25335087e0ef911ef1f7c253cf1f630e1ef792f6aa7ed25f8f93a6213b7901180a6667d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6a89bfe5abeb6da002be82e796f354dc4ce8d9eb99ac42d3149687cd9b810485158395c9d8dc4d95b2b7268444d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11770b73646a696ec087b95291bfc44f47061732134fa7bbc3e2f653329ac3d883646265773d5288a360a6f1e7bdc64d45041530114da5b9c1e0f4513098c1d6d13e151e953350a2c49ce19be3d2a7257f1e325fba3240d3cbada69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6a89b9f9a9ba30fe44e0d3fd81f354dc4ce8d9ff82ae16c915c7c196d0d447cb158b88dfd8dd3b95b3c074c077dbf4ddfd8e62d26a8da2a2e47667ab7b23a5fabc395e8f727ee6f5925106e66374d2acdd7545f91e5b8ad0f00701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17750574064a17c802c4e2f287bdf61d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a1e030cce0026a19f9c73ddeed0a5375878156c2d245454acfcf18d4c058036cdeaa1aa093754a6c898e59fdff6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8f4e8dffa1ff2721f4766af6bbea2f2888383cada7d5600ea74062d3b1c77d58f1417fcd85dd0701d61015f2aad849508b4f41ca9ea51770b76004818bb95b25d97e7bea30906761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c0362e7ff21f6f2327a29e3ff69aeca3a6213e5d72688f7573448f48e6e9fbb1c251492f2418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8542a1d696b39512c41c898f89ceab5a80c0d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810700a71014f18cd05c1edf780b8fb1e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45130401c10d21ac909174d0e1dda034557b106f20275157a1fff48e41068333ceefa2af0a3257a3cb9de69adcf3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebf9ebd2ff10ff7d1a486ba06eb1affd8d8c8ec5dd70590ded7909203c1178d8881918f1dd5edd7318620c5c2f0ec9b6fcf6591fbe5a33260ab6068f3edaa493efe5b7defb1cf3710910026e6fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315615947d853f0868486cdf49954740605054c55f8d1856440e1d90456f16a606b753347d2c4aca19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7af9ee4e8bcd2aec34a1a7a1e68372b818efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df38ff28ccc9a4f87436f75023a789bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec0908982448ea32e1213f652635f23b9d6f693e2a3aad3d923717600c38806bc4360272087bdd12d45136014527d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929657f6d54709578f895cdec25e033297f030e084750f3dc8e60fa8ca3be93fa5a0a9b9a735ed35efe9bef8fd1ad314a090fb97f354db4ce8adef9dbf018542a7d694b4c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810700a74643db8dda5e1ede0d47dbd5f27666c67741b38ae4593e8e3e51bd25e37076371063e749fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a1e03bd5e24e3747bf996cdbff431554878020909405581c9889498eeb7b1527d3b618b193743b6c888d13bdca26ef3fe7e0c1f0f616ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12645b2fadf797ea0786debf5925706e4643395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bfc781d683438fa23a47753554064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b5542c70fcbe7eaded733152e18667e1b3156a5eeed971defb5b1458ccd41798ca5e065c8f895e989d7a5571f3e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a83c28173d56bd3b588ea966acf7edbbc84b43021b36174babbfc7e6fa57369ecfdcd7341b1493395ea8c296e88426e8ad3f20701a24656d6869c197ec90d6f9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1f3e1d9a5c6411f711b7466e5c2c49cf19bf4c783463afff21f4e2723a6de5eb69afbc3a6364b7931580a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ed2ccf01969acb9bc345980f8b97d998cb4cf4a4c0318520c4b59dbabf3a993ebdaaf2d76d63b07c69f9edaa4f3efc5c2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d45b862a1f750230ca12c11412480003d21bbd4f491e4f4bcd022441c606a045441d3b3ce44cf917602e34b1d661a5c7327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa322bd93e08cb909bd5bea9dfd81ab0a8542a6d696c7d5529a4bcfc8e9cecb4cf3a4c045db7582eed7e7df38f928cecee5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72dea09347c2927b07ec4605362043a927dcc692f395f6cdb05c35056173052d21bba4f496a121e8b596e1ca607c05337792c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f190eba5b23ee737efe9bcabaf33e504f7d0d0c0e455ad4ce8d9b9de9b5a8542a1d696b38907dc10859589ceab5a80c0d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f78bf224ebb69be2c76366530b664ac2f7e3f196bed22d77751264065a22ecc6928395f188050850b1c4a5055b20dc92b5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e64786d9370c20d5a559ff8e39e13db7b6a1e68272ba6bfdfebeefeb6cd556f7d0d7c0e421f719ae82f383fb5ce554d2b281c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90e6dd080b55b2c9a6004f78ea8563e99680d8b25e3706b216774f23b9c727e3f1e6bed568e22177d0a38c22bac7f5b5d486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549095740749ded203d38b0d4037d3af01a093743c6c88f945e88c7da56287eaa1e68572ba1fa5abf8b4a131b55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9ca3de52478d5a4892da895c5a80484b9ac3851771c67406e2cafb1f78b97c0eea33926761423a36a361b6247e3f186bef51c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bd5c7513d4d031c9f3442c0ca9ee799ddf0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa322f7d1d281bf11bd5a9fceacacfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bac93c57b55f11726c4b4c86958f91e5a8ad2835547961855d29ccd43558b4e03d399af5766c67713f4bdec0a0ad97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3a39f84cec102a7221e1ff25e6f5327b5dafa97eeafa6d7d52f7d720ccf8402b04f6ca3ec8f20a5203878021e6cd5e061c99f8498fe84c0020dce647809377396c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c5c4d1e78a7ec828ccbfb4e87276e12642b2faab6c72a0782bade2842013b54675c2a8dd3f1898082c9dcedb515c8a101485cd8b1a5288181dfbd5f300309f2c588191a55f6ece7f1bfc45f47212216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b635220a4f1ee24aa84d4a6521c3b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e64786d22e0e6c88fb1fa1df3cf374f197a1e7f420fc2be7a8e9a9ba36fe06a1cef88cb802bd5be8ceafa8fb5fe154d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082dec93c1435dc10716d484d85948c90e6a9ac2f34537866845a28cbd53259b3e13a361b3273f216774f23b9c1d3e6d2f6bec53c46025671537893dda1f4e2c2c7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf981fc4f05f1545878154c1df470d1c99ff498f9c59192dd7e646f793754828d9a819bdca6ab315e7e1b6fbac24e737efe9bef8fc6ff905f7d0d0c0e455ef0cbb99da84b20a8543d0d697b0c347e95cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c2968f91f58cb89c70700a11016f6cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73dda190f751b7bdd10920e12570643c46cdc58495b091cd2436406f75deb1174156513e559a84c3d6522c7b674d4a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e0c7a6b636e67cf8ebefb1af2ce344e1a7b1d7e410ec1bf798f999aa06ce1691dec8948412c45cd8c989ceab37d5e09670dc6a82a28ab98964c9639aaaf3d22721826676f6a6bc395ee92d4fbae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3f1e27b1609426462655229e688c7f5858486cdd46980e16014754d21ac90b184f181e8b153236a606b7586a483a5fb90ea84c3f2975a7a000b0b4253b76fff528dbe7733504a0917196d3026868bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe8cff8fc19f408a4c6a7a0f357d94ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc3958a87478bae291714fb5566582ebed3f19ee5a6addcdc24747905c48d09b94465282580b8dc2e40106d17577e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a607c6057759675fb90cee126e3362a7a000b0b4253f6df8b63ff8fa6b394ff5d079c9f7453d45bf996e88ad6a2250c1d803c7c942065d8f882f989c790331d3ad51f6f36248089ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b4fbe0947bc979dbbdf0e57b63a13035d3edab387da5716bbae2933711e44475c4bdd96e0eef693b9dd29f4843831014f4c6c9445cc90f6d9187a45033d17704e2caf9532fd97e7aea32e32034423c2ab22deb787e3f186bef51c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b1d061a7c073216fafa809b8be5e7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa56281b7eda3e365b83aa6baffaeeb6cd444e0d1e391a44aeb0cae9ff583b91c8d1d8b9dc1d0d4458d4aafde9cbccb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f08af4e5ede9ee40073972957b48bec090fd97f0cb874a36f20612132be66be3976603c2cba7cc46051315613aa79997f592c0e31834f834740675054b15b890b15094e2bda004057b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0c3328dcb301b193754820deee4f899b7db226b6a1a9b8a727eb36a6b4fef8fc6db553e295f589a302bd5a9eceaedffb5d931784c394c5d6529a4bcfc99c89970fd5a4c1479137c4e4d7e59579993fccaaf3d42723853034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c4600584ddfb7c2f953b1bfc45f47212216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b63563517f5fb90cee126e3362a7a000b0b4253f6df8b63ff8fa6b394ff5d079c9ff493d0ca899799edb0a50708781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5ce3029292cad0d447cb158b88dfd8dd3b95b3c074c077dbf4ddfd8e62d26a8da2acf06076a83034a5edaa4f4fa97c63bae291714cb84a6482ebea3f199a5e6ece8e941176c1056792da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c3525617360f99588c1e5e1e4d079b153236a606b701734a240eee5de01d602c7ef0b676a7a325786febf739f8ab2c1404a0917197a517686fdc9b6c88ac1d450392c71dc5c3125b7d8f895edec1531f3397f146e085025d79fbee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9fbecb4df6e59b759136b3a288c8df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f08af5947c9d5f30220982445b4ddfa7e6ece7f49bb72fc313670212fb96faa673765332bfa22d37750514066a63ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937196d5542848f48e6e9dfd430142d19657f183055a4edec941cecb4b0428dca407e8da261a2cd6ee4eff9b7cc51fabb0eff0f467ee36a4afa9effe3cff0dbd91b1d69542aa2fa99bfd83fb5ce554d2b281c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc582615a8a4553c3cd8b1a5288181dfbd5f3003480371ba991aa5128932151bd25e37076366530b664ac2f7e3f196bed22c46050720366d728d97f592e486cdf54881216014622d21acb091440121cda023357b071a046461d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0ae99e5efbca560664818651f5f7624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529b3a8e92dad8dc4fd3ed9370c720c5c39dbbc87cc87fd3fca5e5767aaa7275baa4f0647ee92f3cbae3e4371395002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46120671537893ddb6a08700c2d9c05c22656164711835ad4191e5809079157725fef55e7136b1d3b48ae0fc83066237aa7a174f3e9793c3cb8ab3ff4f47a7512d18666e3e5573947bf981988ae6e4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9de9d06ce01978781c7d61ecc5cd9bf89cfdc08c4f3df70d17182eed6ee8926d2649de4b3f87876e12734b2faa97e62bc782bac94842011a64478c0bd8c2819f91f2ec289df0700a0101485dd9c1809c90f1ecc84a44266c70113f5caf81f79ce680cff6db03a76371163e53aed7a7e3e6f6bed2097330f610073d45ccc68592e597bdd12d45136014527d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929657f6c9421c49dfcf498f9e5c1c20c1b051f6f2624a7bc9a715a9db3dad27a3bff1b0e365ba7cf99ebee9eb6cd344e0a5fb90a217ed1dffd8d9c8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e4643395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bfc781d683438fa23a47753554064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b5542c70fcbe7eaded733152e18667e1b3156a5eeed971defb5b1458ccd41798ca5e065c8f895e989d7a5571f3e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a83c28173d56bd3b588ea966acf7edbbc84b43021b36174babbfc7e6fa57369ecfdcd7341b1493395ea8c296e8e4c70cb8fdc4b49811014878cdc4c5a99515a9ac2f141289d2b45e2cb8a1f79ba3e4eae6ef47116216507f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b677d6ea762a7ce6be7eaded733152e18667e1b3156a5aedc228cef60a52038780219096764d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b2b16ada7583f39dbbca7fc57d9baaf3d52721f6766ef2abf26874b4383cadf593224ab00025e3fd9b285ca85f33dd81df465c89464dde86ca0f09de181dfad5f17366c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0fce0d7f217fa7a174f6ea763b6aafa808b8bc2d234dfbc731d7b315685bf5de32c9bb1d521491f64186e5125a7fd9cb0dd38b0c3564828251f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b2b12686439ae6daec962e8f48dbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e10376366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a607c653357e6d13fd19be3b2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f037a1df315d7b8aa810accd3ca56286f6b6e7b123fa74b9bef8a9a731f712ff8ffd8bb342aa5bffd8d9c8ee2e8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91e5ddc90d04c16d60545db89ca591edf790b8dc2b64631d93653b38ca0542c8f6052ae62b42e76366763e44d97233867332fb275c46053641739817987331f65486cdf46980e07410743c46bdc583d5f0d0f91153237a604c45335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f037a9d7251d259ff94caed22ef322e7e0c0f0f465fb2ea3afefb5eb6da244e1a6b1d59742aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad3f24b5d94405292da895e429c580b8cb4e40071972d53a493ab5533d97f0cea32e12b37216602f23aeb3d2f7e703ead7f87330d7d112f8171852e0e6e486cdd05c22756143443c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0c3332c2a21ae084771b25dbb80fe88d0ba563f0a0e8bca232fa7cf8ebfeb2bb31f444e0d1b1d69342ab2affd9da9eae0ece54d1b681c5a7529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d7760385aed54b5989510b8cb5e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a604c45335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f45039296568583042b1c98fd08d4d81a430497f335e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d534cc109cde9ecd8d13d1f281268741d3b58afe8e79917e9bfbb4f86c74b7386afea6fc2f29fe383ddaf5915306e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa23a22113750b73d5288a360a6f1e7bdc64d45041530114da5b9c1e0f4513098c1d6d13e151e953350a2c49ce74e81f6b3379ede761a7b67b216afebe7fdeab2d1652e2c23a80a5627d19db8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642ab2ab68afe88b24a9241819fc58695529b3dcfc99e8e9916c4e29a268637d3b4fdacca4a993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216605be66a93f2f296f7eab69913746272173d52a8a320e7f063c8058d450410147569e4cdc593f094f5c8844735feb47e91f744c2c48b919be3b2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe8cfaebe3efe44e0d3f789b714eb4ce9afb9dfec1ccc188696d6d0d447da169f95c8d8dc4d95b2b7268746d3b5fefa8a6ad228cdcae5a14336f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea33926761423927b56db56f6849787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6060b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e0c7f0f411ec30bcfebf98eb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43150a07c70b2faa96977ad6e7dbae3e53711e65262d5f5da7f5fa84470c8939c4e5a8a500385da9c197ec90d6f9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1f3e1d8f516f57b104e61a664b7a5fb878a84c3d3765f0be37f0f2632177ede861f1ef7d354db7916680a5620b41f5dc799fae4e0258ceda10dcc3444d0ae99e5efbdd4f112f97f031e086065d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339136b5ebd9eb9f67993fceecacf07160e12642b2faab796ca5696df7f5932006e7603397998c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d451304d1b16825cdc584b58041e9a153236a606b7156f5d6a11e953f55b3d7234b0a32df1a3240c3cb8a93be9fc322349fdd435c7ff4b315df3ce2f88ac1d4502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4cf3f28262da20c4b7dbe59b78cf28cdcbe5a33060a87c62f2babc382bbe727bf1b4842011f1165382ebea3f199a5e6ece8e941176c1056792da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256173643c56e950b1949114bcc752440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e644849375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c344eb5cd8bdc894985a83c4d733f520c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d41015f48cd05c1ede0d4dd391b24166c70113f5cabe4e39d13e5bbb74b82c3477782abe66bc6f693e787d9a35d11346265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6362e1d335cbb315684af6ca2fdebb1c2414908113c1d41a1b5cdecf05d3c94c5d2dd3a111a993754a6c898e34a8df2bf339ada7a1e7f625ed3aa5a9e8f8fc6ffc08a197b1d69542aa2fa99bfd83fb5ce554d2b281c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc582615f855743dbcd8b1a58805c5dccd5f27666c67745b091bd5923d97f0cea33946763457074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bd5c394fe2d62080a4172c50eace799eda0a5203c1db01d6cd5507418f895e989c0f192597f030e084750f3dc8e614becc2ae33eb0b7e8bcb523ad6bf8febf98eb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c2968af5d7fc1c5831250885455c4cd8a6e1ede0f5dd399a55731d17706b597bc542fd97f0cea33946760477074917ba92b35296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2c1304a0e538c4f442340ca9ee799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5fe154d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842160f11750c3b1df3f1899082eeec5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d211077d1373d5288a360a6f1e7bdc64d45041530114da5b9c1e0f4513098c1d6d1bed51a044351d3a3fae0ccc5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff83fbece2eee74f0e3e7b9a724fb7cf99fa9effc28e413ff90f191a20ef60ea9c6f08cbc0acc54d0c181c6a33ac71b8397c9d8dc4fd3e88060d860d3b4fbacc84dcf7d9fe1e5a24736f45423a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16760473927b56db56f693c3e22be63927750504064d56b9e331f7f057bdd12d45136014527d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a4302dbad04b0c2624a79ceb20ca89b7cc474f0e1e7bda334e33ba5a3a9effc7aa251bb87b1d69242aa5bad9feec0b30dc3189090c890c3459a5cd9be89cdaf5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2cb8a493b9d231bfd30b22e32772663e44cfc78697f3127bb7593775124173992768d7f592e486daa05c221561633158749974f4869585ebe153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498eed1a4207dea216a0da624b0c9ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993dbfaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac3821771b2215fb1ddfa7f6ecc0c1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcc73651bf511b74664546809f819be3a2a7223f5e736b8f5723c6de3f52beea373394ff7866697b3141d0caaea799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5a9998ec8cb04a9241819fc58695529b3dcfc99e8a9a0d9df29777c06c98e0cba4966ade6892aaf2a32720814269e5a5cd7f69a77477faf5932250bf4c78d4fd9a590eee6b6ddf81df0700a11016f6cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d450430146259b499b0f17094f5e9c5c6001f011b632220a3b09fc55f91d676523b0b677d0a327093cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e1a0fd8ba612ec4ce8dbe894ae0a8542a6d696c7851fcd1a8199c385cb4d82a4c033dd61d3b4fcacc839cb798ca2b7e57060af7c68e4edab383eff582baf91842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc69286f1d3f8105c35210481415840dca2e5e1e4f1d93596517f111b74675577c14ef19bf4c2a7354a7a007b0b4513b69ebf569aecb3a6060b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6cd344e0a5f884b402f44ce9aeb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9fa1941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c4612031571083719f7f5859486eae05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7512d1c73dd3b315684af6ca2fdebb1c2414908113c1d41a1b5cdecf05d3c94c5d2ddbad11e084755d7affee4c8c9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df38ff7e8eeeaeb43023a77967e4bbbc395fe92f3ce8a4d33f50b15162ceb6ce6906b04c7cca8c941001c10663e087cb474c834f42dbd5f302309f2c58b4ddfa796ece0b4dbf61bf6760417076962deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a6c57b297beff769afbe7c3c40e1d07196d2026a1be9dc35d9fd474503909657f08307291c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c140dd6b86f2ccacc83bc8748eeae5a24636f62765ffadfa6179a3652bade2842013bd4133949c8c2819ab596c8297c64d41885155dc81d7591ede0f0b8cb5e40202d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19be3d7c3070ecb676a5e57b296af9be7fd9ab2d6252feca30c0e4026a19e8c429c3fa0a52038780219095744d0becc81cdcc01a430497f335e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c1409137b0ebd9eb9f67993ebbaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47212216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b635220a4f1ee24aa84d4a6521c3b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e64786d22e0e6c88fb1fa1df3cf374f197a1e7f420fc2be7a8e9a9ba36fe06a1cef88cb802bd5be8ceafa8fb5fe154d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082dec93c1435dc10716d484d85948c90e6a9ac2f34537866845a28cbd53259b3e13a361b3273f216774f23b9c1e3261787cef7d8022462655258c7187294e2f2e7bdd668212124a5055b20dc92b5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125b7ac6da0ed8c21a4271d1af15b6c5624b0d9ff94ebec926f432aaf6b6e7e364cd7cfa9aa9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f11655ceb6d96f5ff91f2edb99c14716d7710385dada425e8f564cd088e40071d17706ae9cec090fd97f0cb874a36f27693436a463b02428296f7cfa23a47753554064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ad6c1341c3dd418796540458d9c8498eea1a4273c1af1da1d3355d7b8ab913b8d02ba563f0f6b790e364cb7cf89dffadaf31b55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913710970024e1b4c8784eb0082deac5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14743655054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a5647d1bdccf35dbbb1c251492f2418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d69503f11fffd9ac8eb20ed302c7c0e0d0d445df0d98d6df989a0bd9ef957099699fe9ddacc839993ebbaaf0d02721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfc43a232326a7074e76bb52b287f787d9b35d3601460177b947d9d2e02720a2dc24c900016485054c50dca2f37430a4bcd007317f05be90373516614ae0fce5b3d0662f2f22ab0b5526d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672bb1aa6baeeb8a27aa251b18ff596a542ab2dffd9ae9ea906d4128ad696c7c344ed5cdaba89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17675ae96b94f3fd97f0ebb79a12776371163e53aba223e6f362cb068c460513157668e7ccc692f395f6c9854834f1f4b0214925bdc5849094e2bda004057b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff83fbece2eee74f0e3e7b9a724fb7cf99fa9effc2cfc08b686e6c0e457ea06af85f8c8ec5d8542a7d697b6c345ee0a9a9ac2d8dd3a95b1b3268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac3821771b22957a59da51f78b9680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f037e084011c20ccee4f889b7fc174f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c140d06c80a28ab99967dd7e8daaf3d52721f66272e5e5ea6f6fb87460f8a38c7e4aba403395ea8c296ef91d5f8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2f2e2d9f419f474114160a965b8a4f4868585ccd477500ae47e0027351671df811e11f6d257da7a176b0b5521c7cebf669afbe7c3f45f78667e6b3151e5aeaca3288ad6a4501e39656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a93328b9dd48092529a49839f89ceaa5a82b38577c62885e2ccfd9365db7ed3fba5f06f70ab7163b2faab2f29fc6977efb5842167f11724d3bdd16e0eee1f3b9dd0d84c4391414bd88cdc0f08a8181c8d9eb45f26862c55e2cafb1f79cc3d5fbb74b4303d216602f23aeb6f6e4f3964fa22d377512413378b6d8c7f5858486cdd10d45041014623d218b84f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf981f88ac690458d49657f08307291c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce9a8f884a84a9241819fc58695529b3dcfc99e8a9a0d9df29777c06c98e0cba49662d268dbbdf2b43156e12547b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276371635a769b76f693c3e22be63927750504064d56f9d28466f082a9b499f0500091907954d954f491e585dba6a6e1dee11b7466a4d650ee24ce1176a3234b1d061a7c0643878e4be7fd8ab2f1104a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fd1cf90fa296e0c0e457f10dffd8d8c8ec5dd70590ded7909203c1178d8881878110ddf1d7318620c4b7ccf08a6e993ebaaaf2a37072aa7263b2faab2f29fc7067f1f5925606e6172689ea9c3f19ee082c9f93c54743c1066292da8b1a15de080b8dc2e4007399244ee2cb8d1f79ce781bfd32f4706372342aa26dfc791f296f7cef3ed36746265773d45dcc6a2a395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1ad9c429d9ee5a1414908307d9c7441b1c99ff498f9c4c1c28d6a606e8c026143cdfee4eff9b7cc561ece1b1f0f514ad6b8cb4f9a9be2ae444e1a6b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f2b8d383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680d8c25e304376d2363e44dfc7a1a296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19be3d6b2967a7a174f6ea763b6aafa808b8bc2d2755e08e27c0e2533147fdd871c1f741051490814186e31258788f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c344eb0a9a9ac2d8dc4fd3ed9370c720c5c39dbbc87cc87fd3fca5e5767aaa7275baa4f8687ea0383cadf5925779bb4a7b82ea997742b24473da8d941170c10760c498d8441edf780b8fb1e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585dbc596f02f640a04437516d5fb878a84c3d3765f0be37f0f2632177ede861f0e7712a4efdce7197a4026a19eed22cc8bb1c2414908116d4c8500d1c9889498f9e52192f97f030e08475486788fe59ff8c6ab261b1a7e1a5e364cc7cf8e9bcf3fc6ab553e0c6a6d5bb06e04ce9afb9dfec5e9054d0c181c7d601c9159f9e89ceaa5a82b3c22d8630d3b58aacc94e993dbfaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ecf0e51ba74a13727216776b464b83928296e0afa22d3210f7d013395359f3b0769087bdd12d45136145b54c20dca295e1e3b018a447107f711b633220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989e7e557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8542a1d696b3821ede5cd9be89cdaf5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad3f2465a921014878bd54b489f181dfbd5f3003480371bb49dbd4e22922a4de26cb82c36216774f23b9c6f6b4d787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb9d83fedef717513a2c038c4e5547d1ade8e6e9fe95b121cd1d610c1cf590f4a87d70ddfcb53557380e64780f028172d9ff94cbed735e574f190a1e78024f838a4febf98eb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383ddcb9cf6256a0002497b1cd3f1898082c9d97c5501e975052c381d74d48c15b41d094b25b39916004f5ddfb0a3f853d5bea33956761362727b96fbc6f693e787cef7d883c46272173d52ad9745929486cdd05c35200501016d21bbd4f491e4d40cd052440b111b7466a59715fb878a84c3d7234b0a161a7b6612975fffe69aeca3a6213a3866697b3141d0caaea799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5a9984e999ae1ad454d0c3c7998704db5cd9bf89cfdc0cdce89666c62880e6d4fc9f2e8e3fdbbc85a02720873034d1a7ec7e6bb9692bac95842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f238986f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb87fa84c492478f4b677d0a327093cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c898818a4c86ab261a1bfe5a6b572bb1defe9beaaba2dbd12b797e08cb800eb44b682f288fb5d9254d1b681c5a7529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d77655c789d70f09dc5e42de83b21770b06004f58fbd48668f284abb69bf2520293927b56db56f693e787d9a5995370e3157669471933f4e2f2e7bdd668212124a5055b20dc92b5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125b7ac3d51cc8da1a4271dba751f6f2624a7bcdbf0ee0cd2af425abbde3a6eb3efc3ca7a8e5a7ab7aa253f7d1a491af17fd4ce9afb9dfec1dc11f859681c7d4529a498792c2d8dd3b95b3c0339a37c3a28abbdf398c7e8aeab0b43157e12734a7e6ab3f3efe2f2bade0cc735bf1165282ea9b2b1bf91f2c8ad281545288404392dbfd0f09de0c0b8dc2e40106d17577e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a607c619724c790fff19bf4e6c2c70f1e061a6c2327a2bf9f725f9eb6d7d57f3cf21c0b3156a0ca9ee6d88ad6c4503e4dc11c1d6421c1c99fe498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e40025e4fd9b5c4fb55b3b9ca5941272c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c4605331561583719f7f592c0e328e53824740605054c55f8d18565f181a8b596f15f019e91f695d2c48b919be3b2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7cc322b2b2eaf0f467eb35aba8fff8fd1bb553e094e097fb14fd1dae82f28aad42cc108096c8d0d4458d4aafb4dc898712d9fb9377dd6a98a28bcadf39fa7e8eeeaeb43156e12547b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276371635b264bc292f296f7eb674c46127315764906c9b771879192a864e96115e561008934d8b0f09094f5cda02311be711b632220a3b0aee48a00d6a2c74e1e761a7b4327b5cafab0db8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e524f719ae82f383fb5d9007839fd190c344ec5cd8c99cd8dc4d95b2b7329136b5a28acf957bc86491e1e5a24736f45423a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bec538e22177d0a38c22ad92c0a70183bca13b54741164443c51adc593e1e585dbc153334ec44f11f68562c49ce19bd3f2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4f8e9b7dc622a7bfe1b6b272bb1cefe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d6368d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9a590eee6b7ac696941176c1056792da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa3e026a486cdf439d0300575055b30dcb580c580f438c557506ea5ae2052a546014ee19bf4c2a7354a7a305b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f190f7a5a739ad6bfab2e8f8fd1bb553e094e097fb14fd1dae82f28aad42c2048b9fc0d0d4458d4bda98c09c9d0c95b2b626863781f3caa4896ec87997e1a7e22f7fa57763fbedab383eff582bac93842065a75577c9fd9a5f0eec6c3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bec53c46025700c20c22bac7f5b5d486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b1d061a7c073216fafa809b8be5e7513a2866695b315680ca89b799fae0a52018781549094074d0ae99e5efbca560664818651f5f7624a799ff94ce88c7fa563f2f6b796e365ce3da3ada9ee8b7aa020f7d0d7c0e421fc00acceafa8")),z[n("f90d1e5838029a5d641cf776fc3f63")](n("1f2355e0c620c6fe0a3a46e2")).insertAdjacentHTML(n("8e7d3547fdd131c0f843"),n("0f6522c1f72de3a3257870eebe7fd9ab2d6256e6d179d6fe482a5df9de28debb1d5214908307d9c7441b1c99ff498f9c4804339fb011b1c22e162ec9e60aa4db38a563f2a0f0a7a323eb31e7ade5b8b97aa253f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c6a513c10fcfc99c9e821ec3f2d730f020c4b5cbfd886ec86e96a2a3fe6c67a57c68f2babc3829e92e4bbae0e03711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f08af5947c9d5f30220982445b4ddfa7e6ece7f49bb72fc313670212fb96faa672d653839f278843307315764c22bac7f5b5d486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b1d026e0f2632777afa97cfee27e2352b7901080a4152f5de8862fc8ea5b095fc5c049d8c3591d14c8da0fd68b0d4264818651f6f5624a0fd8be08b9d121a56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc8ef8e9e1edea4c033d76997f4cbacc94f993fccf8b4e32f60a16172fea6fe7936a17860eafdcd7341b1493395ea8c296e8f4571dd94d25747971015f4cd8b6c489c5c409ac3841773b56004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787d9c35d314077d1373d45dcc6a2a395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b63563517f5fb90cee126e3362a7a000b0b4253f6df8b63ff8fa6b394ff5d079d3ff422f04f6c22fd9bb1d521491f64185e7125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebf9eaa36e644e0d3f789b714eb4ce9afb9dfec0dc10287ded7909203c1178d88818b871ac7a4c033c37184aadae8896e917e9bfbb4f86c74b73870feadee2f29fe383ddaf5915306e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276371622be7efc786b6f312fac63c46127315764906c9b771879192a864e96115e481c08920dcb585e1f384bcf712440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989d7c0331d3ad51f786241428c9b859fefa6ab263b5a7f6f8b532fc2da3b5ebaee333f103b78fb1d7e442ab2c8bceafaefb5de6029292cad0d5328d49abde9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692dbfa594b8d530b8dc0a25e22873613f4bcec08798b394ce273b436276d3b21a425b52b3969316bed22c4612655231dc22baa7f595a1e2e8e4ed45136014527d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026b6abf991ac9f7594502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f354db0db39db9dfee0ccc10918081c6a2529a4b9d8fded09d1ac4f59b6dd376dbebd1e79f2e8e3fdbbc85b43252e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e20120743428f23ae929376d2e3dfa23a5775126122295359a3f1f6804308853dc0e1246100ad21acb4f48692e0d8d5f6d1ea606b553357e2c48bb72f8137f2175a7a174b0b4556d2bc9be7eada33a6362b79112d6e646360ca9ee799ddf0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceafaead1fc11fc7c194968a16db0acfc8e8d8dc4dc7f5802ec76082f3d1e79d7891619feda5fd2721f63035d292f66576e92e4dbae2e76153b54b33949d8c2a6af91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296e0dfa22a7360a624065a23dd91b4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7fdeea762604a09337c9f7542b0ca9ef799fac5814438fc001c1d25e065ed99600d4c05a557380e647809377396c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c5c4cbf99b65993fceecacf07160e12642b2faab7d6fbe307dfaa4d57b4db3563bcbb9cb7f47f91f2c8ad3f46416d7760385aeca5a5a82181dfad5f17366c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda034201f355eb5335086a16ea4ffe5b3c0434b0a133e1f43a3b7cfeef25f3e96c7d4df3c131c9b3156a0ca9ee12c8e65b450392c00fdcc8125a0982f605d3c752052c97f144f79375483ad1a212e49b7cc374f095f7a5a739ad6a8ffebc9ceb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbc83b43055a07c70b2fbdc2f2b8d383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680d8c64b83476366525bb69aa397e3f196bed22962611391633936c80340c6f4032864e944741165055b20dc92b5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125b7ad9cb0dd38b0d4022dea207b693743c6c88f90bb9cc62f334b6a7edbba124a535abb9e9b1eb6da244e1a6d3c0e524bd5b9c98ec8cb04a9334c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941170974547d9cd8b1a58805c5dccd5f27666c67741b38ae4492e883957a167a26f3f653723bb2deb787e3f1800ba68957751240d37933ddb6a43510430864d840f56164554d21ac9221a58544bcc732440c547f517691d3a3fae0ccc5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0c3364808510acc0624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cd4e88426863595ebd9fa892e8f49dbbdf2e67661e96663e3bcf0647cbf3062f6bec43711e60025e2fd995b0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa291b7d037bdd10920e12570643c46cdc58495b091cd2436406f75deb117415651be959e15b3d7234b1d616b0b5546d2bcce83cfce03a6364b7931580a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e1a0e795b709bd5bea88f08cad1c8542a6d696c79103da54999ed8898711d7f2df6fd56793eb9dbbc82e8f48aee3a1e82721f47461f6a1f72f288f383cd9a3d1734df1165382e8e83f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f684f787c9974882446272073d759cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb9d828f4f83a6211f1cf35d6e5026b6dbf996edaea5d4d42c7c710dcc8501b14c6d202d88b0d4264818651f5f7624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c226874685f7d9e7df398c6e92eeb3e22720803034a5bfed7836bf787aebb9cf7550f94977c5bdc53f19ee082deaba941170c10760c498d8441edf780b8fb1e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585dbc437113ed11b74664546809f819be3a2a7223f5e736b8f5723c6de3f52beea3733143f7cf7197a4026b6cc8ce2fc8ea0a5201d8dc0bd883042b1c98fd1fcdcf515572f7e644849377396c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd9b889cfa81bd9f7d730f120c6c69dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8a695f854b0b8dc0a25e22873613f4bcec08798b394ce273b436276d3b21a425b5233569787ced35d21746242473d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b79017d6e646360ca89b3fc1ff5c131491f7418794401c4b87c809c9da561e26c1ee18a4d422146c88f959fefb07a563f2fbc9baa43ee47cf8ebdfb29d7aa251b097faccf354db4ce8adef9dbf018542a7d694b4c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810700a74656d6869c180b8f514fcc83e40107d17704b08cbb173899394aa66eb6317e683424b264fc7869296e0bb7758d22462655228279847f585f486ca95381031d014623d218b84f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf981f88ac690458d49657f08307291c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce9a8f884a84a9241819fc58695529b3dcfc99e8a9a0d9df29777c06c98e0cba49662d268dbbdf2b43156e12547b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276371635a769b76f693c3e22be63927750504064d56f9d28466f082a9b499f0500091907954d954f491e585dba732441c011b73074486814ae0fc85b3f0134b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88d0cf321a3bda1e7f634e438b9a8a9ee8a7aa253a597e6c8a502ec1db385fb9ef303c113879f81c7d4529b3ca49ed489cb4d80e39360df6284e8cde79e2e8f4edbbd86e27272aa3035d2eda94b3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ecf0e1bfd46b52b25216603f238986f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb87fe917796523b2f028f4f5646d2acebe7eaff96b220ce1c620d1ff493f5ab7c735c3fb0a52038780219096764d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c6a504d81884de9ecd8d13d1f281268741d3b58afe8e79917e9bfbb4f86c74b7386af6aafc663efe2f2bac95eb3710970024e1abd97b45f91e5b8ad0f00701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdc638212124a5054c74b950b085f585dbb153340f440f75b745d7d0ee252ea0d222c70e0f628b0b4256d2acfda39e9e13a6211e1c83dcbb315684af2ca32cafb0a5372878122c6d656061c99fe498def1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9332c7c1e2918f018d4aafde9cbccb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9ca3d54b45c10716d484d85948c90e6a9ac2f34537866845a28cbd53259b3e13a369bf2776366763e44dfc7a1a296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2ac9e83cfce03a6211f1cf35d6e5026b6dbf996edaea5d4d42c7c710dcc8501b14c6da0ed8c21a427397f0318b93743b6c888d0fbddf21a56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12720876676f6a6bc382baf716feca3842167f11724d0acdb3758b9596ac68ed6511e885444d2849c1809c90e6beb9fa6552f916004f796a05920922c53aa73f47110216700a478b8247e3f186bef51c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b1d061a7c073216fafa809b8be5e7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa56281b7eda3e365b83aa6baffaeeb6cd444e0d1e391a44aeb0cae9ff583b91c8d1d8b9dc1d0d4458d4aafde9cbccb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f08af4e5ede9ee40073972957b48bec090fd97f0cb874a36f20612132be66be3976603c2cba7cc46051315613ab3ddb6a4351023c864cd45043685054c74a8c1e0f431347da034257b172f60666562c49ce19bd3f2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4f8ecd3fe13fe7e1b4b6aa36fb2aefe8c8f8fc6de715a0cee780a213f107bd98b181bf0dc51dc7c196d0d532e418909eded8dc4ffff1976d9137b0c4d4e6896e993ebdaaf2d77163a57b23a48dbc3a5ae92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97e7dea3297263a727075922de90b7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0fce1a663634b0a327f9e7643b3cb9df69afbc682453bfd031d1e24e364ee98630c4f04a4503909657f08307291c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d534db098b9589cfde1cdce081709136b2a28abb8d7fce208deab4e56b7da3662bfba9fb6f77e92f3cbae3e4414bbd436282ea993f199e082c9fadde5740811015f4cd8b6c489c5c409ac3841773b56004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002441c047f517691d3b4ae850ec0d7c6522c6b676a7f1633a34f9fe38e9e7713752bfcf35c7f34b7d1ba88e6fe8cb66450392f716d4c1125a098f895a989c0f3433ddb351f6f5624a0fc9bb1da39b7cc574f292a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339136b5a28acf9e62ca28cdcae5a14336f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692dbfa0f09aa5947c9d5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bec53c46025700c20c22bac7f5b5d486cdf05c35256164543c518dc5938094f289b597757b071a046461d3a39ae0ecb1a663634b1d6")),z[n("5050e7c626dcc542344cf9df33df")](n("6b321a2a9d0d820707501c08905b")).addEventListener(n("386a16e25fe6"),()=>{z[n("0a7ca9694bf3b5cc774da0676feebc")](n("e13f027d0b7b8a7d872f466a043b98")).style.display=n("6fce1e8c96"),z[n("4b8d385bbd7982273f613632b87a")](n("ab799fad5814438fc001c1d25e065ed9")).style.display=n("c0f36e7ca77e")}),z[n("cf71a427217d0623bb6dba3e347e")](n("318cc00cdad4430b4cdec8")).addEventListener(n("4397295fa493"),()=>{z[n("5a0c79191b83459c071d50371fbe4c")](n("0bd16c97e1edfc677db13870feadee")).style.display=n("c5d828162c"),z[n("1f2154f7d12df6f34b3d4aeec42e")](n("ec181c8c87b5406e872d59b58caa4f3f8f")).style.display=n("e93807730e35")}),$(n("96092f5de8862fc8ea5b095fc5c049d8c3591d14c8da0fd6")).click(()=>{z[n("306617f771e9136a5d670ec945c41a")](n("92ce35ccf80a354cf4de71dbf74a17")).style.display=n("6d3c834f9209"),$(n("e3ba92a215b51abf9fe884b008d35c949ac182")).css(n("d1263a77252ab671"),n("108f3d0d71"))}),z[n("44f2e3630d75eff629f3fa5d2968f6")](n("33875a56ce81dd")).addEventListener(n("4072eefa27fe"),()=>{A5[n("29f9c735ddfc400143c6")][n("ff47731bf751d1137f4c")](C.Xd)}),(w=z[n("4d59aa74942e36693028a34aa0033f")](n("54d2e255755affdf28c4f048131cd0d60ad1c3450d4b"))).value=L["1a"],w.addEventListener(n("ce3cf800bc84f1"),function(){L["1a"]=parseInt(this.value),Se(),Ia.location.reload()}),(w=z[n("188e3f1f59013b82459f16315d3c02")](n("a96d5fae006dca94c54b5d83460bcd87d6474b"))).value=L["1i"],w.nextElementSibling.value=w.value,w.addEventListener(n("74a6de26162edf"),function(){this.nextElementSibling.value=this.value,L["1i"]=parseFloat(this.value),Se()}),w.addEventListener(n("f741971a0e58"),function(){this.nextElementSibling.value=this.value}),(w=z[n("fd891ac4c49e66d96098f3faf0b36f")](n("c0e67661e96663e3bcf0647cbf3063f6bedb7d4cb9"))).value=L["1x"],w.nextElementSibling.value=w.value,w.addEventListener(n("ff536913ed53e0"),function(){this.nextElementSibling.value=this.value,L["1x"]=parseFloat(this.value),Se()}),w.addEventListener(n("ae561e31c7b7"),function(){this.nextElementSibling.value=this.value}),(w=z[n("7fd7e48646d8609be2d6fdb872f569")](n("5056e6d179d6f3532c40f4cc2f80f8400f55d1da1ed0"))).value=L["1p"],w.nextElementSibling.value=w.value,w.addEventListener(n("cf63b9233d6330"),function(){this.nextElementSibling.value=this.value,L["1p"]=parseFloat(this.value),Se()}),w.addEventListener(n("027aaa6573e3"),function(){this.nextElementSibling.value=this.value}),(w=z[n("b303d0d272045cc7de02c9ec463925")](n("b2b400b79b341d3dcea212aacd62e925a7bef7bcbc32"))).value=L["1q"],w.nextElementSibling.value=w.value,w.addEventListener(n("a337cdf7493f4c"),function(){this.nextElementSibling.value=this.value,L["1q"]=parseFloat(this.value),Se()}),w.addEventListener(n("b14b5d944052"),function(){this.nextElementSibling.value=this.value}),z[n("ef4794163648100b92468d28026519")](n("10962611391633936c80340c6f402a8a419c011c4010")));M.value=L["1y"],M.addEventListener(n("b30ddbd6421c"),function(){var X;M.value!==""&&(M.validity.valid?(X=parseInt(M.value),isNaN(X)?(M.value=0,L["1y"]=0,Se()):X<0||65535<X?M.value=L["1y"]:(L["1y"]=X,Se())):M.value=L["1y"])}),(w=z[n("6a1c49092b93556c17ed40c70f4e5c")](n("d5b123fa74b9bef8a9a731f712ff8dfd86bd14f113bf"))).value=L["1w"],w.nextElementSibling.value=w.value,w.addEventListener(n("7d0d97516f15e6"),function(){this.nextElementSibling.value=this.value,L["1w"]=parseFloat(this.value),Se()}),w.addEventListener(n("798395dc889a"),function(){this.nextElementSibling.value=this.value}),w=z[n("63730022a2748c370e72191c966995")](n("e1251766483797748834"));for(m of Object.keys(Oa)){var O=z[n("5b6f2f2bbe6484170f710833896c")](n("59a5abf8b4a131"));O[n("ddb83efc14b7")]=m,O[n("0582e2c0fdb964d2799be1b4")]=m,w.appendChild(O)}w.value=L["1b"],w.addEventListener(n("5e8c48900c1441"),function(){L["1b"]=this.value,Se()}),m=z[n("8511624c4c16ee51e8107b0268cbf7")](n("00a63621293d35a467ac243f"));for(x of Object.keys(Mt))w=z[n("34e60462597d1fce50e8136a2e65")](n("06f8b8ed6374a2")),w[n("b2b515a9c322")]=x,w[n("b47193ffccca9565c86890fb")]=x,m.appendChild(w),Mt[x]=new Audio(C.k+Mt[x]);L["1u"]&&((x=z[n("5e8c5294030741300a92459c040f")](n("72ec44f11f6856")))[n("4382245ab29d")]=n("0131f647f1196a"),x[n("4a2f69253a9c7f8f26067a11")]=n("ce1ce512a68cf9"),m.appendChild(x),Mt[n("82d031e6f27825")]=new Audio(L["1u"])),m.value=L["1c"],m.addEventListener(n("6b7f053f814794"),function(){var X=Mt[L["1c"]];X&&X.pause(),L["1c"]=this.value,(X=Mt[L["1c"]])&&X.play(),Se()}),(x=z[n("06f0aded4f77a9706bf1a4e36b6ab0")](n("3b9b495c929ca45327913742a888"))).value=L["1d"],x.addEventListener(n("8cbea63efe06b7"),function(){L["1d"]=parseInt(this.value),Se()}),x=z[n("3d49da84845e26992058b3bab0732f")](n("3cfa0a7d6d72f7e137faf4"));for(S of Object.keys(Ho))m=z[n("e614da1c8b8fc9b8821adde49c77")](n("aad41cc9c7501e")),m[n("23a2447ad2bd")]=S,m[n("1edb85c956708b5b52d286cd")]=S,x.appendChild(m);x.value=L["1o"],L["1o"].toString()!=n("1e9f")&&(z[n("0c2c3bba6298010678003593779b")](n("0bde629af6"))[n("d9392f75312b")][n("c5d5320a3ad5b9")]=n("ab29dff20747")+Ho[L["1o"]]+n("10c67b46262673d528882f1f73")),x.addEventListener(n("d604f008b48cf9"),function(){L["1o"]=this.value,this.value!=n("7abb")?z[n("8e6e2544e0da07c0fa423b5df5d9")](n("46b567bd33"))[n("0909ff45e11b")][n("2a58994f5dd082")]=n("5533a564f16d")+Ho[this.value]+n("9b6bb4ab2d1304a09335d0e248"):z[n("fefeb5f4706a97706af2abed6569")](n("b948548844"))[n("aded5b195dc7")][n("29f9de2edef15d")]="",Se()}),z[n("7b4b181aba5c641fe65af1347e716d")](n("39d9d005d3e8561c24")).addEventListener(n("f4265ea696ae5f"),function(){var X,V=this.files[0];V&&((X=new FileReader).onload=Y=>{L["1e"]=Y.target.result,Se(),location.reload()},X.readAsText(V))}),z[n("00b62727413923ba6db73e1975142a")](n("6204411414b141950f")).addEventListener(n("03d76d97e9dfec"),function(){var X,V=this.files[0];V&&((X=new FileReader).onload=Y=>{L["1j"]=Y.target.result,Se(),location.reload()},X.readAsText(V))}),z[n("a17546a0607ac2b5cc745f9e5457cb")](n("feeda7d76b7fa1")).addEventListener(n("3cee166e2e76e7"),function(){var X,V=this.files[0];V&&((X=new FileReader).onload=Y=>{L["1t"]=Y.target.result,Se(),location.reload()},X.readAsDataURL(V))}),z[n("a97d4ea86872ca8dd44c47a64c6fd3")](n("042629a266bd0c326038")).addEventListener(n("3eac68b02c3461"),function(){var X,V=this.files[0];V&&((X=new FileReader).onload=Y=>{L["1u"]=Y.target.result,Se(),location.reload()},X.readAsDataURL(V))}),z[n("fd891ac4c49e66d96098f3faf0b36f")](n("c2a4f0a7eb3ae929a9b4e0b2bc")).value=n("1206e616")+L["1g"].toString(16).padStart(6,"0"),z[n("2bbb486aea8cd44f568a4164cea1dd")](n("41c5b706e8db26082ad5a713bf")).addEventListener(n("188a320a720a3b"),function(){L["1g"]=parseInt(this.value.substring(1),16),C.Sh(),Se()}),z[n("5d29ba64a43e06790038935a90130f")](n("24021285058d0f1a411e01935f73")).value=n("9361a7b5")+L["1ad"].toString(16).padStart(6,"0"),z[n("08be2f2f49312bb2758f26216d2c32")](n("e284d087cb03cd188798c391810d")).addEventListener(n("16c4b0c8744cb9"),function(){L["1ad"]=parseInt(this.value.substring(1),16),Se()}),z[n("e93d0e6828328a4d940c07660c2f93")](n("5b7b293cf27e883108770a3a886a")).value=n("6b395f6d")+L["1v"].toString(16).padStart(6,"0"),z[n("e77f8c2e2e7008338a4e85200a6d11")](n("4ceafa6d7d4ffbc03fc6f94b375b")).addEventListener(n("c317add7291f2c"),function(){L["1v"]=parseInt(this.value.substring(1),16),C.Sh(),Se()}),z[n("f6e0ddfdbf67d9609be1b4d37b5aa0")](n("f8be4e39d13f5fa164be2f206f3c28a4")).checked=L["1h"],z[n("0a7ca9694bf3b5cc774da0676feebc")](n("56906c9b77197d033a804d82091a4a06")).addEventListener(n("be2ce830acb4e1"),function(){L["1h"]=this.checked,Se()}),z[n("e3f380a222f40cb78ef2999c16e915")](n("2d69db929c4f51875c54d484dc")).checked=L["1z"],et.visible=L["1z"],z[n("883eafafc9b1ab32f50fa6a1edacb2")](n("6fd70590dec997851eda1a869e")).addEventListener(n("370b51cbd50bd8"),function(){L["1z"]=this.checked,et.visible=L["1z"],Se()}),z[n("fa6cd979bbe3a5fc677db0577fdeac")](n("c5c1330a64cdbc13bfd22bf33aabbdf7")).checked=L["1aa"],z[n("9c8abb1be51d879ec19b9235d1308e")](n("6d299b52dc15044b070a935b9203155f")).addEventListener(n("56847088340c79"),function(){L["1aa"]=this.checked,Se(),Ia.location.reload()}),z[n("273f4ceeee30c8f34a0e45e0ca2dd1")](n("cb0bb9cc62f725b0a0efbca824")).checked=L["1ac"],z[n("5ff704a6a6f880bb02f61d9892d589")](n("e12517664821936a9a3102721e")).addEventListener(n("cc7e66febec677"),function(){L["1ac"]=this.checked,Se(),Ia.location.reload()}),z[n("7501925cbc061e4118008b72783be7")](n("3a3c883f13bb6db032206f3c28a4")).checked=L["1ab"],z[n("ce38f515978ff188b309ec2ba3a2f8")](n("8caaba2dbd15bf82e496bd0ef61a")).addEventListener(n("d4467ec6b6ce7f"),function(){L["1ab"]=this.checked,Se(),Ia.location.reload()}),z[n("fd891ac4c49e66d96098f3faf0b36f")](n("1f2755e08e24d7f9413947f3df25cbf7431454d0")).checked=L["1k"],z[n("dda93ae424be86f980b813da10938f")](n("2d69db929c52418b5347d981cd535d85515ada82")).addEventListener(n("0a78a47c60f8b5"),function(){L["1k"]=this.checked,Se()}),z[n("34e213737d651fe659e30a4d3958e6")](n("8caaba2dbd0dbd94e680a5")).checked=L["1n"],z[n("3d49da84845e26992058b3bab0732f")](n("bf87b5406e982a41b59dba")).addEventListener(n("4cfee67e3e46f7"),function(){L["1n"]=this.checked,Se(),Ia.location.reload()}),z[n("34e213737d651fe659e30a4d3958e6")](n("4541b38ae4523890244dbb")).checked=L["1l"],ei.visible=L["1l"],z[n("69bd8ee8a8b20acd148c87e68caf13")](n("a7afdd6806b45e72c693c5")).addEventListener(n("e614c018849cc9"),function(){L["1l"]=this.checked,ei.visible=L["1l"],Se()}),z[n("075f6c0ece50e8136a2e65c0ea0df1")](n("7cbaca3dad22aabcf3b4a43ee430beb2e9ae")).checked=L["1s"],z[n("4d59aa74942e36693028a34aa0033f")](n("1ed894c30f408c5a51d68ad0465298544bcc")).addEventListener(n("f1011b451b0192"),function(){L["1s"]=this.checked,Se()}),z[n("e93d0e6828328a4d940c07660c2f93")](n("1ed894c30f5b974743d487cb4e57854e5a")).checked=L["1m"],ti.visible=L["1m"],z[n("5e884585271f411803995cbb133248")](n("c5c1330a64d2b80ea8dd20f235aebaf7a1")).addEventListener(n("77cb118b95cb98"),function(){L["1m"]=this.checked,ti.visible=L["1m"],Se()}),z[n("718596d0b08a12c51c848fee84a71b")](n("a7afdd6806af486adb89df4540c95c42")).textContent=n("2c342ada034057b104")+C.Xd,z[n("f42253b3bda55f2699234a8d799826")](n("97bfed7836bf787aebb9cf7550f94763ceb4cd")).textContent=n("b44783eed4eddf38fd28ccbf")+n("08eb7a6939707eeb3dd06546265564d73dda1b5a2e486dae10c3")}var k,U=g[n("c31aacd52c1628d7ae")];(k=Ml(g5(U)))&&(g[n("c954229f2650ae6db4")]=U.slice(0,-7),g[n("d3f7beaf39c13d")]=k[0],g[n("79829ad8b48a")]=k[1],g[n("41d7ba11b6ff23")]=k[2],g[n("1884351e6805178b")]=k[3],g[n("b8ee966acf7e9bfc89f5")]=k[4]),U=this.v?this.M[n("1256a74064eebc")]:v,this.v=!0,this.Yc=c+n("a668")+f,this.M=g,b.I.zb(b.I.Lg,c),U!==this.M[n("b2b607a0c40e1c")]?this.zi():this.qg()},fe.prototype.Dl=function(){var c=this.v?this.M[n("6b691e3b9d6995")]:v;this.v=!1,this.Yc=_,this.M={},b.I.zb(b.I.Lg,""),c!==this.M[n("c94f38993f77ab")]?this.zi():this.qg()},fe.prototype.Mm=function(){b.I.cc(b.I.Lg);var c=this,f=1;(function g(){!fe.yf.Vl()&&f++<5?G.ha(g,1e3):fe.yf.nm(function(){},function(m){c.Yk(T,m.Ci)})})()},fe.prototype.zi=function(){for(var c=0;c<this.fi.length;c++)this.fi[c]();this.qg()},fe.prototype.qg=function(){for(var c=0;c<this.ii.length;c++)this.ii[c]()},fe.prototype.xl=function(){fe.yf.um()},fe),b.Sp=(Vi.prototype.jd=function(){return this.ma},Vi.prototype.td=function(c){this.Ba=c,this.ma.visible=c},Vi.prototype.na=function(){this.Fc=this.Ec[n("0bcb649afba8")](),this.Gc=this.Ec[n("0d96eaa9f66a67")]();for(var c=this.Gc/30,f=0;f<this.Bd.length;f++)this.Bd[f].Ki(c)},Vi.prototype.Ha=function(){if(this.Ba)for(var c=0;c<this.Bd.length;c++)this.Bd[c].Ha(this.la)},Vi),b.Rg=(st.prototype.sa=async function(c){var f=this;this.Ec=c,this.od=c.get()[0],this.la=(c={[n("c151229a3357b4")]:f.od,[n("9003b380ff82a408ed07beaaf09db60e")]:0,[n("3233862050a28aac542899")]:n(L["1a"]===1?"0105e656e20672":"13b37064f0a4")},await No(c)),this.Ba=!1,this.lb=new b.Gi(new Float32Array(3*A)),this.Gc=this.Fc=1,this.Sd=this.Rd=this.Qd=this.Nd=this.gd=P.X,this.na(),E.B.Fg(function(){f.lb.fh()})},A=Math.min(100,b.$g.Sn),P={X:n("bafb10b98e"),Jc:n("e889464fdd"),Kc:n("30311ef706")},st.prototype.td=function(c){this.Ba=c},st.prototype.na=function(){var c=G.e();this.Fc=this.Ec[n("08ae233f7835")](),this.Gc=this.Ec[n("964f3d40fdc328")](),this.la.resize(this.Fc,this.Gc,c),this.od.width=c*this.Fc,this.od.height=c*this.Gc,c=this.Gc/4,this.lb.Ki(c),c=G.Hd(2*Math.floor(this.Fc/c)-5,1,A),this.lb.Hi(c)},st.prototype.Ya=function(){if(this.Ba){var c=G.Rb()/200,f=Math.sin(c);this.lb.ol(this.Mn(this.gd,f),this.Qn(this.gd,f)),this.lb.Wn(this.bg(this.Nd,f),this.bg(this.Qd,f),this.bg(this.Rd,f),this.bg(this.Sd,f));for(var f=this.lb.xd,g=this.lb.Y,m=this.lb.ed,x=this.Fc-.5*(this.Fc-.5*f*(g-1)),S=.5*this.Gc,w=0,M=0,O=-1;O<g;O++){var k=O,U=Math.cos(+k/12*3.141592653589793-c)*(1-Math.pow(16,-1*k/12));0<=O&&(m[3*O]=x-.5*f*k,m[3*O+1]=S+.5*f*U,m[3*O+2]=Math.atan2(M-U,k-w)),w=k,M=U}this.lb.Ha(),this.lb.ho(this.la)}},st.prototype.Dc=function(c){this.lb.Dc(c)},st.prototype.no=function(c){this.gd=c?P.Kc:P.Jc,this.Sd=this.Rd=this.Qd=this.Nd=P.X},st.prototype.wo=function(c){this.gd=P.X,this.Nd=c?P.Kc:P.Jc,this.Sd=this.Rd=this.Qd=P.X},st.prototype.Ao=function(c){this.Nd=this.gd=P.X,this.Qd=c?P.Kc:P.Jc,this.Sd=this.Rd=P.X},st.prototype.Do=function(c){this.Qd=this.Nd=this.gd=P.X,this.Rd=c?P.Kc:P.Jc,this.Sd=P.X},st.prototype.Ho=function(c){this.Rd=this.Qd=this.Nd=this.gd=P.X,this.Sd=c?P.Kc:P.Jc},st.prototype.Mn=function(c,f){switch(c){case P.Jc:return .9+.1*f;case P.Kc:return .4+.3*f}return 1},st.prototype.Qn=function(c,f){switch(c){case P.Jc:return .6+.5*f;case P.Kc:return .3+.3*f}return 1},st.prototype.bg=function(c,f){switch(c){case P.Jc:return .9+.1*f;case P.Kc:return .6+.4*f}return 1},st),b.fl=(Wi.Cp=function(c){return new Wi(c[n("090af955ee1b")],c[n("bdc94a1532c6")],c[n("0bd26290edb5e86371a870")],c[n("011cec5ae7037e596b16ee7fec0b7c25")],n("f90e1e5f1e1c9640751bec5a"),c[n("a7b1cd")],c[n("bdda460024")])},Wi.Mp=function(c){return new Wi(c[n("feffb2f86176")],c[n("289e1f1e5f09")],c[n("9807b585fe98a70ec21d87")],c[n("f0af5d2d96304fa69aa55f089d384daa")],n("ee1bd5f29171dd7582eed7e7"),c[n("ab35c9")],c[n("bb18c4de5a")])},Wi),b.Fp=(ts.prototype.Ye=function(c,f,g,m){var x=this.of.resources.uniforms.uniforms.uColorOverlay;x[0]=c,x[1]=f,x[2]=g,x[3]=m},ts.prototype.Fm=function(c){this.of.resources.uTexture=c.source,this.of.resources.uSampler=c.source.style},ts.prototype.Ha=function(c,f,g,m){this.Ud.position.x=c,this.Ud.position.y=f,this.Ud.scale.x=g,this.Ud.scale.y=m;var x=this.of.resources.uniforms.uniforms.uTextureScale;x[0]=.2520615384615385*g,x[1]=.4357063736263738*m,(g=this.of.resources.uniforms.uniforms.uTextureOffset)[0]=.2520615384615385*c,g[1]=.4357063736263738*f},ts),b.mc=(Wt.prototype.uc=function(c){this.L.texture=c.ig(),this.L.anchor.set(c.Yn,c.db),this.Rk=c.jo,this.Tk=c.po},Wt.prototype.Ye=function(c){this.L.tint=parseInt(c.substring(1),16)},Wt.prototype.Vb=function(c){this.L.width=c*this.Rk,this.L.height=c*this.Tk},Wt.prototype.xj=function(c){this.L.rotation=c},Wt.prototype.Gf=function(c,f){this.L.position.set(c,f)},Wt.prototype.Ra=function(c){this.L.visible=c},Wt.prototype.Bf=function(){return this.L.visible},Wt.prototype.Sa=function(c){this.L.alpha=c},Wt.prototype.Ad=function(){G.Ta(this.L)},Wt),b.Uf=(Qe.prototype.Ue=function(){this.Ia!=null&&G.Ta(this.Ia.ma),this.ka!=null&&G.Ta(this.ka),this.aa!=null&&G.Ta(this.aa)},Qe.prototype.ui=function(){this.lg(.25),this.S.Bb="",this.nd=!0,this.qa={},this.Ra(!1)},Qe.prototype.Pj=function(c){this.S=c,this.wi(this.qb)},Qe.prototype.Ra=function(c){var f=this.qb;this.qb=c,this.wi(f)},Qe.prototype.lg=function(c){this.Tb=50*c;var f=c,g=(c>this.K.og&&(f=Math.atan((c-this.K.og)/this.K.Nh)*this.K.Nh+this.K.og),f=Math.sqrt(4*Math.pow(5*f,.707106781186548)+25),Math.min(200,Math.max(3,5*(f-5)+1)));if(c=this.ab,this.wb=.025*(5+.9*f),this.ab=Math.floor(g),this.ai=g-this.ab,0<c&&c<this.ab)for(var f=this.Ub[2*c-2],g=this.Ub[2*c-1],m=this.Za[2*c-2],x=this.Za[2*c-1],S=this.ia[2*c-2],w=this.ia[2*c-1];c<this.ab;c++)this.Ub[2*c]=f,this.Ub[2*c+1]=g,this.Za[2*c]=m,this.Za[2*c+1]=x,this.ia[2*c]=S,this.ia[2*c+1]=w},Qe.prototype.Ro=function(c,f){for(this.ab=f,f=0;f<this.ab;f++)this.Ub[2*f]=this.Za[2*f]=this.ia[2*f]=c(),this.Ub[2*f+1]=this.Za[2*f+1]=this.ia[2*f+1]=c()},Qe.prototype.nk=function(c,f,g){for(this.sf=g,g=0;g<this.ab;g++)this.Ub[2*g]=this.Za[2*g],this.Ub[2*g+1]=this.Za[2*g+1];this.Kl(c-this.Za[0],f-this.Za[1],this.ab,this.Za)},Qe.prototype.Kl=function(c,f,g,m){var x=G.bh(c,f);if(!(x<=0)){var S=m[0];m[0]+=c,c=m[1],m[1]+=f;for(var w=1-2*(f=this.wb/(this.wb+x)),M=1,O=g-1;M<O;M++){var k=m[2*M];m[2*M]=m[2*M-2]*w+(k+S)*f,S=k,m[2*M+1]=m[2*M-1]*w+((k=m[2*M+1])+c)*f,c=k}f=this.ai*this.wb/(this.ai*this.wb+x),m[2*g-2]=m[2*g-4]*(w=1-2*f)+(m[2*g-2]+S)*f,m[2*g-1]=m[2*g-3]*w+(m[2*g-1]+c)*f}},Qe.prototype.Ke=function(){return{nb:this.ia[0],ob:this.ia[1]}},Qe.prototype.uh=function(c,f){for(var g=1e6,m=c,x=f,S=0;S<this.ab;S++){var w=this.ia[2*S],M=this.ia[2*S+1],O=G.bh(c-w,f-M);O<g&&(g=O,m=w,x=M)}return{nb:m,ob:x,kg:g}},Qe.prototype.Wj=function(c){this.gl=c},Qe.prototype.Jf=function(c,f){this.Wa=G.Q(this.Wa,this.nd?this.sf?.9+.1*Math.cos(c/400*3.141592653589793):1:0,f,.00125),this.Gg=G.Q(this.Gg,!this.nd||this.sf?1:0,f,.0025),this.Ia!=null&&(this.Ia.ma.alpha=this.Wa),this.ka!=null&&(this.ka.alpha=this.Wa)},Qe.prototype.Of=function(c,f,g,m){if(this.qb&&this.nd)for(var x=Math.pow(.11112,f/95),S=0;S<this.ab;S++){var w=G.Mf(this.Ub[2*S+1],this.Za[2*S+1],g);this.ia[2*S]=G.Mf(G.Mf(this.Ub[2*S],this.Za[2*S],g),this.ia[2*S],x),this.ia[2*S+1]=G.Mf(w,this.ia[2*S+1],x)}if(this.Ia!=null&&this.qb&&this.Ia.Nl(this,c,f,m),this.ka!=null&&(this.ka.Oe.x=this.ia[0],this.ka.Oe.y=this.ia[1]-3*this.wb),this.aa!=null&&L["1s"]){for(var M in this.aa.x=this.ka.position.x,this.aa.y=this.ka.position.y+1,this.aa.lc)this.qa[M]!=null&&this.qa[M].Ba||(this.aa.removeChild(this.aa.lc[M]),delete this.aa.lc[M]);for(var O in c=0,this.qa)(f=this.qa[O])&&f.Ba&&(g=this.aa.lc[O],g||(f=E.B.V().dh(f.va).Oa,this.aa.lc[O]=new we(f.ig()),g=this.aa.lc[O],g.width=30,g.height=30,this.aa.addChild(g)),g.x=c,c+=35);this.aa[n("16d7b1df755f")].x=.5*this.aa.width,this.aa[n("8344ec00684c")].y=this.aa.height}},Qe.prototype.wi=function(c){this.qb?c||this.Ql():(this.Ia!=null&&G.Ta(this.Ia.ma),this.ka!=null&&G.Ta(this.ka),this.aa!=null&&G.Ta(this.aa))},Qe.prototype.Ql=function(){this.Ia==null?this.Ia=new b.$g:G.Ta(this.Ia.ma),this.Ia.Yd(E.l.K.rd,E.B.V().Ef(this.S.qi),E.B.V().Ee(this.S.oa),E.B.V().pj(this.S.Kb),E.B.V().rj(this.S.ub),E.B.V().wj(this.S.Nb),E.B.V().Zg(this.S.eb),"#ffffff"),this.ka==null?(this.ka=new je({text:"",style:{fontFamily:"PTSans"}}),this.ka.Oe={x:0,y:0},this.ka.anchor.set(.5,0)):G.Ta(this.ka),this.aa==null?(this.aa=new le,this.aa.lc={}):G.Ta(this.aa),this.ka.style.fontSize=L["1w"],E.B.V().Ee(this.S.oa),this.ka.style.fill=L["1v"],this.ka.text=this.S.Bb,this.gl.On(this.S.T,this.Ia,this.ka,this.aa)},Qe.Sf=function(){this.T=0,this.qi=b.ce.ff,this.eb=this.Nb=this.ub=this.Kb=this.oa=0,this.Bb=""},Qe),b.dj=(kt.prototype.cm=function(c){return new kt(c,this.Hb,this.Lb,this.vb,this.Ob)},kt.prototype.im=function(c){return new kt(this.Ka,c,this.Lb,this.vb,this.Ob)},kt.prototype.om=function(c){return new kt(this.Ka,this.Hb,c,this.vb,this.Ob)},kt.prototype.vm=function(c){return new kt(this.Ka,this.Hb,this.Lb,c,this.Ob)},kt.prototype.Am=function(c){return new kt(this.Ka,this.Hb,this.Lb,this.vb,c)},kt),b.Gi=(I=new b.dj(0,0,0,0,0),Ut.prototype.jd=function(){return this.H.ma},Ut.prototype.Hi=function(c){if(this.Y=c,this.H.Y!==c){for(var f=c;f<this.H.o.length;f++)this.H.o[f].Aa();for(;this.H.Y>c;)--this.H.Y,(f=this.H.o[this.H.Y]).id.Ad(),f.O.Ad();for(;this.H.Y<c;)f=this.H.o[this.H.Y],this.H.Y+=1,this.H.ma[n("0113e750c61e6e546d")](f.O.L),this.H.ma[n("ab3dc9fa6c0858ced7")](f.id.L),f.O.Sa(this.Qg),f.id.Sa(this.Sg);for(c=0;c<this.H.P.sd.length;c++)this.H.P.sd[c].Sa(this.Vg);for(c=0;c<this.H.P.ud.length;c++)this.H.P.ud[c].Sa(this.Xg);for(c=0;c<this.H.P.Sc.length;c++)this.H.P.Sc[c].Sa(this.Yg);for(c=0;c<this.H.P.vd.length;c++)this.H.P.vd[c].Sa(this.ah)}},Ut.prototype.Dc=function(c){this.dd=c,this.Ng=n("6eda023214e552e31061"),this.fh()},Ut.prototype.Dm=function(c){this.dd=I,this.Ng=c,this.fh()},Ut.prototype.fh=function(){this.H.Yd(b.Nc.fk,null,E.B.V().Ee(this.dd.Ka),E.B.V().pj(this.dd.Hb),E.B.V().rj(this.dd.Lb),E.B.V().wj(this.dd.Ob),E.B.V().Zg(this.dd.vb),this.Ng)},Ut.prototype.Ki=function(c){this.xd=c},Ut.prototype.ol=function(c,f){for(this.Qg=c,this.Sg=f,c=0;c<this.Y;c++)(f=this.H.o[c]).O.Sa(this.Qg),f.id.Sa(this.Sg)},Ut.prototype.Wn=function(c,f,g,m){for(this.Vg=c,this.Xg=f,this.Yg=g,this.ah=m,c=0;c<this.H.P.sd.length;c++)this.H.P.sd[c].Sa(this.Vg);for(c=0;c<this.H.P.ud.length;c++)this.H.P.ud[c].Sa(this.Xg);for(c=0;c<this.H.P.Sc.length;c++)this.H.P.Sc[c].Sa(this.Yg);for(c=0;c<this.H.P.vd.length;c++)this.H.P.vd[c].Sa(this.ah)},Ut.prototype.Ha=function(){var c,f,g,m=2*this.xd,x=3*this.xd;for(0<this.Y&&(c=this.ed[0],f=this.ed[1],g=this.ed[2],this.H.o[0].ja(c,f,m,x,g),this.H.P.ja(c,f,m,g)),c=1;c<this.Y;c++)this.H.o[c].ja(this.ed[3*c],this.ed[3*c+1],m,x,this.ed[3*c+2])},Ut.prototype.ho=function(c){c.render({container:this.H.ma})},Ut),b.i=(He.ac=$(n("2d3b9dd3d343508f5254d89dd74e168f5c40c991b2")),He.dc=$(n("afc5831140904743c38bd107598345")),He.ec=$(n("82b676a6f5782b70ebf761fffb6b244efcd0")),He.hc=$(n("21b79167c8f755335cea862bdfff5f")),He.jc=$(n("b7cd8b195c8d504b9286a85734")),He.Ib=$(n("44b0b4243a7cf9ee20e9fd322648f7d4")),He.nc=$(n("1523a5fbf46b72a23063fabed43f55bd4061")),He.Wb=$(n("7aae0ebe0e603064f2be32fce360")),He.pc=$(n("5fb553e197fb84a513fd1bf79df588a9")),He.qc=$(n("350385dbd5455a885440d8ddb75b2683")),He.rc=$(n("039137c5f5ddfa8e79d56e8aeaa4bc747aa162")),He.sc=$(n("5fb553e186e697b915b50ebb9ff99abf168d128d9dca908503c11684d6da948b08")),He.tc=$(n("1c486cdc4583101c56580196459c47184313009a53751bec5aa8006e5d7e")),He.prototype.C=function(){},He.prototype.gb=function(){},He.prototype.da=function(){},He.prototype.ee=function(){},He.prototype.na=function(){},He.prototype.Ya=function(){},He),b.Ul=(F=$(n("31878157d3cf59095587d80dcdda561f2f")),D=$(n("144064d47e80340a70403d804e850b1d5110")),H=$(n("c8bc3828af7260f8a2c06650f94771")),N=$(n("681c988819d3c209072b86a00ea1da7f4c2683a9")),j=$(n("05d3b58bef9365dd61d3e2a5e27172a370")),re=$(n("08fc78686a3420be7ccc21007b1733")),de=$(n("dc082c9c86d84c52881856db89da4f")),Z=$(n("9a8e6e9ef8460e50ce9e06dac7450c")),q=$(n("c91f79cf2a5fa265fc21326a2327a4")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.md);var c=this,f=q.get()[0];F.text(G.N(n("5a0272093b970e96031e415b14925b8c060f0209078b5c64"))),D.text(G.N(n("c31dabd2220067ddaa11a8903de522b7bff0fba538e62da3b5f9b8"))),D.click(function(){E.h.J(E.h.pa)}),De.hj=()=>{C.pe=!C.pe},De.bi=()=>{var m,x=E.l.U,S=C.bd;S.length&&x.Ia&&(m=S.indexOf(x.S.oa),x.Ia.aj(m===-1?S[0]:S[(m+1)%S.length]))},De.xm=()=>{var m,x=E.l.U,S=C.Vh;S.length&&(m=S.indexOf(x.S.eb),x.Ia.pl(m===-1?S[0]:S[(m+1)%S.length]))},De.ad=()=>{C.Re&&ki&&ki(C.Re,C.fg)},De.qm=()=>{ua(1)},De.Ii=()=>{var m,x=Object.keys(Oa);x.length&&(m=x.indexOf(L["1b"]),L["1b"]=m===-1?x[0]:x[(m+1)%x.length],C.Xh())},De.Kk=()=>{try{C.ua&&C.ua.send(Gi(JSON.stringify({[n("e3f5")]:2})))}catch{}};let g=[ba,ai];$(n("1ba46963f3")).keydown(function(m){m.keyCode===32&&(c.Pb=!0)}).keyup(function(m){var x;m.target.type!==n("1257b15d62")&&((x=m.code)===n("6d158a59a0")?De.hj():x===n("add54a1977")?De.bi():x===n("a31fc0ef6f")?De.Kk():x===n("cb37a8c708")?De.xm():x===n("e3df80af35")?De.ad():x===n("9b07f8f745")?De.qm():x===n("2f2b54dbf0")?De.Ii():x===n("865c2d60c0")?C.Fe=!C.Fe:x===n("9e640548ee")?C.Ne=!C.Ne:x===n("16ecbdd054")?(E.h.D.F.Ca.Ic=!E.h.D.F.Ca.Ic,E.h.D.F.jb.visible=E.h.D.F.Ca.Ic,E.h.D.F.Ca.Ha(E.h.D.F.Ca.lc)):x===n("69949ef19dbf0be11586")?ua(C.fc+L["1i"]):x===n("92ed21c8e6463c7aefc928dfff4c14")&&ua(C.fc-L["1i"]),m.keyCode===32)&&(c.Pb=!1)}),f.addEventListener(n("be38e834a7bf"),m=>{C.Ph&&(m.deltaY<0?ua(C.fc+L["1i"]):ua(C.fc-L["1i"]))},{capture:!0,passive:!0}),f.addEventListener(n("4ce9e16a3349ffcc22c0"),function(m){var x,S;m&&L["1f"]===0&&!C.pe&&(m=m.touches[0],x=.5*f.offsetWidth,S=.5*f.offsetHeight,n("8e6a3e45f7c53dcbf343")!=typeof m.clientX?c.wc=Math.atan2(m.clientY-S,m.clientX-x):c.wc=Math.atan2(m.pageY-S,m.pageX-x),m=Math.min(Math.sqrt((x-m.pageX)*(x-m.pageX)+(S-m.pageY)*(S-m.pageY)),110),et.position.x=x+m*Math.cos(c.wc),et.position.y=S+m*Math.sin(c.wc))},{capture:!0,passive:!0}),f.addEventListener(n("b95e54995e46cc84a04037"),function(m){m.preventDefault(),L["1f"]!==2&&L["1f"]!==3&&m&&(c.Pb=2<=m.touches.length)},!0),f.addEventListener(n("074c660fe854e8106b"),function(m){L["1f"]!==2&&L["1f"]!==3&&m&&(c.Pb=2<=m.touches.length)},{capture:!0,passive:!0}),f.addEventListener(n("03d96a83f4dde4957dd9"),function(m){!m||C.pe||m.shiftKey||(c.wc=Math.atan2(m.clientY-.5*f.offsetHeight,m.clientX-.5*f.offsetWidth))},!0),f.addEventListener(n("3f1d2ec7b011a1d93016"),function(){c.Pb=!0},!0),f.addEventListener(n("386415fe4fe80b7f"),function(){c.Pb=!1},!0),f.addEventListener(n("f1121c4d1b12925a94050d49"),function(m){var x,S;Ja&&m.pointerId===Bl?(Ja.hi=!0,Ja.parent[n("41c6ac38aad52614")]({x:m.clientX,y:m.clientY},null,Ja.position)):Za.any&&(Ct&&m.pointerId===zo&&(x=Ct.height/2,S=Math.max(x,Math.min(Ct.parent[n("0267ab5969f4a9f5")]({x:m.clientX,y:m.clientY}).y,Ct.parent.height-x)),Ct.parent.Xi((Ct.parent.height-Ct.height-(S-x))/(Ct.parent.height-Ct.height),1)),J.pg||m.pointerId!==J.$a||J.Uo(m))},{capture:!0,passive:!0}),f.addEventListener(n("bdde50192fc6a606b0c6"),function(m){Ja=null,Za.any&&(Ct=null,zo=-1,et.$a===m.pointerId&&(et.$a=-1,et.alpha=.25),J.pg||m.pointerId!==J.$a||(J.visible=J.qh,J.To(),J.$a=-1))},{capture:!0,passive:!0}),Za.any&&(C.Zh=c,f.addEventListener(n("a324caff492c4ce8cf33daf0"),function(m){if(et.$a===-1&&(et.$a=m.pointerId,et.alpha=1),!J.pg){for(var x of g)if(m.clientX>=x.x&&m.clientX<=x.x+x.width&&m.clientY>=x.y&&m.clientY<=x.y+x.height)return;J.hg||J.$a!==-1||(J.$a=m.pointerId,J.x=m.clientX,J.y=m.clientY,J.visible=!0,J.Bk())}},{capture:!0,passive:!0}))})).prototype.C=function(){},Q.prototype.gb=function(){R.g(b.i.ac,50),R.g(b.i.dc,1),R.g(b.i.ec,50),R.g(b.i.hc,50),R.A(b.i.jc,500),this.La===se.bf?R.g(b.i.Ib,1):R.A(b.i.Ib,500),R.g(b.i.nc,50),R.g(b.i.Wb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.bf=function(){return this.La=se.bf,this},Q.prototype.Kh=function(){return R.g(H,1),G.ha(function(){R.A(H,500)},3e3),R.g(N,1),G.ha(function(){R.A(N,500)},500),this.La=se.Kh,this},Q.prototype.da=function(){this.Pb=!1,this.F.na()},Q.prototype.na=function(){this.F.na()},Q.prototype.Ya=function(c,f){this.F.Ya(c,f)},Q.prototype.Oo=function(c,f,g){var m;1<=f&&f<=10?(f=G.N(n("7820d4af19b59028e13ca7fdf6b0b522e42de4abe0bcad3abe08")+f),m=G.N(n("750f994c9c12554b1c039a1e7317f041e9022948651be859c4104d2f70f0f7")),G.N(n("fbc5938a1ac8af9562d960d8f4d7ea936ad0238de7a1e36741a16673fbbcb7677ebf6e49f0bfc5")).replace(n("edfb58e241c7c4e0"),g).replace(n("fdcb48f2b0d734f0"),c).replace(n("9e0a5773909653f1"),f)):(f="",m=G.N(n("8e763e45f7db7ac2f74a3d07e8ce2fd8f25b4e45d0ca2cdcd2")),G.N(n("f741970e1e5453099e5d645cf05be61f66542709e35dff1b5d2562f7ff30bbeb723b6ac4f43ef0")).replace(n("1c4869ad10d45537"),g).replace(n("4cb8b95d6104a5e7"),c)),j.html(G.N(n("948cb803fd11f48cfd80bb41d2149186c881c80ec70c98"))),re.html(c),de.html(f),Z.html(m)},Q.prototype.sa=async function(){this.F=new b.ap,await this.F.sa(q),this.La=se.bf,this.wc=0,this.Pb=!1},se={bf:0,Kh:1},Q),b.$n=(te=$(n("43d17705ab97a85e22922a13bf72be2521612635fa6bb6242f")),Ie=$(n("e97f592f01318e44980c14090514984f8b0f085f500c9e42")),Tt=$(n("1523a5fbf5657aa87460f8fdd1604cb35773d4ab846e4ea459")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.md),this.Th=-1,this.kf=""})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.ac,500),R.A(b.i.dc,1),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.Ib,50),R.g(b.i.nc,50),R.g(b.i.Wb,50),R.g(b.i.pc,50),R.A(b.i.qc,500),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q.prototype.ee=function(){},Q.prototype.ip=function(){this.pf("",0),R.A(te,100)},Q.prototype.Uk=function(){R.g(te,100)},Q.prototype.pf=function(c,f){this.kf!==c&&(this.kf=c),c=G.Hd(Math.floor(100*f),0,100),this.Th!==c&&(Ie.css(n("7e782975f6fb"),c+n("1e8ad284")),Tt.html(c+n("69ffd9acc8ec5a")))},Q),b.bm=(ne=$(n("6014908009d88b5b0157cf9618d2de")),$(n("6f8543d19ec9d88a1ec61cc798c9939a1ac2")),$(n("4cb8bc2c3d4cbfcf3dcbf30a3a46eedf33c0")),he=$(n("08fc7868613063bd7f95260c794834926c9d35056f")),Li=$(n("4a7e3e6e23b23d8c370d61483588769d")),Ae=$(n("fc680cfc6dbc6f3f6b3422be66be")),Ot=$(n("57ad6bf9b6e1f0a230f105bb8df3c8a615f70ea88eef9ef30dc103")),pa=$(n("94c0e454f504f787f38cba06ce16cf83d69a8105cd0a99d6d898960b")),$(n("74e08474152497ae0aa8d03bad25a7abf0")),ea=$(n("3ca84c3c2d7cafe02ffce83a2b78e4ed")),ga=$(n("382c48b851e0537c2b78ecbe34e7e361")),Ni=$(n("19afa97ff0e332234afbcd79cbf35f2c")),Vt=$(n("1a0eee1e73c2cdc2495a8a1849c18dcb")),ma=$(n("6573d52b8437466f0637810d9e1416565804825c8d05150111078c44")),_a=$(n("d5e365bb34a7f6fcbcbc3efd12ff8dfd86bd09f904bf")),Ba=$(n("524626563b8a35993b197d002dc247900f16091809934d")),ya=$(n("984ce8d8f180f30ec3058b9ccad8961bc900")),xa=$(n("5b296f7db27dcc3300600c3989358e2f0e6f19")),Fa=$(n("4a7e3e6e23b23d8031177d0a38ca74863d0272")),It=$(n("e410148485d4074b805c57da82ec5b2d922a")),Gt=$(n("a13711e7487b8aabdd7559b9")),Bt=$(n("b6624a7ad7a651a1db2ee434b0a0")),Ft=$(n("79cfc99f908352c3e48677dd6b91f4")),ji=$(n("039137c5ead5a49964d5638da2a2fe7a")),ii=$(n("86327a2ae7f661ede27e2944e08e35d3f753395b")),ri=$(n("8abe7eaee3727d51fec22dc0e40a2d5affd932ccf34a")),Vo=$(n("2bf91f2dc28d9c415c8d5b559a9ed846")),Wo=$(n("5d6bed238c3f4e6409379e7d9b770e641d738d4183")),Yo=$(n("b34187955a0514dad70dc4cb4d5d24cab359b3d72b")),$o=$(n("cd9b7db33caffef4b9a72eed2be7b7e9abab33")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.gf)})).prototype.sa=async function(){this.Th=-1,this.kf="",this.je=new b.Rg,await this.je.sa(ea),Ba.click(function(){}),ea.click(function(){E.m.v&&E.h.J(E.h.Pf)}),ga.click(function(){E.u.ok()}),Ni.click(function(){E.u.No()}),_a.keypress(function(f){f.keyCode===13&&E.gi()}),ya.click(function(){E.gi()}),xa.click(function(){E.gi()}),Fa.click(function(){E.h.J(E.h.tj)}),Ft.click(function(){E.h.J(E.h.zf)}),It.click(function(){E.m.v&&E.h.J(E.h.mj)}),Bt.click(function(){E.m.v&&E.h.J(E.h.fj)}),Gt.click(function(){E.m.v&&E.h.J(E.h.Dj)}),ji.click(function(){E.m.v&&E.h.J(E.h.Af)}),this.Np();var c=b.I.cc(b.I.ej);c!==n("e8f8787ea27c")&&c!==n("1efba5f06f01")&&(c=n("c7b99b7f05bd")),Ba.val(c)},Q.prototype.C=function(){var c=this;E.m.Ah(function(){E.m.v?(E.u.ca(E.m.Cn(),b.s.Z),E.u.ca(E.m.Gn(),b.s.xa),E.u.ca(E.m.nl(),b.s.Ea),E.u.ca(E.m.Ln(),b.s.Ga),E.u.ca(E.m.Pn(),b.s.Fa)):(E.u.ca(E.yl(),b.s.Z),E.u.ca(0,b.s.xa),E.u.ca(0,b.s.Ea),E.u.ca(0,b.s.Ga),E.u.ca(0,b.s.Fa))}),E.m.Ah(function(){ya.toggle(E.m.v),Fa.toggle(!E.m.v),xa.toggle(!E.m.v),Bt.toggle(E.m.v),Gt.toggle(E.m.v),ji.toggle(E.m.v),It.toggle(!0),Ft.toggle(!0),E.m.v?(Vt.hide(),ri.html(E.m.nj()),ii.attr(n("042634b4"),E.m.uj()),Vo.html(E.m.Pd()),Wo.width(100*E.m.Rf()/E.m.Tf()+n("00f47066")),Yo.html(E.m.Rf()+n("21b7916480a4617d1baa")+E.m.Tf()),$o.html(E.m.Qf()),_a.val(E.m.Kd())):(Vt.toggle(!E.Cg()),ri.html(ri.data(n("916566a16672"))),ii.attr(n("8d0d7d23"),Ol),Vo.html(n("2202d4")),Wo.width(n("1455")),Yo.html(""),$o.html(1),_a.val(b.I.cc(b.I.ij)))}),E.u.zh(function(){c.je.Dc(E.u.yh())})},Q.prototype.gb=function(){R.A(b.i.ac,500),R.A(b.i.dc,1),R.A(b.i.ec,500),R.A(b.i.hc,500),R.g(b.i.jc,50),R.g(b.i.Ib,50),R.A(b.i.nc,500),R.g(b.i.Wb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.xi=function(){R.A(ne,500),R.A(he,500),R.A(Li,500),R.g(Ae,100)},Q.prototype.Ll=function(){R.g(ne,100),R.g(he,100),R.g(Li,100),R.A(Ae,500)},Q.prototype.pf=function(c,f){this.kf!==c&&(this.kf=c),c=G.Hd(Math.floor(100*f),0,100),this.Th!==c&&(Ot.css(n("997d72a86966"),c+n("5004a096")),pa.html(c+n("11a7a174b0b422")))},Q.prototype.da=function(){this.je.td(!0)},Q.prototype.ee=function(){this.je.td(!1)},Q.prototype.na=function(){this.je.na()},Q.prototype.Ya=function(){this.je.Ya()},Q.prototype.Kd=function(){return _a.val()},Q.prototype.Di=function(){return Ba.val()},Q.prototype.Np=function(){var c,f;E.Cg()||(Vt.show(),c=G.N(n("a97345b848668187d04f56ca5847de8697475e824800ca9ead5d209f165dae96ba1438942c4caa")),f=encodeURIComponent(G.N(n("a65e065dcfc342dacf52156fdfa21dab982a1d27cfe509a3d220e33a91b8edbbb579eb36a7becdb3aa0ffc00ab"))),ma.append($('<a class="mm-skin-over-button" id="mm-skin-over-fb" target="_blank" href="https://www.facebook.com/dialog/share?app_id=861926850619051&display=popup&href=https%3A%2F%2Fwormate.io&redirect_uri=https%3A%2F%2Fwormate.io&hashtag=%23wormateio&quote='+f+'"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ1NiA0NTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0yNDQuMyA0NTZWMjc5LjdoLTU5LjN2LTcxLjloNTkuM3YtNjAuNGMwLTQzLjkgMzUuNi03OS41IDc5LjUtNzkuNWg2MnY2NC42aC00NC40Yy0xMy45IDAtMjUuMyAxMS4zLTI1LjMgMjUuM3Y1MGg2OC41bC05LjUgNzEuOWgtNTkuMVY0NTZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+"/>'+n("4a7e3f1e3daf718f775051")+c+n("7e2a7352a7a102e6f676263cb9de69aecd3a6267f38667e0")).click(function(){E.Wl(),G.ha(function(){Vt.hide()},3e3)})))},Q),b.Co=((Q=G.fa(b.i,function(){b.i.call(this,b.fb.md)})).prototype.C=function(){},Q.prototype.gb=function(){R.g(b.i.ac,50),R.g(b.i.dc,1),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.Ib,50),R.g(b.i.nc,50),R.g(b.i.Wb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q),b.Kn=((Q=G.fa(b.i,function(){b.i.call(this,b.fb.md)})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.ac,500),R.A(b.i.dc,1),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.Ib,50),R.g(b.i.nc,50),R.g(b.i.Wb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.A(b.i.rc,500),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q),b.Un=(Fl=$(n("11a7a177e1e9763b6defe961eefa7e334a")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.md),this.we=[],this.ye=null})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.ac,500),R.A(b.i.dc,1),R.g(b.i.ec,50),R.A(b.i.hc,500),R.g(b.i.jc,50),R.g(b.i.Ib,50),R.g(b.i.nc,50),R.g(b.i.Wb,50),R.A(b.i.pc,500),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){this.Pi()},Q.prototype.rp=function(){return this.ye!=null||0<this.we.length},Q.prototype.Ig=function(c){this.we.unshift(c),G.ha(function(){E.h.Wh()},0)},Q.prototype.Ak=function(c){this.we.push(c),G.ha(function(){E.h.Wh()},0)},Q.prototype.Pi=function(){var c,f,g=this;this.ye==null&&(this.we.length===0?E.h.ge():(c=this.we.shift(),f=(this.ye=c).jd(),R.A(f,300),Fl.append(f),c.Be=function(){f.fadeOut(300),G.ha(function(){f.remove()},300),g.ye===c&&(g.ye=null),g.Pi()},c.da()))},Q),b.fb={md:0,gf:1},b.j=(Dl=$(n("28dc58485c121e8a402c1fe65af05b6b596b1fe7")),Ko=$(n("2f450391c30bc5d3474554cfd51990cd50192fc1ee16aace")),qo=$(n("71c7c197858907dd09c796c9939b52d3ee9b6dc72880e6d4")),$(n("f70dcb590b430d1b8f1d6c17ed41a814665b62")).click(function(){E.h.ge()}),Ko.click(function(){E.m.v&&E.h.J(E.h.Af)}),(Xe=G.fa(b.i,function(c,f){b.i.call(this,b.fb.gf),this.Bb=c,this.Hm=f,this.Df=[]})).prototype.C=function(){Xe.parent.prototype.C.call(this),Xe.Rm||(Xe.Rm=!0,E.m.Ah(function(){E.m.v?qo.html(E.m.Pd()):qo.html(n("9dbe"))})),R.g(b.j.Tg,100)},Xe.xb=$(n("e97f592f0e31864e824f054d1011")),Xe.yb=$(n("d72deb7937693c2aba62927f157d0021")),Xe.Ab=$(n("95a3257b69f8f42af4e27a7d57fbc623")),Xe.Cb=$(n("ebb9dfed03cf168b9d89838f12df")),Xe.Db=$(n("cafebeeebd3ae415bb8df396fb11f10cad")),Xe.Eb=$(n("9361a7b5642370e4e861ebe77a27")),Xe.Fb=$(n("5004a09027d1f9553d04ecc239da")),Xe.Gb=$(n("e0941000935047c5c5cf435e9b")),Xe.Jb=$(n("c351f78530113dd2af0eacc962e33eaca0e1bbb27afe30afac")),Xe.Mb=$(n("b583055b5dcfd709c9cb121122d1ac01abc26a0e20dfbc")),Xe.Tg=$(n("2216d60656db8dd8595ec14a4fd684ec442a9132")),Xe.prototype.gb=function(){R.A(b.i.ac,1),R.A(b.i.dc,500),R.A(b.i.ec,200),R.A(b.i.hc,200),R.g(b.i.jc,200),R.g(b.i.Ib,200),R.g(b.i.nc,200),R.A(b.i.Wb,200),R.g(b.i.pc,200),R.g(b.i.qc,200),R.g(b.i.rc,200),R.g(b.i.sc,200),R.g(b.i.tc,200),Dl.html(this.Bb),Ko.toggle(this.Hm),this.ib()},Xe.prototype.ib=function(){},Xe.prototype.Se=function(c){var f=this,g=2147483647&G.io();return this.Df.push(g),R.A(b.j.Tg,100),G.ha(function(){f.Mj(g)},c),new E5(this,g)},Xe.prototype.Mj=function(c){(c=this.Df.indexOf(c))<0||(this.Df.splice(c,1),this.Df.length===0&&R.g(b.j.Tg,100))},Xe),Cf.prototype.dp=function(){this.Xn.Mj(this.bo)};var Ll,Nl,jl,Xl,Hl,zl,Yi,nc,oc,cc,dc,hc,lc,fc,ci,Vl,$i,Wl,Yl,$l,Kl,ql,Zl,Ql,Jl,ef,tf,af,rf,Ki,as,is,rs,sf,nf,of,cf,ss,di,df,hf,uc,ns,bc,qi,lf,os,ff,uf,at,bf,pf,gf,mf,Zi,_f,yf,cs,pc,Qi,xf,gc,mc,_c,yc,Ji,vf,Tf,nt,er,Sf,wf,tr,lt,ds,Af,ka,Ef,Pf,Q,xc,Ta,Rf,Mf,E5=Cf;function Cf(c,f){this.Xn=c,this.bo=f}function ar(c,f){this.xe=c,this.$c=0,this.Xb=f}function ia(c,f,g){this.xe=c,this.va=f,this.pd=g,this.wf={},this.cb=[[]],this.Vf=this.Td=-10}function vc(){this.Be=function(){}}function Of(){var S=xc[n("cc6a67fba4c9")](),c=xc[n("439c205fa090bd")](),f=Ta[n("f0ae4737913761ae9cbd52")](),g=Ta[n("99656eb8787cd7b5c8754ba0")](),m=Rf[n("6539926c8c28237904398754")](),x=Mf[n("bc628bfba5e34a76ad726ee3")](),S=Math.min(1,Math.min((c-x-m)/g,S/f));S=n("03c07797e9cbe59b7fd925d3baf0b43026e12745b2faa9272efc383caaf9842013a74677cbbd81").concat(S,n("253f")),Ta[n("a0129180")](n("4834fdfe2ef6e76b7d55e0c23ad6f0482a44"),S),Ta[n("ce3ce312")](n("904cbf8ceec8a215f907a98df39fb3"),S),Ta[n("52006716")](n("8e323d52bfd726c4f8543e46e8c6"),S),Ta[n("ddad2ce3")](n("778516c78fde9c800cd6ee806e"),S),Ta[n("9ac82fde")](n("adea5d015fd1d50bc7cb"),S),E.na(),b.oc[n("f8ba59399321529b6f")](0,1)}b.Gm=(Ll=$(n("28dc58485f09018d552c10f64da81568516709d40dbf4b3f7021")),Nl=$(n("05d3b58bfa8e64ce68d3edb5e82f70ab7c68e497ac3a2bfc2d")),jl=$(n("66d21aca190f430f0bd252740bae57ea1f694b564bbd0cbd4e")),Xl=$(n("e89c18089f4941cd95ec50368d6855a891a74914cb7d0eff")),Hl=$(n("b6624a7ac9bf13bfdb62e224bbfee7baaf39fb06f9e9b9ed")),zl=$(n("e89c18089f4941cd95ec50368d6855a891a74914cd7f0bff")),(Yi=G.fa(b.j,function(){b.j.call(this,G.N(n("338d5b42d290974d5a815800cf9fb14733da2853a98de7592495234de174b020")),!1),Ll.click(function(){n("34e6196e567a25ba0eb84e3f70")}),Nl.click(function(){n("a1714cbd4b65f8ed992a1bec")}),jl.click(function(){n("1f334efbcd27faa7116819aa")}),Xl.click(function(){n("03d76a9fe9cbd6cd3b8c3d")}),Hl.click(function(){n("dc4e71c68ec27d00d60016")}),zl.click(function(){n("bb0fd2c751031e83f141f5")})})).prototype.C=function(){Yi.parent.prototype.C.call(this)},Yi.prototype.ib=function(){R.A(b.j.xb,200),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},Yi.prototype.da=function(){},Yi),b.Qm=(nc=$(n("0c787cec7888350b670639957dc42e0a7e013b")),oc=$(n("d0842010b84077c3bddb6906be586adb8fdf0f5f814343db")),cc=$(n("7ce88c7cec34a3b7e1a7b57aea2cbeafe3b3e337f906ba90f78aa402")),dc=$(n("72a606b61a62596d1ff94fa01c7a3465edfd69feef7b246a")),hc=n("c0f37b5fa16363fb"),lc=n("0a79b55567f8b8f2714ca640"),fc=n("df7298190a780925a6768d120e7d090d874f8511"),(ci=G.fa(b.j,function(){b.j.call(this,G.N(n("3d47d194a44a6d93245ba2d6b9553b893d10a265bf377d683027b36dab3975783c2c")),!0);var c=this;this.ph={},this.Oc={vh:{pd:oc,Bh:hc},Io:{pd:cc,Bh:lc},Lo:{pd:dc,Bh:fc}},oc.click(function(){c.df(c.Oc.vh)}),cc.click(function(){c.df(c.Oc.Io)}),dc.click(function(){c.df(c.Oc.Lo)})})).prototype.C=function(){ci.parent.prototype.C.call(this)},ci.prototype.ib=function(){R.g(b.j.xb,50),R.A(b.j.yb,200),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},ci.prototype.da=function(){var c=this,f=this.Se(5e3),g=Jt+n("be6ab217b2a6e6f0f411e43cabbfe9afbd");G.vc(g,function(){c.ph={[hc]:[],[lc]:[],[fc]:[]},c.df(c.rg??c.Oc.vh),f.dp()},function(m){c.ph=m,c.df(c.rg??c.Oc.vh),f.dp()})},ci.prototype.df=function(c){for(var f in this.rg=c,this.Oc)this.Oc.hasOwnProperty(f)&&this.Oc[f].pd.removeClass(n("76774a6c09f859e9"));this.rg.pd.addClass(n("29ead939deed4a04")),c=this.ph[this.rg.Bh];for(var f="",g=0;g<c.length;g++){var m=c[g];f+='<div class="table-row"><span>'.concat(g+1,'</span><span><img src="').concat(m[n("0f2167e3e725e7d36524")],'"/></span><span>').concat(m[n("ea8edf989c11d1ec97")],n("4d1bfc43f47015772527b92dea0f7e3f1e3daf718f775051")).concat(m[n("b62b1d3fdfa7")],n("f8ec0908d97f78bc70b02c76371063e44baa3a3a62787d9a")).concat(m[n("7e672976eac027faf472")],n("039136b5a28acf897bdd63dbbc85b43150b76567f9edaa4f")).concat(m[n("c5de22192de9a313b9cd")],n("cb59ff8e6ab217e7e1b4")).concat(m[n("257dceb4c569")],n("d16760477074917ba92b35296e0bfa23a2775152013f913dda1f"))}nc.empty(),nc.append(f)},ci),b.dn=(Vl=$(n("7f95b3c173db7583f795e5956cd563d3e8a7")),$(n("daceaedeae00d00492dec89a811ec6548c99")).remove(),($i=G.fa(b.j,function(){var c=this;b.j.call(this,G.N(n("7fd9ef9666cc2b91e6d5ecd47bd37d8bffeefc677db13b6af8aff06435b87c6c")),!1),Vl.click(function(){var f=c.Se(1e4);G.ha(function(){E.m.Ap(function(){f.dp()})},500)})})).prototype.C=function(){$i.parent.prototype.C.call(this)},$i.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.A(b.j.Cb,200),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},$i.prototype.da=function(){},$i),b.Zm=(Wl=$(n("d0842010a45779c1b1c57f06bd5b7fdb81c3")),Yl=$(n("6a5e1e4e1e8d5f671bef51a803745d7b14ea51e8")),$l=$(n("44b0b424386be5fd25f1eb323559e2c626ccf3493b4cb7c93ddf")),Kl=$(n("1a0eee1e6edd8fd74b5f811843cf98dc585289534ddaddb7532f")),ql=$(n("3a6ece7e4ebd6fb72b3f61782ab27ebc26")),Zl=$(n("59efe9bfadbc30f608be86b996a206ec44b282fb858d0ccf0387")),Ql=$(n("19afa97fedfc703648fec679d6e2462c04f8ce2fd9cd5a1247cbc505d9f25e055c")),Jl=$(n("176d2bb9eb3ef2e8763c44bfd020c4e20a3340f6c72f")),ef=$(n("a7fd9b295bae4278c68cd40f409054529a80dc4b5f9f5541cb83")),tf=$(n("8b19bf4d7f327ee4fa28f0ab643c78feb62bfce37a2371fec22dc0f2")),af=$(n("c0b43020b46769f1a1f56f36bf696febfdd57d57b54942ceb5cc495bb9436a")),rf=$(n("9a8e6e9eee5d0f57cbdf0198d543094d87c909dac74c0433d3b71daad803193ddf")),(Ki=G.fa(b.j,function(){b.j.call(this,G.N(n("61bb8df080ae49ff08b78eb29db11fd501cc9ec19b9359d80b859dc5918b51c4e090")),!0)})).prototype.C=function(){Ki.parent.prototype.C.call(this)},Ki.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.A(b.j.Ab,200),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},Ki.prototype.da=function(){var c=E.m.zo(),c=window.moment([c.year,c.month-1,c.day]).format(n("16eb94"));Yl.html(E.m.nj()),Wl.attr(n("2c0e1c9c"),E.m.uj()),$l.width(100*E.m.Rf()/E.m.Tf()+n("1523a5fd")),Kl.html(E.m.Rf()+n("b58305581c98fd498f9e")+E.m.Tf()),ql.html(E.m.Qf()),Zl.html(E.m.Vn()),Ql.html(G.Li(E.m.ao())),Jl.html(E.m.fo()),ef.html(E.m.mo()),tf.html(E.m.ro()),af.html(G.Li(E.m.vo())),rf.html(c)},Ki),b.gn=(as=$(n("2216d60655d29ccd43558b4e03d285b25b20d92058a69aa55f2fd13e49a674b22a")),is=$(n("acd8dc4cc3e48677dd6b91f495fa9c73916890eea2fd6777e96671febcfa62")),rs=$(n("b3418795440d4dded202dadd120329ddb459abd72a1d3a97b80ba4ca2ce8")),sf=$(n("a054d0c0d49a9602d8548694cb929b0b")),nf=$(n("2216d60656d898cc5a16805249d085b51f209b2b42a691a75f39")),of=$(n("d642aa5aaa84ec98ae42c4148e96d090cb16cb1a858ec289")),cf=$(n("81d731877599f7cdf9d76fd9619bfba5bc6370a77a73f9bcb46974a2696ff6bec460")),ss=$(n("cf25e371236b2533a725ae232f64393cbe67cc310c7a1633896c")),(di=G.fa(b.j,function(){b.j.call(this,G.N(n("7fd9ef9666cc2b91e6d5ecd47bd37d8bffeefc677db13b75f2bced6375ab6e20ebb1c3")),!1);var c=this;as.click(function(){var f=!!as.prop(n("d604f00cb980f989"));b.I.zb(b.I.Ti,f)}),is.click(function(){var f=!!is.prop(n("67fb01bf88f788ba"));b.I.zb(b.I.Yi,f)}),rs.click(function(){}),sf.click(function(){c.Se(500),E.m.Yh()}),of.click(function(){E.m.v&&E.h.J(E.h.Ri)}),ss.click(function(){E.wd()&&E.h.J(E.h.Ji)})})).prototype.C=function(){var c;di.parent.prototype.C.call(this),c=b.I.cc(b.I.Ti)!==n("4d58ae6ca227"),as.prop(n("ddad37f502b986f0"),c),c=b.I.cc(b.I.Yi)!==n("9fb6c07e50b1"),is.prop(n("20920a16471e0393"),c),c=b.I.cc(b.I.Qi)!==n("b94c5a804e4b"),rs.prop(n("5a0874083d844595"),c),E.m.hk(function(){nf.toggle(E.m.v),cf.toggle(E.m.v)})},di.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.A(b.j.Db,200),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},di.prototype.da=function(){E.wd()?ss.show():ss.hide()},di.prototype.Ui=function(){return rs.prop(n("0a78a4786df4b5c5"))},di),b.rn=(df=$(n("0f6523b1e030faf472656fe3fe3bb0ed7e3e57")),hf=$(n("0ebae2926148bd4b3bc3bdda7959b55d6ac68fdf0f47814d52")),uc=$(n("ebb9dfed1ccb188cdec3878902d8548e9edf9e9c16c0f59b6cda2882e2c0fd")),ns=$(n("1682ea9a695fb35f7b828cde415881510bd589cb")),bc=$(n("8e3a6212e1d73bd7f30a3446f9c039c9b34d01438fc701cdd2")),qi=$(n("1f7513a1d020cae442754befd271cfeb5b145ecc")),lf=$(n("6eda023201f75bf7132a517d1fe611fd0c662374")),os=$(n("ae1a4272c1b71bb7d36a1f3bd5be0cbe")),ff=$(n("29bf996fdeea4012548fc50dd0d11a184bcfcd")),uf=$(n("6c989c0c0335ddb111e8c02e1d3e97a519b5ca")),(at=G.fa(b.j,function(){b.j.call(this,G.N(n("92ca3ac1f35f764efbc63983ee401044d29d09d0c842464ac1d202ce804b1123")),!0)})).prototype.sa=async function(){var c=this;this.Tc=null,this.Uc=[],this.Mk={},this.Ua=new b.Rg,await this.Ua.sa(df),qi.click(function(){c.mp()}),ff.click(function(){c.Tc.sp()}),uf.click(function(){c.Tc.wp()})},at.prototype.C=function(){at.parent.prototype.C.call(this);var c=this;E.B.Fg(function(){var f=E.B.Na.hb;c.Uc=[];for(var g=0;g<f[n("ff436a1bed73f71972484808f95df43a662365")].length;g++)c.Uc.push(new bf(c,f[n("ebef86b701e7038d86d4b49405c900ae92cf89")][g]));for(c.Mk={},g=0;g<f[n("95f57c2177cbe93efcf75b3942e6")].length;g++){var m=f[n("a7abc273459d5f6cce99f54b5090")][g];c.Mk[m[n("669e4c")]]=m}c.$k()}),this.Cc(!1),E.u.zh(function(){c.Cc(!1)})},at.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.A(b.j.Eb,200),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},at.prototype.da=function(){this.$k(),this.Ua.td(!0)},at.prototype.ee=function(){this.Ua.td(!1)},at.prototype.na=function(){this.Ua.na()},at.prototype.Ya=function(){this.Ua.Ya()},at.prototype.$k=function(){var c=this,f=this;os.empty();for(var g=0;g<this.Uc.length;g++)(M=>{var O=c.Uc[M],k=(M=b.d.createElement(n("9fbcc8")),os.append(M),M=$(M),O.Xb.img);k?M.html('<img src="'+k+'" height="40">'):M.html(O.Ip()),M.click(function(){f.li(O)}),O.ri=M})(g);if(0<this.Uc.length){for(var g=E.u.ra(b.s.Z),m=0;m<this.Uc.length;m++)for(var x=this.Uc[m],S=x.Xb.list,w=0;w<S.length;w++)if(S[w]===g)return x.$c=w,void this.li(x);this.li(this.Uc[0])}},at.prototype.li=function(c){this.Tc!==c&&(this.Tc=c,os.children().removeClass(n("c2a3f6b0b524ed3d")),this.Tc.ri&&this.Tc.ri.addClass(n("f3d4878304db1c8e")),uc.html(""),c.Xb!=null&&(c=E.B.Na.hb[n("4542a280bd7e229f39")][c.Xb[n("f267d17695f5d1f98e62d363")]])!=null&&uc.html(G.wm(G.te(c))),this.Cc(!0))},at.prototype.Ai=function(){return this.Tc==null?b.Zc.Dg():this.Tc.Eg()},at.prototype.mp=function(){var c=this.Ai();c.uf()&&this.Xl(c.Yb())},at.prototype.Xl=function(c){var f,g,m,x,S,w,M=E.u.jf(c,b.s.Z);M==null||(M=M.af,E.m.Pd()<M)||(f=E.u.ra(b.s.Z),g=E.u.ra(b.s.xa),m=E.u.ra(b.s.Ea),x=E.u.ra(b.s.Ga),S=E.u.ra(b.s.Fa),w=this.Se(5e3),E.m.Lk(c,b.s.Z,function(){w.dp(),E.h.J(E.h.pb)},function(){E.m.Gh(function(){E.u.ca(f,b.s.Z),E.u.ca(g,b.s.xa),E.u.ca(m,b.s.Ea),E.u.ca(x,b.s.Ga),E.u.ca(S,b.s.Fa),E.u.ca(c,b.s.Z),w.dp()})}))},at.prototype.Cc=function(c){var f,g,m=E.u.yh(),x=this.Ai();x.uf()&&(x=x.Yb(),f=E.u.jf(x,b.s.Z),g=!1,E.u.zc(x,b.s.Z)?(ns.hide(),qi.hide()):f==null||f.cf?(g=!0,ns.show(),qi.hide(),bc.text(G.N(n("b14b5d80505e998fd8475ec24d41cf85b11c2e912b43e98bbd5539996352a063ba2737"))),f!=null&&f.cf&&(f=E.B.Na.hb[n("8025a7abf091af34fc")][f.xk])!=null&&bc.text(G.te(f))):(ns.hide(),qi.show(),lf.html(f.af)),hf.html(n("19c3df69aecf3a6211")+x),this.Ua.Dc(m.cm(x)),this.Ua.no(g),c)&&E.u.ca(x,b.s.Z)},ar.prototype.sp=function(){--this.$c<0&&(this.$c=this.Xb.list.length-1),this.xe.Cc(!0)},ar.prototype.wp=function(){++this.$c>=this.Xb.list.length&&(this.$c=0),this.xe.Cc(!0)},ar.prototype.Ip=function(){return G.te(this.Xb.name)},ar.prototype.Eg=function(){return this.$c>=this.Xb.list.length?b.Zc.Dg():b.Zc.Fi(this.Xb.list[this.$c])},bf=ar,at),b.zn=(pf=$(n("3266c67645b397bb5f669b2213ac6fb82c20293733a37cb624")),gf=$(n("dba9effd2ce40ea086b982b94aeb02b385efc0bc1ad4058d9d")),mf=$(n("382c48b84ff9117d253ce5fc69e2e3763a34e8ee38e9e171")),(Zi=G.fa(b.j,function(){b.j.call(this,G.N(n("b62e162ddfb352aadf22e57fb2bcf4a0b679e53ca4aea2aeba30e204fc97f587")),!0),pf.click(function(){E.h.J(E.h.Af)}),gf.click(function(){E.h.J(E.h.Pf)}),mf.click(function(){E.h.J(E.h.hh)})})).prototype.C=function(){Zi.parent.prototype.C.call(this)},Zi.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.A(b.j.Fb,200),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},Zi.prototype.da=function(){},Zi),b.Fn=(_f=$(n("a5b3156b5effca2e80e84605468fd005dbd0")),yf=$(n("9ff5932154b144648abccc6948ae446edb89de4c1e90505ec3")),cs=$(n("92866696e142395bb7c733cef54a041cc0d216")),pc=$(n("0c787cec6784331139093984738c3e467e0c2cc254941a07")),Qi=$(n("13e12735e0adf87836ae6877b2b2d46657bb4b")),xf=$(n("a2965686d152094b87d218d8c3120033dba011")),gc=$(n("06b2faaa7d7ead6f23faa9c4610eb65062d3b7c7")),mc=$(n("c672ba6abdbeedafe332ff14a68be7c8b412ec1db585")),_c=$(n("f94f491f0a0b9e422c15ef55f605624b2418fe48f91161")),yc=$(n("3a6ece7e49aa61a36f3b652135fa6aac3e2f6333")),Ji=$(n("580ca8982bc8ff5d4d45cbdd1098c55f0756d9de1e")),vf=$(n("1c486cdc5794030109030f925fd41a09490b")),Tf=$(n("f6a28aba8d6edd7fd3f9a9f4753eaa707ee3")),(nt=G.fa(b.j,function(){b.j.call(this,G.N(n("b8e0946fd975d0e8a1fc673db47a76e2b8b7677ea26820e8b5c0600da04474")),!0)})).prototype.sa=async function(){var c=this,f=this;this.Dd=[],this.xa=new er(this,b.s.xa,gc),this.Ea=new er(this,b.s.Ea,mc),this.Ga=new er(this,b.s.Ga,_c),this.Fa=new er(this,b.s.Fa,yc),this.gj=this.cj=this.$i=this.Vi=this.Si=this.Zb=null,this.Ua=new b.Rg,await this.Ua.sa(_f),Qi.click(function(){f.Sm()}),vf.click(function(){f.Zb.Vm()}),Tf.click(function(){f.Zb.$m()}),gc.click(function(){f.Ie(c.xa)}),mc.click(function(){f.Ie(c.Ea)}),_c.click(function(){f.Ie(c.Ga)}),yc.click(function(){f.Ie(c.Fa)}),this.Dd.push(this.xa),this.Dd.push(this.Ea),this.Dd.push(this.Ga),this.Dd.push(this.Fa)},nt.prototype.C=function(){nt.parent.prototype.C.call(this);var c=this;E.B.Fg(function(){var f=E.B.Na.hb;c.Si=f[n("9ace25c8ed6b0952d6")],c.Vi=f[n("520e7b10228f5c80391f")],c.$i=f[n("bc6a92eeb3e26760807c65e3")],c.cj=f[n("34ed17737c6019ff")],c.gj=f[n("1240bb4979d59cc0795f")],c.xa.If(f[n("92c62dc0e571395bf3ca32d9df5d1250db")]),c.xa.Lf(c.Si),c.Ea.If(f[n("7b41121b8b585713f15de41873797b08ea45")]),c.Ea.Lf(c.Vi),c.Ga.If(f[n("f8ae562a8f3e5bbc56b0303a653b32967aab2b22")]),c.Ga.Lf(c.$i),c.Fa.If(f[n("5b643c3a8971933b027a1117956a8823")]),c.Fa.Lf(c.cj)}),this.Cc(!1),E.u.zh(function(){c.Cc(!1)})},nt.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.A(b.j.Gb,200),R.g(b.j.Jb,50),R.g(b.j.Mb,50)},nt.prototype.da=function(){this.Ie(this.Zb??this.xa),this.Ua.td(!0)},nt.prototype.ee=function(){this.Ua.td(!1)},nt.prototype.na=function(){this.Ua.na()},nt.prototype.Ya=function(){this.Ua.Ya()},nt.prototype.Ie=function(c){for(this.Zb=c,c=0;c<this.Dd.length;c++)this.Dd[c].pd.removeClass(n("d5b625ed2ab9bee8"));this.Zb.pd.addClass(n("0d8efda5e27176a0")),this.Zb.gb()},nt.prototype.Bj=function(){return this.Zb==null?b.Zc.Dg():b.Zc.Fi({T:this.Zb.Eg(),va:this.Zb.va})},nt.prototype.Sm=function(){var c=this.Bj();c.uf()&&(c=c.Yb(),this.sn(c.T,c.va))},nt.prototype.sn=function(c,f){var g,m,x,S,w,M,O=E.u.jf(c,f);O==null||(O=O.af,E.m.Pd()<O)||(g=E.u.ra(b.s.Z),m=E.u.ra(b.s.xa),x=E.u.ra(b.s.Ea),S=E.u.ra(b.s.Ga),w=E.u.ra(b.s.Fa),M=this.Se(5e3),E.m.Lk(c,f,function(){M.dp(),E.h.J(E.h.pb)},function(){E.m.Gh(function(){E.u.ca(g,b.s.Z),E.u.ca(m,b.s.xa),E.u.ca(x,b.s.Ea),E.u.ca(S,b.s.Ga),E.u.ca(w,b.s.Fa),E.u.ca(c,f),M.dp()})}))},nt.prototype.Cc=function(c){var f=E.u.yh();if((g=this.Bj()).uf()){var g=g.Yb(),m=E.u.jf(g.T,g.va),x=!1;switch(E.u.zc(g.T,g.va)?(cs.hide(),Qi.hide()):m==null||m.cf?(x=!0,cs.show(),Qi.hide(),pc.text(G.N(n("7820d4af19b59028e13ca7fdf4bab622f877a7bee2a8e02ce40ea086ba89b904f30cbe"))),m!=null&&m.cf&&(m=E.B.Na.hb[n("5370303ea34cb0292f")][m.xk])!=null&&pc.text(G.te(m))):(cs.hide(),Qi.show(),xf.html(m.af)),yf.html("ID: "+g.T+" TYPE: "+g.va),m=this.Ua,g.va){case b.s.xa:m.Dc(f.im(g.T)),m.wo(x);break;case b.s.Ea:m.Dc(f.om(g.T)),m.Ao(x);break;case b.s.Ga:m.Dc(f.Am(g.T)),m.Ho(x);break;case b.s.Fa:m.Dc(f.vm(g.T)),m.Do(x)}c&&E.u.ca(g.T,g.va)}},ia.prototype.If=function(c){this.cb=c},ia.prototype.Lf=function(c){this.wf=c},ia.prototype.gb=function(){for(var c=E.u.ra(this.va),f=0;f<this.cb.length;f++)for(var g=0;g<this.cb[f].length;g++)if(this.cb[f][g]===c)return this.Wf(f),void this.qe(g);this.Wf(0),this.qe(0)},ia.prototype.Vm=function(){var c=this.Td-1;c<0&&(c=this.cb.length-1),this.Wf(c),this.qe(this.Vf%this.cb[c].length)},ia.prototype.$m=function(){var c=this.Td+1;c>=this.cb.length&&(c=0),this.Wf(c),this.qe(this.Vf%this.cb[c].length)},ia.prototype.Wf=function(c){var f=this;if(!(c<0||c>=this.cb.length)){this.Td=c,Ji.empty();var g=this.cb[this.Td];if(1<g.length)for(c=0;c<g.length;c++)(m=>{var x=f.wf[g[m]],x=n("f94f491f")+f.xe.gj[x[n("e3e497bf0afd")]];(x=$('<div style="border-color:'+x+'"></div>')).click(function(){f.qe(m)}),Ji.append(x)})(c)}},ia.prototype.qe=function(c){c<0||c>=this.cb[this.Td].length||(this.Vf=c,Ji.children().css(n("59a8baefb6a92dff14bc87b986b90bf71b"),n("babf0eacd03cf030b0b6eaa1")),(c=Ji.children(n("e5f354d907ae83b18eb606cc15ca")+(1+c)+n("8d57"))).css(n("99687aaf7669edbfd47c47f94679cbb7db"),c.css(n("782bd5b918a8cc62e33eaebcf6"))),this.xe.Cc(!0))},ia.prototype.Eg=function(){return this.cb[this.Td][this.Vf]},er=ia,nt),b.mm=(Sf=$(n("6f8543d184cd818e13da189dd6cf92800cd5ef862ecd6085")),wf=$(n("f46004f48fa04e23983f5fb82db22d3d773028a325b725")),(tr=G.fa(b.j,function(){b.j.call(this,G.N(n("00b82c37612d68b069b42f757c323eaa60cf3f067a1078847787290e7219709b4193")),!1),Sf.click(function(){E.wd()?(E.h.J(E.h.pa),E.kh(!1,!0),E.h.Lc.Ig(new b.mh)):E.h.ge()}),wf.click(function(){E.h.ge()})})).prototype.C=function(){tr.parent.prototype.C.call(this)},tr.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.A(b.j.Jb,200),R.g(b.j.Mb,50)},tr.prototype.da=function(){},tr),b.zm=(lt=$(n("94c0e454fc0cb68ee888f30ec3128d86ca81cb03c1148f89")),ds=$(n("1d2bade3c5774fb151738ab9ca7944a9436a8299d451")),Af=$(n("047074e46cbc263e783863be73823d167a117b8977")),(ka=G.fa(b.j,function(){b.j.call(this,G.N(n("899365d86886a1a7f06f76ea6569e7bde92476a9737bb1b4c47e46a04038d3b9cb")),!1),ds.click(function(){E.m.v?(E.m.Gl(),E.m.Yh()):E.h.ge()}),Af.click(function(){E.h.ge()}),this.$f=[]})).prototype.C=function(){ka.parent.prototype.C.call(this)},ka.prototype.ib=function(){R.g(b.j.xb,50),R.g(b.j.yb,50),R.g(b.j.Ab,50),R.g(b.j.Cb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Jb,50),R.A(b.j.Mb,200)},ka.prototype.da=function(){R.g(ds,1),R.A(lt,1),lt.text(n("21bc8d7197a616680ca89b7283")),this.co(),this.dq(function(){lt.text(n("f8e7146ece7d07ea32e16c7d"))},1e3),this.dq(function(){lt.text(n("95a8396d2bbaa369afbe317e"))},2e3),this.dq(function(){lt.text(n("a13c0df1172690fd9b2a05f2"))},3e3),this.dq(function(){lt.text(n("6ed11e2440b302a044371627"))},4e3),this.dq(function(){lt.text(n("778657cfc99cc8cb4d80afdc"))},5e3),this.dq(function(){lt.text(n("de418e54d0c390d0d4478657"))},6e3),this.dq(function(){lt.text(n("8ab562b8bc2f6304a0937a8b"))},7e3),this.dq(function(){lt.text(n("253889fd9b2a19f91f2e81ce"))},8e3),this.dq(function(){lt.text(n("176637afa97cacab2d600fbc"))},9e3),this.dq(function(){R.A(ds,300),R.g(lt,1)},1e4)},ka.prototype.dq=function(c,f){c=G.ha(c,f),this.$f.push(c)},ka.prototype.co=function(){for(var c=0;c<this.$f.length;c++)G.em(this.$f[c]);this.$f=[]},ka),b.be=(vc.prototype.jd=function(){},vc.prototype.da=function(){},vc),b.bp=((Q=G.fa(b.be,function(c){b.be.call(this);var f=G.Rb()+n("8f9f")+Math.floor(1e3+8999*Math.random()),g=(this.Pc=$('<div id="'.concat(f,'" class="toaster toaster-coins"><img class="toaster-coins-img" alt="Wormate Coin" src="/images/coin_320.png" /><div class="toaster-coins-val">').concat(c,'</div><div class="toaster-coins-close">').concat(G.N(n("059fe9dcec8225db6c93eaeee56d72b76163e5e6fa6575b87460eab5")),n("681c99f8498fe85b193797f031e085045d7bfcaf15bb9b7cc5"))),this);this.Pc.find(n("ef0e850d1257010385059a0512420e439c5c6e01e6")).click(function(){g.Be()})})).prototype.jd=function(){return this.Pc},Q.prototype.da=function(){},Q),b.Xo=((Q=G.fa(b.be,function(c){b.be.call(this);var f=G.Rb()+n("87e7")+Math.floor(1e3+8999*Math.random()),g=(this.Pc=$('<div id="'.concat(f,'" class="toaster toaster-levelup"><img class="toaster-levelup-img" alt="Wormate Level Up Star" src="/images/level-star.svg" /><div class="toaster-levelup-val">').concat(c,'</div><div class="toaster-levelup-text">').concat(G.N(n("6058ccd701cd88500954cf9518d2cf4c0424c0ed18a0c022143cca")),'</div><div class="toaster-levelup-close">').concat(G.N(n("edb701c4149addc3948b12860d859adf898b0d9ee29d6dc06c98f2dd")),n("2bf91e5d8ad2f7465a921015f2cd8a691ede7b4ad686e40106"))),this);this.Pc.find(n("831af119664b7d1ff911e11b79257df7e369f6ea783b7c")).click(function(){g.Be()})})).prototype.jd=function(){return this.Pc},Q.prototype.da=function(){},Q),b.mh=((Q=G.fa(b.be,function(){b.be.call(this);var c=this,f=G.Rb()+n("7816")+Math.floor(1e3+8999*Math.random());this.Pc=$('<div id="'+f+'" class="toaster toaster-consent-accepted">    <img class="toaster-consent-accepted-logo" src="'+_5+'" alt="Wormate.io logo"/>    <div class="toaster-consent-accepted-container">        <span class="toaster-consent-accepted-text">'+G.N(n("a810849fc985c018d1ec972dc06a97f4ccec8825df6290fca5ff763db0707ee3")).replaceAll(n("4034b0a3"),n("176d2bbcf52eeefe3a6363")).replaceAll("",n("44b0b5542a6bafa90ab8bd5a"))+n("5246272673d55e9a2a0a72486daa")+'        <a class="toaster-consent-accepted-link" href="/privacy-policy">'+G.N(n("c5df291c2cc2e51bacd32aae25adb2f7a1a325a63aa5b5ffb8a02bbe0dbb8dff"))+n("cc383ddcf5935442f11653")+n("6256164543c518dc584b094f5eda034257b172e11f711d3a3f")+'    <div class="toaster-consent-close">'+G.N(n("8e763e45f7db7ac2f74a3d07eec43ddeea4a121fc1dc0ac6c3591c17c3fa0fdecb4f04"))+n("edfb5ce354d0b5c09c90529b3c")+n("e17750574064a17c802c4e2f28")),this.wh=this.Pc.find(n("548be248395aeece2e80fd400e42c7dd1098c55b074acf")),this.wh.hide(),this.wh.click(function(){E.wd()&&E.kh(!0,!0),c.Be()})})).prototype.jd=function(){return this.Pc},Q.prototype.da=function(){var c=this;E.wd()&&!E.Kf()?G.ha(function(){c.wh.fadeIn(300)},2e3):G.ha(function(){c.Be()},0)},Q),b.lo=(Ef=$(n("46f23aea2f297e323cf27780260663042fca7b863405790e2a864f9f4f014101148e")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.md),Ef.click(function(){E.h.Hc.Uk(),E.h.J(E.h.Hc),G.ha(function(){var c=Jt+n("10c46025641034c22aaf320e7d012a87639907104f5054b15890041c");G.vc(c,function(){E.h.J(E.h.pb)},function(){E.h.Hc.ip(),E.B.Mh(function(){E.h.J(E.h.pa)},function(){E.h.J(E.h.pb)},function(f,g){E.h.Hc.pf(f,g)})})},2e3)})})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.ac,500),R.A(b.i.dc,1),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.Ib,50),R.g(b.i.nc,50),R.g(b.i.Wb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.A(b.i.sc,500),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q),b.uo=(Pf=$(n("d3a1e7f532fa2ba5a9a1baaf32f54cb18cfa8bb304ec00b585b19fbb1bd208")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.md),Pf.click(function(){E.h.J(E.h.pa)})})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.ac,500),R.A(b.i.dc,1),R.g(b.i.ec,50),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.Ib,50),R.g(b.i.nc,50),R.g(b.i.Wb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.A(b.i.tc,500)},Q.prototype.da=function(){},Q),G.Fo=function(){return(c={mk:!1}).qk=G.Rb(),c.fe=0,c.Oh=0,c.he=null,c.hq=Il,c.iq=Zr,c.l=null,c.B=null,c.Te=null,c.sk=null,c.h=null,c.u=null,c.m=null,c.C=async function(){c.l=new b.ep,c.l.mf=new b.Bp(c.l),c.B=new b.Ma,await c.B.sa(),c.Te=new b.wl,await c.Te.sa(),c.sk=new b.Em,c.h=new b.Jl,await c.h.sa(),c.u=new b.yn,c.m=new b.zp,c.l.Sk=function(){c.h.J(c.h.bk)},c.l.Vk=function(){c.h.pa.Di(),c.h.J(c.h.D.bf())},c.l.Zk=function(){var f,g;$(n("51a0bce0ac"))[n("34ed136e5f610e")](),c.B.Mh(null,null,null),f=Math.floor(c.l.U.Tb),g=c.l.ug,c.m.v?c.m.Gh(function(){c.el(f,g)}):c.el(f,g)},c.l.hl=function(f){f(c.h.D.wc,c.h.D.Pb)},c.m.hk(function(){var f=c.h.vp();f!=null&&f.va===b.fb.gf&&c.h.J(c.h.pa),c.m.v&&c.m.Pg(),c.wd()&&c.m.v&&!c.m.Kf()?(c.kh(!1,!1),c.h.Lc.Ig(new b.mh)):c.mi(!0)}),c.l.C(),c.h.C(),c.u.C(),c.B.C(),c.h.pa.Ll(),c.h.J(c.h.pa),c.Te.C(function(){c.sk.C(),c.m.C(),c.B.Mh(function(){c.h.pa.xi(),c.h.J(c.h.pa)},function(){c.h.pa.xi(),c.h.J(c.h.pb)},function(f,g){c.h.Hc.pf(f,g),c.h.pa.pf(f,g)}),c.wd()&&!c.Kf()?c.h.Lc.Ig(new b.mh):c.mi(!0)})},c.zl=function(f){var g;c.m.v&&(g=c.m.Yc,f=Jt+n("a6125a7fdace0e989c790734dba751f7f0")+g+n("be6ab217a1bceaa6a339fc7cf89defb5af31f704")+n("76220b4f0cea50f81b2a7355")+encodeURIComponent(f),G.vc(f,function(){},function(){}))},c.gi=function(){c.Bi()},c.Bi=function(f,g){var m,x,S;ua(1),c.l.Rl()&&(c.h.Hc.Uk(),c.h.J(c.h.Hc),m=c.h.pa.Di(),b.I.zb(b.I.ej,m),x=c.h.zf.Ui(),b.I.zb(b.I.Qi,x),x=0,c.he!=null&&(x=c.he[n("1c0e3180529511")][n("669b498d030f59190b")],S=c.he[n("e8da45549e595d")][n("c95624922a57bb75b527")],x=Math.max(0,Math.min(32767,(x+90)/180*32768))<<1|1|Math.max(0,Math.min(65535,(S+180)/360*65536))<<16),c.m.v?(C.fg=g,c.Yl(m,x,f)):(f=c.h.pa.Kd(),b.I.zb(b.I.ij,f),b.I.zb(b.I.lj,c.u.ra(b.s.Z)),c.dm(m,x)))},ki=function(f,g){c.Bi(f,g)},c.Yl=function(f,g,m=null){var x=c.m.Yc,U=c.h.pa.Kd(),S=(C.ik=U,c.u.ra(b.s.Z)),w=c.u.ra(b.s.xa),M=c.u.ra(b.s.Ea),O=c.u.ra(b.s.Ga),k=c.u.ra(b.s.Fa),U=U.substring(0,24);U=(U=(U=(U=(U=(U=(U+="\uFFFE")+String.fromCharCode(S))+String.fromCharCode(k))+String.fromCharCode(w))+String.fromCharCode(M))+String.fromCharCode(O))+String.fromCharCode(L["1y"]),C.ni(0),C.vj(0),f=Jt+n("1a0eee6b6eda8294107593404fd3cd8b6c")+x+n("1d2bad96d26642a651")+n("cd9b7cc636a3bee198a933ed7cf99f")+encodeURIComponent(f)+n("8abe7eabe9777512d6")+g+n("e09410058a5c45dc86d8475ec90e6a")+encodeURIComponent(U)+n("984ce8ddef86b701e915c7c0e0")+encodeURIComponent(S)+n("499ff94aa8c72af318a6f6b791")+encodeURIComponent(w)+n("d96f693a3021aa64891b07315612")+encodeURIComponent(M)+n("9cc8ec59c71d8380d790953ecc5cd9bf")+encodeURIComponent(O)+n("7d4bcd066913f77de153347c")+encodeURIComponent(k),G.vc(f,function(){c.h.J(c.h.pb)},function(X){X[n("043629b36d")]===1460?c.h.J(c.h.Bg):X[n("e1310c7000")]!==1200?c.h.J(c.h.pb):(C.Fh=!0,C.Re=m||X[n("c46663e5befc7844b96f62")],c.l.jm(C.Re,x))})},c.dm=function(f,g){var m=c.h.pa.Kd(),x=c.u.ra(b.s.Z);f=Jt+n("b8acc84dcc789caaf2d77566ad7123a58e")+n("6fc7048780d0")+n("43d17770b48ca8483f")+n("a13710924277cabde4754fb9082deb")+encodeURIComponent(f)+n("34a044315f615fb878")+g+n("e17751220b3f8473873b0679486dab")+encodeURIComponent(m)+n("52462653258c7187130f395e1a")+encodeURIComponent(x),G.vc(f,function(){c.h.J(c.h.pb)},function(S){S[n("f3c79a8212")]===1460?c.h.J(c.h.Bg):S[n("b5c5580c5c")]!==1200?c.h.J(c.h.pb):(S=S[n("1250b15760c2aaf66f59b0")],c.l.pm(S,m,x))})},c.el=function(f,g){var m=c.h.pa.Kd();c.h.D.Oo(f,g,m),c.h.J(c.h.D.Kh())},c.yl=function(){var f;return c.Cg()&&(f=parseInt(b.I.cc(b.I.lj)))!=null&&c.u.zc(f,b.s.Z)?f:c.u.pk()},c.Wl=function(){b.I.zb(b.I.sj,n("be3bf224a7"))},c.Cg=function(){return b.I.cc(b.I.sj)===n("c8ed786ea9")},c.mi=function(f){f!==c.mk&&(c.mk=f,n("e614c717999ec2898b1b"),n("3cea1a7f3252edfd37f0e863"))},c.kh=function(f,g){b.I.zb(b.I.Ni,n(f?"e5a215ed0c":"2c1b0f934364")),g&&c.zl(f),c.mi(f)},c.Kf=function(){return b.I.cc(b.I.Ni)===n("a80d988ec9")},c.wd=function(){try{return!!b.oc[n("520a672c06ae76ac1f2a")]||c.he!=null&&!!x5.pn(c.he[n("c95924933f5abc")][n("7ae75df9177b3575e7")],c.he[n("471b26d5b918be")][n("a17e4cba427fd3adcd7f")])}catch{return!0}},c.Ya=function(){c.fe=G.Rb(),c.Oh=c.fe-c.qk,c.l.Qe(c.fe,c.Oh),c.h.Qe(c.fe,c.Oh),c.qk=c.fe},c.na=function(){c.h.na()},c;var c},b.ep=function(){n("ebe99ebb4a92419187d69c8503");var c={Nm:30,fd:new Float32Array(100),oj:0,Ge:0,Je:0,hd:0,Od:0,mn:0,La:0,Da:null,Ej:300,Vk:function(){},Zk:function(){},hl:function(){},Sk:function(){},K:new b.ce,mf:null,U:null,Wc:{},tb:{},wk:12.5,Md:40,Pe:1,Hj:-1,Ij:1,pi:1,Nj:-1,Qj:-1,Sj:1,Xj:1,$j:-1,ug:500,kk:500};return c.K.Rc=500,c.U=new b.Uf(c.K),c.C=function(){c.U.Wj(E.h.D.F),setInterval(function(){var f;L["1y"]!=0&&C.ua&&C.ua.readyState===WebSocket.OPEN&&1e3<(f=performance.now())-C.qj&&(C.qj=f,C.ua.send(Gi(JSON.stringify({[n("9def")]:1,[n("f3c6")]:c.U.ia[0],[n("2d7d")]:c.U.ia[1],[n("1ba8")]:c.U.K.Rc})))),c.hl(function(g,m){c.so(g,m)})},10)},c.kn=function(f,g,m,x){c.Hj=f,c.Ij=g,c.pi=m,c.Nj=x,c.dk()},c.Bo=function(f){c.Pe=f,c.dk()},c.dk=function(){c.Qj=c.Hj-c.Pe,c.Sj=c.Ij+c.Pe,c.Xj=c.pi-c.Pe,c.$j=c.Nj+c.Pe},c.Qe=function(f,g){c.Je+=g,c.Ge-=.2*c.oj*g,c.mf.Fl(),c.Da==null||c.La!==2&&c.La!==3||(c.Go(f,g),c.Md=4+c.wk*c.U.wb),f=1e3/Math.max(1,g);for(var m=g=0;m<c.fd.length-1;m++)g+=c.fd[m],c.fd[m]=c.fd[m+1];c.fd[c.fd.length-1]=f,c.Nm=(g+f)/c.fd.length},c.mg=function(f,g){return c.Qj<f&&f<c.Sj&&c.Xj<g&&g<c.$j},c.Go=function(f,g){var m,x,S=(c.Je+c.Ge-c.hd)/(c.Od-c.hd),w=(c.U.Jf(f,g),c.U.Of(f,g,S,c.mg),0);for(m in c.tb){var M=c.tb[m];M.Jf(f,g),M.Of(f,g,S,c.mg),M.qb&&M.wb>w&&(w=M.wb),M.nd||!(M.Wa<.005)&&M.qb||(M.Ue(),delete c.tb[M.S.T])}for(x in c.Bo(3*w),c.Wc)S=c.Wc[x],S.Jf(f,g),S.Of(f,g,c.mg),S.ei&&(S.Wa<.005||!c.mg(S.Hg,S.Jg))&&(S.Ue(),delete c.Wc[S.S.T])},c.xn=function(f,g){c.La===1&&(c.La=2,c.Vk());var m=E.fe;(c.mn=f)===0?(c.hd=m-95,c.Od=m,c.Je=c.hd,c.Ge=0):(c.hd=c.Od,c.Od+=g),c.oj=(c.Je+c.Ge-c.hd)/(c.Od-c.hd)},c.Gp=function(){var f;c.La!==1&&c.La!==2||(c.La=3,f=c.Da,G.ha(function(){c.La===3&&(c.La=0),f!=null&&f===c.Da&&(c.Da[n("a0128e9cd790")](),c.Da=null)},5e3),c.Zk())},c.Rl=function(){return c.La=1,c.mf.ti(),c.Wc={},c.tb={},c.U.ui(),c.Da!=null&&(c.Da[n("30621eec47e0")](),c.Da=null),!0},c.Eh=function(){c.Da=null,c.mf.ti(),c.La!==3&&c.Sk(),c.La=0},c.jm=function(f,g){c.rk(f,function(){var m=Math.min(2048,g.length),x=new b.Qh(6+2*m),S=new b.di(new b.sg(x));S.ne(129),S.oe(2800),S.ne(1),S.oe(m);for(var w=0;w<m;w++)S.oe(g.charCodeAt(w));c.Lh(x)})},c.pm=function(f,g,m){c.rk(f,function(){var x=Math.min(32,g.length),S=new b.Qh(7+2*x),w=new b.di(new b.sg(S));w.ne(129),w.oe(2800),w.ne(0),w.oe(m),w.ne(x);for(var M=0;M<x;M++)w.oe(g.charCodeAt(M));c.Lh(S)})},c.Lh=function(f){try{c.Da!=null&&c.Da.readyState===WebSocket.OPEN&&c.Da.send(f)}catch{c.Eh()}},c.so=function(f,g){f=255&((g?128:0)|G.Im(f)/6.283185307179586*128&127),c.Ej!==f&&(g=new b.Qh(1),new b.di(new b.sg(g)).ne(f),c.Lh(g),c.Ej=f)},c.rk=function(f,g){C.ua=new WebSocket(C.nn+Gi(JSON.stringify({[n("9e4e")]:f,[n("883b")]:C.Xd,[n("a654")]:C.ik,[n("69be")]:L["1y"],[n("2d7b")]:2,[n("9641")]:L["1ad"]}))),C.ua.Hh=!0,C.ua[n("766856660aee52")]=function(){this.Ch=setInterval(()=>{this.send(n("74f5"))},1e4)},C.ua[n("69b585ff81b11cc5")]=function(){this.Ch&&(clearInterval(this.Ch),this.Ch=0),this===C.ua&&(C.ua=null)},C.ua[n("ff5f6f1fe647f617605d")]=function(S){try{var w=JSON.parse(n(S.data)),M=performance.now();if(100<M-C.Fk&&(C.Fk=M,C.ua.Hh=!C.ua.Hh),w[n("2090")]===0&&(ei.dg(w[n("6b7e")]),ti.dg(w[n("edbd")])),w[n("1ece")]===1){let Me=w.b;Me==3333&&0<C.bd.length&&(Me=C.bd[Math.floor(Math.random()*C.bd.length)]),C.bd.includes(Me)&&E.l.U.Ia.aj(Me)}if(w[n("8676")]===2&&De.ad(),w[n("61b3")]===3){var O=w[n("7cae")];if(O){C.al=O;var k=w[n("8fa2")];if(k){try{delete k[C.al]}catch{}for(var U in C.kc){var X,V,Y,W=k[U],ce=C.kc[U];W?(X=W[n("a818")],V=W[n("7caf")],Y=W[n("df73")],W[n("0c38")]?(ce.clear(),ce.circle(0,0,.06*E.h.D.F.W.wa),ce.stroke({width:2,color:0}),ce.fill(C.ua.Hh?16711680:255)):(ce.clear(),ce.circle(0,0,.06*E.h.D.F.W.wa),ce.stroke({width:2,color:0}),ce.fill(ce.Qo)),ce.position.x=X/Y*E.h.D.F.W.wa,ce.position.y=V/Y*E.h.D.F.W.wa):(E.h.D.F.W.removeChild(ce),delete C.kc[U])}for(var oe in k){var Re,Lt,ot,ue,ge=k[oe];C.kc[oe]||(Re=ge[n("c799")],Lt=ge[n("b8eb")],ot=ge[n("a496")],C.kc[oe]=new We,(ue=C.kc[oe])[n("7833f3a518a8c6")]=1,ue[n("6cdcc24f1820")]=.9,ue.clear(),ue.circle(0,0,.06*E.h.D.F.W.wa),ue.stroke({width:2,color:0}),ue.fill(ge[n("8512")]),ue.Qo=ge[n("7aef")],ue.position.x=Re/ot*E.h.D.F.W.wa,ue.position.y=Lt/ot*E.h.D.F.W.wa,E.h.D.F.W.addChild(ue))}}}}}catch{}};var m=c.Da=new WebSocket(f);let x=C.ua;m[n("c95822922c4cb654a83236")]=n("d769ab383a753f3bb9768420"),m[n("61bd8dfb95b309")]=function(){for(var S in C.ag=!0,C.kc)E.h.D.F.W.removeChild(C.kc[S]),delete C.kc[S];c.Da===m&&g()},m[n("07576719e753fe1b")]=function(){new Date>C.Fj&&location.reload(),C.ag=!1,x&&x.close(),c.Da===m&&c.Eh()},m[n("241a08925a8b0509")]=function(){C.ag=!1,c.Da===m&&c.Eh()},m[n("08b62436692e3dbe7784")]=function(S){c.Da===m&&c.mf.ul(S.data)}},c},window.addEventListener(n("d9293462292ba7648c370d61"),function(c){return c.preventDefault(),c.stopPropagation(),!1}),G.Wi(n("b583052e1c98fd0dcdc74c5e26ddac13a9d3691b26d7ee4e8bd43ca56384b2f4bce364c93aa6b2e9b3ba71fa12"),null,function(){window.gapi[n("e0dd4d5280")](n("c2b2f1a1ae65"),function(){var c=window.gapi[n("ce3ee515bad1")],f=c[n("dbe5b3a72b")],g={};g[n("5200780c33896cb6330f")]=n("426a316c72e53de873693d6e76f2618b235127096f8228863253700a3add49920c11480704914a950b09181c5c991e6002f347ab1168576e16ee49fe1b7d237eece721fbf2392b76e7"),vt=f.call(c,g)})}),G.Wi(n("28dc583d094f289e406801ad53ea1960546c54e853e05b3d067bf1b676d3f67b296decf43ef0a07523")),await(E=G.Fo()).C(),function c(){requestAnimationFrame(c),E.Ya()}(),xc=$(n("4073edf73d")),Ta=$(n("ce7aa252a197e680a204f044b884e4")),Rf=$(n("c8bc3828a17c7cf4a5d13f4bb14472c2aa")),Mf=$(n("84f0f464e538b8b0f9ade339ff0ea686e6")),Of(),$(b.oc)[n("97bafc7972b678")](Of)});})();
